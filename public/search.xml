<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>è®©ä¸€åˆ‡è¢«ä¸­æ–­çš„é‡æ–°å¯åŠ¨</title>
    <url>/blog/20200705/Make-everything-interrupted-reboot/</url>
    <content><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/Fatezhang/FigureCloud@master/uPic/cxlyp3.jpg" alt="cxlyp3"></p>
<a id="more"></a>
<p>2020å¹´å› ä¸ºç–«æƒ…åŸå› å¯¼è‡´è‡ªå·±æµ‘æµ‘å™©å™©åœ°åº¦è¿‡äº†åŠå¹´æ—¶é—´ï¼Œåšå®¢ä¸€ç›´éƒ½æ²¡æœ‰æ›´æ–°ï¼Œç”šè‡³éƒ½ä¸çŸ¥é“è‡ªå·±æ¯å¤©åœ¨å¹²ä»€ä¹ˆã€‚ç›¸æ¯”äº 2019 å¹´æ¯å¤©éƒ½æ‹ä¸€ç‚¹è§†é¢‘è®°å½•ä¸€ä¸‹è‡ªå·±å¹²äº†äº›ä»€ä¹ˆä¹‹å¤–ï¼ˆå…¶å®æ¯å¤©ä¹Ÿæ˜¯ä¸€æ ·æ¯ç‡¥æ— èŠï¼‰ï¼Œ2020 å¹´è¿™å¤§åŠå¹´å¥½åƒæ˜¯çªç„¶å°±æ¶ˆå¤±æ‰äº†ã€‚</p>
<p>æƒ³è¦åšçš„äº‹æƒ…è¿˜æœ‰å¾ˆå¤šï¼Œæ‰€ä»¥ä»Šå¤©æ‰“ç®—æ•´ç†ä¸€ä¸‹æ€ç»ªï¼Œä¸‰çœä¸€ä¸‹å¾èº«ğŸ§ã€‚åœ¨ æ–°å…¬å¸å·¥ä½œ 8 ä¸ªæœˆä»¥æ¥ï¼Œå¥½åƒå¤±å»äº†æ–—å¿—ï¼Œåœ¨è¿™é‡Œæ¯å¤©åšç€ä¸€äº›ç®€å•çš„è²Œä¼¼æ— æ³•æå‡è‡ªå·±çš„å·¥ä½œï¼Œå…¶å®æœ‰ä¸€äº›å€¦äº†ã€‚å“ä¸è¿‡æå‡ä¸æå‡éƒ½æ˜¯çœ‹è‡ªå·±ï¼Œä¹Ÿè®¸æ˜¯æˆ‘ç°åœ¨å¤ªæµ®èºäº†ã€‚</p>
<p>ä»æ­å·å›æ¥ä¹‹å‰æƒ³ç€æ¯å¤©å·¥ä½œè½»æ¾äº†å¯ä»¥åšä¸€äº›å‰¯ä¸šæˆ–è€…å…¶ä»–ï¼Œæ¯”å¦‚è§†é¢‘å‰ªè¾‘ï¼Œç»§ç»­å­¦ä¹  <code>POPPIN</code> ä¹‹ç±»çš„äº‹æƒ…ï¼Œä½†æ˜¯ç°å®æ˜¯æ¯å¤©å›åˆ°å®¶å°±èººå°¸ã€‚è¥¿å®‰çš„å¤å¤©æ¯å¤©8ç‚¹æ‰æ—¥è½ï¼ŒçœŸçš„æ„Ÿè§‰å¥½æµªè´¹æ—¶é—´å•Šï¼Œå¤§å¥½çš„å…‰é˜´éƒ½è¢«è‡ªå·±æŒ¥éœæ‰äº†ã€‚20 å¹´çš„ååŠå¹´ç«‹ä¸€äº›FğŸš©LğŸ‡¨ğŸ‡³AğŸ³ï¸â€ğŸŒˆGå§ï¼Œä¾‹å¦‚ï¼Œå¤šå‰ªè¾‘ä¸€äº›æœ‰è¶£çš„ VLOGï¼ˆè¿™ä¸ªéœ€è¦çµæ„Ÿï¼‰ï¼Œå­˜ä¸€ä¸‹é’±ï¼ˆè¿˜å¥½è‚¡ç¥¨å·²ç»å›æœ¬äº†ï¼‰ï¼Œå¤šå»è¥¿å®‰å‘¨è¾¹èµ°ä¸€èµ°ï¼ˆæœ‰é©¾ç…§å°±æ–¹ä¾¿äº†ï¼‰ï¼Œè°ˆä¸ªå¥³æœ‹å‹ï¼ˆè¿™ä¸ªå¯¹æˆ‘æ¥è¯´å…¶å®æ˜¯æœ€éš¾çš„ï¼Œå› ä¸ºæˆ‘å‘ç°è‡ªå·±å…¶å®æ˜¯ä¸€ä¸ªå¾ˆé—·çš„äººï¼Œæœ‰æ—¶å€™å°±æƒ³ä¸€ä¸ªäººå‘†ç€ä¸æƒ³å’Œåˆ«äººè¯´è¯ï¼Œå’Œåˆ«äººç›¸å¤„çœŸçš„å¥½ç´¯ï¼‰ï¼Œè¿˜æœ‰å¥èº«ï¼ˆè‡³å°‘å¢é‡åˆ° 125 æ–¤å§ï¼‰å…ˆç»ƒå‡ºæ¥ä¸€ä¸ªå¥½çœ‹çš„èº«ä½“ã€‚</p>
<h3 id="å‰ªè¾‘"><a href="#å‰ªè¾‘" class="headerlink" title="å‰ªè¾‘"></a>å‰ªè¾‘</h3><p>2019 å¹´æ¯å¤©éƒ½æœ‰æ‹ä¸€æ®µå°è§†é¢‘ï¼Œ20 å¹´ååŠå¹´ä¸æ‰“ç®—è¿™æ ·æ‹äº†ï¼Œå¾ˆè€—è´¹ç²¾åŠ›ã€‚ä¹Ÿè®¸åœ¨é‡åˆ°ä¸€äº›å¥½ç©çš„ä¸œè¥¿çš„æ—¶å€™å¯ä»¥ä¸ç”¨ç…§ç‰‡è®°å½•ï¼Œè€Œç”¨ä¸€æ®µç®€çŸ­çš„å°è§†é¢‘è®°å½•ä¸‹æ¥ï¼ˆè¯´åˆ°è¿™é‡Œæƒ³èµ·æ¥ iPhone çš„å®å†µæ‹ç…§åŠŸèƒ½ï¼Œé•¿æŒ‰å¯ä»¥æ’­æ”¾æ‹æ‘„å½“æ—¶çš„è§†é¢‘ç‰‡æ®µï¼ŒçœŸçš„éå¸¸å¥½ç”¨ï¼‰ã€‚</p>
<p>ä¹Ÿè®¸å¯ä»¥èŠ±ç‚¹æ—¶é—´å­¦ä¹ ä¸€ä¸‹ç¨å¾®é«˜çº§ä¸€ç‚¹çš„å‰ªè¾‘æŠ€å·§ï¼Œemmmâ€¦çœ‹å¤©åˆ†äº†å§ï¼Œéšç¼˜å­¦ä¹ ã€‚</p>
<h3 id="å­˜é’±"><a href="#å­˜é’±" class="headerlink" title="å­˜é’±"></a>å­˜é’±</h3><p>è¿‡å¹´çš„æ—¶å€™æ•°äº†æ•°è‡ªå·±çš„å­˜æ¬¾å‘ç°ä¹Ÿæœ‰åä¸‡å‘¢ï¼Œç»“æœ 20 å¹´å¤§åŠå¹´è¿‡å»äº†è¿˜æ˜¯è¿™ä¸ªæ•°ç›®ï¼Œä¸çŸ¥é“è‡ªå·±è¿™å¤§åŠå¹´é’±éƒ½å»å“ªå„¿äº†ã€‚ä¸ç§‘å­¦å•Šï¼Œè‚¡ç¥¨ä¹Ÿå›æœ¬äº†å‘¢ï¼Œåœ¨æœ‹å‹é‚£é‡Œæ”¾äº† 5 ä¸‡ï¼Œè‡ªå·±è‚¡ç¥¨ä¸­ç•™äº† 6 ä¸‡ï¼Œæœ€è¿‘æ„Ÿè§‰ç‰›å¸‚å¿«æ¥äº†å‘¢ï¼Œå¸Œæœ›èƒ½å¤Ÿè®©æˆ‘èµšä¸€äº›å§ã€‚æœ‰ä¸ªåœ¨æ­å·çš„æœ‹å‹æœ€è¿‘é‡åˆ°ä¸€äº›æ£˜æ‰‹çš„äº‹æƒ…ï¼Œéœ€è¦æ‰“å®˜å¸ï¼Œå¯èƒ½è¿˜å¾—èµ”åå‡ ä¸‡ã€‚å“ï¼Œæ—©å°±åŠè¿‡ä»–è„šè¸å®åœ°çš„èµšé’±ï¼Œä»–ä»æ¥æ²¡æœ‰å¬è¿›å»è¿‡æˆ‘çš„ä¸€å¥è¯ï¼Œå…¶å®æˆ‘æ—©å°±å·²ç»éå¸¸å¤±æœ›äº†ã€‚</p>
<p>ä»¥åæˆ‘ç®¡å¥½è‡ªå·±å°±è¡Œäº†ï¼Œä¸å»ç®¡åˆ«äººå¥½ä¸å¥½ã€‚</p>
<h3 id="æˆ·å¤–"><a href="#æˆ·å¤–" class="headerlink" title="æˆ·å¤–"></a>æˆ·å¤–</h3><p>å›åˆ°è¥¿å®‰ä»¥åå¥½åƒå°±å‰æ®µæ—¶é—´å»äº†ç‰›èƒŒæ¢ã€‚æœ¬æ¥åœ¨äº”ä¸€çš„æ—¶å€™å’Œæˆä»–ä»¬å»å¤ªç™½å±±ï¼Œå› ä¸ºä¸€åœºå©šç¤¼æ²¡æœ‰å»æˆï¼Œä¸‹ä¸€ä¸ªç›®çš„åœ°åº”è¯¥å°±æ˜¯å¤ªç™½å±±äº†å§ï¼Œå’ŒåŒäº‹ä¸€èµ·å»ã€‚ä¸è¿‡ç›®å‰ç°é˜¶æ®µå¯¹æˆ‘æœ€é‡è¦çš„è¿˜æ˜¯å…ˆå°½å¿«æ‹¿ä¸€ä¸‹é©¾ç…§ã€‚æœ‰äº†é©¾ç…§ä¼šå¼€è½¦ä»¥åï¼Œç§¦å²­æˆ‘èƒ½æ¯å¤©ä¸‹ç­å»ä¸€è¶Ÿå“ˆå“ˆã€‚</p>
<p>å“¦å¯¹ï¼Œæˆ‘åº”è¯¥æŠŠå»ä¸€äº› livehouseï¼Œçœ‹ç³–è’œé“ºå­è„±å£ç§€ã€çœ‹ç”µå½±ç­‰ç­‰è¿™ç§æ´»åŠ¨ä¹Ÿç®—åœ¨æˆ·å¤–è¿™é‡Œï¼Œç–«æƒ…åŸå› æœ‰äº›ä¸€ç›´éƒ½çœ‹ä¸æˆï¼Œå¥½æ°”å•Šï¼</p>
<h3 id="å¥èº«"><a href="#å¥èº«" class="headerlink" title="å¥èº«"></a>å¥èº«</h3><p>å‰æ®µæ—¶é—´ç§°äº†ä¸‹ä½“é‡ï¼Œ<em>57.8KG</em>ï¼Œ å¥½æ°”å•Šï¼Œå¯èƒ½æˆ‘çš„é¥®é£Ÿä¹ æƒ¯ä¹Ÿä¸å¤ªå¥½ã€‚æˆ‘ä»¬ç»„æœ‰ä¸‰ä¸ªåŒäº‹éƒ½æ˜¯å¥èº«å¤§ç¥ï¼ŒçŒ›çš„ä¸è¡Œã€‚ä¹Ÿè®¸æˆ‘ä¹Ÿéœ€è¦åŠä¸€ä¸ªå¥èº«å¡ï¼Ÿè·Ÿç€å¤§ä½¬ä»¬æŠŠæˆ‘è¿™æ ¸å¿ƒåŠ›é‡ï¼Œæ‰‹è‡‚èƒŒèƒ¸è‚Œç»ƒä¸€ç»ƒå“ˆå“ˆã€‚ğŸŒš çŸ­æœŸç›®æ ‡ 125 æ–¤ï¼</p>
<p>2020 å¹´ä¸‹åŠå¹´å°±æš‚æ—¶ç«‹è¿™ä¹ˆå†™ FALG å§ï¼Œå¸Œæœ›éƒ½èƒ½å¤Ÿå®Œæˆï¼</p>
]]></content>
      <categories>
        <category>ç¨‹åºäººç”Ÿ</category>
      </categories>
      <tags>
        <tag>ç¨‹åºäººç”Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>Java å¹¶å‘ç¼–ç¨‹çš„ä¸€äº›æ€»ç»“</title>
    <url>/blog/20200129/Java-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<blockquote>
<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3></blockquote>
<p>å…³äºJAVA å¹¶å‘ç¼–ç¨‹çš„å­¦ä¹ ï¼Œæˆ‘å·²é›¶æ•£çš„å¹¶ä¸ç³»ç»Ÿåœ°ç§¯ç´¯äº†ä¸€äº›å­¦ä¹ åšå®¢ï¼Œå¦‚ä¸‹ï¼š</p>
<p><a href="/blog/20190517/ç¼–å†™ä¸€ä¸ªç®€æ˜“çš„å¯é‡å…¥é”-ä¸€/">å¹¶å‘ç¼–ç¨‹å­¦ä¹ (ä¸€)ï¼šç¼–å†™ä¸€ä¸ªç®€æ˜“çš„å¯é‡å…¥é”</a></p>
<p><a href="/blog/20190525/å¹¶å‘ç¼–ç¨‹å­¦ä¹ -äºŒ-ï¼šä½¿ç”¨AQSç¼–å†™å¯é‡å…¥é”/">å¹¶å‘ç¼–ç¨‹å­¦ä¹ (äºŒ)ï¼šä½¿ç”¨AQSç¼–å†™å¯é‡å…¥é”</a></p>
<p><a href="/blog/20190602/å¹¶å‘ç¼–ç¨‹å­¦ä¹ -ä¸‰-ï¼šCountDownLatchçš„å®ç°åŸç†åŠä½¿ç”¨/">å¹¶å‘ç¼–ç¨‹å­¦ä¹ (ä¸‰)ï¼šCountDownLatchçš„å®ç°åŸç†åŠä½¿ç”¨</a></p>
<p><a href="/blog/20190617/å¹¶å‘ç¼–ç¨‹å­¦ä¹ -å››-ï¼šç†è§£ThreadPoolExecutorçº¿ç¨‹æ± /">å¹¶å‘ç¼–ç¨‹å­¦ä¹ (å››)ï¼šç†è§£ThreadPoolExecutorçº¿ç¨‹æ± </a></p>
<p><a href="/blog/20190623/å¹¶å‘ç¼–ç¨‹å­¦ä¹ -äº”-ï¼šSemaphoreæºç å­¦ä¹ åŠä½¿ç”¨æ¡ˆä¾‹/">å¹¶å‘ç¼–ç¨‹å­¦ä¹ (äº”)ï¼šSemaphoreæºç å­¦ä¹ åŠä½¿ç”¨æ¡ˆä¾‹</a></p>
<p><a href="/blog/20190701/å¹¶å‘ç¼–ç¨‹å­¦ä¹ -å…­-ï¼šExchangerçš„å­¦ä¹ åŠä½¿ç”¨åœºæ™¯/">å¹¶å‘ç¼–ç¨‹å­¦ä¹ (å…­)ï¼šExchangerçš„å­¦ä¹ åŠä½¿ç”¨åœºæ™¯</a></p>
<p><a href="/blog/20190814/å¹¶å‘ç¼–ç¨‹å­¦ä¹ -ä¸ƒ-ï¼šFork-Joinæ¡†æ¶åŸç†åŠdemo/">å¹¶å‘ç¼–ç¨‹å­¦ä¹ (ä¸ƒ)ï¼šFork/Joinæ¡†æ¶åŸç†åŠdemo</a></p>
<p><a href="/blog/20190716/Synchronizedä½¿ç”¨æ—¶ä¸€ä¸ªä¸èµ·çœ¼çš„æ³¨æ„ç‚¹/">Synchronizedä½¿ç”¨æ—¶ä¸€ä¸ªä¸èµ·çœ¼çš„æ³¨æ„ç‚¹</a></p>
<p>è¿™ç¯‡åšå®¢ï¼Œåˆ¶ä½œäº†ä¸€ä¸ª Slideï¼Œæ¥é’ˆå¯¹ Java å¹¶å‘ç¼–ç¨‹åšä¸€äº›å°å°çš„æ€»ç»“ï¼š</p>
<p><a href="/ppt/java-concurrent-knowledge.html">&gt; ç‚¹å‡»æŸ¥çœ‹ Slide</a></p>
]]></content>
      <categories>
        <category>JavaåŸºç¡€</category>
        <category>å¹¶å‘ç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>JavaåŸºç¡€</tag>
        <tag>å¹¶å‘ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>How to Use Junit5 to Test You Java Application Elegantly</title>
    <url>/blog/20200115/How-to-use-Junit5-to-test-you-java-application-elegantly/</url>
    <content><![CDATA[<h1 align="center">Junit5 çš„ä¸€äº›å®é™…å¼€å‘ä¸­å¸¸ç”¨çš„åŠŸèƒ½ã€ TDD å‘ ã€‘</h1>

<p><img src="/blog/20200115/How-to-use-Junit5-to-test-you-java-application-elegantly/junit5.png" alt="Junit"></p>
<a id="more"></a>
<blockquote>
<p>è¿™ç¯‡åšå®¢æœ¬æ¥åº”è¯¥å†™äºé¼ å¹´è¿‡å¹´ä¹‹å‰ï¼Œè°æƒ³åˆ°çŠ¯äº†ä¸ªæ‡’ï¼Œç°åœ¨æ€€ç€æ²‰é‡çš„å¿ƒæƒ…å†™ä¸‹è¿™ç¯‡åšå®¢~</p>
<p>å› ä¸ºä¸­å›½ç°åœ¨æ­£åœ¨å—ç€æ–°å‹å† çŠ¶ç—…æ¯’ç–«æƒ…çš„å±å®³ï¼Œå¤§è¿‡å¹´çš„é—¨éƒ½å‡ºä¸å»ï¼Œéƒ½èº²åœ¨å®¶é‡Œç”Ÿæ€•è¢«æ„ŸæŸ“ã€‚æ— èŠçš„æˆ‘åªèƒ½å­¦ä¹ å­¦ä¹ æ¥æ‰“å‘ä¸€ä¸‹æ¯ç‡¥çš„å‡æœŸç”Ÿæ´»å“ˆå“ˆ~</p>
</blockquote>
<h3 id="Junit5"><a href="#Junit5" class="headerlink" title="Junit5"></a>Junit5</h3><p>è¯´åˆ° JUNIT5 å¯èƒ½å¾ˆå¤šäººéƒ½ä¸é™Œç”Ÿï¼Œå°±æ˜¯ä¸€ä¸ªæµ‹è¯•æ¡†æ¶è€Œå·²ã€‚ä½†æ˜¯ç›¸ä¿¡å¤§éƒ¨åˆ†çš„ç¨‹åºå‘˜éƒ½æ²¡æœ‰ç”¨è¿‡ï¼Œæ„Ÿè§‰å›½å†…å¥½å¤šå…¬å¸éƒ½æ²¡æœ‰å†™æµ‹è¯•çš„ä¹ æƒ¯ï¼Œä¹Ÿè®¸æ˜¯äº§å“å‚¬éœ€æ±‚å‚¬çš„å¤ªç´§Îµ=(Â´Î¿ï½€*)))ã€‚æˆ‘å°±ä¸åœ¨è¿™é‡Œä»‹ç» Junit5 äº†ï¼Œæ²¡æœ‰å‰ç½®çŸ¥è¯†çš„è¯éœ€è¦çœ‹ä¸€ä¸‹ï¼š<a href="https://junit.org/junit5/" target="_blank" rel="noopener">Junit5</a>ï¼Œæˆ‘åªåœ¨è¿™ç¯‡åšå®¢ä»‹ç»ä¸€ä¸‹æˆ‘åœ¨å·¥ä½œä¸­æ˜¯å¦‚ä½•ä½¿ç”¨ Junit5 çš„ã€‚</p>
<h3 id="åŸºæœ¬çš„æµ‹è¯•ä»£ç "><a href="#åŸºæœ¬çš„æµ‹è¯•ä»£ç " class="headerlink" title="åŸºæœ¬çš„æµ‹è¯•ä»£ç "></a>åŸºæœ¬çš„æµ‹è¯•ä»£ç </h3><p>é¦–å…ˆ gradleéœ€è¦å¼•å…¥ Junit5 ä»¥åŠå…¶ä»–ç›¸å…³çš„ä¾èµ–ï¼š</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">testImplementation <span class="string">'org.mockito:mockito-core:2.24.0'</span></span><br><span class="line">testImplementation <span class="string">'org.junit.jupiter:junit-jupiter-api:5.2.0'</span></span><br><span class="line">testImplementation <span class="string">'org.junit.jupiter:junit-jupiter-params:5.2.0'</span></span><br><span class="line">testRuntimeOnly <span class="string">'org.junit.jupiter:junit-jupiter-engine:5.2.0'</span></span><br><span class="line">testImplementation <span class="string">"org.testcontainers:junit-jupiter:1.12.3"</span></span><br><span class="line">testImplementation <span class="string">"org.testcontainers:postgresql:1.12.3"</span></span><br><span class="line">testImplementation <span class="string">'org.mockito:mockito-junit-jupiter:3.1.0'</span></span><br><span class="line">testImplementation <span class="string">'org.hamcrest:hamcrest:2.2'</span></span><br></pre></td></tr></table></figure>
<p>ç„¶åç¼–å†™ä¸€ä¸ªç®€å•çš„æµ‹è¯•ç”¨ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">shouldReturnObjectsGivenValidIdWhenGetObjects</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  when(objectService.findApplications(OBJECT_ID)).thenReturn(mockObjects);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> responseEntity = objectsController.getObjects(<span class="keyword">null</span>);</span><br><span class="line">  </span><br><span class="line">  assertThat(HttpStatus.OK).isEqualTo(responseEntity.getStatusCode());</span><br><span class="line">  assertThat(responseEntity.getBody()).isEqualTo(mockGetObjectsResponse);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯´æ˜ä¸€ä¸‹ï¼Œä»¥ä¸Šæµ‹è¯•ç”¨ä¾‹çš„ç¼–å†™éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ol>
<li>æ–¹æ³•å‘½å<br>ä¸€èˆ¬çš„å†™æµ‹è¯•çš„æ—¶å€™ï¼Œæ–¹æ³•çš„å‘½åè¦æ±‚è§£é‡Šæµ‹è¯•çš„åŠŸèƒ½ï¼Œéœ€è¦åŒ…å« should/given/when æ¡ä»¶ã€‚å¦‚ä»¥ä¸Šæ–¹æ³•çš„å‘½å<code>shouldReturnObjectsGivenValidIdWhenGetObjects</code>æ˜¯æŒ‡å½“è°ƒç”¨getObjects()çš„æ—¶å€™ï¼Œç»™å®šä¸€ä¸ªåˆæ³•çš„ IDï¼Œèƒ½å¤Ÿè¿”å›ä¸€ç»„ Objectsã€‚</li>
<li>æ–¹æ³•çš„æ¡ä»¶ã€æ‰§è¡Œã€ä»¥åŠå¯¹äºç»“æœçš„éªŒè¯çš„ä»£ç æ¢è¡Œéš”å¼€</li>
<li>ä½¿ç”¨ assertThat()éªŒè¯ç»“æœï¼š<br><code>assertThat</code>æ–¹æ³•æ˜¯åŒ…<code>import static org.assertj.core.api.Assertions.assertThat;</code>ä¸­çš„æ–¹æ³•ã€‚å®ƒæ¥æ”¶ä¸€ä¸ªå®é™…çš„å€¼ï¼Œç„¶åå†ä½¿ç”¨<code>isEqualTo</code>ç­‰æ–¹æ³•åˆ¤æ–­ä¸Šä¸€ä¸ªæ‰§è¡Œç»“æœæ˜¯å¦æ­£ç¡®ã€‚</li>
</ol>
<h3 id="åœ¨ç±»ä¸­çš„æµ‹è¯•æ‰§è¡Œä¹‹å‰æ‰§è¡Œä¸€æ¬¡ä»£ç "><a href="#åœ¨ç±»ä¸­çš„æµ‹è¯•æ‰§è¡Œä¹‹å‰æ‰§è¡Œä¸€æ¬¡ä»£ç " class="headerlink" title="åœ¨ç±»ä¸­çš„æµ‹è¯•æ‰§è¡Œä¹‹å‰æ‰§è¡Œä¸€æ¬¡ä»£ç "></a>åœ¨ç±»ä¸­çš„æµ‹è¯•æ‰§è¡Œä¹‹å‰æ‰§è¡Œä¸€æ¬¡ä»£ç </h3><p>ä»¥ä¸‹ä»£ç ä½¿ç”¨<code>@BeforeAll</code>æ³¨è§£åœ¨æ–¹æ³• setupMDC ä¸Šé¢ï¼Œå¹¶ä¸”è¿™ä¸ªæ–¹æ³•å¿…é¡»æ˜¯ static é™æ€æ–¹æ³•ã€‚æ˜¯æŒ‡åœ¨æ‰€æœ‰ç±»ä¸­çš„æµ‹è¯•æ–¹æ³•æ‰§è¡Œä¹‹å‰åªæ‰§è¡Œä¸€æ¬¡è¯¥æ–¹æ³•ã€‚ä¸€èˆ¬ç”¨äºè®¾ç½®æ— çŠ¶æ€çš„å…¨å±€å˜é‡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@BeforeAll</span><br><span class="line">static void setupMDC() &#123;</span><br><span class="line">    MDC.put(TRANSACTION_ID, UUID.randomUUID().toString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•ä¹‹å‰éƒ½æ‰§è¡Œä¸€äº›ä»£ç "><a href="#åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•ä¹‹å‰éƒ½æ‰§è¡Œä¸€äº›ä»£ç " class="headerlink" title="åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•ä¹‹å‰éƒ½æ‰§è¡Œä¸€äº›ä»£ç "></a>åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•ä¹‹å‰éƒ½æ‰§è¡Œä¸€äº›ä»£ç </h3><p>ä»¥ä¸‹ä»£ç ä½¿ç”¨<code>@BeforeEach</code>æ³¨è§£ï¼Œå¯ä»¥åœ¨æ¯ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œä¹‹å‰éƒ½æ‰§è¡Œè¯¥æ–¹æ³•ï¼Œç”¨äºæ¯ä¸ªæ–¹æ³•æ‰§è¡Œå‰çš„åˆå§‹åŒ–æˆ–è€…åšä¸€äº›å…±åŒçš„ mock æ“ä½œï¼Œç›¸å½“äº AOP çš„ Beforeã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@BeforeEach</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  when(service.save(any(String<span class="class">.<span class="keyword">class</span>), <span class="title">any</span>(<span class="title">UUID</span>.<span class="title">class</span>), <span class="title">any</span>(<span class="title">UUID</span>.<span class="title">class</span>))).<span class="title">thenReturn</span>(<span class="title">null</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><p>å…¶ä»–çš„æ¯”å¦‚<code>@AfterAll</code> <code>@AfterEach</code>ç­‰ç­‰åŠŸèƒ½ä¾æ¬¡ç±»æ¨ã€‚</p>
<h3 id="æµ‹è¯•åˆ†å±‚"><a href="#æµ‹è¯•åˆ†å±‚" class="headerlink" title="æµ‹è¯•åˆ†å±‚"></a>æµ‹è¯•åˆ†å±‚</h3><p>åœ¨ä½¿ç”¨ Junit5 æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œæœ€è®©æˆ‘è§‰å¾—æ–¹ä¾¿çš„æ˜¯å¯¹äºæµ‹è¯•ç±»çš„ç»“æ„åˆ’åˆ†æ–¹å¼ï¼šå†…éƒ¨ç±»ã€‚é€šè¿‡å†…éƒ¨ç±»ï¼Œæˆ‘ä»¬å¯ä»¥å°†æˆ‘ä»¬è¦æµ‹è¯•çš„ä¸œè¥¿ä½¿ç”¨ç±»ç»“æ„çš„å½¢å¼å»è¿›è¡Œæè¿°ï¼ˆä½¿ç”¨æ³¨è§£<code>@Nested</code>ä¿®é¥°ï¼‰ï¼Œç„¶åå†åœ¨ç±»ä¸­ç¼–å†™ç›¸åº”çš„æµ‹è¯•æ–¹æ³•è¿›è¡Œå…·ä½“çš„æµ‹è¯•ã€‚</p>
<p>æ¯”å¦‚ä¸€ä¸ª Controller éœ€è¦æµ‹è¯• create/update/get ç­‰æ–¹æ³•ï¼Œå°±å¯ä»¥å°†è¿™å‡ ä¸ªæ–¹æ³•ä¾æ¬¡ç¼–å†™å†…éƒ¨ç±»åˆ†å¼€æè¿°ï¼Œç„¶åå†åœ¨ç±»ä¸­å¯¹äºä¸åŒçš„åˆ†æ”¯ç¼–å†™æµ‹è¯•æ–¹æ³•è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ExtendWith</span>(MockitoExtension<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">ObjectsControllerTest</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Nested</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">CreateObjects</span> </span>&#123;</span><br><span class="line">      <span class="meta">@Test</span></span><br><span class="line">      <span class="function"><span class="keyword">void</span> <span class="title">someTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">      	<span class="comment">// some code</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Nested</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">UpdateObjects</span> </span>&#123;</span><br><span class="line">      <span class="meta">@Test</span></span><br><span class="line">      <span class="function"><span class="keyword">void</span> <span class="title">someTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">      	<span class="comment">// some code</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Nested</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">GetObjects</span> </span>&#123;</span><br><span class="line">      <span class="meta">@Test</span></span><br><span class="line">      <span class="function"><span class="keyword">void</span> <span class="title">someTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">      	<span class="comment">// some code</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ä»¥ä¸Šå°±æ˜¯æˆ‘åœ¨ç¼–å†™ unit æµ‹è¯•çš„æ—¶å€™çš„ä¸€äº›å°å°çš„æ€»ç»“ï¼Œä»¥åä¼šç»§ç»­åŠ æ·±å¯¹äºæµ‹è¯•ä»£ç ç¼–å†™çš„å­¦ä¹ ï¼Œå®é™…ä¸Šæµ‹è¯•æ‰æ˜¯å†™ä»£ç è¿‡ç¨‹ä¸­æœ€é‡è¦çš„ä¸€ç¯ï¼Œå¯ä»¥ä¿éšœç³»ç»Ÿçš„åŠŸèƒ½çš„æ­£ç¡®æ€§ï¼Œè¿˜èƒ½ä¿æŠ¤é‡æ„ã€‚Junit5 ä¸º JAVA ç¨‹åºå‘˜æä¾›äº†æ›´å¼ºå¤§ã€æ–¹ä¾¿çš„æµ‹è¯•æ¡†æ¶ï¼Œå€¼å¾—æ·±å…¥ç ”ç©¶ä½¿ç”¨ã€‚</p>
]]></content>
      <categories>
        <category>Junit5</category>
        <category>Unit Test</category>
      </categories>
      <tags>
        <tag>Junit5</tag>
        <tag>Java åŸºç¡€</tag>
        <tag>å•å…ƒæµ‹è¯•</tag>
        <tag>unit test</tag>
      </tags>
  </entry>
  <entry>
    <title> è§£å†³@ResuestBodyä¸­çš„ JSON è‡ªåŠ¨è½¬åŒ–é Boolean ä¸º Boolean å€¼</title>
    <url>/blog/20191217/%E8%A7%A3%E5%86%B3-ResuestBody%E4%B8%AD%E7%9A%84-JSON-%E8%87%AA%E5%8A%A8%E8%BD%AC%E5%8C%96%E9%9D%9E-boolean-%E4%B8%BA-boolean-%E5%80%BC/</url>
    <content><![CDATA[<p><img src="/blog/20191217/è§£å†³-ResuestBodyä¸­çš„-JSON-è‡ªåŠ¨è½¬åŒ–é-boolean-ä¸º-boolean-å€¼/code.jpg" alt="å°é¢"></p>
<a id="more"></a>
<h2 id="é—®é¢˜å‡ºç°"><a href="#é—®é¢˜å‡ºç°" class="headerlink" title="é—®é¢˜å‡ºç°"></a>é—®é¢˜å‡ºç°</h2><p>å½“æˆ‘ä»¬åœ¨ SpringBoot ä¸­å†™ API çš„æ—¶å€™ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨<code>@RequestBody</code>æ³¨è§£ä¸€ä¸ªå‚æ•°å°†è¿™ä¸ªå¯¹è±¡æ ‡è®°ä¹‹åï¼Œç„¶åæˆ‘ä»¬åœ¨è¯·æ±‚å¤´ä½¿ç”¨<code>application/json</code>è°ƒç”¨è¿™ä¸ª APIï¼Œä¼ å…¥ JSON çš„ body ä½“ï¼Œå°±å¯ä»¥è‡ªåŠ¨çš„å°†æˆ‘ä»¬çš„ JSON è½¬åŒ–æˆ JAVA å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œå½“æˆ‘ä½¿ç”¨çš„ JAVA å¯¹è±¡ä¸­æœ‰ä¸ª Boolean çš„å­—æ®µçš„æ—¶å€™ï¼Œæˆ‘çš„ JSON çš„ body å¯¹è¿™ä¸ªå¯¹è±¡ä¼ æ•°å€¼ã€â€Trueâ€ç­‰ç­‰å…¶ä»–å€¼å¾—æ—¶å€™ï¼Œå¾€å¾€ä¼šè¢«é»˜è®¤è½¬æˆç›¸åº”çš„ true æˆ–è€… falseã€‚ä¾‹å¦‚ä¼ å…¥{â€œableâ€:0}çš„æ—¶å€™ï¼Œæˆ‘çš„å¯¹è±¡ä¸­çš„ able å­—æ®µå°±æ˜¯ falseã€‚ä½†æ˜¯æˆ‘ä¸æƒ³è¦è¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘å¸Œæœ›æ¥å£è°ƒç”¨è€…ä¼ çš„ç±»å‹éƒ½æ˜¯ Boolean ç±»å‹ã€‚</p>
<h2 id="Debug-æºç "><a href="#Debug-æºç " class="headerlink" title="Debug æºç "></a>Debug æºç </h2><p>é¦–å…ˆä½ è¦çŸ¥é“ï¼Œåœ¨ SpringBoot æˆ–è€… SpringMVC ä¸­å¯¹äºrequest å’Œ response çš„å¤„ç†æ˜¯ä½¿ç”¨çš„æ¶ˆæ¯è½¬æ¢å™¨å¤„ç†çš„ã€‚æ‰€ä»¥æˆ‘åœ¨ debug æºç çš„æ—¶å€™å‘ç°ï¼ŒSpringBoot ä½¿ç”¨<code>MappingJackson2HttpMessageConverter</code>å¤„ç† JSON è½¬åŒ–æˆå¯¹è±¡ï¼Œç„¶åå®é™…çš„è½¬åŒ–æ–¹æ³•<code>MappingJackson2HttpMessageConverter</code>æ²¡æœ‰é‡å†™ï¼Œè€Œæ˜¯äº¤ç»™çˆ¶ç±»<code>AbstractJackson2HttpMessageConverter</code>çš„æ–¹æ³•ï¼Œåœ¨è¯¥ç±»çš„ç¬¬239 è¡Œä¼šå‘ç°å®é™…ä¸Šæ˜¯ä½¿ç”¨çš„ <code>this.objectMapper.readValue(inputMessage.getBody(), javaType);</code> å°†ä¸€ä¸ª JSON å­—ç¬¦ä¸²è½¬åŒ–æˆ JAVA å¯¹è±¡ã€‚å†è¿›å»çœ‹ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> &lt;T&gt; <span class="function">T <span class="title">readValue</span><span class="params">(InputStream src, JavaType valueType)</span></span></span><br><span class="line"><span class="function">  <span class="keyword">throws</span> IOException, JsonParseException, JsonMappingException</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (T) _readMapAndClose(_jsonFactory.createParser(src), valueType);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è€Œ<code>_readMapAndClose</code>æ–¹æ³•æ˜¯è¿™æ ·çš„(é‡ç‚¹çœ‹ä¸‹ 4013 è¡Œ)ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> Object <span class="title">_readMapAndClose</span><span class="params">(JsonParser p0, JavaType valueType)</span></span></span><br><span class="line"><span class="function">  <span class="keyword">throws</span> IOException</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">try</span> (JsonParser p = p0) &#123;</span><br><span class="line">    Object result;</span><br><span class="line">    JsonToken t = _initForReading(p, valueType);</span><br><span class="line">    <span class="keyword">final</span> DeserializationConfig cfg = getDeserializationConfig();</span><br><span class="line">    <span class="keyword">final</span> DeserializationContext ctxt = createDeserializationContext(p, cfg);</span><br><span class="line">    <span class="keyword">if</span> (t == JsonToken.VALUE_NULL) &#123;</span><br><span class="line">      <span class="comment">// Ask JsonDeserializer what 'null value' to use:</span></span><br><span class="line">      result = _findRootDeserializer(ctxt, valueType).getNullValue(ctxt);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (t == JsonToken.END_ARRAY || t == JsonToken.END_OBJECT) &#123;</span><br><span class="line">      result = <span class="keyword">null</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      JsonDeserializer&lt;Object&gt; deser = _findRootDeserializer(ctxt, valueType);</span><br><span class="line">      <span class="keyword">if</span> (cfg.useRootWrapping()) &#123;</span><br><span class="line">        result = _unwrapAndDeserialize(p, ctxt, cfg, valueType, deser);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        result = deser.deserialize(p, ctxt);</span><br><span class="line">      &#125;</span><br><span class="line">      ctxt.checkUnresolvedObjectId();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (cfg.isEnabled(DeserializationFeature.FAIL_ON_TRAILING_TOKENS)) &#123;</span><br><span class="line">      _verifyNoTrailingTokens(p, ctxt, valueType);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™è¡Œä»£ç <code>result = deser.deserialize(p, ctxt);</code>ä½¿ç”¨ä¸€ä¸ªååºåˆ—åŒ–å¯¹è±¡è¿›è¡Œ JSON çš„ååºåˆ—åŒ–ï¼Œè¿™é‡Œå¦‚æœä¼ å…¥çš„æ˜¯æ•°å­—è½¬åŒ–æˆ Booleançš„è¯å°±æ˜¯ç”¨çš„æ˜¯<code>NumberDeserializers</code>ä¸­çš„<code>BooleanDeserializer</code>ï¼Œè€Œå®ƒçš„<code>deserialize</code>æ–¹æ³•æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Boolean <span class="title">deserialize</span><span class="params">(JsonParser p, DeserializationContext ctxt)</span> <span class="keyword">throws</span> IOException</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  JsonToken t = p.getCurrentToken();</span><br><span class="line">  <span class="keyword">if</span> (t == JsonToken.VALUE_TRUE) &#123;</span><br><span class="line">    <span class="keyword">return</span> Boolean.TRUE;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (t == JsonToken.VALUE_FALSE) &#123;</span><br><span class="line">    <span class="keyword">return</span> Boolean.FALSE;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> _parseBoolean(p, ctxt);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶å<code>_parseBoolean</code>ä¸­å°†å…¶ä»–çš„æ•°å€¼è½¬åŒ–æˆ Booleanã€‚</p>
<h2 id="è§£å†³æ–¹å¼"><a href="#è§£å†³æ–¹å¼" class="headerlink" title="è§£å†³æ–¹å¼"></a>è§£å†³æ–¹å¼</h2><p>ä»¥ä¸Šå°±æ˜¯æ•´ä¸ª debug çš„å…¨è¿‡ç¨‹äº†ï¼Œæ€»ç»“ä¸€ä¸‹å°±æ˜¯<code>AbstractJackson2HttpMessageConverter</code>ä¸­ä¼šé»˜è®¤åœ°å°†é Boolean çš„æ•°å€¼è½¬åŒ–æˆ Booleanã€‚é‚£ä¹ˆå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p>
<p>é¦–å…ˆä½¿ç”¨æœç´¢å¼•æ“è§£å†³ğŸ˜¹ç„¶åæœç´¢ä¸åˆ°ã€‚ã€‚ã€‚ç„¶åæˆ‘åœ¨ StackOverFlow ä¸Šæäº†ä¸€ä¸ª<a href="https://stackoverflow.com/questions/59353379/springboot-atomically-convert-integer-to-boolean-with-requestbody-annotation-h/59355180#59355180" target="_blank" rel="noopener">é—®é¢˜ &lt;click</a>ã€‚ç®€å•æ¥è¯´å°±æ˜¯ä»¥ä¸‹è¿™ç§æ–¹å¼ï¼š</p>
<ul>
<li><p>è‡ªå®šä¹‰è‡ªå·±çš„ååºåˆ—åŒ–å·¥å…·ï¼Œç„¶åè®© Spring å»ç®¡ç†è¿™ä¸ªé…ç½®ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SystemConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SimpleModule <span class="title">addDeserializer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SimpleModule().addDeserializer(Boolean<span class="class">.<span class="keyword">class</span>, <span class="title">new</span> <span class="title">MyDeserializer</span>())</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyDeserializer</span> <span class="keyword">extends</span> <span class="title">JsonDeserializer</span>&lt;<span class="title">Boolean</span>&gt; </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Boolean <span class="title">deserialize</span><span class="params">(JsonParser p, DeserializationContext ctxt)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">            JsonToken t = p.getCurrentToken();</span><br><span class="line">            <span class="keyword">if</span> (t == JsonToken.VALUE_TRUE) &#123;</span><br><span class="line">                <span class="keyword">return</span> Boolean.TRUE;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (t == JsonToken.VALUE_FALSE) &#123;</span><br><span class="line">                <span class="keyword">return</span> Boolean.FALSE;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (t == JsonToken.VALUE_STRING) &#123;</span><br><span class="line">                String value = p.getValueAsString();</span><br><span class="line">                <span class="keyword">return</span> value.equals(<span class="string">"true"</span>) ? <span class="keyword">true</span> : value.equals(<span class="string">"false"</span>) ? <span class="keyword">false</span> : <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>è¿™æ ·å°±å°†æ‰€æœ‰ API ä¸­ï¼Œå­˜åœ¨ Boolean çš„æƒ…å†µéƒ½å¤„ç†æ‰äº†ã€‚åªèƒ½æ¥å— Boolean å€¼æˆ–è€…å­—ç¬¦ä¸²çš„â€trueâ€æˆ–è€…â€falseâ€ã€‚</p>
<p>ä½†æ˜¯ä½œä¸ºä¸€ä¸ªä¼˜ç§€(pa ma fan)çš„ğŸ‘©â€ğŸ’»coderğŸ˜·ï¼Œæˆ‘ä»¬åº”è¯¥ä¿è¯è‡ªå·±ä¿®æ”¹çš„ä»£ç ä¸ä¼šå½±å“åˆ°å…¶ä»–äººæˆ–è€…å…¶ä»–æ¨¡å—ï¼Œéšä¾¿çš„ä¿®æ”¹å…¨å±€çš„é…ç½®ä¸å¤ªå¥½ã€‚æ‰€ä»¥æˆ‘å¯»æ‰¾åˆ°äº†ä¸€ä¸ªæ›´åŠ à­§(à¹‘â€¢Ì€â—¡â€¢Ìà¹‘)à«­çš„æ–¹å¼ â€”â€” ç¼–å†™ä¸€ä¸ªè¯¥å±æ€§çš„ set æ–¹æ³•å³å¯ã€‚</p>
<p>å› ä¸ºDeserializerä¼šå°†è¯»å–åˆ°çš„ JSON çš„å€¼é€šè¿‡ set æ–¹æ³•å¡«å…¥å¯¹è±¡ä¸­ï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼ä¹Ÿæ˜¯å®Œå…¨å¯è¡Œçš„ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAble</span><span class="params">(Object value)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (value <span class="keyword">instanceof</span> Boolean) &#123;</span><br><span class="line">    able = (Boolean) value;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="string">"true"</span>.equals(value)) &#123;</span><br><span class="line">    able = <span class="keyword">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è‡³æ­¤ï¼Œå¤§åŠŸå‘Šæˆã€‚ä½†æ˜¯å®é™…ä¸Šæ•´ä¸ªè¿‡ç¨‹ debug çš„æ—¶å€™æ˜¯æœ€æœ‰æ„æ€çš„ï¼Œå¯ä»¥äº†è§£åˆ°å®ƒåœ¨è½¬æ¢çš„è¿‡ç¨‹ä¸­å®é™…ä¸Šéƒ½åšäº†äº›ä»€ä¹ˆäº‹æƒ…ã€‚</p>
]]></content>
      <categories>
        <category>SpringBoot</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
        <tag>Spring</tag>
        <tag>SpringMVC</tag>
        <tag>JSON</tag>
        <tag>converter</tag>
        <tag>RequestBody</tag>
      </tags>
  </entry>
  <entry>
    <title>å¦‚ä½•åœ¨ SpringCloud å¾®æœåŠ¡é¡¹ç›®ä¸­ä¸€é”®éƒ¨ç½² Docker å¯åŠ¨</title>
    <url>/blog/20191211/%E5%A6%82%E4%BD%95%E5%9C%A8-SpringCloud-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2-docker-%E5%90%AF%E5%8A%A8/</url>
    <content><![CDATA[<p><img src="/blog/20191211/å¦‚ä½•åœ¨-SpringCloud-å¾®æœåŠ¡é¡¹ç›®ä¸­ä¸€é”®éƒ¨ç½²-docker-å¯åŠ¨/docker.jpg" alt></p>
<a id="more"></a>
<h2 id="å¦‚ä½•ç”¨-docker-ä¸€é”®å¯åŠ¨-SpringCloud-å¾®æœåŠ¡ï¼Ÿ"><a href="#å¦‚ä½•ç”¨-docker-ä¸€é”®å¯åŠ¨-SpringCloud-å¾®æœåŠ¡ï¼Ÿ" class="headerlink" title="å¦‚ä½•ç”¨ docker ä¸€é”®å¯åŠ¨ SpringCloud å¾®æœåŠ¡ï¼Ÿ"></a>å¦‚ä½•ç”¨ docker ä¸€é”®å¯åŠ¨ SpringCloud å¾®æœåŠ¡ï¼Ÿ</h2><h3 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-docker-å¯åŠ¨æˆ‘ä»¬çš„å¾®æœåŠ¡ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-docker-å¯åŠ¨æˆ‘ä»¬çš„å¾®æœåŠ¡ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ docker å¯åŠ¨æˆ‘ä»¬çš„å¾®æœåŠ¡ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ docker å¯åŠ¨æˆ‘ä»¬çš„å¾®æœåŠ¡ï¼Ÿ</h3><p>åŸå§‹ä¼ ç»Ÿçš„éƒ¨ç½²æ–¹å¼ä¸ºæˆ‘ä»¬å¸¦æ¥äº†å¤ªå¤šé—®é¢˜ï¼Œæ¯”å¦‚å½“ä½ çš„æœåŠ¡åœ¨æµ‹è¯•ç¯å¢ƒæ­£è¿è¡Œçš„æ­£å¸¸ï¼Œä½†æ˜¯éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒå°±ä¼šå‡ºç°ä¸€å¤§å †æœªçŸ¥é—®é¢˜ï¼Œä½ æŸ¥äº†å¥½ä¹…ï¼Œdebug ä»£ç ä¹‹åå‘ç°ï¼Œä»…ä»…æ˜¯ä¸€ä¸ªç¯å¢ƒå˜é‡æ²¡æœ‰è®¾ç½®æ­£ç¡®ï¼Œå¯¼è‡´äº§ç”Ÿäº†ç›®å‰è¿™ä¹ˆä¸€å¤§ä¸²é—®é¢˜ï¼Œæµªè´¹äº†ä½ çš„æ—¶é—´ï¼Œæ‹–å»¶äº†é¡¹ç›®ä¸Šçº¿çš„æ—¶é—´ï¼Œç”šè‡³äº§ç”Ÿäº†ä¸¥é‡çš„ç”Ÿäº§äº‹æ•…ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªæœºåˆ¶æ¥ä¿è¯æˆ‘ä»¬çš„ä»£ç åœ¨éƒ¨ç½²åˆ°æœ¬åœ°ã€æµ‹è¯•ä»¥åŠç”Ÿäº§çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„ä»£ç ä¸ä¼šå—åˆ°ç¯å¢ƒä¸ä¸€è‡´çš„å½±å“è€Œå¯¼è‡´æˆ‘ä»¬éƒ¨ç½²å¤±è´¥ï¼</p>
<p>è¿˜æœ‰å°±æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ docker æ‰“åŒ…é•œåƒç„¶åä½¿ç”¨ docker-compose ç¼–æ’å®¹å™¨ä¸€é”®å¯åŠ¨ï¼Œè®©è¿ç»´è‡ªåŠ¨åŒ–ï¼Œæå¤§çš„èŠ‚çœæˆ‘ä»¬çš„å·¥ä½œæ—¶é—´ã€‚</p>
<h3 id="åœ¨-Spring-Cloud-å¾®æœåŠ¡é¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨-DOCKERï¼Ÿ"><a href="#åœ¨-Spring-Cloud-å¾®æœåŠ¡é¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨-DOCKERï¼Ÿ" class="headerlink" title="åœ¨ Spring-Cloud å¾®æœåŠ¡é¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨ DOCKERï¼Ÿ"></a>åœ¨ Spring-Cloud å¾®æœåŠ¡é¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨ DOCKERï¼Ÿ</h3><h4 id="é¦–å…ˆæˆ‘ä»¬éœ€è¦å°†æˆ‘ä»¬çš„æ¯ä¸€ä¸ªæœåŠ¡æ‰“åŒ…æˆé•œåƒ"><a href="#é¦–å…ˆæˆ‘ä»¬éœ€è¦å°†æˆ‘ä»¬çš„æ¯ä¸€ä¸ªæœåŠ¡æ‰“åŒ…æˆé•œåƒ" class="headerlink" title="é¦–å…ˆæˆ‘ä»¬éœ€è¦å°†æˆ‘ä»¬çš„æ¯ä¸€ä¸ªæœåŠ¡æ‰“åŒ…æˆé•œåƒ"></a>é¦–å…ˆæˆ‘ä»¬éœ€è¦å°†æˆ‘ä»¬çš„æ¯ä¸€ä¸ªæœåŠ¡æ‰“åŒ…æˆé•œåƒ</h4><p>ä¾‹å¦‚æˆ‘çš„<a href="https://github.com/Fatezhang/scaffold-cloud/blob/a6dd55772f59eecd99b099e013ce2ef4470cec91/scaffold-eureka/pom.xml#L43" target="_blank" rel="noopener"> Scaffold-Cloud é¡¹ç›®ä¸­çš„ eureka æœåŠ¡çš„ pom æ–‡ä»¶</a>(ç‚¹å‡»é“¾æ¥è·³è½¬åˆ° github ä»¥ä¸‹ä»£ç è¡Œ)å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.spotify<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>docker-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.activation<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>activation<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.4.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">imageName</span>&gt;</span>scaffold-cloud/$&#123;project.artifactId&#125;:$&#123;project.version&#125;<span class="tag">&lt;/<span class="name">imageName</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">forceTags</span>&gt;</span>true<span class="tag">&lt;/<span class="name">forceTags</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">baseImage</span>&gt;</span>java<span class="tag">&lt;/<span class="name">baseImage</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">targetPath</span>&gt;</span>/<span class="tag">&lt;/<span class="name">targetPath</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">directory</span>&gt;</span>$&#123;project.build.directory&#125;<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">include</span>&gt;</span>$&#123;project.build.finalName&#125;.jar<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç„¶åå…¶ä»–æ¨¡å—ä¹Ÿä¸€æ ·ï¼Œåœ¨ pom æ–‡ä»¶ä¸­åŠ å…¥ä»¥ä¸Š maven æ’ä»¶ï¼Œå®Œæ•´é¡¹ç›®ä»£ç å¦‚ä¸‹(è§‰å¾—å¥½ç”¨ starâœ¨ä¸€ä¸‹å“¦)ï¼š</p>
<p><a href="https://github.com/Fatezhang/scaffold-cloud" target="_blank" rel="noopener">https://github.com/Fatezhang/scaffold-cloud/</a></p>
<h4 id="ä½¿ç”¨è„šæœ¬ä¸€é”®åˆ›å»º-docker-é•œåƒ"><a href="#ä½¿ç”¨è„šæœ¬ä¸€é”®åˆ›å»º-docker-é•œåƒ" class="headerlink" title="ä½¿ç”¨è„šæœ¬ä¸€é”®åˆ›å»º docker é•œåƒ"></a>ä½¿ç”¨è„šæœ¬ä¸€é”®åˆ›å»º docker é•œåƒ</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span>!/bin/bash</span><br><span class="line"></span><br><span class="line">echo "============start to package with maven and recreate docker image=============="</span><br><span class="line"></span><br><span class="line">SERVICE_FOLDERS=(</span><br><span class="line">  scaffold-eureka</span><br><span class="line">  scaffold-zuul</span><br><span class="line">  scaffold-tx-manager</span><br><span class="line">  scaffold-business/scaffold-business-sys-service</span><br><span class="line">  scaffold-business/scaffold-business-job-service</span><br><span class="line">  scaffold-business/scaffold-business-thirdparty-service</span><br><span class="line">  scaffold-route/scaffold-route-app</span><br><span class="line">  scaffold-route/scaffold-route-openapi</span><br><span class="line">  scaffold-route/scaffold-route-operate</span><br><span class="line">)</span><br><span class="line">path=</span><br><span class="line">for (( i = 0; i &lt; $&#123;#SERVICE_FOLDERS[@]&#125;; i++ )); do</span><br><span class="line">    path=$&#123;SERVICE_FOLDERS[$&#123;i&#125;]&#125;</span><br><span class="line">    echo "è¿›å…¥ç›®å½• &gt;&gt;&gt;&gt; cd $&#123;path&#125;"</span><br><span class="line">    cd "$&#123;path&#125;" || exit</span><br><span class="line">    pwd</span><br><span class="line">    mvn clean package docker:build -Pdocker</span><br><span class="line">    cd - || exit</span><br><span class="line">done</span><br><span class="line">echo "============                      create end                     =============="</span><br></pre></td></tr></table></figure>
<h4 id="ç¼–æ’-docker-compose-å¯åŠ¨æ‰€æœ‰å¾®æœåŠ¡"><a href="#ç¼–æ’-docker-compose-å¯åŠ¨æ‰€æœ‰å¾®æœåŠ¡" class="headerlink" title="ç¼–æ’ docker-compose å¯åŠ¨æ‰€æœ‰å¾®æœåŠ¡"></a>ç¼–æ’ docker-compose å¯åŠ¨æ‰€æœ‰å¾®æœåŠ¡</h4><p>ç„¶ååªéœ€è¦å°†æ‰€æœ‰é•œåƒç¼–æ’åœ¨ docker-compose.yml æ–‡ä»¶ä¸­å³å¯ï¼Œå…¶ä¸­æ‰€æœ‰çš„å®¹å™¨éƒ½åœ¨åŒä¸€ä¸ªç½‘ç»œä¸­ä»¥è®¿é—®åˆ°å¯¹æ–¹æœåŠ¡ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">scaffold-cloud</span></span><br></pre></td></tr></table></figure>
<p>å®Œæ•´çš„ docker-compose.yml æ–‡ä»¶å¦‚ä¸‹ï¼ˆæ³¨æ„æœ‰ä¸€ä¸ª<code>wait-for-it.sh</code>ï¼‰ï¼š<br><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"3.7"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">micro-sys:</span></span><br><span class="line">    <span class="attr">entrypoint:</span> <span class="string">./wait-for-it.sh</span> <span class="string">tx_manager:7970</span> <span class="string">'java -jar scaffold-business-sys-service-1.0-SNAPSHOT.jar'</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">scaffold-cloud/scaffold-business-sys-service:1.0-SNAPSHOT</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/tmp:/tmp</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./.scripts/wait-for-it.sh:/wait-for-it.sh</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8750</span><span class="string">:8750</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">scaffold-cloud</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">redis</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">eureka</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">mysql</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">rmqbroker</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">rmqnamesrv</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">tx_manager</span></span><br><span class="line">  <span class="attr">route-operate:</span></span><br><span class="line">    <span class="attr">entrypoint:</span> <span class="string">./wait-for-it.sh</span> <span class="string">micro-sys:8750</span> <span class="string">'java -jar scaffold-route-operate-1.0-SNAPSHOT.jar'</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">scaffold-cloud/scaffold-route-operate:1.0-SNAPSHOT</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/tmp:/tmp</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./.scripts/wait-for-it.sh:/wait-for-it.sh</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8850</span><span class="string">:8850</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">scaffold-cloud</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">micro-sys</span></span><br><span class="line">  <span class="attr">eureka:</span></span><br><span class="line">    <span class="attr">entrypoint:</span> <span class="string">java</span> <span class="string">-jar</span> <span class="string">scaffold-eureka-1.0-SNAPSHOT.jar</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">scaffold-cloud/scaffold-eureka:1.0-SNAPSHOT</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/tmp:/tmp</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8761</span><span class="string">:8761</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">scaffold-cloud</span></span><br><span class="line">  <span class="attr">zuul:</span></span><br><span class="line">    <span class="attr">entrypoint:</span> <span class="string">./wait-for-it.sh</span> <span class="string">eureka:8761</span> <span class="string">'java -jar scaffold-zuul-1.0-SNAPSHOT.jar'</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">scaffold-cloud/scaffold-zuul:1.0-SNAPSHOT</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/tmp:/tmp</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./.scripts/wait-for-it.sh:/wait-for-it.sh</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8861</span><span class="string">:8861</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">scaffold-cloud</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">eureka</span></span><br><span class="line">  <span class="attr">tx_manager:</span></span><br><span class="line">    <span class="attr">entrypoint:</span> <span class="string">./wait-for-it.sh</span> <span class="string">mysql:3306,redis:6379</span> <span class="string">'java -jar scaffold-txmanager-1.0-SNAPSHOT.jar'</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">scaffold-cloud/scaffold-txmanager:1.0-SNAPSHOT</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/tmp:/tmp</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./.scripts/wait-for-it.sh:/wait-for-it.sh</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8890</span><span class="string">:8890</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">7970</span><span class="string">:7970</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">scaffold-cloud</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">mysql</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">redis</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">eureka</span></span><br><span class="line">  <span class="attr">mysql:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql/mysql-server:5.7</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">3306</span><span class="string">:3306</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./mysql/data:/var/lib/mysql</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./mysql/config/my.cnf:/etc/my.cnf</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./mysql/init:/docker-entrypoint-initdb.d/</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">scaffold-cloud</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">redis:latest</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">6379</span><span class="string">:6379</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">redis-server</span> <span class="string">--requirepass</span> <span class="string">pwd8ok8</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">scaffold-cloud</span></span><br><span class="line">  <span class="attr">rmqnamesrv:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">foxiswho/rocketmq:server-4.5.2</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">rmqnamesrv</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">9876</span><span class="string">:9876</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./rmq/logs:/opt/logs</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./rmq/store:/opt/store</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">JAVA_OPT_EXT:</span> <span class="string">"-Duser.home=/opt -Xms128m -Xmx128m -Xmn128m"</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">scaffold-cloud</span></span><br><span class="line">  <span class="attr">rmqbroker:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">foxiswho/rocketmq:broker-4.5.2</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">rmqbroker</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">10909</span><span class="string">:10909</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">10911</span><span class="string">:10911</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./rmq/logs:/opt/logs</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./rmq/store:/opt/store</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./rmq/brokerconf/broker.conf:/etc/rocketmq/broker.conf</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">JAVA_OPT_EXT:</span> <span class="string">"-Duser.home=/opt -server -Xms128m -Xmx128m -Xmn128m"</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">["/bin/bash","mqbroker","-c","/etc/rocketmq/broker.conf","-n","rmqnamesrv:9876","autoCreateTopicEnable=true"]</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">rmqnamesrv</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">scaffold-cloud</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">rmqconsole:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">styletang/rocketmq-console-ng</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">rmqconsole</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8180</span><span class="string">:8080</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">JAVA_OPTS:</span> <span class="string">"-Drocketmq.namesrv.addr=rmqnamesrv:9876 -Dcom.rocketmq.sendMessageWithVIPChannel=false"</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">rmqnamesrv</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">scaffold-cloud</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">scaffold-cloud:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">scaffold-cloud</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">bridge</span></span><br></pre></td></tr></table></figure></p>
<h4 id="å¦‚ä½•åœ¨å¯åŠ¨æ‰€æœ‰å¾®æœåŠ¡çš„æ—¶å€™æŒ‰é¡ºåºå¯åŠ¨å‘¢ï¼Ÿ"><a href="#å¦‚ä½•åœ¨å¯åŠ¨æ‰€æœ‰å¾®æœåŠ¡çš„æ—¶å€™æŒ‰é¡ºåºå¯åŠ¨å‘¢ï¼Ÿ" class="headerlink" title="å¦‚ä½•åœ¨å¯åŠ¨æ‰€æœ‰å¾®æœåŠ¡çš„æ—¶å€™æŒ‰é¡ºåºå¯åŠ¨å‘¢ï¼Ÿ"></a>å¦‚ä½•åœ¨å¯åŠ¨æ‰€æœ‰å¾®æœåŠ¡çš„æ—¶å€™æŒ‰é¡ºåºå¯åŠ¨å‘¢ï¼Ÿ</h4><p>æˆ‘ä»¬çŸ¥é“ï¼ŒSpringCloud å¾®æœåŠ¡ä¸­å„ä¸ªæœåŠ¡ä¹‹é—´å¯èƒ½å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œæ¯”å¦‚ tx-manager æœåŠ¡éœ€è¦ç­‰å¾… MySQL å’Œ Redis éƒ½å¯åŠ¨å®Œæˆä¹‹åæ‰èƒ½å¤Ÿé¡ºåˆ©å¯åŠ¨ï¼Œä½†æ˜¯ docker-compose.yml æ–‡ä»¶ä¸­çš„ <code>depends_on</code>åªèƒ½ç­‰å¾… docker å®¹å™¨å¯åŠ¨æˆåŠŸï¼Œè€Œä¸èƒ½ç­‰å¾… docker å®¹å™¨ä¸­çš„æœåŠ¡å¯åŠ¨å®Œæˆï¼</p>
<p>docker å®˜æ–¹ç»™å‡ºçš„æ–¹æ¡ˆæ˜¯ä½¿ç”¨wait-for-it.shè„šæœ¬ï¼Œåœ¨å®¹å™¨å¯åŠ¨ä¹‹å‰æ‰§è¡Œè„šæœ¬ï¼Œåˆ¤æ–­ä¾èµ–çš„æœåŠ¡å’Œç«¯å£æ˜¯å¦å¯åŠ¨æˆåŠŸï¼Œç„¶åå†æ‰§è¡Œè‡ªå·±æœåŠ¡çš„å¯åŠ¨å‘½ä»¤ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬ä¹Ÿæ˜¯è¿™æ ·å»å†™ä¸€ä¸ªè„šæœ¬ï¼š<code>wait-for-it.sh</code>å¦‚ä¸‹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span>!/bin/bash</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> shellcheck disable=SC2223</span><br><span class="line">: $&#123;SLEEP_SECOND:=2&#125;</span><br><span class="line"></span><br><span class="line">wait_for() &#123;</span><br><span class="line">  echo Waiting for $1 on port $2... ...</span><br><span class="line"><span class="meta">  #</span> shellcheck disable=SC2086</span><br><span class="line"><span class="meta">  #</span> shellcheck disable=SC2188</span><br><span class="line">  while ! &lt;/dev/tcp/$1/$2; do</span><br><span class="line">    echo Waiting for $1 on port $2... ...</span><br><span class="line">    sleep $SLEEP_SECOND</span><br><span class="line">  done</span><br><span class="line">  echo Server:"$1" on port:"$2" is running... ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SER_STRS=$1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> shellcheck disable=SC2207</span><br><span class="line"><span class="meta">#</span> shellcheck disable=SC2006</span><br><span class="line">SERVICES_PORTS=($(echo "$SER_STRS" | tr ',' ' '))</span><br><span class="line"></span><br><span class="line">THEN_COMMAND=$2</span><br><span class="line"></span><br><span class="line">for ((i = 0; i &lt; $&#123;#SERVICES_PORTS[@]&#125;; i++)); do</span><br><span class="line">  SERVICE_PORT=$&#123;SERVICES_PORTS[$&#123;i&#125;]&#125;</span><br><span class="line"><span class="meta">  #</span> shellcheck disable=SC2207</span><br><span class="line"><span class="meta">  #</span> shellcheck disable=SC2006</span><br><span class="line">  array=($(echo "$SERVICE_PORT" | tr ':' ' '))</span><br><span class="line">  servername=$&#123;array[0]&#125;</span><br><span class="line">  serverport=$&#123;array[1]&#125;</span><br><span class="line">  wait_for "$servername" "$&#123;serverport&#125;"</span><br><span class="line">done</span><br><span class="line">echo "start to run command: $THEN_COMMAND"</span><br><span class="line"><span class="meta">#</span> shellcheck disable=SC2004</span><br><span class="line">if [ "$THEN_COMMAND" ]; then</span><br><span class="line">  eval "$THEN_COMMAND"</span><br><span class="line">else</span><br><span class="line"><span class="meta">  #</span> shellcheck disable=SC2102</span><br><span class="line">  echo command: [$THEN_COMMAND] is invalid... ...</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°è„šæœ¬çš„ä½œç”¨å°±æ˜¯ç­‰å¾…å¯åŠ¨çš„æœåŠ¡ä»¥åŠç«¯å£å¯åŠ¨æˆåŠŸï¼Œæ²¡æœ‰æˆåŠŸçš„è¯å°±ç»§ç»­ wait ç­‰å¾…ï¼Œé»˜è®¤ç­‰å¾… 2 ç§’ï¼Œå¯åŠ¨æˆåŠŸçš„è¯å°±æ‰§è¡Œè‡ªå·±çš„å¯åŠ¨å‘½ä»¤ã€‚</p>
<p>ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">tx_manager:</span></span><br><span class="line">    <span class="attr">entrypoint:</span> <span class="string">./wait-for-it.sh</span> <span class="string">mysql:3306,redis:6379</span> <span class="string">'java -jar scaffold-txmanager-1.0-SNAPSHOT.jar'</span></span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥ï¼Œä»¥ä¸Šå°±æ˜¯ä½¿ç”¨ docker å¯åŠ¨ SpringCloud å¾®æœåŠ¡çš„å…¨éƒ¨å†…å®¹ï¼Œå¦‚æœä½ è§‰å¾—æœ‰ç”¨ï¼Œå¸Œæœ›èƒ½å¤Ÿç»™æˆ‘çš„é¡¹ç›®<a href="https://github.com/Fatezhang/scaffold-cloud/ç‚¹ä¸ªstar" target="_blank" rel="noopener">https://github.com/Fatezhang/scaffold-cloud/ç‚¹ä¸ªstar</a> å“¦~</p>
<p>è€Œä¸”ä½ ä¹Ÿå¯ä»¥ç»™æˆ‘æ issueï¼Œæ PRï¼Œæ¬¢è¿ä¸€èµ·äº¤æµå­¦ä¹ ï¼Œä¸€èµ·å¼€å‘~</p>
]]></content>
      <categories>
        <category>SpringCloud</category>
      </categories>
      <tags>
        <tag>SpringCloud</tag>
        <tag>å¾®æœåŠ¡</tag>
        <tag>springboot</tag>
        <tag>spring</tag>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Scaffold-Cloud â€”â€” SpringCloudå¾®æœåŠ¡æ¶æ„å®è·µ</title>
    <url>/blog/20191025/SpringCloud%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%E5%AE%9E%E8%B7%B5/</url>
    <content><![CDATA[<p><center><u style="font-size=16px;"><a href="/">Scaffold-Cloud: SpringCloudå¾®æœåŠ¡è„šæ‰‹æ¶</a></u></center> <a href="https://mubu.com/doc/6NZlNw3DIw" target="_blank" rel="noopener">å¹•å¸ƒ</a><br>Scaffold-Cloud æ˜¯ä¸€ä¸ªé€‚ç”¨äºå¼€å‘è€…å­¦ä¹ çš„ Spring-Cloud å¾®æœåŠ¡é¡¹ç›®è„šæ‰‹æ¶ã€‚é¡¹ç›®æœŸæœ›é›†æˆå¤§éƒ¨åˆ†ç›®å‰äº’è”ç½‘å…¬å¸ä½¿ç”¨çš„ä¸»æµçš„Spring-Cloudå¾®æœåŠ¡ç›¸å…³å·¥å…·å’ŒæœåŠ¡ã€‚å¹¶ç»“åˆä¸€äº›å®é™…çš„ä¸šåŠ¡å¢åŠ ä¸€äº›å…¶ä»–åŠŸèƒ½ï¼Œå¦‚ï¼šåˆ†å¸ƒå¼äº‹åŠ¡ã€å®šæ—¶ä»»åŠ¡ã€æ¶ˆæ¯é˜Ÿåˆ—ã€æ—¥å¿—åˆ†æç­‰ç­‰ï¼Œç„¶ååŠ å…¥ CI/CD å¹¶å¼•å…¥ docker éƒ¨ç½²ã€‚</p>
<p>Scaffold-Cloud åŸºäº SpringCloud Netflix å…¨å®¶æ¡¶è¿›è¡Œå¾®æœåŠ¡é¡¹ç›®çš„æ„å»ºï¼Œæ‰€ä»¥åœ¨è¿™ä¹‹å‰ï¼Œä½¿ç”¨ Scaffold-Cloud éœ€è¦å…ˆäº†è§£ä¸‹ SpringCloud ä»¥åŠ Netflix å·¥å…·å…¨å®¶æ¡¶ã€‚</p>
<p><img src="/blog/20191025/SpringCloudå¾®æœåŠ¡æ¶æ„å®è·µ/netflix.png" alt></p>
<p><center><u style="font-size=6px; color:gray">Sorry, NetFlix is not available in your country yet.</u></center><br><a id="more"></a></p>
<h2 id="Spring-Cloud-ä»‹ç»"><a href="#Spring-Cloud-ä»‹ç»" class="headerlink" title="Spring Cloud ä»‹ç»"></a>Spring Cloud ä»‹ç»</h2><h4 id="ä»å•ä½“åº”ç”¨åˆ°å¾®æœåŠ¡"><a href="#ä»å•ä½“åº”ç”¨åˆ°å¾®æœåŠ¡" class="headerlink" title="ä»å•ä½“åº”ç”¨åˆ°å¾®æœåŠ¡"></a>ä»å•ä½“åº”ç”¨åˆ°å¾®æœåŠ¡</h4><p>åœ¨æ—©æœŸçš„ä¼ä¸šä¸­ï¼Œé¡¹ç›®åŸºæœ¬ä¸Šéƒ½æ˜¯å•ä½“åº”ç”¨ï¼Œå°†ä¸€ä¸ªç½‘ç«™éƒ¨ç½²åœ¨ä¸€å°å•ç‹¬çš„æœåŠ¡å™¨ä¸Šå¯¹ç”¨æˆ·æä¾›æœåŠ¡ã€‚ä½†æ˜¯è¿™æ ·çš„æœåŠ¡æœ€å¤§çš„ç¼ºç‚¹å°±æ˜¯ï¼Œå½“æœåŠ¡å™¨æ–­ç”µæˆ–è€…æœåŠ¡è¿›ç¨‹æŒ‚æ‰ï¼Œç”¨æˆ·ç›´æ¥å°±æ— æ³•è®¿é—®ã€‚åæ¥æ¼”è¿›å‡ºé›†ç¾¤æœåŠ¡ï¼Œå°†åŒæ ·çš„æœåŠ¡åœ¨å¤šå°æœåŠ¡å™¨åˆ†åˆ«éƒ¨ç½²ï¼Œä½¿ç”¨è´Ÿè½½å‡è¡¡ç­‰æ‰‹æ®µè®©æœåŠ¡å¯¹äºç”¨æˆ·æ¥è¯´çœ‹åˆ°çš„éƒ½æ˜¯åŒä¸€ä¸ªï¼Œè¿™æ ·å½“ä¸€å°æœåŠ¡å™¨å¤¯æœºè‡³å°‘è¿˜æœ‰å…¶ä»–çš„æœåŠ¡å™¨æä¾›ç›¸åŒçš„åº”ç”¨ã€‚</p>
<p>ä½†æ˜¯ï¼Œå½“ä¼ä¸šçº§æœåŠ¡å˜å¾—è¶Šæ¥è¶Šå¤æ‚çš„æ—¶å€™ï¼Œé¡¹ç›®å˜å¾—è¶Šæ¥è¶Šåºå¤§ï¼Œæœ‰æ—¶ç”šè‡³å½±å“åˆ°äº†æœåŠ¡çš„éƒ¨ç½²ï¼Œè¿™ä¸ªæ—¶å€™å°±åº”è¯¥å°†åºå¤§çš„æœåŠ¡æ‹†åˆ†æˆå¤šä¸ªå­ç³»ç»Ÿï¼Œéƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œè¿™æ ·çš„æœåŠ¡å½“é­é‡é«˜å¹¶å‘è®¿é—®çš„æ—¶å€™ä¹Ÿèƒ½å¤Ÿå°†è¯·æ±‚å‹åŠ›åˆ†æ‘Šåˆ°å¤šä¸ªæœåŠ¡å™¨ä¸Šï¼Œè¿™å°±æ˜¯åˆ†å¸ƒå¼ã€‚</p>
<p>è€Œå½“ä¼ä¸šéœ€è¦å¼€å¯ä¸€ä¸ªæ–°çš„é¡¹ç›®æ—¶ï¼Œä¸ºäº†é¿å…é‡å¤é€ è½®å­ï¼Œå¾€å¾€ä¸€äº›å¯å¤ç”¨çš„æ¨¡å—ä¼šè¢«æ‹†åˆ†å‡ºæ¥ä½œä¸ºä¸€ä¸ªå¾®å°çš„ç³»ç»Ÿï¼Œå®ƒå¯ä»¥ç‹¬ç«‹çš„å¼€å‘ã€è®¾è®¡ã€è¿è¡Œå’Œè¿ç»´ï¼Œåªéœ€è¦ä½¿ç”¨ ESBä¼ä¸šæœåŠ¡æ€»çº¿å°†æ‰€æœ‰æœåŠ¡æ•´åˆå¹¶æä¾›ç»Ÿä¸€çš„è®¿é—®å…¥å£ï¼Œå°±èƒ½å¤Ÿå¤ç”¨ï¼Œè¿™å°±æ˜¯ SOAã€‚</p>
<p>è€Œå¾®æœåŠ¡æ˜¯å¯¹ä»¥ä¸ŠæœåŠ¡æ¶æ„çš„æœ€ç»ˆæ¼”è¿›ç»“æ„ï¼šå°†æœåŠ¡åˆ‡åˆ†æˆå¤šä¸ªå¾®å°çš„åº”ç”¨ï¼Œæä¾›ç»Ÿä¸€çš„æœåŠ¡è®¿é—®åè®®HTTP(SpringCloud)/TCP(Dubbo)ï¼Œå¼ºè°ƒè¿è¡Œæ—¶çš„åˆ†æ•£è§£è€¦ï¼Œåœ¨ä¸šåŠ¡ä¸Šä¹Ÿæœ‰ç€é«˜åº¦çš„æŠ½ç¦»ã€‚</p>
<blockquote>
<p><code>å¾®æœåŠ¡æ¶æ„é£æ ¼</code><strong>æ˜¯ä¸€ç§å°†<code>ä¸€ä¸ªå•ä¸€åº”ç”¨ç¨‹åº</code>å¼€å‘ä¸º<code>ä¸€ç»„å°å‹æœåŠ¡</code>çš„æ–¹æ³•ï¼Œæ¯ä¸ªæœåŠ¡è¿è¡Œåœ¨è‡ªå·±çš„è¿›ç¨‹ä¸­ï¼ŒæœåŠ¡é—´é€šä¿¡é‡‡ç”¨è½»é‡çº§é€šä¿¡æœºåˆ¶</strong>(é€šå¸¸ä½¿ç”¨HTTPèµ„æºAPI)ã€‚è¿™äº›<strong>æœåŠ¡å›´ç»•<code>ä¸šåŠ¡èƒ½åŠ›</code>æ„å»º</strong>ï¼Œå¹¶ä¸”å¯é€šè¿‡<strong>å…¨è‡ªåŠ¨éƒ¨ç½²æœºåˆ¶ç‹¬ç«‹éƒ¨ç½²</strong>ã€‚è¿™äº›æœåŠ¡å…±ç”¨ä¸€ä¸ª<strong>æœ€å°å‹çš„é›†ä¸­å¼çš„ç®¡ç†</strong>ï¼ŒæœåŠ¡å¯ç”¨ä¸åŒçš„è¯­è¨€å¼€å‘ï¼Œä½¿ç”¨ä¸åŒçš„<strong>æ•°æ®å­˜å‚¨æŠ€æœ¯</strong>ã€‚<br><img src="/blog/20191025/SpringCloudå¾®æœåŠ¡æ¶æ„å®è·µ/microservice.webp" alt><br>â€”â€” Martin Fowler</p>
</blockquote>
<p><strong>ä½†æ˜¯æ‹†åˆ†æˆè¿™ä¹ˆå¾®å°çš„å¾®æœåŠ¡ä¸€å®šä¼šç¢°åˆ°å„ç§å„æ ·çš„é—®é¢˜â€”â€”å¦‚ä½•æ‹†åˆ†ï¼ŸæœåŠ¡ä¹‹é—´å¦‚ä½•å‘ç°ï¼Ÿå¦‚ä½•æˆæƒï¼Ÿå¦‚ä½•åšè´Ÿè½½å‡è¡¡ï¼Ÿå¦‚ä½•ç®¡ç†å¤šæœåŠ¡é…ç½®ï¼Ÿå¦‚ä½•è·Ÿè¸ªè°ƒç”¨é“¾è·¯ï¼Ÿå¦‚ä½•å®æ—¶æŸ¥çœ‹æœåŠ¡çŠ¶æ€ç­‰ç­‰â€¦ â€¦ SpringCloud å°±æ˜¯ä»¥ä¸Šä¸€ç³»åˆ—é—®é¢˜çš„ Solverã€‚å®ƒæä¾›äº†ä¸€æ•´å¥—çš„è§£å†³æ–¹æ¡ˆï¼</strong></p>
<h4 id="SpringCloud"><a href="#SpringCloud" class="headerlink" title="SpringCloud"></a>SpringCloud</h4><p>é¦–å…ˆï¼ŒSpringCloud å¹¶ä¸æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œè€Œæ˜¯ä¸€ä¸ªå¾®æœåŠ¡çš„è§„èŒƒï¼Œæˆ–è€…è¯´æ˜¯ä¸€ä¸ªå¾®æœåŠ¡å·¥å…·é›†åˆã€‚</p>
<h5 id="SpringCloudç‰¹ç‚¹ï¼š"><a href="#SpringCloudç‰¹ç‚¹ï¼š" class="headerlink" title="SpringCloudç‰¹ç‚¹ï¼š"></a>SpringCloudç‰¹ç‚¹ï¼š</h5><ul>
<li>çº¦å®šå¤§äºé…ç½®ï¼ŒåŸºäº SpringBoot</li>
<li>å¼€å‘éƒ¨ç½²äºå„ç§ç¯å¢ƒï¼ŒAWSï¼Œé˜¿é‡Œäº‘ï¼ŒPC ç­‰</li>
<li>éšè—ç»„ä»¶å¤æ‚æ€§ï¼Œå£°æ˜å¼é…ç½®ï¼Œæ—  xml</li>
<li>å¼€ç®±å³ç”¨ï¼Œå¿«é€Ÿå¯åŠ¨</li>
<li>ä¸°å¯Œçš„è½»é‡çº§ç»„ä»¶</li>
<li>çµæ´»é€‰å‹ï¼Œå¦‚æ³¨å†Œå‘ç°å¯ç”¨ eurekaï¼Œzookeeper æˆ–è€… Redis</li>
</ul>
<h5 id="SpringCloud-å„ç‰ˆæœ¬ç»„ä»¶åŠç‰ˆæœ¬å…¼å®¹æ€§"><a href="#SpringCloud-å„ç‰ˆæœ¬ç»„ä»¶åŠç‰ˆæœ¬å…¼å®¹æ€§" class="headerlink" title="SpringCloud å„ç‰ˆæœ¬ç»„ä»¶åŠç‰ˆæœ¬å…¼å®¹æ€§"></a>SpringCloud å„ç‰ˆæœ¬ç»„ä»¶åŠ<a href="https://spring.io/projects/spring-cloud" target="_blank" rel="noopener">ç‰ˆæœ¬å…¼å®¹æ€§</a></h5><table>
<thead>
<tr>
<th>Component</th>
<th>Edgware.SR6</th>
<th>Greenwich.SR2</th>
<th>Greenwich.BUILD-SNAPSHOT</th>
</tr>
</thead>
<tbody>
<tr>
<td>spring-cloud-aws</td>
<td>1.2.4.RELEASE</td>
<td>2.1.2.RELEASE</td>
<td>2.1.3.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-bus</td>
<td>1.3.4.RELEASE</td>
<td>2.1.2.RELEASE</td>
<td>2.1.3.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-cli</td>
<td>1.4.1.RELEASE</td>
<td>2.0.0.RELEASE</td>
<td>2.0.1.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-commons</td>
<td>1.3.6.RELEASE</td>
<td>2.1.2.RELEASE</td>
<td>2.1.3.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-contract</td>
<td>1.2.7.RELEASE</td>
<td>2.1.2.RELEASE</td>
<td>2.1.3.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-config</td>
<td>1.4.7.RELEASE</td>
<td>2.1.3.RELEASE</td>
<td>2.1.4.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-netflix</td>
<td>1.4.7.RELEASE</td>
<td>2.1.2.RELEASE</td>
<td>2.1.3.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-security</td>
<td>1.2.4.RELEASE</td>
<td>2.1.3.RELEASE</td>
<td>2.1.4.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-cloudfoundry</td>
<td>1.1.3.RELEASE</td>
<td>2.1.2.RELEASE</td>
<td>2.1.3.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-consul</td>
<td>1.3.6.RELEASE</td>
<td>2.1.2.RELEASE</td>
<td>2.1.3.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-sleuth</td>
<td>1.3.6.RELEASE</td>
<td>2.1.1.RELEASE</td>
<td>2.1.2.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-stream</td>
<td>Ditmars.SR5</td>
<td>Fishtown.SR3</td>
<td>Fishtown.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-zookeeper</td>
<td>1.2.3.RELEASE</td>
<td>2.1.2.RELEASE</td>
<td>2.1.3.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-boot</td>
<td>1.5.21.RELEASE</td>
<td>2.1.5.RELEASE</td>
<td>2.1.8.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-task</td>
<td>1.2.4.RELEASE</td>
<td>2.1.2.RELEASE</td>
<td>2.1.3.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-vault</td>
<td>1.1.3.RELEASE</td>
<td>2.1.2.RELEASE</td>
<td>2.1.3.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-gateway</td>
<td>1.0.3.RELEASE</td>
<td>2.1.2.RELEASE</td>
<td>2.1.3.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-openfeign</td>
<td></td>
<td>2.1.2.RELEASE</td>
<td>2.1.3.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-function</td>
<td>1.0.2.RELEASE</td>
<td>2.0.2.RELEASE</td>
<td>2.0.3.BUILD-SNAPSHOT</td>
</tr>
</tbody>
</table>
<h3 id="SpringCloud-å…¨å®¶æ¡¶"><a href="#SpringCloud-å…¨å®¶æ¡¶" class="headerlink" title="SpringCloud å…¨å®¶æ¡¶"></a><a href="https://spring.io/projects/spring-cloud" target="_blank" rel="noopener">SpringCloud å…¨å®¶æ¡¶</a></h3><h4 id="spring-cloud-netflix"><a href="#spring-cloud-netflix" class="headerlink" title="spring-cloud-netflix"></a>spring-cloud-netflix</h4><h5 id="eureka-åŸç†ï¼š"><a href="#eureka-åŸç†ï¼š" class="headerlink" title="eureka åŸç†ï¼š"></a>eureka åŸç†ï¼š</h5><ul>
<li>æœåŠ¡å¯åŠ¨æ—¶ï¼Œè°ƒç”¨ eureka æ¥å£è¿›è¡Œæ³¨å†Œï¼ŒEureka Server ä¼šå­˜å‚¨è¿™äº›ä¿¡æ¯ï¼ŒIPã€ç«¯å£ã€å¾®æœåŠ¡åç§°ç­‰</li>
<li>å¾®æœåŠ¡å¯åŠ¨ä¹‹åï¼Œä¼šå‘¨æœŸæ€§çš„å‘é€å¿ƒè·³è¿›è¡Œâ€œç»­ç§Ÿâ€ï¼Œé»˜è®¤ 30 ç§’</li>
<li>å¦‚æœä¸€å®šæ—¶é—´æ²¡æœ‰â€œç»­ç§Ÿâ€ï¼Œé»˜è®¤ 90 ç§’ï¼Œå°±é”€æ¯å¾®æœåŠ¡å®ä¾‹</li>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼ŒEureka Server ä¹Ÿæ˜¯ä¸€ä¸ª Eureka Clientï¼Œé›†ç¾¤ä¸‹ä¼šäº’ç›¸å¤åˆ¶æœåŠ¡æ³¨å†Œè¡¨ä¸­çš„ä¿¡æ¯è¿›è¡ŒåŒæ­¥</li>
<li>Eureka Client ä¼šç¼“å­˜æ³¨å†Œè¡¨çš„ä¿¡æ¯ï¼Œå‡å°‘Eureka Server çš„è¯·æ±‚å‹åŠ›ï¼Œä»¥åŠå®¹ç¾</li>
</ul>
<h4 id="spring-cloud-openfeign"><a href="#spring-cloud-openfeign" class="headerlink" title="spring-cloud-openfeign"></a>spring-cloud-openfeign</h4><h4 id="spring-cloud-zuul-å¾®æœåŠ¡ç½‘å…³"><a href="#spring-cloud-zuul-å¾®æœåŠ¡ç½‘å…³" class="headerlink" title="spring-cloud-zuul å¾®æœåŠ¡ç½‘å…³"></a>spring-cloud-zuul å¾®æœåŠ¡ç½‘å…³</h4><h4 id="spring-cloud-config-é…ç½®ä¸­å¿ƒ"><a href="#spring-cloud-config-é…ç½®ä¸­å¿ƒ" class="headerlink" title="spring-cloud-config é…ç½®ä¸­å¿ƒ"></a>spring-cloud-config é…ç½®ä¸­å¿ƒ</h4><h2 id="é¡¹ç›®åˆ›å»ºçš„ç›®çš„ï¼Ÿ"><a href="#é¡¹ç›®åˆ›å»ºçš„ç›®çš„ï¼Ÿ" class="headerlink" title="é¡¹ç›®åˆ›å»ºçš„ç›®çš„ï¼Ÿ"></a>é¡¹ç›®åˆ›å»ºçš„ç›®çš„ï¼Ÿ</h2><p>ç¬¬ä¸€ä¸ªç›®çš„æ˜¯ä¸ºäº†æœ¬äººèƒ½å¤Ÿç†Ÿæ‚‰å’Œå­¦ä¹  Spring-Cloud ç›¸å…³çŸ¥è¯†ï¼Œä¸è¿‡åœ¨åšäº†ä¸€æ®µæ—¶é—´ä¹‹åè¿˜æ˜¯å¸Œæœ›èƒ½å¤Ÿåˆ†äº«å‡ºæ¥è®©æ›´å¤šçš„åŒå­¦ä¸€èµ·å­¦ä¹ å’Œè®¨è®ºã€‚</p>
<h2 id="é¡¹ç›®ç»“æ„å¦‚ä½•ï¼Ÿ"><a href="#é¡¹ç›®ç»“æ„å¦‚ä½•ï¼Ÿ" class="headerlink" title="é¡¹ç›®ç»“æ„å¦‚ä½•ï¼Ÿ"></a>é¡¹ç›®ç»“æ„å¦‚ä½•ï¼Ÿ</h2><ul>
<li>scaffold-business <a href="#">ä¸šåŠ¡æœåŠ¡æä¾›è€…</a> ç«¯å£ä»8850 - 8860<ul>
<li>scaffold-business-sys-service <a href="#">ç³»ç»Ÿä¸šåŠ¡å¾®æœåŠ¡-ä¸šåŠ¡æ¨¡å—</a> ç«¯å£ 8850</li>
<li>scaffold-business-job-service <a href="#">å®šæ—¶ä»»åŠ¡å¾®æœåŠ¡-ä¸šåŠ¡æ¨¡å—</a> ç«¯å£ 8851</li>
<li>scaffold-business-thirdparty-service <a href="#">ç¬¬ä¸‰æ–¹ä¸šåŠ¡å¾®æœåŠ¡-ä¸šåŠ¡æ¨¡å—</a> ç«¯å£ 8852</li>
</ul>
</li>
<li>scaffold-business-api <a href="#">ä¸šåŠ¡APIåŒ… ç”¨äºæ¥å£ä¸å®ç°åˆ†ç¦»</a><ul>
<li>scaffold-business-sys-api <a href="#">ç³»ç»Ÿèµ„æºã€èœå•ã€æƒé™ç­‰APIå°è£…</a></li>
<li>scaffold-business-job-api <a href="#">å®šæ—¶ä»»åŠ¡APIå°è£…</a></li>
<li>scaffold-business-thirdparty-api <a href="#">ç¬¬ä¸‰æ–¹æœåŠ¡APIå°è£…</a></li>
</ul>
</li>
<li>scaffold-core <a href="#">å·¥å…·ç±»ä»¥åŠå„ç§å…¬å…±ä»£ç </a><ul>
<li>scaffold-core-code <a href="#">æ¯ä¸ªæ¨¡å—éƒ½ä¼šç”¨åˆ°çš„å…¬å…±ä»£ç ï¼ŒBeanï¼Œconfigç­‰</a></li>
<li>scaffold-core-common <a href="#">å·¥å…·ç±»æ¨¡å—ï¼Œå…¬å…±ä»£ç </a></li>
<li>scaffold-core-plugin <a href="#">è‡ªåŠ¨ä»£ç ç”Ÿæˆæ’ä»¶æ¨¡å—</a></li>
</ul>
</li>
<li>scaffold-eureka <a href="#">æ³¨å†Œä¸­å¿ƒEureka</a> ç«¯å£ 8761 - 8771</li>
<li>scaffold-zuul <a href="#">ç½‘å…³æœåŠ¡</a> ç«¯å£ 8861 - 8870</li>
<li>scaffold-config-server <a href="#">é…ç½®æœåŠ¡ç«¯æœåŠ¡</a> ç«¯å£ 8871 - 8881</li>
<li>scaffold-config-client <a href="#">é…ç½®å®¢æˆ·ç«¯æœåŠ¡</a> ç«¯å£ 8880 - 8891</li>
<li>scaffold-tx-manager <a href="#">åˆ†å¸ƒå¼äº‹åŠ¡åè°ƒæœåŠ¡</a> ç«¯å£7970 </li>
<li>scaffold-feign <a href="#">Feignæ¨¡å—</a><ul>
<li>scaffold-feign-sys <a href="#">feign-sysæ¨¡å—</a></li>
<li>scaffold-feign-job <a href="#">feign-jobæ¨¡å—</a></li>
<li>scaffold-feign-thirdparty <a href="#">feign-thirdpartyæ¨¡å—</a></li>
</ul>
</li>
<li>scaffold-route <a href="#">ä¸»ä¸šåŠ¡æ¶ˆè´¹è€…</a> ç«¯å£ä»8750 - 8760<ul>
<li>scaffold-route-operate <a href="#">åå°ç®¡ç†æ¥å£åŠé¡µé¢</a> ç«¯å£ 8750</li>
<li>scaffold-route-app <a href="#">APPå®¢æˆ·ç«¯æ¥å£</a> ç«¯å£ 8751</li>
</ul>
</li>
</ul>
<h2 id="å¦‚ä½•å¿«é€Ÿå¼€å§‹ï¼Ÿ"><a href="#å¦‚ä½•å¿«é€Ÿå¼€å§‹ï¼Ÿ" class="headerlink" title="å¦‚ä½•å¿«é€Ÿå¼€å§‹ï¼Ÿ"></a>å¦‚ä½•å¿«é€Ÿå¼€å§‹ï¼Ÿ</h2><h3 id="1-æœ¬åœ°ç›´æ¥å¯åŠ¨"><a href="#1-æœ¬åœ°ç›´æ¥å¯åŠ¨" class="headerlink" title="1. æœ¬åœ°ç›´æ¥å¯åŠ¨"></a>1. æœ¬åœ°ç›´æ¥å¯åŠ¨</h3><ul>
<li><p>ä¸‹è½½/å…‹éš†é¡¹ç›®åˆ°æœ¬åœ° </p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line">git clone https:<span class="comment">//github.com/Fatezhang/scaffold-cloud</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å®‰è£…MySqlæ•°æ®åº“å¹¶å¯åŠ¨</p>
</li>
<li>åˆ›å»ºæ•°æ®åº“scaffold_cloud_base å’Œ tx_manager</li>
<li>ä¿®æ”¹ scaffold-cloud ä¸­å¾®æœåŠ¡çš„æ•°æ®åº“é“¾æ¥é…ç½®ï¼Œæœ¬åœ°è¿è¡Œåªéœ€è¦ä¿®æ”¹application-local.yml</li>
<li>å®‰è£…redisæœåŠ¡å¹¶å¯åŠ¨ï¼Œä¿®æ”¹scaffold-core-codeé…ç½®æ–‡ä»¶ä¸­çš„é…ç½®ï¼ŒåŒæ ·åªéœ€è¦ä¿®æ”¹localä¸­çš„</li>
<li>å®‰è£…Rocket MQæœåŠ¡ï¼ŒåŒæ ·ä¿®æ”¹é…ç½®</li>
<li>å¦‚æœæœ‰éœ€è¦ï¼Œæ³¨å†Œé˜¿é‡ŒOSSï¼Œå¹¶ä¿®æ”¹é…ç½®ä¸­çš„é…ç½®</li>
<li>å¯åŠ¨EurekaApplicationæ³¨å†Œä¸­å¿ƒ</li>
<li>å¯åŠ¨TxlcnApplicationåˆ†å¸ƒå¼äº‹åŠ¡åè°ƒæœåŠ¡</li>
<li>å¯åŠ¨SysServiceApplicationï¼ŒåŠ è½½æ•°æ®åº“å­—å…¸ç­‰é…ç½®åˆ°ç¼“å­˜ã€æä¾›åå°ç®¡ç†å¾®æœåŠ¡ï¼ˆæƒé™ã€æ“ä½œå‘˜ã€è§’è‰²ã€å›½é™…åŒ–é…ç½®ç­‰ï¼‰</li>
<li>å¯åŠ¨RouteOperateApplicationæœåŠ¡ï¼Œé»˜è®¤ç«¯å£ä¸º8750</li>
<li>è®¿é—®<a href="http://localhost:8750/ÃŸÃŸ" target="_blank" rel="noopener">http://localhost:8750/ÃŸÃŸ</a></li>
<li>é»˜è®¤è´¦å·å¯†ç ä¸ºadmin/admin123</li>
</ul>
<h3 id="2-ä½¿ç”¨-docker-éƒ¨ç½²"><a href="#2-ä½¿ç”¨-docker-éƒ¨ç½²" class="headerlink" title="2. ä½¿ç”¨ docker éƒ¨ç½²"></a>2. ä½¿ç”¨ docker éƒ¨ç½²</h3><h4 id="docker-å¯åŠ¨-Linux-æˆ–è€…-Mac-ä¸‹ä½¿ç”¨å¦‚ä¸‹è„šæœ¬-Windows-ç¯å¢ƒè‡ªè¡ŒæŒ‰ç…§è„šæœ¬ä¸­çš„ç¤ºä¾‹æ‰§è¡Œ"><a href="#docker-å¯åŠ¨-Linux-æˆ–è€…-Mac-ä¸‹ä½¿ç”¨å¦‚ä¸‹è„šæœ¬-Windows-ç¯å¢ƒè‡ªè¡ŒæŒ‰ç…§è„šæœ¬ä¸­çš„ç¤ºä¾‹æ‰§è¡Œ" class="headerlink" title="docker å¯åŠ¨ : Linux æˆ–è€… Mac ä¸‹ä½¿ç”¨å¦‚ä¸‹è„šæœ¬, Windows ç¯å¢ƒè‡ªè¡ŒæŒ‰ç…§è„šæœ¬ä¸­çš„ç¤ºä¾‹æ‰§è¡Œ"></a>docker å¯åŠ¨ : Linux æˆ–è€… Mac ä¸‹ä½¿ç”¨å¦‚ä¸‹è„šæœ¬, Windows ç¯å¢ƒè‡ªè¡ŒæŒ‰ç…§è„šæœ¬ä¸­çš„ç¤ºä¾‹æ‰§è¡Œ</h4><h4 id="mvn-clean-package-docker-build-Pdocker"><a href="#mvn-clean-package-docker-build-Pdocker" class="headerlink" title="mvn clean package docker:build -Pdocker"></a><code>mvn clean package docker:build -Pdocker</code></h4><pre><code>1. è¿›å…¥é¡¹ç›®æ‰€åœ¨ç›®å½•
2. æ‰§è¡Œ `./.scripts/recreate-docker-image.sh` åˆ›å»º docker é•œåƒ
3. æ‰§è¡Œ `./.scripts/start-docker-service.sh` å³ä½¿ç”¨ docker-compose å¯åŠ¨
</code></pre><h2 id="é¡¹ç›®æœªæ¥è¿˜éœ€è¦åšä»€ä¹ˆï¼Ÿ"><a href="#é¡¹ç›®æœªæ¥è¿˜éœ€è¦åšä»€ä¹ˆï¼Ÿ" class="headerlink" title="é¡¹ç›®æœªæ¥è¿˜éœ€è¦åšä»€ä¹ˆï¼Ÿ"></a>é¡¹ç›®æœªæ¥è¿˜éœ€è¦åšä»€ä¹ˆï¼Ÿ</h2><ul>
<li>æ›´æ”¹é¡¹ç›®æ³¨å†Œå‘ç°ä¸­å¿ƒï¼Œä¹Ÿè®¸ç”¨ nacos æˆ–è€… zookeeper</li>
<li>åŠ å…¥æ›´å¤š spring-cloud å‘¨è¾¹æœåŠ¡ï¼ŒåŒ…æ‹¬å„ç§ç›‘æ§å¹³å°ç­‰</li>
<li>CI/CD ä½¿ç”¨ Jenkins æˆ–è€… BuildKite</li>
<li>ä½¿ç”¨ docker å®¹å™¨åŒ–éƒ¨ç½²</li>
<li>ElasticSearch æ—¥å¿—æ”¶é›†</li>
<li><a href="https://github.com/xuxueli/xxl-job" target="_blank" rel="noopener">xxl-job</a> åˆ†å¸ƒå¼å®šæ—¶ä»»åŠ¡ <a href="https://www.xuxueli.com/xxl-job/" target="_blank" rel="noopener">https://www.xuxueli.com/xxl-job/</a></li>
<li>æ•´åˆ<a href="https://github.com/justauth/JustAuth" target="_blank" rel="noopener">ç¬¬ä¸‰æ–¹å¼€æºåº“</a>ç”¨ä»¥ç™»å½•ã€æ”¯ä»˜ç­‰</li>
<li>æœ€åï¼Œå®é™…å¼€å‘ä¸€äº›ä¸šåŠ¡åŠŸèƒ½</li>
</ul>
<hr>
<h4 id="å‚è€ƒï¼š"><a href="#å‚è€ƒï¼š" class="headerlink" title="å‚è€ƒï¼š"></a>å‚è€ƒï¼š</h4><blockquote>
<p><a href="https://juejin.im/post/5c28f2fe51882565a15776fb" target="_blank" rel="noopener">https://juejin.im/post/5c28f2fe51882565a15776fb</a></p>
<p><a href="https://juejin.im/post/5de740566fb9a0165721b744" target="_blank" rel="noopener">https://juejin.im/post/5de740566fb9a0165721b744</a></p>
<p><a href="https://juejin.im/post/5dc220126fb9a04aa660dcfb" target="_blank" rel="noopener">https://juejin.im/post/5dc220126fb9a04aa660dcfb</a></p>
</blockquote>
]]></content>
      <categories>
        <category>SpringCloud</category>
      </categories>
      <tags>
        <tag>SpringCloud</tag>
        <tag>å¾®æœåŠ¡</tag>
        <tag>åˆ†å¸ƒå¼</tag>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>æˆ‘é¡¹ç›®ä¸­ä½¿ç”¨çš„åˆ†å¸ƒå¼äº‹åŠ¡ï¼šLCN</title>
    <url>/blog/20191020/%E6%88%91%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%BF%E7%94%A8%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%EF%BC%9ALCN/</url>
    <content><![CDATA[<p><img src="/blog/20191020/æˆ‘é¡¹ç›®ä¸­ä½¿ç”¨çš„åˆ†å¸ƒå¼äº‹åŠ¡ï¼šLCN/tx.png" alt="å®˜ç½‘é¦–é¡µ"></p>
<center><a href="#more2">å…¶ä»–å…³äºåˆ†å¸ƒå¼äº‹åŠ¡çš„æ€»ç»“æ•´ç†</a></center>


<a id="more"></a>
<h4 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h4><p>ç”±äºå…¬å¸é¡¹ç›®æ˜¯ä½¿ç”¨dubboè¿›è¡Œå¼€å‘çš„åˆ†å¸ƒå¼æœåŠ¡ï¼Œæ‰€ä»¥é¡¹ç›®ä¸­æœ‰å¾ˆå¤šæ¶‰åŠåˆ°åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜çš„åœºæ™¯ã€‚æ¯”å¦‚æœ‰ä¸¤ä¸ªæ¨¡å—ï¼šç”¨æˆ·æ¨¡å—å’Œè´¦æˆ·èµ„é‡‘æ¨¡å—ã€‚æœ‰ä¸€ä¸ªåœºæ™¯æ˜¯ç”¨æˆ·è¢«é‚€è¯·æˆä¸ºç³»ç»Ÿçš„æ–°ç”¨æˆ·ï¼Œéœ€è¦å…ˆåˆå§‹åŒ–ç”¨æˆ·ä¿¡æ¯ï¼Œç„¶åå†å»è´¦æˆ·èµ„é‡‘æ¨¡å—åˆå§‹åŒ–ç”¨æˆ·è´¦æˆ·ä¿¡æ¯ã€‚ä¸¤ä¸ªä¸åŒçš„æ¨¡å—ä¸ºä¸¤ä¸ªä¸åŒçš„RPCæœåŠ¡ï¼Œåˆ†åˆ«è¢«è°ƒç”¨ç„¶åæ’å…¥æ•°æ®ï¼Œè¿™æ—¶å€™å¦‚æœè´¦æˆ·èµ„é‡‘æ’å…¥å¤±è´¥ï¼Œä¸åŠ å…¥åˆ†å¸ƒå¼äº‹åŠ¡çš„è¯ç”¨æˆ·ç›´æ¥åˆå§‹åŒ–æˆåŠŸã€‚æˆ‘ä»¬å¸Œæœ›è¿™ç§æƒ…å†µä¸‹ç”¨æˆ·æ’å…¥çš„ä¿¡æ¯è¢«å›æ»šï¼Œæ‰€ä»¥éœ€è¦å¼•å…¥åˆ†å¸ƒå¼äº‹åŠ¡æ¥è¿›è¡Œä¸šåŠ¡å¤„ç†ã€‚</p>
<h4 id="ä½¿ç”¨çš„æ¡†æ¶"><a href="#ä½¿ç”¨çš„æ¡†æ¶" class="headerlink" title="ä½¿ç”¨çš„æ¡†æ¶"></a>ä½¿ç”¨çš„æ¡†æ¶</h4><p>ç»è¿‡è°ƒç ”ï¼Œæˆ‘ä»¬å‘ç°TX-LCNæ¡†æ¶æ¯”è¾ƒé€‚åˆæˆ‘ä»¬çš„ä¸šåŠ¡åœºæ™¯ï¼Œæˆ‘ä»¬æ‰“ç®—å¼•å…¥å¹¶ä½¿ç”¨LCNäº‹åŠ¡æ¨¡å¼æ¥è¿›è¡ŒæœåŠ¡ä¸­çš„åˆ†å¸ƒå¼äº‹åŠ¡çš„ä¸šåŠ¡å¤„ç†ã€‚å…³äºLCNã€TCCã€TXCå‡ ç§äº‹åŠ¡æ¨¡å¼çš„åŒºåˆ«åœ¨<a href="#more2">ä¸‹é¢</a>æ•´ç†ã€‚</p>
<p>åœ¨<a href="https://www.txlcn.org/zh-cn/index.html" target="_blank" rel="noopener">å®˜ç½‘</a>ä¸‹è½½å¯¹åº”çš„æœåŠ¡ï¼Œå¹¶å¼•å…¥é¡¹ç›®æˆ–è€…å•ç‹¬å¯åŠ¨ï¼š</p>
<p><img src="/blog/20191020/æˆ‘é¡¹ç›®ä¸­ä½¿ç”¨çš„åˆ†å¸ƒå¼äº‹åŠ¡ï¼šLCN/tx.png" alt="å®˜ç½‘é¦–é¡µ"></p>
<p>å¼•å…¥ä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.codingapi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>transaction-dubbo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;lcn.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.codingapi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tx-plugins-db<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;lcn.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ï¼š</p>
<p>åœ¨æœåŠ¡çš„å‘èµ·æ–¹ä½¿ç”¨æ³¨è§£<code>@TxTransaction(isStart = true)</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="meta">@TxTransaction</span>(isStart = <span class="keyword">true</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ExperienceLogVO <span class="title">doUseExperience</span><span class="params">(Long userId, Long experienceRecordId, ExperienceLogCreateModel createModel)</span> </span>&#123;</span><br><span class="line"> 	<span class="comment">// ... do something  ...</span></span><br><span class="line">    userFacade.insert();</span><br><span class="line"> 	<span class="comment">// ... do something  ...</span></span><br><span class="line">    accountFacede.insert();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨æœåŠ¡çš„å‚ä¸æ–¹ä½¿ç”¨æ³¨è§£<code>@TxTransaction</code>æ ‡è¯†å³å¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@TxTransaction</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">insert</span><span class="params">()</span></span>&#123;</span><br><span class="line"> 	<span class="comment">// ... do something  ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åå†å¯åŠ¨é¡¹ç›®ä¹‹å‰ï¼Œå…ˆå¯åŠ¨tx-manageræœåŠ¡ï¼Œä½œä¸ºåè°ƒè€…çš„è§’è‰²å­˜åœ¨ï¼Œç„¶åå¯åŠ¨é¡¹ç›®ï¼Œè°ƒç”¨æ¥å£çš„æ—¶å€™å°±å¯ä»¥ä½¿ç”¨åˆ†å¸ƒå¼äº‹åŠ¡äº†ã€‚</p>
<p><a id="more2" class="active"></a></p>
<h4 id="å…¶ä»–å…³äºåˆ†å¸ƒå¼äº‹åŠ¡çš„æ€»ç»“æ•´ç†"><a href="#å…¶ä»–å…³äºåˆ†å¸ƒå¼äº‹åŠ¡çš„æ€»ç»“æ•´ç†" class="headerlink" title="å…¶ä»–å…³äºåˆ†å¸ƒå¼äº‹åŠ¡çš„æ€»ç»“æ•´ç†"></a>å…¶ä»–å…³äºåˆ†å¸ƒå¼äº‹åŠ¡çš„æ€»ç»“æ•´ç†</h4><h5 id="å…³äºTx-LCN-å®˜ç½‘æ–‡æ¡£"><a href="#å…³äºTx-LCN-å®˜ç½‘æ–‡æ¡£" class="headerlink" title="å…³äºTx-LCN - å®˜ç½‘æ–‡æ¡£"></a>å…³äºTx-LCN - <a href="https://www.txlcn.org/zh-cn/docs/preface.html" target="_blank" rel="noopener">å®˜ç½‘æ–‡æ¡£</a></h5><p>Tx-LCNæ—©æœŸæ˜¯ä¸ºäº†è®¾è®¡å‡ºLCNåˆ†å¸ƒå¼äº‹åŠ¡è€Œå‘½åçš„ï¼Œä¸è¿‡åœ¨5.0ä¹‹åå¯ä»¥æ”¯æŒLCNã€TXCã€TCCä¸‰ç§åˆ†å¸ƒå¼äº‹åŠ¡æ¨¡å¼ã€‚LCNæ¡†æ¶å®šä½ä¸º<code>ä¸ç”Ÿäº§äº‹åŠ¡ï¼Œåªåšäº‹åŠ¡çš„æ¬è¿å·¥</code>ã€‚å³TX-LCNæ˜¯ä¸€æ¬¾äº‹åŠ¡åè°ƒæ¡†æ¶ï¼Œæœ¬èº«å¹¶ä¸æ“ä½œäº‹åŠ¡ï¼Œåªæ˜¯åŸºäºå¯¹äº‹åŠ¡çš„åè°ƒä»è€Œè¾¾åˆ°äº‹åŠ¡ä¸€è‡´æ€§çš„æ•ˆæœã€‚</p>
<p>æœ€æ–°ç‰ˆæœ¬çš„TX-LCNåŒæ—¶æ”¯æŒå¤šç§äº‹åŠ¡æ¨¡å¼ã€‚å¹¶æ”¯æŒå¤šç§ä¸åŒçš„æ•°æ®æºåŒæ—¶ä½¿ç”¨åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œå®Œå…¨è¾¾åˆ°æ‹”æ’æ•ˆæœã€‚ä»¥ä¸‹æ˜¯ä¸‰ç§äº‹åŠ¡æ¨¡å¼çš„ä»‹ç»ã€åŒºåˆ«åŠä¼˜ç¼ºç‚¹ã€‚</p>
<h6 id="LCNäº‹åŠ¡æ¨¡å¼"><a href="#LCNäº‹åŠ¡æ¨¡å¼" class="headerlink" title="LCNäº‹åŠ¡æ¨¡å¼"></a>LCNäº‹åŠ¡æ¨¡å¼</h6><ul>
<li>ä»…ä»…ä½œä¸ºäº‹åŠ¡çš„åè°ƒè€…ï¼Œæœ¬èº«ä¸ç”Ÿäº§äº‹åŠ¡ã€‚åŸç†æ˜¯åœ¨äº‹åŠ¡å‘èµ·æ–¹åˆ›å»ºäº‹åŠ¡åˆ†ç»„ï¼Œå¹¶é€šè¿‡Http/Tcpåè®®è°ƒç”¨çš„æ—¶å€™å°†äº‹åŠ¡åˆ†ç»„ä¼ é€’åˆ°äº‹åŠ¡å‚ä¸æ–¹ã€‚äº‹åŠ¡å‚ä¸æ–¹çš„æœ¬åœ°äº‹åŠ¡æ‰§è¡ŒæˆåŠŸä¹‹åï¼Œæ ¹æ®äº‹åŠ¡åˆ†ç»„IDé€šçŸ¥äº‹åŠ¡çš„å‘èµ·æ–¹æäº¤æ‰€æœ‰äº‹åŠ¡ã€‚åœ¨å…¨éƒ¨äº‹åŠ¡æˆåŠŸé€šçŸ¥ä¹‹å‰ï¼Œå…¶å„ä¸ªæœ¬åœ°äº‹åŠ¡å‡ä¸ºå‡å…³é—­ï¼Œç­‰å¾…TxManageråè°ƒå®Œæˆäº‹åŠ¡ä¹‹åå†å…³é—­è¿æ¥ã€‚</li>
<li>LCNäº‹åŠ¡å¯¹äºä»£ç å‡ ä¹æ²¡æœ‰åµŒå…¥æ€§ï¼Œåªéœ€è¦æ·»åŠ æ³¨è§£å³å¯å®ç°åˆ†å¸ƒå¼äº‹åŠ¡ã€‚</li>
<li>LCNçš„äº‹åŠ¡æäº¤ä¸å›æ»šéƒ½æœ‰æœ¬åœ°äº‹åŠ¡ä¿éšœï¼Œæ›´å®‰å…¨çš„ç¡®ä¿æ•°æ®ä¸€è‡´æ€§ã€‚</li>
<li>ä½†æ˜¯LCNä»…é™äºå­˜åœ¨æœ¬åœ°äº‹åŠ¡å¹¶ä¸”å¯ä»¥é€šè¿‡è¿æ¥å¯¹è±¡æ§åˆ¶äº‹åŠ¡æ¨¡å—çš„ç³»ç»Ÿã€‚</li>
<li>LCNæ¨¡å¼ä¾èµ–äºè¿æ¥ä»£ç†æœåŠ¡ï¼Œäº‹åŠ¡çš„å‘èµ·æ–¹ä¸å‚ä¸æ–¹è¦ä¸€èµ·è¿æ¥ä¸é‡Šæ”¾ï¼Œè¾ƒè€—æ€§èƒ½ã€‚</li>
<li><img src="/blog/20191020/æˆ‘é¡¹ç›®ä¸­ä½¿ç”¨çš„åˆ†å¸ƒå¼äº‹åŠ¡ï¼šLCN/LCN1.png" alt="æƒ…å†µ1"></li>
<li><img src="/blog/20191020/æˆ‘é¡¹ç›®ä¸­ä½¿ç”¨çš„åˆ†å¸ƒå¼äº‹åŠ¡ï¼šLCN/LCN2.png" alt="æƒ…å†µ1"></li>
<li><img src="/blog/20191020/æˆ‘é¡¹ç›®ä¸­ä½¿ç”¨çš„åˆ†å¸ƒå¼äº‹åŠ¡ï¼šLCN/LCN3.png" alt="æƒ…å†µ1"><h6 id="TCCäº‹åŠ¡æ¨¡å¼"><a href="#TCCäº‹åŠ¡æ¨¡å¼" class="headerlink" title="TCCäº‹åŠ¡æ¨¡å¼"></a>TCCäº‹åŠ¡æ¨¡å¼</h6></li>
<li>TCCäº‹åŠ¡æ¨¡å¼ä¸ä¾èµ–äºèµ„æºç®¡ç†å™¨å¯¹äºXAçš„æ”¯æŒï¼Œè€Œæ˜¯é€šè¿‡ä¸šåŠ¡ç³»ç»Ÿæä¾›çš„ä¸šåŠ¡é€»è¾‘çš„è°ƒåº¦æ¥å®ç°åˆ†å¸ƒå¼äº‹åŠ¡ã€‚å³ç¼–å†™ä¸‰æ­¥æ“ä½œï¼šTryï¼šå°è¯•æ‰§è¡Œä¸šåŠ¡ï¼ˆå…ˆæ’å…¥ä¸€æ¡æ•°æ®ï¼ŒçŠ¶æ€ä¸ºTryï¼‰ã€Confrimï¼šç¡®è®¤æ‰§è¡Œä¸šåŠ¡ï¼ˆæˆåŠŸåçŠ¶æ€æ”¹ä¸ºConfrimï¼‰ã€Cancelï¼šå–æ¶ˆæ‰§è¡Œä¸šåŠ¡ï¼ˆéœ€è¦å›æ»šçš„è¯æ ¹æ®å‰ä¸¤ä¸ªæ­¥éª¤çš„idç»§ç»­æ›´æ”¹çŠ¶æ€æˆ–è€…åˆ é™¤æ•°æ®ï¼‰ã€‚</li>
<li>TCCæ¨¡å¼å¯¹äºä»£ç çš„ä¾µå…¥æ€§å¾ˆé«˜ï¼ŒåŸºæœ¬ä¸Šä¸€ä¸ªæ¥å£éœ€è¦æ‹†åˆ†æˆ3ä¸ªï¼Œå¯¹äºç¨‹åºå‘˜çš„ç¼–ç è¦æ±‚å¾ˆé«˜ï¼Œä¸šåŠ¡çš„æ­£ç¡®æ€§ã€æ•°æ®ä¸€è‡´æ€§éƒ½ç”±å¼€å‘è€…æ¥ä¿è¯</li>
<li>ä¼˜ç‚¹æ˜¯TCCæ¨¡å¼å¯¹äºæœ‰æ— æœ¬åœ°äº‹åŠ¡çš„åœºæ™¯éƒ½é€‚ç”¨ï¼Œç”šè‡³å¯ä»¥è·¨æ•°æ®æºï¼Œé’ˆå¯¹MySQLã€redisã€Mongoç­‰æ•´åˆæˆä¸€ä¸ªå¤§çš„äº‹åŠ¡<h6 id="TXCäº‹åŠ¡æ¨¡å¼"><a href="#TXCäº‹åŠ¡æ¨¡å¼" class="headerlink" title="TXCäº‹åŠ¡æ¨¡å¼"></a>TXCäº‹åŠ¡æ¨¡å¼</h6></li>
<li>å…¶æ¥æºäºé˜¿é‡Œå·´å·´çš„ä¸€ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡ä¸­é—´ä»¶ï¼Œå¯ä»¥é€šè¿‡æå°‘é‡çš„ä»£ç ä¾µå…¥ï¼Œå®ç°åˆ†å¸ƒå¼äº‹åŠ¡ã€‚åŸç†æ˜¯åœ¨æ‰§è¡ŒSQLä¹‹å‰ï¼Œå…ˆæŸ¥è¯¢SQLçš„å½±å“æ•°æ®ï¼Œç„¶åä¿å­˜æ‰§è¡Œçš„SQLå¿«ç…§ä¿¡æ¯å¹¶åˆ›å»ºé”ã€‚å½“éœ€è¦å›æ»šçš„æ—¶å€™å°±é‡‡ç”¨è¿™äº›è®°å½•å›æ»šæ•°æ®åº“ã€‚ç›®å‰å®ç°é”ä½¿ç”¨çš„æ˜¯redisåˆ†å¸ƒå¼é”æ§åˆ¶ã€‚</li>
<li>TXCäº‹åŠ¡æ¨¡å¼åŒæ ·å¯¹ä»£ç çš„ä¾µå…¥æ€§ä½</li>
<li>è¯¥æ¨¡å¼ä»…é™äºå¯¹æ”¯æŒSQLæ–¹å¼çš„æ¨¡å—æ”¯æŒ</li>
<li>è¯¥æ¨¡å¼ç”±äºæ¯æ¬¡æ‰§è¡ŒSQLä¹‹å‰éœ€è¦å…ˆæŸ¥è¯¢å½±å“æ•°æ®ï¼Œå› æ­¤ç›¸æ¯”LCNæ¨¡å¼æ›´æ¶ˆè€—æ€§èƒ½</li>
<li>TXCäº‹åŠ¡æ¨¡å¼ä¸ä¼šå ç”¨æ•°æ®åº“èµ„æº</li>
<li>å…³äºTXCäº‹åŠ¡çš„è¯¦ç»†ä»‹ç»å¯ä»¥æŸ¥çœ‹<a href="https://blog.csdn.net/m0_38110132/article/details/77043580" target="_blank" rel="noopener">è¿™ç¯‡åšå®¢</a></li>
</ul>
<h5 id="CAPç†è®ºå’ŒBASEç†è®º"><a href="#CAPç†è®ºå’ŒBASEç†è®º" class="headerlink" title="CAPç†è®ºå’ŒBASEç†è®º"></a>CAPç†è®ºå’ŒBASEç†è®º</h5><h6 id="CAPç†è®º"><a href="#CAPç†è®º" class="headerlink" title="CAPç†è®º"></a>CAPç†è®º</h6><p>CAPç†è®ºå³æ•°æ®ä¸€è‡´æ€§ã€æœåŠ¡å¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§çš„ç®€ç§°ã€‚</p>
<ul>
<li>Consistency æ•°æ®ä¸€è‡´æ€§ï¼šä¸€æ¬¡å®Œæ•´çš„æ›´æ–°æ“ä½œï¼Œæ‰€æœ‰èŠ‚ç‚¹åœ¨åŒä¸€æ—¶åˆ»è®¿é—®åˆ°çš„æ•°æ®æ˜¯ä¸€è‡´çš„</li>
<li>Availability æœåŠ¡å¯ç”¨æ€§ï¼šæœåŠ¡ä¸€ç›´å¯ç”¨ï¼Œå¹¶ä¸”æ˜¯æ­£å¸¸å“åº”æ—¶é—´</li>
<li>Partition tolerance åˆ†åŒºå®¹é”™æ€§ï¼šåˆ†å¸ƒå¼å¤šèŠ‚ç‚¹åœ¨æŸå‡ ä¸ªèŠ‚ç‚¹æŒ‚æ‰åä»ç„¶å¯ä»¥å¯¹å¤–æä¾›æ­£å¸¸çš„æœåŠ¡</li>
</ul>
<p>äº‹å®ä¸Šï¼ŒCAPè¿™ä¸‰ç§å¹¶æ— æ³•ä¿è¯å®Œå…¨æ»¡è¶³ï¼Œä¸€èˆ¬åªèƒ½æ»¡è¶³å…¶äºŒã€‚å¯¹äºåˆ†å¸ƒå¼ç³»ç»Ÿæ¥è¯´ï¼Œåˆ†åŒºå®¹é”™æ€§æ˜¯æœ€åŸºæœ¬éœ€è¦æ»¡è¶³çš„æ¡ä»¶ï¼Œå¦åˆ™ä¸èƒ½ç§°ä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œåªæ»¡è¶³CA å…¶å®æ˜¯ä¼ ç»Ÿçš„å•æœºæœåŠ¡ã€‚é‚£ä¹ˆåœ¨æ»¡è¶³Pï¼ˆåˆ†åŒºå®¹é”™ï¼‰çš„æ—¶å€™ï¼Œå°±éœ€è¦åœ¨Cå’ŒAä¹‹é—´æƒè¡¡ã€‚äº‹å®ä¸Šï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿä¸‹ä¸€èˆ¬ä¼šä¿è¯Aï¼ˆæœåŠ¡å¯ç”¨ï¼‰Pï¼Œæ”¾å¼ƒæ•°æ®çš„å¼ºä¸€è‡´æ€§ï¼Œåªä¿è¯æ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚è¿™æ ·å°±è¡ç”Ÿå‡ºäº†BASEç†è®ºã€‚</p>
<h6 id="BASEç†è®º"><a href="#BASEç†è®º" class="headerlink" title="BASEç†è®º"></a>BASEç†è®º</h6><p>BASEæ˜¯Basically Availableï¼ˆåŸºæœ¬å¯ç”¨ï¼‰ã€Soft stateï¼ˆè½¯çŠ¶æ€ï¼‰å’ŒEventually consistentï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰ä¸‰ä¸ªçŸ­è¯­çš„ç¼©å†™ã€‚BASEç†è®ºæ˜¯å¯¹CAPä¸­ä¸€è‡´æ€§å’Œå¯ç”¨æ€§æƒè¡¡çš„ç»“æœï¼Œå…¶æ¥æºäºå¯¹å¤§è§„æ¨¡äº’è”ç½‘ç³»ç»Ÿåˆ†å¸ƒå¼å®è·µçš„æ€»ç»“ï¼Œæ˜¯åŸºäºCAPå®šç†é€æ­¥æ¼”åŒ–è€Œæ¥çš„ã€‚BASEç†è®ºçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>å³ä½¿æ— æ³•åšåˆ°å¼ºä¸€è‡´æ€§ï¼Œä½†æ¯ä¸ªåº”ç”¨éƒ½å¯ä»¥æ ¹æ®è‡ªèº«ä¸šåŠ¡ç‰¹ç‚¹ï¼Œé‡‡ç”¨é€‚å½“çš„æ–¹å¼æ¥ä½¿ç³»ç»Ÿè¾¾åˆ°æœ€ç»ˆä¸€è‡´æ€§</strong>ã€‚</p>
<ul>
<li>åŸºæœ¬å¯ç”¨ï¼šåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå…è®¸åœ¨å‡ºç°ä¸å¯é¢„çŸ¥æ•…éšœçš„æƒ…å†µä¸‹æŸå¤±éƒ¨åˆ†å¯ç”¨æ€§ï¼ˆå¹¶ä¸æ˜¯å…è®¸ç³»ç»Ÿä¸å¯ç”¨ï¼‰ï¼Œå…è®¸å“åº”æ—¶é—´ä¸Šçš„ç¡®å®å’Œéƒ¨åˆ†ç³»ç»ŸåŠŸèƒ½çš„é”™è¯¯ï¼ˆå¹¶å‘åœºæ™¯ä¸‹æ‹’ç»æœåŠ¡äº§ç”ŸæŠ¥é”™ç­‰ï¼‰</li>
<li>è½¯çŠ¶æ€ï¼šå³å…è®¸æ•°æ®å­˜åœ¨ä¸­é—´çŠ¶æ€ï¼Œå…è®¸ä¸åŒèŠ‚ç‚¹çš„æ•°æ®ä¹‹é—´å­˜åœ¨æ—¶é—´ä¸Šçš„æ•°æ®å·®å¼‚</li>
<li>æœ€ç»ˆä¸€è‡´æ€§ï¼šå¼ºè°ƒæ‰€æœ‰æ•°æ®å‰¯æœ¬èƒ½å¤Ÿæœ€ç»ˆä¸€è‡´ï¼Œä¸éœ€è¦ä¿è¯æ•°æ®å®æ—¶å¼ºä¸€è‡´ã€‚</li>
</ul>
<p>ä¼ ç»Ÿäº‹åŠ¡çš„ACIDæœºåˆ¶è¿½æ±‚å¼ºä¸€è‡´æ€§ï¼Œè€ŒBASEç†è®ºä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿè€Œç”Ÿï¼Œä¸»å¼ ç‰ºç‰²å¼ºä¸€è‡´æ€§ï¼Œä½¿å¾—æœåŠ¡è¾¾åˆ°é«˜å¯ç”¨ã€‚ä¸è¿‡åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä¸åŒåœºæ™¯ä¸‹å¯¹äºæ•°æ®çš„ä¸€è‡´æ€§åˆæ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥æ‰ä¼šæœ‰åˆ†å¸ƒå¼äº‹åŠ¡æ¥ä¿è¯æ•°æ®çš„ä¸€è‡´ï¼Œå³ACIDä¸BASEç†è®ºç»“åˆä½¿ç”¨ã€‚</p>
<h5 id="2PCå’Œ3PC"><a href="#2PCå’Œ3PC" class="headerlink" title="2PCå’Œ3PC"></a>2PCå’Œ3PC</h5><h6 id="2PC-äºŒæ®µå¼æäº¤"><a href="#2PC-äºŒæ®µå¼æäº¤" class="headerlink" title="2PC - äºŒæ®µå¼æäº¤"></a>2PC - äºŒæ®µå¼æäº¤</h6><p>2PCï¼Œæ˜¯Two-Phase Commitçš„ç¼©å†™ã€‚è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li><p>é˜¶æ®µä¸€ï¼šæäº¤äº‹åŠ¡è¯·æ±‚</p>
<ul>
<li>åè°ƒè€…è¯¢é—®å‚ä¸æ–¹æ˜¯å¦å¯ä»¥æ‰§è¡Œæäº¤æ“ä½œå¹¶ç­‰å¾…å“åº”</li>
<li>å‚ä¸è€…æ‰§è¡Œè¯¢é—®ä¸ºæ­¢çš„æ‰€æœ‰äº‹åŠ¡æ“ä½œ</li>
<li>å‚ä¸è€…å“åº”åè°ƒè€…ï¼Œè¿”å›äº‹åŠ¡æ‰§è¡ŒæˆåŠŸä¸å¦</li>
</ul>
</li>
<li><p>é˜¶æ®µäºŒï¼šæ‰§è¡Œäº‹åŠ¡æäº¤</p>
<ul>
<li><p>åè°ƒè€…æ”¶åˆ°æ‰€æœ‰ç¬¬ä¸€é˜¶æ®µå“åº”ä¹‹åå‘èµ·æ­£å¼æäº¤è¯·æ±‚</p>
</li>
<li><p>å‚ä¸è€…æ­£å¼å®Œæˆæ“ä½œå¹¶é‡Šæ”¾æ•´ä¸ªäº‹åŠ¡æœŸé—´å ç”¨çš„èµ„æº</p>
</li>
<li><p>åé¦ˆäº‹åŠ¡æäº¤ç»“æœ</p>
</li>
<li><p>åè°ƒè€…æ”¶åˆ°æ‰€æœ‰å®Œæˆçš„æ¶ˆæ¯åï¼Œå®Œæˆäº‹åŠ¡ã€‚</p>
</li>
<li><p>å¦‚æœä»»æ„å‚ä¸è€…åœ¨ç¬¬ä¸€é˜¶æ®µè¿”å›æ‰§è¡Œå¤±è´¥æˆ–è€…è¶…æ—¶çš„æ¶ˆæ¯ï¼Œä¸­æ–­äº‹åŠ¡</p>
</li>
<li><p>å‚ä¸è€…èŠ‚ç‚¹åˆ©ç”¨ä¹‹å‰å†™å…¥çš„Undoä¿¡æ¯æ‰§è¡Œå›æ»šï¼Œå¹¶é‡Šæ”¾åœ¨æ•´ä¸ªäº‹åŠ¡æœŸé—´å†…å ç”¨çš„èµ„æºã€‚</p>
</li>
<li><p>å‚ä¸è€…èŠ‚ç‚¹å‘åè°ƒè€…èŠ‚ç‚¹å‘é€â€å›æ»šå®Œæˆâ€æ¶ˆæ¯ã€‚</p>
</li>
<li><p>åè°ƒè€…èŠ‚ç‚¹å—åˆ°æ‰€æœ‰å‚ä¸è€…èŠ‚ç‚¹åé¦ˆçš„â€å›æ»šå®Œæˆâ€æ¶ˆæ¯åï¼Œå–æ¶ˆäº‹åŠ¡ã€‚</p>
</li>
<li><p>ä¸ç®¡æœ€åç»“æœå¦‚ä½•ï¼Œç¬¬äºŒé˜¶æ®µéƒ½ä¼šç»“æŸå½“å‰äº‹åŠ¡</p>
</li>
</ul>
</li>
</ul>
<p>  <strong>2PCçš„ç¼ºç‚¹ï¼š</strong> æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯åŒæ­¥é˜»å¡çš„ï¼›å¦‚æœåè°ƒè€…æ˜¯å•ç‚¹å¹¶ä¸”å‘ç”Ÿæ•…éšœï¼Œå‚ä¸è€…å°†ä¸€ç›´é˜»å¡ï¼›å¦‚æœåœ¨ç¬¬äºŒé˜¶æ®µåè°ƒè€…æ­£å¼å‘æ‰€æœ‰å‚ä¸è€…å‘é€æ­£å¼æäº¤äº‹åŠ¡çš„è¯·æ±‚ï¼Œå…¶ä¸­éƒ¨åˆ†å› ä¸ºç½‘ç»œé—®é¢˜æ²¡æœ‰æ”¶åˆ°ï¼Œå¦ä¸€éƒ¨åˆ†å´å·²ç»æäº¤æ— æ³•å›æ»šï¼Œå‡ºç°æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µï¼›åè°ƒè€…å†å‘å‡ºcommitæ¶ˆæ¯ä¹‹åå®•æœºï¼Œè€Œå”¯ä¸€æ¥æ”¶åˆ°è¿™æ¡æ¶ˆæ¯çš„å‚ä¸è€…åŒæ—¶ä¹Ÿå®•æœºäº†ã€‚é‚£ä¹ˆå³ä½¿åè°ƒè€…é€šè¿‡é€‰ä¸¾åè®®äº§ç”Ÿäº†æ–°çš„åè°ƒè€…ï¼Œè¿™æ¡äº‹åŠ¡çš„çŠ¶æ€ä¹Ÿæ˜¯ä¸ç¡®å®šçš„ï¼Œæ²¡äººçŸ¥é“äº‹åŠ¡æ˜¯å¦è¢«å·²ç»æäº¤ã€‚</p>
<p>  ç”±äºäºŒé˜¶æ®µæäº¤å­˜åœ¨ç€è¯¸å¦‚åŒæ­¥é˜»å¡ã€å•ç‚¹é—®é¢˜ã€è„‘è£‚ç­‰ç¼ºé™·ï¼Œæ‰€ä»¥ï¼Œç ”ç©¶è€…ä»¬åœ¨äºŒé˜¶æ®µæäº¤çš„åŸºç¡€ä¸Šåšäº†æ”¹è¿›ï¼Œæå‡ºäº†ä¸‰é˜¶æ®µæäº¤ã€‚</p>
<h6 id="3PC-ä¸‰æ®µå¼æäº¤"><a href="#3PC-ä¸‰æ®µå¼æäº¤" class="headerlink" title="3PC - ä¸‰æ®µå¼æäº¤"></a>3PC - ä¸‰æ®µå¼æäº¤</h6><p>3PCå°†2PCçš„å‡†å¤‡é˜¶æ®µåˆåˆ’åˆ†ä¸ºä¸¤æ¬¡å‡†å¤‡ï¼Œè¿™æ ·ä¸‰é˜¶æ®µæäº¤å°±æœ‰CanCommitã€PreCommitã€DoCommitä¸‰ä¸ªé˜¶æ®µã€‚ã€‚å¹¶ä¸”åœ¨åè°ƒè€…ä¸å‚ä¸è€…ä¸­éƒ½å¼•å…¥è¶…æ—¶æœºåˆ¶ã€‚</p>
<ul>
<li><p>CanCommité˜¶æ®µ</p>
<ul>
<li>åŒ2PCçš„å‡†å¤‡é˜¶æ®µï¼Œåè°ƒè€…å‘å‚ä¸è€…å‘é€äº‹åŠ¡æäº¤è¯·æ±‚ï¼Œè¯¢é—®å¹¶ç­‰å¾…å“åº”</li>
<li>å¾—åˆ°å“åº”ä¹‹åè¿›å…¥é¢„å¤‡æäº¤é˜¶æ®µ</li>
</ul>
</li>
<li><p>PreCommité˜¶æ®µ</p>
<ul>
<li>æ‰€æœ‰å‚ä¸è€…ç¬¬ä¸€é˜¶æ®µéƒ½è¿”å›æˆåŠŸçŠ¶æ€ï¼Œé‚£ä¹ˆå°±ä¼šå¼€å§‹äº‹åŠ¡çš„é¢„æ‰§è¡Œ</li>
<li>è¿›å…¥PreCommitå¹¶æ‰§è¡Œäº‹åŠ¡æ“ä½œï¼Œå…¨éƒ¨æˆåŠŸå°±è¿”å›ç»™æäº¤è€…</li>
<li>å‡å¦‚æœ‰ä»»ä½•ä¸€ä¸ªå‚ä¸è€…å‘åè°ƒè€…å‘é€äº†Noå“åº”ï¼Œæˆ–è€…ç­‰å¾…è¶…æ—¶ä¹‹åï¼Œåè°ƒè€…éƒ½æ²¡æœ‰æ¥åˆ°å‚ä¸è€…çš„å“åº”ï¼Œé‚£ä¹ˆå°±æ‰§è¡Œäº‹åŠ¡çš„ä¸­æ–­ã€‚å‘é€ä¸­æ–­è¯·æ±‚åè°ƒè€…å‘æ‰€æœ‰å‚ä¸è€…å‘é€abortè¯·æ±‚;ä¸­æ–­äº‹åŠ¡å‚ä¸è€…æ”¶åˆ°æ¥è‡ªåè°ƒè€…çš„abortè¯·æ±‚ä¹‹åï¼ˆæˆ–è¶…æ—¶ä¹‹åï¼Œä»æœªæ”¶åˆ°åè°ƒè€…çš„è¯·æ±‚ï¼‰ï¼Œæ‰§è¡Œäº‹åŠ¡çš„ä¸­æ–­ã€‚</li>
</ul>
</li>
<li><p>doCommité˜¶æ®µ</p>
<ul>
<li><p>å‘é€æäº¤è¯·æ±‚åè°ƒæ¥æ”¶åˆ°å‚ä¸è€…å‘é€çš„ACKå“åº”ï¼Œé‚£ä¹ˆä»–å°†ä»é¢„æäº¤çŠ¶æ€è¿›å…¥åˆ°æäº¤çŠ¶æ€ã€‚å¹¶å‘æ‰€æœ‰å‚ä¸è€…å‘é€doCommitè¯·æ±‚ã€‚</p>
</li>
<li><p>äº‹åŠ¡æäº¤å‚ä¸è€…æ¥æ”¶åˆ°doCommitè¯·æ±‚ä¹‹åï¼Œæ‰§è¡Œæ­£å¼çš„äº‹åŠ¡æäº¤ã€‚å¹¶åœ¨å®Œæˆäº‹åŠ¡æäº¤ä¹‹åé‡Šæ”¾æ‰€æœ‰äº‹åŠ¡èµ„æºã€‚</p>
</li>
<li><p>å“åº”åé¦ˆäº‹åŠ¡æäº¤å®Œä¹‹åï¼Œå‘åè°ƒè€…å‘é€Ackå“åº”ã€‚</p>
</li>
<li><p>å®Œæˆäº‹åŠ¡åè°ƒè€…æ¥æ”¶åˆ°æ‰€æœ‰å‚ä¸è€…çš„ackå“åº”ä¹‹åï¼Œå®Œæˆäº‹åŠ¡ã€‚</p>
</li>
</ul>
</li>
</ul>
<p>  ä¸­æ–­äº‹åŠ¡åè°ƒè€…æ²¡æœ‰æ¥æ”¶åˆ°å‚ä¸è€…å‘é€çš„ACKå“åº”ï¼ˆå¯èƒ½æ˜¯æ¥å—è€…å‘é€çš„ä¸æ˜¯ACKå“åº”ï¼Œä¹Ÿå¯èƒ½å“åº”è¶…æ—¶ï¼‰ï¼Œé‚£ä¹ˆå°±ä¼šæ‰§è¡Œä¸­æ–­äº‹åŠ¡ã€‚</p>
<ul>
<li><p>å‘é€ä¸­æ–­è¯·æ±‚åè°ƒè€…å‘æ‰€æœ‰å‚ä¸è€…å‘é€abortè¯·æ±‚</p>
</li>
<li><p>äº‹åŠ¡å›æ»šå‚ä¸è€…æ¥æ”¶åˆ°abortè¯·æ±‚ä¹‹åï¼Œåˆ©ç”¨å…¶åœ¨é˜¶æ®µäºŒè®°å½•çš„undoä¿¡æ¯æ¥æ‰§è¡Œäº‹åŠ¡çš„å›æ»šæ“ä½œï¼Œå¹¶åœ¨å®Œæˆå›æ»šä¹‹åé‡Šæ”¾æ‰€æœ‰çš„äº‹åŠ¡èµ„æºã€‚</p>
</li>
<li><p>åé¦ˆç»“æœå‚ä¸è€…å®Œæˆäº‹åŠ¡å›æ»šä¹‹åï¼Œå‘åè°ƒè€…å‘é€ACKæ¶ˆæ¯</p>
</li>
<li><p>ä¸­æ–­äº‹åŠ¡åè°ƒè€…æ¥æ”¶åˆ°å‚ä¸è€…åé¦ˆçš„ACKæ¶ˆæ¯ä¹‹åï¼Œæ‰§è¡Œäº‹åŠ¡çš„ä¸­æ–­ã€‚</p>
</li>
</ul>
<p>  ç›¸æ¯”äº2PCï¼Œ3PCæœ€å…³é”®è¦è§£å†³çš„å°±æ˜¯åè°ƒè€…å’Œå‚ä¸è€…åŒæ—¶æŒ‚æ‰çš„é—®é¢˜ï¼Œæ‰€ä»¥3PCæŠŠ2PCçš„å‡†å¤‡é˜¶æ®µå†æ¬¡ä¸€åˆ†ä¸ºäºŒã€‚åœ¨ç¬¬ä¸€é˜¶æ®µåªæ˜¯è¯¢é—®æ‰€æœ‰å‚ä¸è€…æ˜¯å¦éƒ½å¯ä»¥æ‰§è¡Œäº‹åŠ¡æ“ä½œï¼Œå¹¶ä¸åœ¨æœ¬é˜¶æ®µæ‰§è¡Œäº‹åŠ¡æ“ä½œã€‚å½“åè°ƒè€…æ”¶åˆ°æ‰€æœ‰çš„å‚ä¸è€…éƒ½è¿”å›YESæ—¶ï¼Œåœ¨ç¬¬äºŒé˜¶æ®µæ‰æ‰§è¡Œäº‹åŠ¡æ“ä½œï¼Œç„¶ååœ¨ç¬¬ä¸‰é˜¶æ®µåœ¨æ‰§è¡Œcommitæˆ–è€…rollbackã€‚</p>
<p>  <strong>3PCå­˜åœ¨çš„é—®é¢˜ï¼š</strong> åœ¨doCommité˜¶æ®µï¼Œå¦‚æœå‚ä¸è€…æ— æ³•åŠæ—¶æ¥æ”¶åˆ°æ¥è‡ªåè°ƒè€…çš„doCommitæˆ–è€…abortè¯·æ±‚æ—¶ï¼Œä¼šåœ¨ç­‰å¾…è¶…æ—¶ä¹‹åï¼Œä¼šç»§ç»­è¿›è¡Œäº‹åŠ¡çš„æäº¤ã€‚è¿™æ ·ä¸å…¶ä»–æ‰§è¡Œå›æ»šçš„å‚ä¸è€…å°±ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µã€‚</p>
<hr>
<blockquote>
<p>å‚è€ƒï¼š</p>
<ul>
<li><p><a href="https://www.hollischuang.com/archives/1580" target="_blank" rel="noopener">https://www.hollischuang.com/archives/1580</a></p>
</li>
<li><p><a href="http://anruence.com/2018/03/05/tcc-2pc-3pc/" target="_blank" rel="noopener">http://anruence.com/2018/03/05/tcc-2pc-3pc/</a></p>
</li>
<li><p><a href="http://blog.jobbole.com/95632/" target="_blank" rel="noopener">http://blog.jobbole.com/95632/</a></p>
</li>
<li><a href="http://blog.csdn.net/zhangjq520/article/details/78433686" target="_blank" rel="noopener">http://blog.csdn.net/zhangjq520/article/details/78433686</a></li>
<li><a href="https://www.zhihu.com/question/48627764/answer/111983553" target="_blank" rel="noopener">https://www.zhihu.com/question/48627764/answer/111983553</a></li>
<li><a href="https://www.jianshu.com/p/d3eda795188a" target="_blank" rel="noopener">https://www.jianshu.com/p/d3eda795188a</a></li>
</ul>
</blockquote>
]]></content>
      <categories>
        <category>åˆ†å¸ƒå¼</category>
        <category>åˆ†å¸ƒå¼äº‹åŠ¡</category>
      </categories>
      <tags>
        <tag>å¾®æœåŠ¡</tag>
        <tag>åˆ†å¸ƒå¼</tag>
        <tag>æ•°æ®åº“</tag>
        <tag>åˆ†å¸ƒå¼äº‹åŠ¡</tag>
      </tags>
  </entry>
  <entry>
    <title>å…¶å®æˆ‘ä¸å¤ªæƒ³ç¦»å¼€è¿™é‡Œ</title>
    <url>/blog/20190909/%E5%85%B6%E5%AE%9E%E6%88%91%E4%B8%8D%E6%83%B3%E7%A6%BB%E5%BC%80%E8%BF%99%E9%87%8C/</url>
    <content><![CDATA[<p><img src="/blog/20190909/å…¶å®æˆ‘ä¸æƒ³ç¦»å¼€è¿™é‡Œ/fm.png" alt="æ­å·è¥¿æ¹–"></p>
<a id="more"></a>
<blockquote>
<p>å†™äº 2018-09-09 22:01:04</p>
</blockquote>
<h4 id="åº"><a href="#åº" class="headerlink" title="åº"></a>åº</h4><p>æˆ‘è¦ç¦»å¼€äº†ã€‚ç¦»å¼€æ­å·ï¼Œç¦»å¼€è¿™ä¸ªç”Ÿæ´»äº†å¿«ä¸‰å¹´çš„åœ°å„¿ã€‚æ”¾å¼ƒè¦å»ä¸€çº¿å¤§å…¬å¸çš„æ¬²æœ›ï¼Œæ”¾å¼ƒå¹´è–ªç™¾ä¸‡çš„æ¢¦æƒ³ï¼Œæ”¾å¼ƒæ¸©æŸ”å¯çˆ±çš„å—æ–¹å§‘å¨˜ï¼Œæ”¾å¼ƒæˆ‘æ¯•ä¸šä¹‹å‰ä¸€ç›´å‘å¾€çš„è‡ªç”±å’Œè¿œæ–¹â€¦ â€¦ æœ€è®©æˆ‘éš¾å—çš„ï¼Œåœ¨æ­å·ä¸¤å¹´è®¤è¯†çš„å‡ ä¸ªæœ‹å‹ï¼Œä¹Ÿè®¸ä»¥åå†éš¾è§ä¸Šä¸€é¢ã€‚è¿˜æœ‰ï¼Œå›åˆ°äº†å®¶ä¹¡ï¼Œæˆ‘æ˜¯å¦å°±æ­¤è¿‡ä¸Šä¸€ä¸ªå®‰é€¸çš„ç”Ÿæ´»ï¼Œè¿˜èƒ½å¦ä¿æŒç›®å‰çš„è¿™ä»½æ–—å¿—ã€‚æ­å·è¢«ç¨‹åºå‘˜è®ºå›ç§°ä¸ºâ€œå¥‹æ–—é€¼ä¹‹éƒ½â€ï¼Œæºäºé©¬è€å¸ˆçš„ç¦æŠ¥ï¼Œæˆ‘è™½ä¸å–œæ¬¢è¿™ç§996çš„å·¥ä½œèŠ‚å¥ï¼Œä½†æ˜¯ç¦»å¼€è¿™é‡Œï¼ŒçœŸçš„è¦æ”¾å¼ƒå¾ˆå¤šã€‚</p>
<h4 id="è¾èŒ"><a href="#è¾èŒ" class="headerlink" title="è¾èŒ"></a>è¾èŒ</h4><p>2019å¹´8æœˆ21æ—¥ï¼Œåœ¨è¢«ç§°ä¸ºäº’è”ç½‘å¯’å†¬çš„è¿™å¹´ï¼Œæˆ‘è¾èŒäº†ã€‚å› ä¸ºè¿™ä¸€å¹´ä»¥æ¥ï¼Œå…¬å¸çš„ç»è¥çŠ¶å†µå‡ºäº†å¾ˆå¤§çš„é—®é¢˜ï¼Œ8æœˆï¼Œçº¿ä¸ŠæœåŠ¡å™¨å…³é—­äº†ï¼Œè¿™æ„å‘³ç€ç†è´¢ä¸šåŠ¡æ­¤æ—¶å·²ç»å®Œå…¨åœæ­¢ï¼Œå…¬å¸é‡‘èéƒ¨é—¨ç”¨ä»…å‰©çš„æµ·å¤–è´·æ¬¾ä¸šåŠ¡ç»´æŒç€æœ€åä¸€çº¿ç”Ÿæœºã€‚è¿™ç§æ—¶åˆ»ï¼Œä½†å‡¡æ˜¯è§‰å¾—è‡ªå·±åœ¨ç¦»å¼€ä¹‹åèƒ½å¤Ÿæ‰¾åˆ°åˆé€‚å·¥ä½œçš„äººï¼Œéƒ½ä¸ä¼šæƒ³è¦å†ç»§ç»­å†å…¬å¸å‘†ä¸‹å»ã€‚æˆ‘å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼Œæ‰€ä»¥æˆ‘å‘è€å¤§è¯´ï¼Œæˆ‘æƒ³èµ°äº†ï¼</p>
<p>åæ¥ï¼Œæˆ‘ä»¬ä¸€èµ·å»åƒäº†æ•£ä¼™é¥­ï¼Œåˆæ˜¯ç«é”…ï¼Œæ¯æ¬¡éƒ½æ˜¯ã€‚ä¸ºä»€ä¹ˆè¯´â€œæ¯æ¬¡â€å‘¢ï¼Ÿå› ä¸ºåœ¨æˆ‘ä¹‹å‰ï¼Œè¿˜æœ‰5ä¸ªäººã€‚æˆ‘æƒ³æˆ‘ä¹Ÿä¸ä¼šæ˜¯æœ€åä¸€ä¸ªå§ã€‚</p>
<h4 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4><p>äº‹å®ä¸ŠåŠå¹´ä»¥æ¥æˆ‘éƒ½åœ¨ä½¿ç”¨ç©ºé—²æ—¶é—´å­¦ä¹ ã€åˆ·ç®—æ³•é¢˜ã€å†™åšå®¢ã€ç‚¹äº®GitHubç»¿ç‚¹ä»¥æœŸæœ›è‡ªå·±åœ¨ä¹‹åæ‰¾å·¥ä½œèƒ½å¤Ÿé ç€åšå®¢å’ŒGitHubçš„æ´»è·ƒç¨‹åº¦å¸å¼•åˆ°æŸå…¬å¸çš„é¢è¯•å®˜ï¼ˆåæ¥äº‹å®è¯æ˜ï¼Œè¿™ä¸ªåšæ³•è¿˜æŒºç®¡ç”¨ï¼Œå½“ç„¶æˆ‘çš„ç¡®æœ‰åœ¨ä¸°å¯Œè‡ªå·±çš„çŸ¥è¯†è€Œä¸åªæ˜¯ç‚¹â€œç»¿ç‚¹â€ï¼‰ã€‚è¿™åŠå¹´ä»¥æ¥ï¼Œåœ¨å…¬å¸æ‰€åšçš„å·¥ä½œå‡ ä¹å¯ä»¥ç”¨æ‚æ´»æ¥å½¢å®¹ï¼ä¸è¿‡è¿™äº›æ‚æ´»ï¼Œä¸ºæˆ‘è¥é€ äº†å……è¶³çš„å­¦ä¹ æ—¶é—´çš„åŒæ—¶ï¼Œå´ä¹Ÿè®©æˆ‘åæ¥çš„ç®€å†ä¸Šéš¾ä»¥å†™ä¸Šä¸€äº›æœ‰å«é‡‘é‡çš„é¡¹ç›®ã€‚</p>
<p>ä»Šå¹´ä»¥æ¥ï¼Œæˆ‘å†™äº†å¤§æ¦‚30å¤šç¯‡åšå®¢ï¼Œæœ‰æ®µæ—¶é—´å‡ ä¹æ˜¯ä¸€å‘¨ä¸¤ç¯‡ï¼Œå°±åœ¨å…¬å¸ç”¨ä¸Šç­æ—¶é—´å†™ï¼åšå®¢ä¸»è¦å­¦ä¹ å’Œæ•´ç†ä¸€äº›JavaåŸºç¡€ã€å¤šçº¿ç¨‹å¹¶å‘ç¼–ç¨‹ç³»åˆ—çš„çŸ¥è¯†ï¼Œä»¥åŠæ•´ç†ä¸€äº›æˆ‘åœ¨å®é™…é¡¹ç›®ä¸­çš„ä¸€äº›éœ€æ±‚çš„è§£å†³æ–¹æ¡ˆã€‚é™¤äº†åšå®¢ï¼Œæˆ‘è¿˜åœ¨GitHubæ•´ç†äº†è‡ªå·±åœ¨å…¬å¸ä½¿ç”¨çš„ä¸€äº›åŸºç¡€æ¡†æ¶ï¼Œç„¶åè‡ªå·±æ­å»ºäº†ä¸€ä¸ªspring cloudç‰ˆæœ¬çš„è„šæ‰‹æ¶ï¼š<a href="https://github.com/Fatezhang/scaffold-cloud" target="_blank" rel="noopener">Scaffold-Cloud</a>ã€‚è¿˜åœ¨å¹•å¸ƒä¸Šæ•´ç†äº†å¤§ç¯‡å¹…çš„<a href="https://mubu.com/doc/hpBd1e5h6z" target="_blank" rel="noopener">Javaå­¦ä¹ å¤§çº²</a>å’Œä¸€äº›é¢è¯•é¢˜ç›®ã€JavaçŸ¥è¯†ç‚¹ã€é˜¿é‡ŒJavaå¼€å‘æ‰‹å†Œï¼Œä¸è¿‡åˆ°ç›®å‰è¿˜æ²¡æœ‰æ•´ç†å®Œæˆï¼Œå› ä¸ºå®åœ¨æ˜¯å¤ªå¤šäº†ï¼ŒJavaåŸºç¡€ã€è®¾è®¡æ¨¡å¼ã€æ•°æ®ç»“æ„ä¸ç®—æ³•ã€åˆ†å¸ƒå¼ã€æ•°æ®åº“ã€è®¡ç®—æœºç½‘ç»œç­‰ç­‰ï¼Œä¸€ç‚¹ç‚¹æ•²ä¸‹æ¥ä¹Ÿæ˜¯éå¸¸è´¹æ—¶é—´çš„ã€‚</p>
<h4 id="é¢è¯•"><a href="#é¢è¯•" class="headerlink" title="é¢è¯•"></a>é¢è¯•</h4><p>è¯´äº†è¿™ä¹ˆå¤šï¼Œä½ å¯èƒ½ä»¥ä¸ºç¦»èŒä¹‹åæˆ‘æ‰¾åˆ°äº†ä¸€ä¸ªå¥½å·¥ä½œã€‚ç„¶è€Œï¼Œåœ¨ç¦»èŒåçš„ä¸€å‘¨ï¼Œæˆ‘åœ¨æŸç›´è˜APPä¸ŠæŠ•é€’äº†å‡ åå®¶ç®€å†ï¼Œåœ¨å…«æœˆçš„æœ€åä¸€å‘¨ï¼Œæˆ‘é¢è¯•äº†äº”å®¶å…¬å¸ï¼ŒåŒ…æ‹¬ä¸€å®¶ä»…æœ‰ç”µè¯é¢è¯•çš„å…¬å¸ã€‚äº‹å®ä¸Šåœ¨é¢è¯•ä¹‹å‰ï¼Œæˆ‘å¯¹è‡ªå·±è¿˜æ˜¯å¾ˆæœ‰è‡ªä¿¡çš„ï¼Œæ¯•ç«Ÿå­¦äº†åŠå¹´ï¼Œæ€ä¹ˆç€å°å…¬å¸çš„offerè¿˜æ˜¯å¯ä»¥æ‹¿åˆ°æ‰‹çš„ï¼Œæ‹¿åˆ°å°å…¬å¸offeråœ¨å¼€å§‹æŠ•å¤§å…¬å¸ï¼Œå¼€å¯offeræ”¶å‰²æœºæ¨¡å¼ã€‚ç„¶è€Œæˆ‘çš„è„¸è¢«ç°å®ç‹ ç‹ çš„æ‰“è‚¿äº†ã€‚æˆ‘é¢è¯•äº†é²¸çµã€å¤§åã€å…‘å§ã€æ¶‚é¸¦ï¼ç°å®å‘Šè¯‰æˆ‘ï¼šä½ å°±æ˜¯ä¸ªå½©ç¬”ï¼è¿˜ä»–ä¹ˆæƒ³æ‹¿å¤§å‚çš„offerï¼Ÿåšæ¢¦å»å§ï¼</p>
<p>äº‹å®ä¸Šï¼Œæˆ‘åœ¨é¢è¯•çš„æ—¶å€™åŸºæœ¬ä¸Šéƒ½èƒ½å¤Ÿå›ç­”çš„å‡ºæ¥é¢è¯•å®˜çš„é—®é¢˜ï¼Œå°¤å…¶æ˜¯å¤šçº¿ç¨‹å’Œä¸€äº›åˆ†å¸ƒå¼ç›¸å…³çš„é—®é¢˜ï¼ŒJavaåŸºç¡€ã€JVMæ›´æ˜¯ä¸€ç›´åœ¨æˆ‘çš„å¤ä¹ èŒƒå›´ã€‚ç„¶è€Œï¼Œå½“é¢è¯•å®˜é—®åˆ°ä¸€äº›å®é™…é¡¹ç›®é‡åˆ°çš„é—®é¢˜ä»¥åŠè‡ªå·±æ˜¯å¦‚ä½•è§£å†³çš„ï¼Œæˆ‘å°±æ­‡èœäº†ã€‚ä¾‹å¦‚å®é™…ç”Ÿäº§ä¸­æ˜¯å¦‚ä½•åšæ€§èƒ½è°ƒä¼˜çš„ï¼Œå®é™…é¡¹ç›®ä¸­é‡åˆ°äº†å“ªäº›é—®é¢˜ï¼Œæ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿæˆ‘çŸ¥é“é¢è¯•å®˜æ˜¯æƒ³è€ƒå¯Ÿæˆ‘è§£å†³é—®é¢˜çš„æ€è·¯ï¼Œç„¶è€Œå½“æˆ‘å°†è‡ªå·±å·¥ä½œä¸­æ‰€åšçš„å…¨ç›˜æ‰˜å‡ºï¼Œæ¢æ¥çš„å´æ˜¯é¢è¯•å®˜çš„é„™è§†ï¼å› ä¸ºå®åœ¨æ˜¯å¤ªæ²¡æœ‰æŠ€æœ¯å«é‡äº†ï¼Œè€Œæˆ‘è‡ªå·±ä¹Ÿç¡®å®æ²¡æœ‰åœ¨å®é™…ç”Ÿäº§ä¸­é‡åˆ°ä¸€äº›æ¯”è¾ƒæ£˜æ‰‹çš„é—®é¢˜ã€‚è¿™ä¸€å‘¨çš„é¢è¯•å°†æˆ‘çš„ä¿¡å¿ƒæ‰“å‹åˆ°è°·åº•ã€‚</p>
<h4 id="è½¬æœº"><a href="#è½¬æœº" class="headerlink" title="è½¬æœº"></a>è½¬æœº</h4><p>å¹¸è¿çš„æ˜¯ï¼Œæˆ‘åœ¨æ­£å¼åŠå¥½ç¦»èŒæ‰‹ç»­çš„æœ€åä¸€ä¸ªç¤¼æ‹œï¼Œä¸€ä¸ªå¤§å­¦çš„æ—¶å€™è¿›äº†è¥¿å®‰ä¸€ä¸ªæ¯”è¾ƒå¥½çš„å¤–ä¼çš„åŒå­¦å‘Šè¯‰æˆ‘ï¼Œä»–ä»¬å…¬å¸æ‹›äººï¼Œé—®æˆ‘è¦ä¸è¦è¯•ä¸€ä¸‹ã€‚åœ¨ä»åŒèŠ±é¡ºç¦»èŒçš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯ä¸€å¹´ä¹‹å‰ï¼Œæˆ‘æœ‰å°è¯•é¢è¯•è¿‡è¿™å®¶å…¬å¸ï¼Œå¯æƒœåœ¨homeworké˜¶æ®µç”±äºä»£ç æ²¡æœ‰å†™çš„å¾ˆå¥½è¢«æ·˜æ±°äº†ã€‚è¿™æ¬¡ï¼Œæˆ‘è¦æ±‚è‡ªå·±è¦åšå¥½å……è¶³çš„å‡†å¤‡ã€‚</p>
<p>ä»–ä»¬å…¬å¸é¢è¯•ä¸åƒæ­å·è¿™è¾¹çš„äº’è”ç½‘å…¬å¸ï¼Œé¢è¯•æ€»çˆ±é—®ä¸€äº›é«˜å¹¶å‘ã€åˆ†å¸ƒå¼ç­‰ç­‰åªä¼šå‡ºç°åœ¨é¢è¯•ä¸­è€Œä¸ä¼šå‡ºç°åœ¨å®é™…å·¥ä½œä¸­çš„é—®é¢˜ï¼ˆå½“ç„¶è¿™ç§è¯´æ³•ä¹Ÿå¾ˆç‰‡é¢ï¼‰ã€‚è¿™ä¸ªå¤–ä¼çš„é¢è¯•æµç¨‹æ˜¯ç»™å‡ºä¸€é“ç¨‹åºè®¾è®¡é¢˜ï¼Œ3å¤©æ—¶é—´æäº¤ä»£ç ï¼Œå®¡æ ¸ä»£ç çš„è´¨é‡ä»¥åŠæ˜¯å¦ä¼˜é›…çš„å®Œæˆé¢˜ç›®è¦æ±‚ï¼Œç„¶åäºŒé¢é’ˆå¯¹æ‰€åšçš„é¢˜ç›®å¢åŠ éœ€æ±‚ï¼Œè€ƒå¯Ÿåº”è¯•è€…å®é™…åŠ¨æ‰‹èƒ½åŠ›ä»¥åŠç¨‹åºè®¾è®¡èƒ½åŠ›ã€‚ä¸‰é¢é’ˆå¯¹é¡¹ç›®ç»éªŒã€å·¥ä½œç»éªŒå†è¿›è¡Œä¸€è½®é¢è¯•ã€‚</p>
<p>9æœˆ6æ—¥å‘¨äº”ä¸‹åˆ4:19ï¼Œæˆ‘æ”¶åˆ°äº†è¿™å®¶å…¬å¸çš„offerï¼Œä¸°åšçš„æŠ¥é…¬å’Œç¦åˆ©ï¼Œè¿˜æœ‰ç¦»å®¶è¿‘çš„æ¡ä»¶è®©æˆ‘æ— æ³•æ‹’ç»è¿™æ ·ä¸€ä¸ªofferã€‚å†åŠ ä¸Šåœ¨æ­å·è¿™è¾¹é¢è¯•çš„ä¸é¡ºåˆ©ï¼Œæˆ‘å†³å®šå›å»äº†ã€‚åœ¨æˆ‘æœ€åä¸€ä¸ªé¢è¯•â€”â€”æ­å·æ¶‚é¸¦çš„æ—¶å€™ï¼Œæˆ‘æ¸…æ¥šåœ°è®°å¾—æ¶‚é¸¦HRå¾ˆæ˜ç¡®çš„å‘Šè¯‰æˆ‘ï¼Œå…¬å¸åŠ ç­ä¸¥é‡ï¼Œå¤§å°å‘¨ã€‚æˆ‘æƒ³ï¼Œè¿™æ ·çš„å…¬å¸æ˜¯æˆ‘æƒ³è¦å»ä¸ºä¹‹å¥‹æ–—çš„å—ï¼Ÿä¸ï¼Œå¯¹äºå…¬å¸æ¥è¯´ï¼Œå‘˜å·¥éƒ½åªæ˜¯å…¬å¸çš„ä¸€é¢—é¢—çš„èºä¸é’‰ï¼Œéƒ½æ˜¯å¯è¢«æ›¿ä»£çš„é›¶ä»¶ï¼Œä¸ºä½•è¦ä¸ºè¿™ç§è¡€æ±—å·¥å‚å»ç‰ºç‰²è‡ªå·±çš„ç”Ÿæ´»ï¼Œæ­å·çš„996ç›¸å¿…åœ¨æœ€è¿‘äº”å¹´ä¹‹å†…éƒ½ä¼šæ˜¯è¿™ä¸ªåŸå¸‚ç¨‹åºå‘˜çš„æ¢¦é­‡ï¼Œæœ€è®©äººæ— å¥ˆçš„æ˜¯ï¼Œæœ‰äº›äººç«Ÿç„¶çœŸçš„è®¤ä¸ºè‡ªå·±æ˜¯åœ¨ä¸ºè‡ªå·±â€œå¥‹æ–—â€ï¼Œæ®Šä¸çŸ¥ä»–ä»¬æ˜¯è¢«å‹è¿«çš„ç¤¾ä¼šåº•å±‚çš„åŠ³åŠ¨è€…ï¼Œå¿˜è®°äº†æ›¾ç»çš„â€œ8å°æ—¶å·¥ä½œåˆ¶â€æ˜¯ç”±ä¸€äº›å¤šä¹ˆå‘å¾€è‡ªç”±çš„äººåæŠ—äº‰å–æ¥çš„ï¼ŒçœŸæ­£å®£ä¼ 996â€œç¦æŠ¥â€çš„èµ„æœ¬å®¶å·²ç»èµšè¶³äº†é’±é€€ä¼‘äº†ï¼ˆå†™äº2019å¹´9æœˆ10æ—¥ï¼‰ã€‚</p>
<h4 id="å›é¦–"><a href="#å›é¦–" class="headerlink" title="å›é¦–"></a>å›é¦–</h4><p>æˆ‘åœ¨å†™è¿™ç¯‡åšå®¢çš„æ—¶å€™ï¼Œè„‘ä¸­ä¸æ–­åœ°å›å¿†èµ·17å¹´2æœˆåº•æ¥åˆ°æ­å·ç›´åˆ°ç°åœ¨å‘ç”Ÿçš„ç§ç§äº‹æƒ…ã€‚ç¡®å®ç”±é‚£å¥è¯æ‰€è¯´ï¼Œå¾ˆå¤šå¹´åå›æƒ³èµ·æ¥ï¼Œä½ ä»€ä¹ˆæ—¶å€™å‡†å¤‡è€ƒç ”ã€å‡ºå›½ç•™å­¦ã€å·¥ä½œã€æ‹çˆ±ã€ç»“å©šç”Ÿå­ã€è·³æ§½ï¼Œéƒ½æœ‰å¯èƒ½ä¼šæ˜¯äººç”Ÿä¸­çš„ä¸€ä¸ªå¤§çš„è½¬æŠ˜ç‚¹ï¼Œè€Œè‡ªå·±å½“æ—¶è¿˜åªæ˜¯è®¤ä¸ºè¿™äº›äº‹åªæ˜¯äººç”Ÿä¸­å¾ˆå°çš„ä¸€ä»¶äº‹æƒ…ã€‚</p>
<p>ä»åŒèŠ±é¡ºè·³æ§½å»æ­å·çš„ç¬¬äºŒå®¶å…¬å¸å·¥ä½œï¼Œæ˜¯æˆ‘è¿™ä¸¤å¹´æœ€åæ‚”çš„äº‹æƒ…ã€‚å¦‚æœæˆ‘å½“æ—¶ä¸ä»åŒèŠ±é¡ºèµ°ï¼Œæˆ–è€…è¯´åœ¨åŒèŠ±é¡ºèƒ½æœ‰ä¸€äº›å¥½çš„å·¥ä½œä½“éªŒï¼Œä¹Ÿè®¸ç›®å‰å°±æ˜¯å¦ä¸€ç§çŠ¶æ€äº†å§ã€‚åŸæœ¬æˆ‘è·³æ§½åçš„è®¡åˆ’æ˜¯ï¼Œåœ¨æ–°çš„å…¬å¸å°†è‡ªå·±æ²‰æ·€ä¸¤ä¸‰å¹´ï¼Œå°†æŠ€æœ¯æå‡ä¸Šå»ï¼Œä¸‰å¹´åè·³æ§½å»ä¸€çº¿å¤§å…¬å¸ï¼Œä½†æ˜¯æ— å¥ˆå…¬å¸è¿æ”¯æŒæˆ‘å¾…å¤Ÿä¸¤å¹´éƒ½åšä¸åˆ°ã€‚2019å¹´ï¼Œå…¶å®æ˜¯æˆ‘æœ€æŠ‘éƒï¼Œä¸–ç•Œæœ€é»‘æš—çš„ä¸€å¹´ã€‚è¿™å¹´æ¥ï¼Œåœ¨æ–°çš„å…¬å¸å·¥ä½œï¼Œå…¬å¸å‘å±•ä¸é¡ºåˆ©ï¼Œå¿—åŒé“åˆçš„æœ‹å‹ä¹Ÿæ¸å°‘ï¼Œä»¥å‰å‡ ä¸ªè€æœ‹å‹ä»æ¯å‘¨å‡ æ¬¡åœ¨ä¸€èµ·åƒé¥­ã€ç©çš„çŠ¶æ€çªç„¶å°±å˜æˆä¸€ä¸ªæœˆéƒ½è§ä¸äº†ä¸€é¢ã€‚ä¹Ÿè®¸æ˜¯ä»–ä»¬ä¹Ÿéƒ½æœ‰äº†è‡ªå·±çš„å¥³æœ‹å‹ï¼Œæœ‰äº†è‡ªå·±çš„ç”Ÿæ´»ï¼Œé¡¾ä¸ä¸Šæˆ‘äº†å§ã€‚è€Œæˆ‘æ¯å‘¨æœ«éƒ½æƒ³å‡ºå»ç©ï¼Œå´æ‰¾ä¸åˆ°åŒè¡Œçš„ä¼™ä¼´ã€‚</p>
<p>åœ¨æ­å·çš„ä¸¤å¹´æ—¶é—´ï¼Œæˆ‘å»äº†å‘¨è¾¹çš„å¾ˆå¤šåœ°æ–¹ï¼Œåˆšæ¯•ä¸šé‚£ä¼šä¹Ÿè®¸æƒ³çš„æ˜¯ï¼Œæˆ‘ç»ˆäºè·å¾—äº†è‡ªå·±æƒ³è¦çš„è‡ªç”±ç”Ÿæ´»ï¼Œå·¥èµ„ä¹Ÿè¶³ä»¥è®©æˆ‘åˆ°å¤„å»æ—…æ¸¸ã€‚æˆ‘æ›¾ç»æƒ³ï¼Œè‡ªå·±å®¶è¦æ˜¯æ±Ÿæµ™æ²ªè¿™ä¸€å¸¦çš„è¯¥æœ‰å¤šå¥½ï¼Œè¥¿å®‰é‚£è¾¹çœŸçš„å¾ˆè½åï¼Œè™½ç„¶åŸå¸‚ä¸­ä¸å¤ªçœ‹å¾—å‡ºå·®è·ï¼Œä½†æ˜¯åŸå¸‚å‘¨è¾¹çš„å¸‚ã€å¿ã€æ‘ï¼Œå´æ˜¯è¥¿åŒ—é‚£è¾¹æ€ä¹ˆä¹Ÿè¿½èµ¶ä¸ä¸Šæ¥çš„ã€‚è€Œä¸”æˆ‘åœ¨è¿™è¾¹èƒ½å¤Ÿæ¥è§¦åˆ°æ›´æ–°çš„ä¸œè¥¿ï¼Œä¸€äº›æ–°å…´çš„äº’è”ç½‘äº§å“éƒ½ä¼šåœ¨è¿™ä¸€å¸¦ä¼˜å…ˆæŠ•æ”¾ï¼Œä¾‹å¦‚å…±äº«å•è½¦ã€å…±äº«å……ç”µå®ã€æ™ºæ…§åŸå¸‚æœåŠ¡ç­‰ç­‰ã€‚æˆ‘æƒ³æ­å·åº”è¯¥ä¼šæ˜¯æœ€ä¼˜å…ˆå¼€å§‹æ™ºèƒ½åŒ–ã€äº’è”ç½‘åŒ–çš„åŸå¸‚ä¹‹ä¸€å§ã€‚</p>
<p>å¯æƒœäº†ï¼Œå³å°†ç¦»å¼€è¿™é‡Œï¼Œæ”¾å¼ƒä¸¤å¹´æ¥åœ¨è¿™è¾¹æ‹¥æœ‰çš„ä¸€åˆ‡ã€‚æˆ‘çš„æœ‹å‹ï¼Œè¿˜æœ‰æˆ‘çš„ç”Ÿæ´»ã€‚è™½ç„¶å¾ˆä¸æƒ³è¯´å†è§ï¼Œä½†æ˜¯è°åˆèƒ½ä¸»å¯¼è‡ªå·±çš„å‘½è¿å‘¢ã€‚</p>
<p>æ­å·ï¼Œæœ‰ç¼˜å†è§å§ï¼</p>
<p><img src="/blog/20190909/å…¶å®æˆ‘ä¸æƒ³ç¦»å¼€è¿™é‡Œ/mu.jpg" alt></p>
]]></content>
      <categories>
        <category>ç¨‹åºäººç”Ÿ</category>
      </categories>
      <tags>
        <tag>ä¸ªäººéšç¬”</tag>
      </tags>
  </entry>
  <entry>
    <title>å¹¶å‘ç¼–ç¨‹å­¦ä¹ (ä¸ƒ)ï¼šFork/Joinæ¡†æ¶åŸç†åŠdemo</title>
    <url>/blog/20190814/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0-%E4%B8%83-%EF%BC%9AFork-Join%E6%A1%86%E6%9E%B6%E5%8E%9F%E7%90%86%E5%8F%8Ademo/</url>
    <content><![CDATA[<p><img src="/blog/20190814/å¹¶å‘ç¼–ç¨‹å­¦ä¹ -ä¸ƒ-ï¼šFork-Joinæ¡†æ¶åŸç†åŠdemo/fm.jpg" alt="fm.jpg"></p>
<a id="more"></a>
<h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><p>Fork/Joinæ¡†æ¶æ˜¯jdk1.7å¼•å…¥çš„ä¸€ä¸ªåŸºäºâ€œåˆ†æ²»â€æ€æƒ³çš„å¤šçº¿ç¨‹æ¡†æ¶ã€‚å®ƒçš„åŠŸèƒ½æ˜¯å°†ä¸€ä¸ªå¤§ä»»åŠ¡åˆ‡åˆ†(<strong>fork</strong>)æˆå¤šä¸ªç›¸åŒé€»è¾‘çš„å°ä»»åŠ¡ï¼Œåˆ†è€Œæ²»ä¹‹ï¼Œå½“å­ä»»åŠ¡å…¨éƒ½æ‰§è¡Œå®Œæˆä¹‹åï¼Œå°†ç»“æœåˆå¹¶(<strong>join</strong>)èµ·æ¥ï¼Œæœ€ç»ˆæˆä¸ºæ•´ä½“ä»»åŠ¡çš„æ‰§è¡Œç»“æœã€‚åŸç†å¯ä»¥æŠ½è±¡æˆä¸‹å›¾è¡¨ç¤ºï¼š</p>
<p><img src="/blog/20190814/å¹¶å‘ç¼–ç¨‹å­¦ä¹ -ä¸ƒ-ï¼šFork-Joinæ¡†æ¶åŸç†åŠdemo/fj.png" alt="Fork/Join"></p>
<h3 id="Fork-Joinç›¸å…³ä»£ç åŸç†åŠæ€æƒ³"><a href="#Fork-Joinç›¸å…³ä»£ç åŸç†åŠæ€æƒ³" class="headerlink" title="Fork/Joinç›¸å…³ä»£ç åŸç†åŠæ€æƒ³"></a>Fork/Joinç›¸å…³ä»£ç åŸç†åŠæ€æƒ³</h3><h6 id="Fork-Joinæ‰§è¡Œæ­¥éª¤"><a href="#Fork-Joinæ‰§è¡Œæ­¥éª¤" class="headerlink" title="Fork/Joinæ‰§è¡Œæ­¥éª¤"></a>Fork/Joinæ‰§è¡Œæ­¥éª¤</h6><ol>
<li><p>è¿›è¡Œä»»åŠ¡åˆ†å‰²ï¼šå°†ä»»åŠ¡åˆ†å‰²æˆå°ä»»åŠ¡ï¼Œç„¶åè¿™ä¸ªå°ä»»åŠ¡æœ‰å¯èƒ½è¿˜éœ€è¦ç»§ç»­åˆ†å‰²ï¼Œç›´åˆ°è¶³å¤Ÿå°ã€‚</p>
</li>
<li><p>æ‰§è¡Œå¹¶åˆå¹¶ç»“æœï¼šåˆ†å‰²çš„å­ä»»åŠ¡åˆ†åˆ«æ”¾åœ¨åŒç«¯é˜Ÿåˆ—é‡Œï¼Œç„¶åå‡ ä¸ªå¯åŠ¨çº¿ç¨‹åˆ†åˆ«ä»åŒç«¯é˜Ÿåˆ—é‡Œè·å–ä»»åŠ¡æ‰§è¡Œã€‚å­ä»»åŠ¡æ‰§è¡Œå®Œçš„ç»“æœéƒ½ç»Ÿä¸€æ”¾åœ¨ä¸€ä¸ªé˜Ÿåˆ—é‡Œï¼Œå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ä»é˜Ÿåˆ—é‡Œæ‹¿æ•°æ®ï¼Œç„¶ååˆå¹¶è¿™äº›æ•°æ®ã€‚</p>
</li>
</ol>
<p>Fork/Joinä½¿ç”¨ä¸¤ä¸ªç±»å®Œæˆä»¥ä¸Šæ­¥éª¤ï¼š</p>
<ul>
<li><strong>ForkJoinTask</strong>ï¼š<ul>
<li>Fork/Joinæä¾›äº†ä¸¤ä¸ªå­ç±»ï¼šRecursiveActionï¼šç”¨äºæ²¡æœ‰è¿”å›ç»“æœçš„ä»»åŠ¡ï¼›RecursiveTask ï¼šç”¨äºæœ‰è¿”å›ç»“æœçš„ä»»åŠ¡</li>
</ul>
</li>
<li><strong>ForkJoinPool</strong> ï¼š<code>public class ForkJoinPool extends AbstractExecutorService{ ... }</code>ForkJoinTaskéœ€è¦é€šè¿‡ForkJoinPoolæ¥æ‰§è¡Œï¼Œä»»åŠ¡åˆ†å‰²å‡ºçš„å­ä»»åŠ¡ä¼šæ·»åŠ åˆ°å½“å‰å·¥ä½œçº¿ç¨‹æ‰€ç»´æŠ¤çš„åŒç«¯é˜Ÿåˆ—ä¸­ï¼Œè¿›å…¥é˜Ÿåˆ—çš„å¤´éƒ¨ã€‚å½“ä¸€ä¸ªå·¥ä½œçº¿ç¨‹çš„é˜Ÿåˆ—é‡Œæš‚æ—¶æ²¡æœ‰ä»»åŠ¡æ—¶ï¼Œå®ƒä¼šéšæœºä»å…¶ä»–å·¥ä½œçº¿ç¨‹çš„é˜Ÿåˆ—çš„å°¾éƒ¨è·å–ä¸€ä¸ªä»»åŠ¡ã€‚è¿™ç§ç®—æ³•æˆä¸º<strong>å·¥ä½œçªƒå–ç®—æ³•(work-stealing)</strong></li>
</ul>
<h6 id="å·¥ä½œçªƒå–ç®—æ³•-work-stealing"><a href="#å·¥ä½œçªƒå–ç®—æ³•-work-stealing" class="headerlink" title="å·¥ä½œçªƒå–ç®—æ³•(work-stealing)"></a>å·¥ä½œçªƒå–ç®—æ³•(work-stealing)</h6><ul>
<li><p>Fork/Joinæ¡†æ¶å†…éƒ¨å®ç°äº†ä¸€ä¸ªç±»ä¼¼äºLinkedBlockingDequeçš„åŒç«¯é˜Ÿåˆ—ç”¨ä½œå·¥ä½œçº¿ç¨‹çš„ä»»åŠ¡é˜Ÿåˆ—<strong>WorkQueue</strong>ã€‚ä½¿ç”¨<code>ForkJoinWorkerThread</code>ä¿å­˜å·¥ä½œçº¿ç¨‹ï¼Œ<code>ForkJoinPool.WorkQueue</code>å°±åœ¨å…¶å†…éƒ¨ã€‚</p>
</li>
<li><p>Fork/Joinæ¯ä¸ªå·¥ä½œçº¿ç¨‹åœ¨è¿è¡Œä¸­äº§ç”Ÿäº†æ–°çš„ä»»åŠ¡(é€šå¸¸æ˜¯è°ƒç”¨forkæ–¹æ³•)çš„æ—¶å€™ï¼Œå°†ä»»åŠ¡åŠ å…¥WorkQueueå°¾éƒ¨ï¼Œå¹¶ä¸”å·¥ä½œçº¿ç¨‹æ¯æ¬¡å–å‡ºä»»åŠ¡æ‰§è¡Œä¹Ÿæ˜¯ä»é˜Ÿå°¾å–å‡ºæ‰§è¡Œï¼Œå³LIFO</p>
</li>
<li><p>æ¯ä¸ªå·¥ä½œçº¿ç¨‹åœ¨å¤„ç†è‡ªå·±çš„å·¥ä½œé˜Ÿåˆ—åŒæ—¶ï¼Œä¼šå°è¯•çªƒå–ä¸€ä¸ªä»»åŠ¡ï¼ˆæˆ–æ˜¯æ¥è‡ªäºåˆšåˆšæäº¤åˆ° pool çš„ä»»åŠ¡ï¼Œæˆ–æ˜¯æ¥è‡ªäºå…¶ä»–å·¥ä½œçº¿ç¨‹çš„å·¥ä½œé˜Ÿåˆ—ï¼‰ï¼Œçªƒå–çš„ä»»åŠ¡ä½äºå…¶ä»–çº¿ç¨‹çš„å·¥ä½œé˜Ÿåˆ—çš„é˜Ÿé¦–ï¼Œä¹Ÿå°±æ˜¯è¯´å·¥ä½œçº¿ç¨‹åœ¨çªƒå–å…¶ä»–å·¥ä½œçº¿ç¨‹çš„ä»»åŠ¡æ—¶ï¼Œä½¿ç”¨çš„æ˜¯ FIFO æ–¹å¼ã€‚</p>
</li>
<li><p>åœ¨é‡åˆ° join() æ—¶ï¼Œå¦‚æœéœ€è¦ join çš„ä»»åŠ¡å°šæœªå®Œæˆï¼Œåˆ™ä¼šå…ˆå¤„ç†å…¶ä»–ä»»åŠ¡ï¼Œå¹¶ç­‰å¾…å…¶å®Œæˆã€‚</p>
</li>
<li><p>åœ¨æ—¢æ²¡æœ‰è‡ªå·±çš„ä»»åŠ¡ï¼Œä¹Ÿæ²¡æœ‰å¯ä»¥çªƒå–çš„ä»»åŠ¡æ—¶ï¼Œè¿›å…¥ä¼‘çœ ã€‚</p>
</li>
</ul>
<h3 id="Fork-Join-demoæ¼”ç¤º"><a href="#Fork-Join-demoæ¼”ç¤º" class="headerlink" title="Fork/Join demoæ¼”ç¤º"></a>Fork/Join demoæ¼”ç¤º</h3><blockquote>
<p>ä½¿ç”¨Fork/Joinå®Œæˆå¤§é‡æœ‰åºæ•°å­—çš„åŠ å’Œ</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyCalculateTask</span> <span class="keyword">extends</span> <span class="title">RecursiveTask</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> THREADSHOLD = <span class="number">50</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> start;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> end;</span><br><span class="line">  <span class="keyword">private</span> List&lt;String&gt; list;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">MyCalculateTask</span><span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> end, List&lt;String&gt; list)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.start = start;</span><br><span class="line">    <span class="keyword">this</span>.end = end;</span><br><span class="line">    <span class="keyword">this</span>.list = list;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> Integer <span class="title">compute</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (end - start &lt; THREADSHOLD) &#123;</span><br><span class="line">      <span class="comment">// å½“ä¸¤æ•°å­—ä¹‹é—´å·®å€¼å°äºæŒ‡å®šå€¼ å°±ä¸å†æŸ¥åˆ†æˆå°ä»»åŠ¡ </span></span><br><span class="line">      String so = <span class="string">""</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = start; i &lt; end; i++) &#123;</span><br><span class="line">        sum += i;</span><br><span class="line">        so += list.get(i) + <span class="string">","</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      System.out.println(Thread.currentThread().getName() + <span class="string">"å¤„ç† "</span> + so + <span class="string">" çš„æ•°æ®"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">int</span> mid = (start + end) / <span class="number">2</span>;</span><br><span class="line">      <span class="comment">// ä¸€åˆ†ä¸ºäºŒ æ‹†åˆ†ä»»åŠ¡</span></span><br><span class="line">      <span class="keyword">final</span> MyCalculateTask left = <span class="keyword">new</span> MyCalculateTask(start, mid, list);</span><br><span class="line">      <span class="keyword">final</span> MyCalculateTask right = <span class="keyword">new</span> MyCalculateTask(mid, end, list);</span><br><span class="line">      left.fork();</span><br><span class="line">      right.fork();</span><br><span class="line">      sum += left.join();</span><br><span class="line">      sum += right.join();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException, ExecutionException </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    ForkJoinPool pool = <span class="keyword">new</span> ForkJoinPool();</span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">400</span>;</span><br><span class="line">    List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;(count);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">      list.add(<span class="string">"i-"</span> + i);</span><br><span class="line">      sum += i;</span><br><span class="line">    &#125;</span><br><span class="line">    MyCalculateTask task = <span class="keyword">new</span> MyCalculateTask(<span class="number">0</span>, count, list);</span><br><span class="line">    <span class="keyword">final</span> ForkJoinTask&lt;Integer&gt; submit = pool.submit(task);</span><br><span class="line">    System.out.println(<span class="string">"sum = "</span> + sum + <span class="string">" --- submit.get() = "</span> + submit.get());</span><br><span class="line">    pool.awaitTermination(<span class="number">5</span>, TimeUnit.SECONDS);</span><br><span class="line">    pool.shutdown();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>Fork/Joinæ¡†æ¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®Œæˆå¾ˆå¤šè¿™ç§å¤§ä»»åŠ¡å¯ä»¥æ‹†åˆ†æˆå°ä»»åŠ¡æ‰§è¡Œçš„åœºæ™¯ï¼Œä¸è¿‡ä¸Šé¢çš„æ–¹æ³•å¹¶ä¸æ˜¯æœ€ä½³æ‰§è¡Œè°ƒç”¨æ–¹å¼</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">left.fork();  </span><br><span class="line">right.fork();</span><br><span class="line">æ›¿æ¢ä¸º</span><br><span class="line">invokeAll(left, right);</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºå¯¹äºFork/Joinæ¨¡å¼ï¼Œå‡å¦‚Poolé‡Œé¢çº¿ç¨‹æ•°é‡æ˜¯å›ºå®šçš„ï¼Œé‚£ä¹ˆè°ƒç”¨å­ä»»åŠ¡çš„forkæ–¹æ³•ç›¸å½“äºAå…ˆåˆ†å·¥ç»™Bï¼Œç„¶åAå½“ç›‘å·¥ä¸å¹²æ´»ï¼ŒBå»å®ŒæˆAäº¤ä»£çš„ä»»åŠ¡ã€‚æ‰€ä»¥ä¸Šé¢çš„æ¨¡å¼ç›¸å½“äºæµªè´¹äº†ä¸€ä¸ªçº¿ç¨‹ã€‚é‚£ä¹ˆå¦‚æœä½¿ç”¨invokeAllç›¸å½“äºAåˆ†å·¥ç»™Båï¼ŒAå’ŒBéƒ½å»å®Œæˆå·¥ä½œã€‚è¿™æ ·å¯ä»¥æ›´å¥½çš„åˆ©ç”¨çº¿ç¨‹æ± ï¼Œç¼©çŸ­æ‰§è¡Œçš„æ—¶é—´ã€‚</p>
<blockquote>
<p>å‚è€ƒï¼š<a href="http://ifeve.com/talk-concurrency-forkjoin/" target="_blank" rel="noopener">http://ifeve.com/talk-concurrency-forkjoin/</a></p>
</blockquote>
]]></content>
      <categories>
        <category>JavaåŸºç¡€</category>
        <category>å¹¶å‘ç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>JavaåŸºç¡€</tag>
        <tag>å¹¶å‘ç¼–ç¨‹</tag>
        <tag>Fork/Joinæ¡†æ¶</tag>
        <tag>ForkJoinPool</tag>
        <tag>çº¿ç¨‹æ± </tag>
      </tags>
  </entry>
  <entry>
    <title>ã€è®¾è®¡æ¨¡å¼ã€‘è®¾è®¡æ¨¡å¼åŸºæœ¬æ€æƒ³ä»¥åŠ23ç§æ¨¡å¼æ€»ç»“æ•´ç†</title>
    <url>/blog/20190812/%E3%80%90%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E3%80%91%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9F%BA%E6%9C%AC%E6%80%9D%E6%83%B3%E4%BB%A5%E5%8F%8A23%E7%A7%8D%E6%A8%A1%E5%BC%8F%E6%80%BB%E7%BB%93%E6%95%B4%E7%90%86/</url>
    <content><![CDATA[<p><img src="/blog/20190812/ã€è®¾è®¡æ¨¡å¼ã€‘è®¾è®¡æ¨¡å¼åŸºæœ¬æ€æƒ³ä»¥åŠ23ç§æ¨¡å¼æ€»ç»“æ•´ç†/bz.png" alt="å°é¢"></p>
<a id="more"></a>
<h3 id="è®¾è®¡æ¨¡å¼ä¸»è¦æ€æƒ³"><a href="#è®¾è®¡æ¨¡å¼ä¸»è¦æ€æƒ³" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¸»è¦æ€æƒ³"></a>è®¾è®¡æ¨¡å¼ä¸»è¦æ€æƒ³</h3><p>è®¾è®¡æ¨¡å¼æ˜¯åœ¨é•¿æœŸåº”ç”¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¼—å¤šå¼€å‘è€…æ€»ç»“å½’çº³å‡ºæ¥çš„ç¨‹åºæ¶æ„ä¸è®¾è®¡æ€æƒ³ã€‚æ˜¯ç»è¿‡å®è·µè¯æ˜çš„ï¼Œå¯åœ¨å®é™…èƒŒæ™¯ä¸‹ä½¿ç”¨çš„ä¸€ç³»åˆ—ç¨‹åºè®¾è®¡æ–¹æ¡ˆã€‚è®¾è®¡æ¨¡å¼äº§ç”Ÿçš„æ ¹æœ¬ç›®çš„å°±æ˜¯ä¸ºäº†è§£å†³å¼€å‘è¿‡ç¨‹ä¸­é‡å¤çš„ä»£ç ç¼–å†™ï¼Œä»¥åŠè®©ç¨‹åºæ›´æ˜“æ‰©å±•å¤ç”¨ã€‚</p>
<h4 id="è®¾è®¡æ¨¡å¼çš„åŸåˆ™"><a href="#è®¾è®¡æ¨¡å¼çš„åŸåˆ™" class="headerlink" title="è®¾è®¡æ¨¡å¼çš„åŸåˆ™"></a>è®¾è®¡æ¨¡å¼çš„åŸåˆ™</h4><ul>
<li>å•ä¸€èŒè´£ï¼šæ¯ä¸ªç±»éƒ½åº”è¯¥å®ç°å•ä¸€çš„åŠŸèƒ½ï¼Œå¦åˆ™åº”è¯¥å°†ç±»è¿›è¡Œæ‹†åˆ†</li>
<li>é‡Œæ°æ›¿æ¢ï¼šå³ç»§æ‰¿å¤ç”¨/åˆæˆå¤ç”¨ã€‚å°½é‡ä½¿ç”¨åˆæˆ/èšåˆçš„æ–¹å¼è€Œä¸æ˜¯ç»§æ‰¿ã€‚ä»»ä½•çˆ¶ç±»å‡ºç°çš„åœ°æ–¹ï¼Œå­ç±»éƒ½å¯ä»¥å‡ºç°ã€‚æ´¾ç”Ÿç±»å¯ä»¥åœ¨åŸºç±»çš„åŸºç¡€ä¸Šæ‰©å±•è‡ªå·±çš„åŠŸèƒ½å®ç°ã€‚æ˜¯å¯¹â€œå¼€é—­åŸåˆ™â€çš„ä¸€ä¸ªè¡¥å……ã€‚åœ¨é‡Œæ°æ›¿æ¢åŸåˆ™ä¸­ï¼Œå°½é‡ä¸è¦å¯¹çˆ¶ç±»è¿›è¡Œé‡è½½æˆ–è€…é‡å†™ï¼Œå› ä¸ºçˆ¶ç±»ä»£è¡¨ä¸€ä¸ªå®šä¹‰å¥½çš„ç»“æ„ï¼Œé€šè¿‡è§„èŒƒå¥½çš„æ¥å£ä¸å¤–ç•Œè¿›è¡Œäº¤äº’ï¼Œå­ç±»ä¸åº”è¯¥éšæ„ç ´åå®ƒï¼Œè€Œæ˜¯å¯¹å…¶è¿›è¡Œæ‰©å±•ã€‚</li>
<li>ä¾èµ–å€’ç½®ï¼šâ€œå¼€é—­åŸåˆ™â€çš„åŸºç¡€ã€‚å³é¢å‘æ¥å£ç¼–ç¨‹ã€‚ä¾èµ–äºæŠ½è±¡è€Œä¸æ˜¯ä¾èµ–äºå…·ä½“çš„å®ç°ï¼Œç¼–ç¨‹æ—¶é‡åˆ°å…·ä½“çš„ç±»æ—¶ï¼Œä¸ä¸å…·ä½“çš„ç±»äº¤äº’ï¼Œè€Œä¸æŠ½è±¡æ¥å£è¿›è¡Œäº¤äº’ã€‚ä¾¿äºå¢åŠ æ–°çš„å…·ä½“ç±»çš„æ—¶å€™ä»£ç å¯ä»¥å¤ç”¨ã€‚</li>
<li>æ¥å£éš”ç¦»ï¼šæ¯ä¸ªæ¥å£ä¸åº”è¯¥å­˜åœ¨å­ç±»ç”¨ä¸åˆ°å´å¿…é¡»å®ç°çš„æ–¹æ³•ï¼Œå¦åˆ™å°±åº”è¯¥å°†æ¥å£æ‹†åˆ†ï¼Œå°†èŒè´£å•ä¸€åŒ–ã€‚</li>
<li>æœ€å°‘çŸ¥é“ï¼šå³è¿ªç±³ç‰¹æ³•åˆ™ã€‚ä¸€ä¸ªç±»å¯¹äºè‡ªå·±ä¾èµ–çš„ç±»çŸ¥é“çš„è¶Šå°‘è¶Šå¥½ï¼Œæ— è®ºè¢«ä¾èµ–çš„ç±»å¤šä¹ˆå¤æ‚ï¼Œéƒ½åº”è¯¥å°†é€»è¾‘å°è£…åœ¨æ–¹æ³•å†…éƒ¨ï¼Œé€šè¿‡ä¸€ä¸ªå…±æœ‰çš„æ–¹æ³•æä¾›ç»™ä¾èµ–ç±»ä½¿ç”¨ï¼Œè¿™æ ·å½“è¢«ä¾èµ–ç±»å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œæ‰ä¼šå°½å¯èƒ½å°‘çš„å½±å“ä¾èµ–ç±»ã€‚</li>
</ul>
<h3 id="è®¾è®¡æ¨¡å¼çš„åˆ†ç±»"><a href="#è®¾è®¡æ¨¡å¼çš„åˆ†ç±»" class="headerlink" title="è®¾è®¡æ¨¡å¼çš„åˆ†ç±»"></a>è®¾è®¡æ¨¡å¼çš„åˆ†ç±»</h3><blockquote>
<p>ç‚¹å‡»å¯¹åº”é“¾æ¥è·³è½¬åˆ°è¯¥è®¾è®¡æ¨¡å¼çš„è¯¦ç»†æ•´ç†ä¸ä»£ç ç¤ºä¾‹</p>
</blockquote>
<table>
<thead>
<tr>
<th>èŒƒå›´</th>
<th>åˆ›å»ºå‹æ¨¡å¼</th>
<th>ç»“æ„å‹æ¨¡å¼</th>
<th>è¡Œä¸ºå‹æ¨¡å¼</th>
</tr>
</thead>
<tbody>
<tr>
<td>å¯¹è±¡åˆ›å»º</td>
<td><a href="http://zhangjiaheng.cn/blog/20190607/%E6%B7%B1%E5%BA%A6%E5%88%86%E6%9E%90%E5%A6%82%E4%BD%95%E5%86%99%E5%87%BA%E4%B8%80%E4%B8%AA%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E5%8D%95%E4%BE%8B/">Singletonï¼ˆå•ä¾‹æ¨¡å¼ï¼‰</a><br>Prototype(åŸå‹æ¨¡å¼)<br>Factory Methodï¼ˆå·¥å‚æ–¹æ³•æ¨¡å¼ï¼‰<br>Abstract Factoryï¼ˆæŠ½è±¡å·¥å‚æ¨¡å¼ï¼‰<br>Builderï¼ˆå»ºé€ è€…æ¨¡å¼ï¼‰</td>
<td></td>
<td></td>
</tr>
<tr>
<td>æ¥å£é€‚é…</td>
<td></td>
<td>Adapterï¼ˆé€‚é…å™¨æ¨¡å¼ï¼‰<br>Bridgeï¼ˆæ¡¥æ¥æ¨¡å¼ï¼‰<br>Facadeï¼ˆå¤–è§‚æ¨¡å¼ï¼‰</td>
<td></td>
</tr>
<tr>
<td>å¯¹è±¡è§£è€¦</td>
<td></td>
<td></td>
<td>Mediatorï¼ˆä¸­ä»‹è€…æ¨¡å¼ï¼‰<br>Observerï¼ˆè§‚å¯Ÿè€…æ¨¡å¼ï¼‰</td>
</tr>
<tr>
<td>æŠ½è±¡é›†åˆ</td>
<td></td>
<td>Compositeï¼ˆç»„åˆæ¨¡å¼ï¼‰</td>
<td>Iteratorï¼ˆè¿­ä»£å™¨æ¨¡å¼ï¼‰</td>
</tr>
<tr>
<td>è¡Œä¸ºæ‰©å±•</td>
<td></td>
<td>Decoratorï¼ˆè£…é¥°æ¨¡å¼ï¼‰</td>
<td>Visitorï¼ˆè®¿é—®è€…æ¨¡å¼ï¼‰<br>Chain of Responsibilityï¼ˆèŒè´£é“¾ï¼‰</td>
</tr>
<tr>
<td>ç®—æ³•å°è£…</td>
<td></td>
<td></td>
<td><a href="http://zhangjiaheng.cn/blog/20190707/%E3%80%90%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E3%80%91%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/">Templateï¼ˆæ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼‰</a><br>Strategyï¼ˆç­–ç•¥æ¨¡å¼ï¼‰</td>
</tr>
<tr>
<td>æ€§èƒ½ä¸å¯¹è±¡è®¿é—®</td>
<td></td>
<td>Flyweightï¼ˆäº«å…ƒæ¨¡å¼ï¼‰<br>Proxyï¼ˆä»£ç†æ¨¡å¼ï¼‰</td>
<td></td>
</tr>
<tr>
<td>å¯¹è±¡çŠ¶æ€</td>
<td></td>
<td></td>
<td>Mementoï¼ˆå¤‡å¿˜å½•æ¨¡å¼ï¼‰<br>Stateï¼ˆçŠ¶æ€æ¨¡å¼ï¼‰</td>
</tr>
<tr>
<td>å…¶ä»–</td>
<td></td>
<td></td>
<td>Interpreterï¼ˆè§£é‡Šå™¨æ¨¡å¼ï¼‰</td>
</tr>
</tbody>
</table>
<h4 id="æ€»ç»“ä¸‹è®¾è®¡æ¨¡å¼çš„å½’ç±»"><a href="#æ€»ç»“ä¸‹è®¾è®¡æ¨¡å¼çš„å½’ç±»" class="headerlink" title="æ€»ç»“ä¸‹è®¾è®¡æ¨¡å¼çš„å½’ç±»"></a>æ€»ç»“ä¸‹è®¾è®¡æ¨¡å¼çš„å½’ç±»</h4><p><img src="/blog/20190812/ã€è®¾è®¡æ¨¡å¼ã€‘è®¾è®¡æ¨¡å¼åŸºæœ¬æ€æƒ³ä»¥åŠ23ç§æ¨¡å¼æ€»ç»“æ•´ç†/sjmo.png" alt="è®¾è®¡æ¨¡å¼åˆ†ç±» - å¹•å¸ƒ"></p>
<h4 id="åˆ›å»ºå‹è®¾è®¡æ¨¡å¼"><a href="#åˆ›å»ºå‹è®¾è®¡æ¨¡å¼" class="headerlink" title="åˆ›å»ºå‹è®¾è®¡æ¨¡å¼"></a>åˆ›å»ºå‹è®¾è®¡æ¨¡å¼</h4><p>åˆ›å»ºå‹è®¾è®¡æ¨¡å¼æä¾›äº†ä¸€ç§åœ¨åˆ›å»ºå¯¹è±¡çš„åŒæ—¶éšè—åˆ›å»ºé€»è¾‘çš„æ–¹å¼ï¼Œä½¿è°ƒç”¨è€…æ— éœ€newå¯¹è±¡ï¼Œåœ¨ç¨‹åºä¸­é’ˆå¯¹ç»™å®šä¸šåŠ¡åœºæ™¯å»è°ƒç”¨ç‰¹å®šçš„å¯¹è±¡åˆ›å»ºæ–¹æ³•ï¼Œä½¿ç¨‹åºæ›´åŠ çµæ´»ã€‚</p>
<h4 id="è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼"><a href="#è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼" class="headerlink" title="è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼"></a>è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼</h4><p>è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ä¸»è¦å…³æ³¨å¯¹è±¡ä¹‹é—´çš„é€šä¿¡ã€‚</p>
<h4 id="ç»“æ„å‹è®¾è®¡æ¨¡å¼"><a href="#ç»“æ„å‹è®¾è®¡æ¨¡å¼" class="headerlink" title="ç»“æ„å‹è®¾è®¡æ¨¡å¼"></a>ç»“æ„å‹è®¾è®¡æ¨¡å¼</h4><p>ç»“æ„å‹è®¾è®¡æ¨¡å¼å…³æ³¨ç±»å’Œå¯¹è±¡çš„ç»„åˆï¼Œç»§æ‰¿çš„æ¦‚å¿µè¢«ç”¨æ¥ç»„åˆæ¥å£å’Œå®šä¹‰ç»„åˆå¯¹è±¡è·å¾—æ–°åŠŸèƒ½çš„æ–¹å¼ã€‚</p>
]]></content>
      <categories>
        <category>JavaåŸºç¡€</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>JavaåŸºç¡€</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>è®¾è®¡æ¨¡å¼åŸºæœ¬æ€æƒ³</tag>
      </tags>
  </entry>
  <entry>
    <title>Leetcode - 52. Nçš‡å II å›æº¯ç®—æ³•æ±‚è§£</title>
    <url>/blog/20190809/Leetcode-52-N%E7%9A%87%E5%90%8E-II-%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95%E6%B1%82%E8%A7%A3/</url>
    <content><![CDATA[<h4 id="Nçš‡åé—®é¢˜-leetcode"><a href="#Nçš‡åé—®é¢˜-leetcode" class="headerlink" title="Nçš‡åé—®é¢˜ - leetcode"></a>Nçš‡åé—®é¢˜ - <a href="https://leetcode-cn.com/problems/n-queens-ii/" target="_blank" rel="noopener">leetcode</a></h4><p>n çš‡åé—®é¢˜ç ”ç©¶çš„æ˜¯å¦‚ä½•å°† n ä¸ªçš‡åæ”¾ç½®åœ¨ nÃ—n çš„æ£‹ç›˜ä¸Šï¼Œå¹¶ä¸”ä½¿çš‡åå½¼æ­¤ä¹‹é—´ä¸èƒ½ç›¸äº’æ”»å‡»ã€‚<img src="/blog/20190809/Leetcode-52-Nçš‡å-II-å›æº¯ç®—æ³•æ±‚è§£/8-queens.png" alt="8çš‡åç¤ºä¾‹"><br>ä¸Šå›¾ä¸º 8 çš‡åé—®é¢˜çš„ä¸€ç§è§£æ³•ã€‚ç»™å®šä¸€ä¸ªæ•´æ•° nï¼Œè¿”å› n çš‡åä¸åŒçš„è§£å†³æ–¹æ¡ˆçš„æ•°é‡ã€‚</p>
<h4 id="ç¤ºä¾‹ï¼š"><a href="#ç¤ºä¾‹ï¼š" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h4><blockquote>
<p>è¾“å…¥: 4<br>è¾“å‡º: 2<br>è§£é‡Š: 4 çš‡åé—®é¢˜å­˜åœ¨å¦‚ä¸‹ä¸¤ä¸ªä¸åŒçš„è§£æ³•ã€‚<br><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">[</span><br><span class="line">[".Q..", Â // è§£æ³• 1</span><br><span class="line">"...Q",</span><br><span class="line">"Q...",</span><br><span class="line">"..Q."],</span><br><span class="line">["..Q.", Â // è§£æ³• 2</span><br><span class="line">"Q...",</span><br><span class="line">"...Q",</span><br><span class="line">".Q.."]</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
</blockquote>
<a id="more"></a>
<h4 id="è§£é¢˜æ€è·¯ï¼š"><a href="#è§£é¢˜æ€è·¯ï¼š" class="headerlink" title="è§£é¢˜æ€è·¯ï¼š"></a>è§£é¢˜æ€è·¯ï¼š</h4><p>ä½¿ç”¨å›æº¯ç®—æ³•ï¼Œæ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œè¿›è¡Œéå†æŸ¥è¯¢æ·±åº¦ä¼˜å…ˆæœç´¢çš„æ¡ä»¶æ˜¯æœ‰èƒ½å¤Ÿåˆ¤æ–­æ£‹ç›˜æ˜¯å¦èƒ½è½å­çš„ä¾æ®ã€‚</p>
<p>æˆ‘è¿™è¾¹ä½¿ç”¨ä¸€ä¸ªé•¿åº¦ä¸ºNçš„æ•°ç»„å­˜å‚¨ç¬¬Jåˆ—æ˜¯å¦æœ‰æ£‹å­ï¼Œä½¿ç”¨ä¸¤ä¸ªN*2-1é•¿åº¦çš„æ•°ç»„åˆ†åˆ«å­˜å‚¨å·¦å¯¹è§’çº¿å’Œå³å¯¹è§’çº¿æ˜¯å¦æœ‰æ£‹å­ã€‚</p>
<p>å¯¹äºå·¦å³å¯¹è§’çº¿æ¥è¯´ï¼Œå·¦å¯¹è§’çº¿çš„æ¯ä¸€ä¸ªä½ç½®iä¸jçš„å’Œéƒ½ç›¸åŒï¼Œå³å¯¹è§’çº¿çš„æ¯ä¸€ä¸ªä½ç½®çš„iä¸jçš„å·®éƒ½ç›¸åŒï¼Œæ‰€ä»¥å¯ä»¥ç”¨æ¥åˆ¤æ–­æŸä¸ªä½ç½®çš„æ–œçº¿ä¸Šæ˜¯å¦å­˜åœ¨æ£‹å­ï¼Œå¯¹åº”å¯¹è§’çº¿çš„æ•°ç»„æ ‡å¿—ä¸ºæœ‰æˆ–è€…æ²¡æœ‰ã€‚</p>
<h4 id="ä»£ç å¦‚ä¸‹"><a href="#ä»£ç å¦‚ä¸‹" class="headerlink" title="ä»£ç å¦‚ä¸‹"></a>ä»£ç å¦‚ä¸‹</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">  <span class="comment">/** æ€»è®°å½•æ•° */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> total = <span class="number">0</span>;</span><br><span class="line">  <span class="comment">/** Nçš‡å */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> N;</span><br><span class="line">  <span class="comment">/** åˆ¤æ–­å½“å‰ä½ç½®çš„å·¦å¯¹è§’çº¿æ˜¯å¦å­˜æ”¾äº†æ£‹å­ */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span>[] left = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">15</span>];</span><br><span class="line">  <span class="comment">/** åˆ¤æ–­å½“å‰ä½ç½®çš„å³å¯¹è§’çº¿æ˜¯å¦å­˜æ”¾äº†æ£‹å­ */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span>[] right = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">15</span>];</span><br><span class="line">  <span class="comment">/** åˆ¤æ–­å½“å‰ä½ç½®çš„åˆ—æ˜¯å¦å­˜æ”¾äº†æ£‹å­ */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span>[] curn;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">totalNQueens</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.N = n;</span><br><span class="line">    curn = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">    left = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span> * n - <span class="number">1</span>];</span><br><span class="line">    right = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span> * n - <span class="number">1</span>];</span><br><span class="line">    calResult(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> total;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">calResult</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ£‹ç›˜ç¬¬iè¡Œ éå†åˆ¤æ–­ç¬¬jåˆ—</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; N; j++) &#123;</span><br><span class="line">      <span class="comment">// å¼€å§‹åˆ¤æ–­ç¬¬iè¡Œç¬¬jåˆ—</span></span><br><span class="line">      <span class="comment">// åˆ¤æ–­ç¬¬jåˆ—æ˜¯å¦å·²ç»æœ‰æ£‹å­ï¼›åˆ¤æ–­(i,j)çš„å·¦å¯¹è§’çº¿æ˜¯å¦æœ‰æ£‹å­ï¼›åˆ¤æ–­å³å¯¹è§’çº¿æ˜¯å¦æœ‰æ£‹å­</span></span><br><span class="line">      <span class="keyword">if</span> (curn[j] == <span class="number">0</span> &amp;&amp; left[i + j] == <span class="number">0</span> &amp;&amp; right[N - <span class="number">1</span> + i - j] == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// æ²¡æœ‰æ£‹å­ å°±å¯ä»¥åœ¨(i,j)æ”¾ç½®æ£‹å­</span></span><br><span class="line">        curn[j] = left[i + j] = right[N - <span class="number">1</span> + i - j] = <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// å¦‚æœNè¡Œéƒ½æ”¾ç½®äº†æ£‹å­ totalå°±åŠ 1 å¦åˆ™ç»§ç»­æ”¾ç½®ä¸‹ä¸€è¡Œ</span></span><br><span class="line">        <span class="keyword">if</span> (i &lt; N - <span class="number">1</span>) &#123;</span><br><span class="line">          calResult(i + <span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          total++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ”¾ç½®å®Œæˆä¹‹å (i,j)ä½ç½®æ£‹å­å»æ‰ï¼Œç„¶åé‡æ–°èµ°ä¸‹ä¸€æ­¥ è¿›è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢</span></span><br><span class="line">        curn[j] = left[i + j] = right[N - <span class="number">1</span> + i - j] = <span class="number">0</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> Solution solution = <span class="keyword">new</span> Solution();</span><br><span class="line">    solution.totalNQueens(<span class="number">8</span>);</span><br><span class="line">    System.out.println(<span class="string">"total = "</span> + solution.total);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>æ•°æ®ç»“æ„ä¸ç®—æ³•</category>
        <category>ç®—æ³•é¢˜è§£</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>ç®—æ³•é¢˜è§£</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCodeä¸Šçš„å‡ ä¸ªå¤šçº¿ç¨‹ç¼–ç¨‹é¢˜è§£</title>
    <url>/blog/20190724/LeetCode%E4%B8%8A%E7%9A%84%E5%87%A0%E4%B8%AA%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B%E9%A2%98%E8%A7%A3/</url>
    <content><![CDATA[<p><img src="/blog/20190724/LeetCodeä¸Šçš„å‡ ä¸ªå¤šçº¿ç¨‹ç¼–ç¨‹é¢˜è§£/fm.png" alt></p>
<a id="more"></a>
<h3 id="ä»¥ä¸‹æ‰€æœ‰é¢˜ç›®çš„é¢˜è§£-github"><a href="#ä»¥ä¸‹æ‰€æœ‰é¢˜ç›®çš„é¢˜è§£-github" class="headerlink" title="ä»¥ä¸‹æ‰€æœ‰é¢˜ç›®çš„é¢˜è§£ - github"></a><a href="https://github.com/Fatezhang/DataStructureAndAlgorithm/tree/master/src/main/java/Alogrithm/Alogrithm" target="_blank" rel="noopener">ä»¥ä¸‹æ‰€æœ‰é¢˜ç›®çš„é¢˜è§£ - github</a></h3><h4 id="1ã€æŒ‰åºæ‰“å°"><a href="#1ã€æŒ‰åºæ‰“å°" class="headerlink" title="1ã€æŒ‰åºæ‰“å°"></a>1ã€<a href="https://leetcode-cn.com/problems/print-in-order" target="_blank" rel="noopener">æŒ‰åºæ‰“å°</a></h4><ul>
<li>æ–¹æ³•ä¸€ï¼šä½¿ç”¨volatileå˜é‡æ§åˆ¶é¡ºåº</li>
<li>æ€è·¯ï¼šåˆ©ç”¨volatileè¯­ä¹‰ï¼Œå®ç°å˜é‡çš„å†…å­˜å¯è§æ€§ï¼Œä½¿å¾—åˆ«çš„çº¿ç¨‹åœ¨ä¿®æ”¹å®ŒstateçŠ¶æ€å˜é‡çš„æ—¶å€™ç»“æœå¯¹äºå¦ä¸€ä¸ªçº¿ç¨‹ç«‹å³å¯è§ã€‚è¿™æ ·æ¯ä¸ªçº¿ç¨‹åœ¨æ‰“å°çš„æ—¶å€™å°±å¯ä»¥é€šè¿‡çŠ¶æ€åˆ¤æ–­æ˜¯ä¸æ˜¯è¯¥è½®åˆ°è‡ªå·±æ‰§è¡Œäº†ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Foo2</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">int</span> state = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">first</span><span class="params">(Runnable printFirst)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (state != <span class="number">1</span>) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// printFirst.run() outputs "first". Do not change or remove this line.</span></span><br><span class="line">        printFirst.run();</span><br><span class="line">        state = <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">second</span><span class="params">(Runnable printSecond)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (state != <span class="number">2</span>) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// printSecond.run() outputs "second". Do not change or remove this line.</span></span><br><span class="line">        printSecond.run();</span><br><span class="line">        state = <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">third</span><span class="params">(Runnable printThird)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (state != <span class="number">3</span>) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// printThird.run() outputs "third". Do not change or remove this line.</span></span><br><span class="line">        printThird.run();</span><br><span class="line">        state = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ–¹æ³•äºŒï¼šä½¿ç”¨CountDownLatchæ§åˆ¶é¡ºåºï¼ˆåªé€‚ç”¨äºæ‰§è¡Œä¸€æ¬¡ã€‚ã€‚ã€‚å¯ä»¥ä½¿ç”¨å¾ªç¯æ …æ æ”¹ä¸€ä¸‹~ï¼‰</li>
<li>CountDownLatchä¿—ç§°â€œé—­é”â€ã€‚ä½¿ç”¨é—­é”æ¥æ§åˆ¶çº¿ç¨‹æ˜¯å¦è¯¥æ‰§è¡Œï¼Œåœ¨æ²¡æœ‰è¾¾åˆ°æ¡ä»¶æ—¶ï¼Œé—­é”é˜»å¡çº¿ç¨‹ã€‚è¿™æ ·åœ¨ç¬¬ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæˆä¹‹åæ‰“å¼€ç¬¬äºŒä¸ªçº¿ç¨‹çš„é—­é”ï¼Œç¬¬äºŒä¸ªæ‰§è¡Œå®Œæˆä¹‹åæ‰“å¼€ç¬¬ä¸‰ä¸ªçº¿ç¨‹çš„é—­é”ï¼Œå®ç°æŒ‰ç…§é¡ºåºæ‰“å°ã€‚<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.CountDownLatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Foo3</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> CountDownLatch countDownLatch2 = <span class="keyword">new</span> CountDownLatch(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">private</span> CountDownLatch countDownLatch3 = <span class="keyword">new</span> CountDownLatch(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">first</span><span class="params">(Runnable printFirst)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        countDownLatch3.await();</span><br><span class="line">        countDownLatch2.await();</span><br><span class="line">        <span class="comment">// printFirst.run() outputs "first". Do not change or remove this line.</span></span><br><span class="line">        printFirst.run();</span><br><span class="line">        countDownLatch2.countDown();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">second</span><span class="params">(Runnable printSecond)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line"></span><br><span class="line">        countDownLatch3.await();</span><br><span class="line">        countDownLatch2.await();</span><br><span class="line">        <span class="comment">// printSecond.run() outputs "second". Do not change or remove this line.</span></span><br><span class="line">        printSecond.run();</span><br><span class="line">        countDownLatch3.countDown();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">third</span><span class="params">(Runnable printThird)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line"></span><br><span class="line">        countDownLatch3.await();</span><br><span class="line">        <span class="comment">// printThird.run() outputs "third". Do not change or remove this line.</span></span><br><span class="line">        printThird.run();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="2ã€äº¤æ›¿æ‰“å°FooBar"><a href="#2ã€äº¤æ›¿æ‰“å°FooBar" class="headerlink" title="2ã€äº¤æ›¿æ‰“å°FooBar"></a>2ã€<a href="https://leetcode-cn.com/problems/print-foobar-alternately" target="_blank" rel="noopener">äº¤æ›¿æ‰“å°FooBar</a></h4><ul>
<li>æ€è·¯ï¼šä½¿ç”¨æ˜¾ç¤ºå¯é‡å…¥é”åŠ ä¸ŠConditionæ¡ä»¶é˜»å¡æœºåˆ¶ï¼Œå†åŠ ä¸Švolatileä¿®é¥°çš„çŠ¶æ€å˜é‡æ§åˆ¶æ‰“å°é¡ºåºã€‚çº¿ç¨‹æ‰“å°æ—¶åŠ é”ï¼Œå¦‚æœçŠ¶æ€æ˜¯ä½¿å½“å‰çº¿ç¨‹æ‰“å°ï¼Œå°±æ‰“å°å¹¶ä¸”è½¬æ¢çŠ¶æ€ï¼Œç„¶åå”¤é†’å¦ä¸€ä¸ªçº¿ç¨‹ã€‚ä¸‹ä¸€æ¬¡å†åˆ¤æ–­å½“å‰çŠ¶æ€ä¸é€‚åˆæ‰“å°ï¼Œå°±ä½¿ç”¨ç¬¬ä¸€ä¸ªæ¡ä»¶é”é˜»å¡å½“å‰çº¿ç¨‹ã€‚ä»¥æ­¤ç±»æ¨ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Condition;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** <span class="doctag">@Author</span> zhangjiaheng <span class="doctag">@Description</span> äº¤æ›¿æ‰“å°FooBar */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FooBar</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">FooBar</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.n = n;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> ReentrantLock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> Condition c1 = lock.newCondition();</span><br><span class="line">  <span class="keyword">private</span> Condition c2 = lock.newCondition();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">foo</span><span class="params">(Runnable printFoo)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            lock.lock();</span><br><span class="line">            <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">                c1.await();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// printFoo.run() outputs "foo". Do not change or remove this line.</span></span><br><span class="line">            printFoo.run();</span><br><span class="line">            flag = !flag;</span><br><span class="line">            c2.signal();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bar</span><span class="params">(Runnable printBar)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            lock.lock();</span><br><span class="line">            <span class="keyword">if</span> (!flag) &#123;</span><br><span class="line">                c2.await();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// printBar.run() outputs "bar". Do not change or remove this line.</span></span><br><span class="line">            printBar.run();</span><br><span class="line">            flag = !flag;</span><br><span class="line">            c1.signal();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3ã€æ‰“å°0ä¸å¥‡å¶æ•°"><a href="#3ã€æ‰“å°0ä¸å¥‡å¶æ•°" class="headerlink" title="3ã€æ‰“å°0ä¸å¥‡å¶æ•°"></a>3ã€<a href="https://leetcode-cn.com/problems/print-zero-even-odd" target="_blank" rel="noopener">æ‰“å°0ä¸å¥‡å¶æ•°</a></h4><ul>
<li>æ€è·¯ï¼šä¹Ÿæ˜¯ä½¿ç”¨æ˜¾ç¤ºå¯é‡å…¥é”åŠ ä¸Šæ¡ä»¶é˜»å¡æœºåˆ¶ï¼ŒåŠ ä¸Švolatileä¿®é¥°çš„çŠ¶æ€å˜é‡æ§åˆ¶å¥‡å¶æ•°çš„æ‰“å°ã€‚ä¸ç¬¦åˆå½“å‰æ‰§è¡Œçš„çŠ¶æ€å°±ä½¿ç”¨conditioné˜»å¡ï¼Œç¬¦åˆå°±æ‰§è¡Œå¹¶ä¸”è½¬æ¢çŠ¶æ€ï¼Œç„¶åå”¤é†’å…¶ä»–çº¿ç¨‹ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.ArrayBlockingQueue;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ThreadPoolExecutor;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Condition;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"><span class="keyword">import</span> java.util.function.IntConsumer;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> zhangjiaheng <span class="doctag">@Description</span> https://leetcode-cn.com/problems/print-zero-even-odd</span></span><br><span class="line"><span class="comment"> * 3ä¸ªçº¿ç¨‹äº¤æ›¿æ‰“å°å¥‡å¶æ•°å’Œ0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZeroEvenOdd</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">ZeroEvenOdd</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.n = n;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> ReentrantLock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> Condition c1 = lock.newCondition();</span><br><span class="line">  <span class="keyword">private</span> Condition c2 = lock.newCondition();</span><br><span class="line">  <span class="keyword">private</span> Condition c3 = lock.newCondition();</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** 0-æ‰“å°0 1-æ‰“å°å¥‡æ•° 2-æ‰“å°å¶æ•° */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">zero</span><span class="params">(IntConsumer printNumber)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      lock.lock();</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">while</span> (flag != <span class="number">0</span>) &#123;</span><br><span class="line">          c1.await();</span><br><span class="line">        &#125;</span><br><span class="line">        printNumber.accept(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span> ((i &amp; <span class="number">1</span>) == <span class="number">1</span>) &#123;</span><br><span class="line">          flag = <span class="number">1</span>;</span><br><span class="line">          c3.signal();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          flag = <span class="number">2</span>;</span><br><span class="line">          c2.signal();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      lock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">even</span><span class="params">(IntConsumer printNumber)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      lock.lock();</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i += <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">while</span> (flag != <span class="number">2</span>) &#123;</span><br><span class="line">          c2.await();</span><br><span class="line">        &#125;</span><br><span class="line">        printNumber.accept(i);</span><br><span class="line">        flag = <span class="number">0</span>;</span><br><span class="line">        c1.signal();</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      lock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">odd</span><span class="params">(IntConsumer printNumber)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      lock.lock();</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i += <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">while</span> (flag != <span class="number">1</span>) &#123;</span><br><span class="line">          c3.await();</span><br><span class="line">        &#125;</span><br><span class="line">        printNumber.accept(i);</span><br><span class="line">        flag = <span class="number">0</span>;</span><br><span class="line">        c1.signal();</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      lock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    ZeroEvenOdd zeroEvenOdd = <span class="keyword">new</span> ZeroEvenOdd(<span class="number">5</span>);</span><br><span class="line">    ThreadPoolExecutor pools =</span><br><span class="line">        <span class="keyword">new</span> ThreadPoolExecutor(</span><br><span class="line">            <span class="number">3</span>, <span class="number">3</span>, <span class="number">1</span>, TimeUnit.MINUTES, <span class="keyword">new</span> ArrayBlockingQueue&lt;&gt;(<span class="number">1</span>), r -&gt; <span class="keyword">new</span> Thread(r, <span class="string">"æŸçº¿ç¨‹"</span>));</span><br><span class="line">    pools.execute(</span><br><span class="line">        () -&gt; &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            zeroEvenOdd.zero(System.out::print);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    pools.execute(</span><br><span class="line">        () -&gt; &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            zeroEvenOdd.even(System.out::print);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    pools.execute(</span><br><span class="line">        () -&gt; &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            zeroEvenOdd.odd(System.out::print);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4ã€H2Oç”Ÿæˆ"><a href="#4ã€H2Oç”Ÿæˆ" class="headerlink" title="4ã€H2Oç”Ÿæˆ"></a>4ã€<a href="https://leetcode-cn.com/problems/building-h2o" target="_blank" rel="noopener">H2Oç”Ÿæˆ</a></h4><ul>
<li>æ–¹æ³•ä¸€ï¼šä½¿ç”¨æ˜¾ç¤ºé”å’Œcondition</li>
<li>æ€è·¯ï¼šè€ç”Ÿå¸¸è°ˆçš„æ€è·¯äº†ï¼ŒåŒä¸Šé¢ä¸€æ ·çš„åŸç†ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Condition;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** <span class="doctag">@Author</span> zhangjiaheng <span class="doctag">@Description</span> æ°´åˆ†å­ç”Ÿæˆ */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">H2O</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">H2O</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> ReentrantLock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> Condition H = lock.newCondition();</span><br><span class="line">  <span class="keyword">private</span> Condition O = lock.newCondition();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">int</span> hCount = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hydrogen</span><span class="params">(Runnable releaseHydrogen)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      lock.lock();</span><br><span class="line">      <span class="keyword">while</span> (hCount == <span class="number">2</span>) &#123;</span><br><span class="line">        H.await();</span><br><span class="line">      &#125;</span><br><span class="line">      hCount++;</span><br><span class="line">      releaseHydrogen.run();</span><br><span class="line">      <span class="keyword">if</span> (hCount == <span class="number">2</span>) &#123;</span><br><span class="line">        O.signal();</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        H.signal();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      lock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">oxygen</span><span class="params">(Runnable releaseOxygen)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      lock.lock();</span><br><span class="line">      <span class="keyword">while</span> (hCount != <span class="number">2</span>) &#123;</span><br><span class="line">        O.await();</span><br><span class="line">      &#125;</span><br><span class="line">      hCount = <span class="number">0</span>;</span><br><span class="line">      releaseOxygen.run();</span><br><span class="line">      H.signal();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      lock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    String s = <span class="string">"HHOOOHHHH"</span>;</span><br><span class="line">    <span class="keyword">final</span> H2O o = <span class="keyword">new</span> H2O();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">char</span> c : s.toCharArray()) &#123;</span><br><span class="line">      <span class="keyword">if</span> (c == <span class="string">'H'</span>) &#123;</span><br><span class="line">        <span class="keyword">new</span> Thread(</span><br><span class="line">                () -&gt; &#123;</span><br><span class="line">                  <span class="keyword">try</span> &#123;</span><br><span class="line">                    o.hydrogen(() -&gt; System.out.print(<span class="string">"H"</span>));</span><br><span class="line">                  &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            .start();</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> Thread(</span><br><span class="line">                () -&gt; &#123;</span><br><span class="line">                  <span class="keyword">try</span> &#123;</span><br><span class="line">                    o.oxygen(() -&gt; System.out.print(<span class="string">"O"</span>));</span><br><span class="line">                  &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            .start();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ–¹æ³•äºŒï¼šä½¿ç”¨ä¿¡å·é‡æ§åˆ¶é€šçŸ¥çº¿ç¨‹</li>
<li>æ€è·¯ï¼šä½¿ç”¨ä¿¡å·é‡æ§åˆ¶çº¿ç¨‹é—´çš„é€šä¿¡ã€‚åˆ†åˆ«åˆ†ä¸ºæ‰§è¡Œä¿¡å·å’Œå”¤é†’ä¿¡å·ï¼Œæ°¢åŸå­çš„æ‰§è¡Œä¿¡å·é¦–å…ˆä¸º2ï¼Œæ°§åŸå­çš„æ‰§è¡Œä¿¡å·é¦–å…ˆä¸º1ã€‚æ°¢æ°§çº¿ç¨‹æ‰§è¡Œæ—¶æ¶ˆè€—æ‰§è¡Œä¿¡å·é‡ï¼Œå½“ä¸€ä¸ªæ°¢åŸå­æ‰§è¡Œåï¼Œæ°¢åŸå­çš„é‡Šæ”¾ä¿¡å·å¼€å§‹é‡Šæ”¾ï¼ˆåªæœ‰ä¸€ä¸ªæ°§çº¿ç¨‹ç­‰å¾…å…¶é‡Šæ”¾ï¼‰ï¼Œç„¶åç­‰å¾…æ°§åŸå­é‡Šæ”¾ä¿¡å·é‡Šæ”¾ï¼ˆå³ä¸€ä¸ªæ°§åŸå­å·²ç»äº§ç”Ÿï¼‰ï¼Œä¹‹åäº§ç”Ÿä¸€ä¸ªæ°¢åŸå­åœ¨é‡Šæ”¾è¯·æ±‚ä¿¡å·ã€‚æ°§çº¿ç¨‹æ‰§è¡Œæ—¶ï¼Œå¼€å§‹è¯·æ±‚é‡Šæ”¾ä¸€ä¸ªæ°§åŸå­ï¼ŒæˆåŠŸä¹‹åæ°§çº¿ç¨‹é‡Šæ”¾ä¿¡å·å¼€å§‹é‡Šæ”¾ï¼ˆå› ä¸º2ä¸ªæ°¢çº¿ç¨‹ç­‰å¾…æ‰€ä»¥é‡Šæ”¾ä¸¤ä¸ªä¿¡å·ï¼‰ï¼Œç„¶åç­‰å¾…æ°¢çº¿ç¨‹é‡Šæ”¾ä¸¤ä¸ªä¿¡å·ï¼ˆè¯´æ˜å·²ç»æœ‰ä¸¤ä¸ªæ°¢åŸå­ç”Ÿæˆï¼‰ã€‚ç„¶åå†ç”Ÿæˆæ°§åŸå­ï¼ŒæˆåŠŸä¹‹ååœ¨é‡Šæ”¾æ°§çº¿ç¨‹çš„è¯·æ±‚ä¿¡å·ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** <span class="doctag">@Author</span> zhangjiaheng <span class="doctag">@Description</span> ä½¿ç”¨ä¿¡å·é‡æ§åˆ¶æ°´åˆ†å­ç”Ÿæˆ */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">H2O_2</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> Semaphore hAcquire, oAcquire, hRelease, oRelease;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">H2O_2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// H åŸå­çº¿ç¨‹ è¯·æ±‚ä¿¡å·</span></span><br><span class="line">    hAcquire = <span class="keyword">new</span> Semaphore(<span class="number">2</span>);</span><br><span class="line">    <span class="comment">// O åŸå­çº¿ç¨‹ è¯·æ±‚ä¿¡å·</span></span><br><span class="line">    oAcquire = <span class="keyword">new</span> Semaphore(<span class="number">1</span>);</span><br><span class="line">    <span class="comment">// H åŸå­çº¿ç¨‹ é‡Šæ”¾ä¿¡å·</span></span><br><span class="line">    hRelease = <span class="keyword">new</span> Semaphore(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">// O åŸå­çº¿ç¨‹ é‡Šæ”¾ä¿¡å·</span></span><br><span class="line">    oRelease = <span class="keyword">new</span> Semaphore(<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hydrogen</span><span class="params">(Runnable releaseHydrogen)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    hAcquire.acquire(); <span class="comment">// Hçº¿ç¨‹å¼€å§‹è¯·æ±‚</span></span><br><span class="line">    hRelease.release(); <span class="comment">// é€šçŸ¥ä¸€ä¸ªHçº¿ç¨‹å³å°†é‡Šæ”¾ å› ä¸ºä¸€ä¸ªHçº¿ç¨‹é‡Šæ”¾æœ€å¤šåªæœ‰ä¸€ä¸ªOçº¿ç¨‹ç­‰å¾…å…¶é‡Šæ”¾</span></span><br><span class="line">    oRelease.acquire(); <span class="comment">// ç­‰å¾…Oçº¿ç¨‹é‡Šæ”¾ ä¸€ä¸ªOçº¿ç¨‹é‡Šæ”¾å°±å¯ä»¥é€šè¿‡</span></span><br><span class="line">    releaseHydrogen.run();</span><br><span class="line">    hAcquire.release(); <span class="comment">// å”¤é†’Hçº¿ç¨‹è¯·æ±‚</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">oxygen</span><span class="params">(Runnable releaseOxygen)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    oAcquire.acquire(); <span class="comment">// Oçº¿ç¨‹å¼€å§‹è¯·æ±‚</span></span><br><span class="line">    oRelease.release(<span class="number">2</span>); <span class="comment">// é€šçŸ¥ä¸€ä¸ªOçº¿ç¨‹å³å°†é‡Šæ”¾ å› ä¸ºä¸€ä¸ªOçº¿ç¨‹é‡Šæ”¾ ä¼šæœ‰ä¸¤ä¸ªHçº¿ç¨‹ç­‰å¾…å…¶é‡Šæ”¾</span></span><br><span class="line">    hRelease.acquire(<span class="number">2</span>); <span class="comment">// ç­‰å¾…Hçº¿ç¨‹é‡Šæ”¾ è¦ç­‰å¾…ä¸¤æ¬¡é‡Šæ”¾ æ‰å¯ä»¥é€šè¿‡</span></span><br><span class="line">    releaseOxygen.run();</span><br><span class="line">    oAcquire.release(); <span class="comment">// å”¤é†’Oçº¿ç¨‹è¯·æ±‚</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    String s = <span class="string">"HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHOOHHOOOOOHOOOHHHOHHHHOOOHHHOOOHOHOHOHHOHOOHHHOOHOOOHHOOOOHOHHHHOOOOOHHHOOOHOHOHOOOHHOHOOHHOHHHHHHHHHHHHHHHHHHHHHHHHHHH"</span>;</span><br><span class="line">    <span class="keyword">final</span> H2O_2 o = <span class="keyword">new</span> H2O_2();</span><br><span class="line">    ThreadPoolExecutor pool =</span><br><span class="line">        <span class="keyword">new</span> ThreadPoolExecutor(</span><br><span class="line">            <span class="number">300</span>,</span><br><span class="line">            <span class="number">300</span>,</span><br><span class="line">            <span class="number">10</span>,</span><br><span class="line">            TimeUnit.SECONDS,</span><br><span class="line">            <span class="keyword">new</span> ArrayBlockingQueue&lt;&gt;(<span class="number">100</span>),</span><br><span class="line">                (ThreadFactory) Thread::<span class="keyword">new</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">char</span> c : s.toCharArray()) &#123;</span><br><span class="line">      <span class="keyword">if</span> (c == <span class="string">'H'</span>) &#123;</span><br><span class="line">        pool.execute(</span><br><span class="line">            () -&gt; &#123;</span><br><span class="line">              <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="keyword">new</span> Random().nextInt(<span class="number">10</span>));</span><br><span class="line">                o.hydrogen(() -&gt; System.out.print(<span class="string">"H"</span>));</span><br><span class="line">              &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        pool.execute(</span><br><span class="line">            () -&gt; &#123;</span><br><span class="line">              <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="keyword">new</span> Random().nextInt(<span class="number">10</span>));</span><br><span class="line">                o.oxygen(() -&gt; System.out.print(<span class="string">"O"</span>));</span><br><span class="line">              &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>æ•°æ®ç»“æ„ä¸ç®—æ³•</category>
        <category>ç®—æ³•é¢˜è§£</category>
      </categories>
      <tags>
        <tag>å¹¶å‘ç¼–ç¨‹</tag>
        <tag>leetcode</tag>
        <tag>ç®—æ³•é¢˜è§£</tag>
      </tags>
  </entry>
  <entry>
    <title>Synchronizedä½¿ç”¨æ—¶ä¸€ä¸ªä¸èµ·çœ¼çš„æ³¨æ„ç‚¹</title>
    <url>/blog/20190716/Synchronized%E4%BD%BF%E7%94%A8%E6%97%B6%E4%B8%80%E4%B8%AA%E4%B8%8D%E8%B5%B7%E7%9C%BC%E7%9A%84%E6%B3%A8%E6%84%8F%E7%82%B9/</url>
    <content><![CDATA[<h4 id="Synchronized-å‰æƒ…æè¦"><a href="#Synchronized-å‰æƒ…æè¦" class="headerlink" title="Synchronized å‰æƒ…æè¦"></a>Synchronized å‰æƒ…æè¦</h4><p>Synchronizedæ˜¯Javaä¸­ç”¨æ¥è¿›è¡Œæ–¹æ³•æˆ–è€…ä»£ç åŒæ­¥çš„ä¸€ä¸ªå†…ç½®é”æœºåˆ¶ã€‚è¿™ç§å†…ç½®é”æœºåˆ¶å¯ä»¥ä¿è¯ä»£ç æ‰§è¡Œçš„åŸå­æ€§ã€å¯è§æ€§ï¼Œä½†æ˜¯å¹¶ä¸èƒ½å±è”½ä»£ç çš„é‡æ’åºã€‚Synchronizedå¯ä»¥ä¿®é¥°æ–¹æ³•ã€å¯¹è±¡ä»¥åŠä»£ç å—ï¼Œå¹¶å¯ä»¥ä¿è¯è¢«ä¿®é¥°çš„æ–¹æ³•æˆ–è€…ä»£ç å—ï¼Œåœ¨åŒä¸€ä¸ªæ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè®¿é—®å¾—åˆ°ã€‚</p>
<ul>
<li>ä¿®é¥°é™æ€æ–¹æ³•ï¼šé”çš„æ˜¯å½“å‰ç±»çš„classå¯¹è±¡ï¼Œä¿®é¥°æ–¹æ³•æ—¶Synchronizedæ²¡æœ‰è¡¨ç°åœ¨å­—èŠ‚ç æŒ‡ä»¤ä¸­ï¼Œè€Œæ˜¯åœ¨classæ–‡ä»¶çš„æ–¹æ³•è¡¨ä¸­å°†è¯¥æ–¹æ³•çš„access_flagså€¼ç½®ä¸º1ã€‚è¡¨ç¤ºè¯¥æ–¹æ³•æ˜¯åŒæ­¥æ–¹æ³•ï¼Œå¹¶ä½¿ç”¨è°ƒç”¨è¯¥æ–¹æ³•çš„å¯¹è±¡æˆ–è¯¥æ–¹æ³•æ‰€å±çš„ Class åœ¨ JVM çš„å†…éƒ¨å¯¹è±¡è¡¨ç¤º Klass ä½œä¸ºé”å¯¹è±¡ã€‚</li>
<li>ä¿®é¥°æ™®é€šæ–¹æ³•ï¼šé”çš„æ˜¯å½“å‰å®ä¾‹å¯¹è±¡ï¼Œä¿®é¥°æ–¹æ³•æ—¶åŒä¸Šã€‚</li>
<li>ä¿®é¥°ä»£ç å—ï¼šé”çš„æ˜¯Synchronized()ä¸­çš„å¯¹è±¡ï¼Œç¼–è¯‘åçš„å­—èŠ‚ç ä¼šåœ¨ä»£ç å—å‰åæ’å…¥monitorenter å’Œmonitorexitã€‚JVMéœ€è¦æ¯ä¸€ä¸ªmonitorenteréƒ½æœ‰ä¸€ä¸ªmonitorexitä¸ä¹‹å¯¹åº”ï¼Œä»»ä½•å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªmonitorä¸ä¹‹ç›¸å¯¹åº”ï¼Œå½“ä¸€ä¸ªmonitorè¢«æŒæœ‰ï¼Œå³çº¿ç¨‹æ‰§è¡Œåˆ°monitorenteræ—¶ï¼Œå¯¹è±¡å°†å¤„äºé”å®šçŠ¶æ€ã€‚</li>
</ul>
<p>Synchronizedæ˜¯Javaå†…ç½®çš„é‡é‡çº§é”ï¼Œåœ¨jdk1.6ä¹‹åå¼•å…¥äº†è‡ªæ—‹é”ã€è½»é‡çº§é”ã€é€‚åº”æ€§è‡ªæ—‹ã€é”ç²—åŒ–ã€é”æ¶ˆé™¤ã€åå‘é”ç­‰æŠ€æœ¯æ¥å‡å°‘Synchronizedçš„æ€§èƒ½å¼€é”€ã€‚</p>
<a id="more"></a>
<h4 id="åˆ‡å…¥æ­£é¢˜"><a href="#åˆ‡å…¥æ­£é¢˜" class="headerlink" title="åˆ‡å…¥æ­£é¢˜"></a>åˆ‡å…¥æ­£é¢˜</h4><p>ä»¥ä¸ŠçŸ¥è¯†ç‚¹æƒ³å¿…åˆšå¼€å§‹å­¦ä¹ å¹¶å‘ç¼–ç¨‹çš„ç¨‹åºå‘˜éƒ½ä¼šå…ˆå­¦ä¹ ä»¥ä¸ŠçŸ¥è¯†ï¼Œä½†æ˜¯å¾ˆå¤šç¨‹åºå‘˜åœ¨ä½¿ç”¨Synchronizedçš„æ—¶å€™æœ‰å¯èƒ½ä¼šå‘ç°ï¼Œæˆ‘æ˜æ˜åŠ é”äº†ï¼Œä½†æ˜¯æ–¹æ³•å´å¹¶æ²¡æœ‰åŒæ­¥æ‰§è¡Œï¼Œè¿™åˆ°åº•æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿå…ˆçœ‹ä¸‹å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Integer cn = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> size = <span class="number">20</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; size; j++) &#123;</span><br><span class="line">        <span class="keyword">new</span> Thread(</span><br><span class="line">            () -&gt; &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">                    <span class="keyword">synchronized</span> (cn) &#123;</span><br><span class="line">                        cn++;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šä»£ç å¯åŠ¨äº†20ä¸ªçº¿ç¨‹ï¼Œå¯¹Integerå˜é‡cnè¿›è¡Œè‡ªå¢ã€‚å¾ˆå¤šäººåœ¨å†™Synchronizedçš„æ—¶å€™éƒ½æœ‰å¯èƒ½å‡ºç°è¿™ç§é—®é¢˜ã€‚è¿™æ ·çš„å†™æ³•æ˜¯é”™è¯¯çš„ï¼</p>
<p>å› ä¸º<code>cn++</code>è¿™å¥ä»£ç çš„åŸç†æ˜¯å°†cnæŒ‡å‘ä¸€ä¸ªcn+1çš„æ–°çš„Integerå¯¹è±¡ï¼</p>
<p>ä¿®æ”¹æˆå¦‚ä¸‹ï¼Œç„¶åçœ‹çœ‹è¾“å‡ºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Integer cn = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> size = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> CountDownLatch cd = <span class="keyword">new</span> CountDownLatch(size);</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; size; j++) &#123;</span><br><span class="line">        <span class="keyword">int</span> finalJ = j;</span><br><span class="line">        <span class="keyword">new</span> Thread(</span><br><span class="line">            () -&gt; &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    cd.countDown();</span><br><span class="line">                    cd.await();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">                    <span class="keyword">synchronized</span> (cn) &#123;</span><br><span class="line">                        cn++;</span><br><span class="line">                        System.out.println(</span><br><span class="line">                            <span class="string">"cn"</span> + finalJ + <span class="string">" = "</span> + cn + <span class="string">"\t\t\t"</span> + System.identityHashCode(cn));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ä»¥ä¸Šä»£ç è¾“å‡ºå¦‚ä¸‹ &gt;&gt;</strong></p>
<p><img src="/blog/20190716/Synchronizedä½¿ç”¨æ—¶ä¸€ä¸ªä¸èµ·çœ¼çš„æ³¨æ„ç‚¹/cons.png" alt="è¾“å‡º"></p>
<p>æ¯æ¬¡è¾“å‡ºçš„Integerå¯¹è±¡çš„HashCodeå€¼å¹¶ä¸ç›¸åŒã€‚æ‰€ä»¥ï¼Œæ¯æ¬¡é”çš„å¹¶ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼æ—¢ç„¶ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•åœ¨å¤šçº¿ç¨‹è®¿é—®çš„æ—¶å€™è‚¯å®šå°±ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼å¯¹äºå¦‚ä¸Šè¿™ç§ä¾‹å­æˆ‘ä»¬å½“ç„¶å¯ä»¥ä½¿ç”¨åŸå­å˜é‡<code>AtomicInteger</code>æ¥å®ç°æ›´é«˜çº§çš„åŒæ­¥æœºåˆ¶å»è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯å…¶ä»–åœºæ™¯ä¸‹å‘¢ï¼Ÿ</p>
<p>ä¸ä»…ä»…æ˜¯Integerå¯¹è±¡å“¦ï¼æ‰€æœ‰çš„å¯¹è±¡éƒ½æœ‰å¯èƒ½ä¼šæœ‰è¿™äº›é—®é¢˜å­˜åœ¨ï¼å½“ä½ åœ¨é”è¿™ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œä¸€å®šè¦ä¿è¯åŠ é”çš„å¯¹è±¡åœ¨çº¿ç¨‹ä¸­ä¸è¢«ä¿®æ”¹æˆå¦ä¸€ä¸ªå¯¹è±¡ï¼å¦åˆ™å°±æ˜¯ä¸€ä¸ª<strong>å‡çš„</strong>åŒæ­¥ä»£ç å—ï¼</p>
<hr>
]]></content>
      <categories>
        <category>JavaåŸºç¡€</category>
        <category>å¹¶å‘ç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>JavaåŸºç¡€</tag>
        <tag>å¹¶å‘ç¼–ç¨‹</tag>
        <tag>Synchronized</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸€ä¸ª[åˆæ ¼]çš„ç¨‹åºå‘˜å¿…é¡»å…·å¤‡çš„å·¥å…·å’Œæ’ä»¶</title>
    <url>/blog/20190714/%E4%B8%80%E4%B8%AA-%E5%90%88%E6%A0%BC-%E7%9A%84%E7%A8%8B%E5%BA%8F%E5%91%98%E5%BF%85%E9%A1%BB%E5%85%B7%E5%A4%87%E7%9A%84%E5%B7%A5%E5%85%B7%E5%92%8C%E6%8F%92%E4%BB%B6/</url>
    <content><![CDATA[<p><img src="/blog/20190714/ä¸€ä¸ª-åˆæ ¼-çš„ç¨‹åºå‘˜å¿…é¡»å…·å¤‡çš„å·¥å…·å’Œæ’ä»¶/gtx.jpg" alt="å°é¢"><br><a id="more"></a></p>
<h4 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h4><p><strong>å¦‚é¢˜â€¦ æ˜¯æˆ‘æ ‡é¢˜å…šäº†ï¼Œåº”è¯¥è¿™æ ·è®²ï¼šâ€œåˆæ ¼çš„ç¨‹åºå‘˜â€ä¸ä¸€å®šéœ€è¦ä¼šä½¿ç”¨å“ªäº›å·¥å…·ï¼Œä½†æ˜¯ä¼šä½¿ç”¨é‚£äº›èƒ½å¤Ÿæœ‰æ•ˆå‡å°‘è‡ªå·±å·¥ä½œé‡çš„å¾ˆé…·çš„å·¥å…·å’Œæ’ä»¶çš„ç¨‹åºå‘˜ä¸€å®šä¼šè¿›æ­¥æˆä¸€ä¸ªâ€œåˆæ ¼çš„ç¨‹åºå‘˜â€ã€‚å› ä¸ºä»–ä»¬å–„äºæ€è€ƒï¼Œå¹¶èƒ½å¤Ÿå°†ç¹æ‚çš„é‡å¤æ€§å·¥ä½œäº¤ç»™å·¥å…·å»å®Œæˆï¼Œå°†ç²¾åŠ›é›†ä¸­åœ¨æ ¸å¿ƒçš„ç¼–ç ä»»åŠ¡ä¸Šã€‚</strong></p>
<h4 id="é€ä¸ªä»‹ç»é‚£äº›æˆ‘è‡ªå·±å¸¸ç”¨çš„å·¥å…·ã€æ’ä»¶æˆ–è€…ç½‘ç«™"><a href="#é€ä¸ªä»‹ç»é‚£äº›æˆ‘è‡ªå·±å¸¸ç”¨çš„å·¥å…·ã€æ’ä»¶æˆ–è€…ç½‘ç«™" class="headerlink" title="é€ä¸ªä»‹ç»é‚£äº›æˆ‘è‡ªå·±å¸¸ç”¨çš„å·¥å…·ã€æ’ä»¶æˆ–è€…ç½‘ç«™"></a>é€ä¸ªä»‹ç»é‚£äº›æˆ‘è‡ªå·±å¸¸ç”¨çš„å·¥å…·ã€æ’ä»¶æˆ–è€…ç½‘ç«™</h4><h5 id="Ghelper"><a href="#Ghelper" class="headerlink" title="Ghelper"></a><a href="http://googlehelper.net/" target="_blank" rel="noopener">Ghelper</a></h5><p>è¯´åˆ°å·¥å…·ï¼Œä¸ä¼šç¿»å¢™ç”¨å•¥å­å·¥å…·ã€‚Ghelperæ˜¯ä¸€ä¸ªè°·æ­Œæµè§ˆå™¨æ’ä»¶ï¼Œç›´æ¥ä¸‹è½½å®‰è£…åˆ°chromeæ‰©å±•å³å¯è½»æ¾è®¿é—®è°·æ­Œç­‰æœåŠ¡ï¼æ³¨æ„ï¼Œè®¿é—®è°·æ­Œçš„ç›¸å…³æœåŠ¡æ˜¯å…è´¹çš„å“¦ï¼å¦‚æœä½ æœ‰éœ€æ±‚è®¿é—®å…¶ä»–çš„ä¾‹å¦‚YouTuBeã€Twitterä¹‹ç±»çš„ï¼Œå¯ä»¥è´­ä¹°ä¼šå‘˜æœåŠ¡ï¼è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªè°·æ­Œè®¿é—®åŠ©æ‰‹ç ´è§£ç‰ˆï¼Œæˆ‘æ²¡æœ‰è¯•è¿‡ï¼Œæœ‰å…´è¶£å¯ä»¥è£…ä¸€ä¸‹çœ‹çœ‹ï¼š<a href="https://github.com/haotian-wang/google-access-helper" target="_blank" rel="noopener">GHelperç ´è§£ç‰ˆ</a><br>è¿™ä¸ªå·¥å…·å¯ä»¥è¯´æ˜¯ä»¥ä¸‹å¤§éƒ¨åˆ†å·¥å…·çš„åŸºç¡€ã€‚</p>
<h5 id="FeHelper"><a href="#FeHelper" class="headerlink" title="FeHelper"></a><a href="https://www.baidufe.com/fehelper/feedback.html" target="_blank" rel="noopener">FeHelper</a></h5><p>FeHelperæ˜¯ä¸€ä¸ªåœ¨è°·æ­Œæµè§ˆå™¨ä¸Šæˆ‘æœ€å¸¸ç”¨çš„ä¸€ä¸ªæ’ä»¶ã€‚åŠŸèƒ½å¦‚ä¸‹ï¼Œå­—ç¬¦ä¸²ç¼–è§£ç ã€JSONæ ¼å¼åŒ–ã€æ—¶é—´æˆ³è½¬æ¢ç­‰ç­‰å·¥å…·ï¼Œåœ¨åšwebå¼€å‘çš„æ—¶å€™æŸ¥çœ‹æŸä¸ªJSONæ•°æ®æ ¼å¼æ˜¯å¦æ­£ç¡®ç›´æ¥é»è´´åˆ°è¿™ä¸ªæ¡†é‡Œå°±OKï¼Œç®€å•æš´åŠ›~</p>
<p><img src="/blog/20190714/ä¸€ä¸ª-åˆæ ¼-çš„ç¨‹åºå‘˜å¿…é¡»å…·å¤‡çš„å·¥å…·å’Œæ’ä»¶/feh.png" alt="FeHelper"></p>
<h5 id="æ²¹çŒ´å„¿"><a href="#æ²¹çŒ´å„¿" class="headerlink" title="æ²¹çŒ´å„¿"></a><a href="https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo" target="_blank" rel="noopener">æ²¹çŒ´å„¿</a></h5><p>å¤§åé¼é¼çš„æ²¹çŒ´å„¿æƒ³å¿…å¾ˆå¤šç¨‹åºå‘˜éƒ½äº†è§£ä»¥åŠç”¨è¿‡å§(æ²¡ç”¨è¿‡åˆ«å‘Šè¯‰æˆ‘ä½ æ˜¯ä¸ªç¨‹åºå‘˜ï¼Œæ­»æ•²ä»£ç çš„)ã€‚</p>
<p><img src="/blog/20190714/ä¸€ä¸ª-åˆæ ¼-çš„ç¨‹åºå‘˜å¿…é¡»å…·å¤‡çš„å·¥å…·å’Œæ’ä»¶/yh.png" alt="æ²¹çŒ´å„¿"></p>
<p>å¦‚ä¸Šå›¾å°±æ˜¯æˆ‘çš„ä¸€äº›æ²¹çŒ´å„¿æ’ä»¶çš„å·²å®‰è£…çš„ä¸€éƒ¨åˆ†è„šæœ¬çš„æˆªå›¾ã€‚ä¾‹å¦‚çœ‹å„å¤§è§†é¢‘ç½‘ç«™ï¼Œä¸æƒ³è¦ä¹°VIPå»çœ‹ï¼Œé‚£ä¹ˆç›´æ¥å®‰è£…ä¸€ä¸ªVIPè§†é¢‘ç ´è§£è„šæœ¬ï¼›æˆ–è€…ç™¾åº¦ç½‘ç›˜ï¼Œæ‹’ç»å¯åŠ¨å®¢æˆ·ç«¯ä¸‹è½½æ–‡ä»¶ï¼Œå®‰è£…ä¸ªæ²¹çŒ´è„šæœ¬ç›´æ¥ç›´é“¾ä¸‹è½½ï¼</p>
<p>æ²¹çŒ´å„¿åœ¨æˆ‘çœ‹æ¥å°±æ˜¯ä¸€ä¸ªæµè§ˆå™¨è„šæœ¬çš„å®¹å™¨ï¼Œç½‘ä¸Šæå®¢ä¼—å¤šï¼Œä½ å¯ä»¥æ‰¾å¾—åˆ°ä»»ä½•è‡ªå·±æ„Ÿå…´è¶£çš„æƒ³è¦å®‰è£…çš„æ’ä»¶å»å®Œæˆè‡ªå·±è¦åšçš„äº‹æƒ…ã€‚</p>
<p>æ²¹çŒ´å„¿çš„å®‰è£…ï¼š<a href="https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo" target="_blank" rel="noopener">è°·æ­Œåº”ç”¨å•†åº— - æ²¹çŒ´å„¿</a>ï¼Œå®‰è£…å®Œæˆä¹‹åä½ å°±å¯ä»¥æ‰¾åˆ°ä»»ä½•ä½ æƒ³è¦çš„è„šæœ¬è£…åœ¨æ²¹çŒ´å„¿é‡Œé¢å•¦ï¼</p>
<p>è¿™è¾¹ï¼Œæˆ‘åªå‘Šè¯‰å¤§å®¶ä¸€ä¸ªç»ˆæè„šæœ¬ï¼š<a href="https://greasyfork.org/zh-CN/scripts/24508-userscript-show-site-all-userjs" target="_blank" rel="noopener">UserScript+</a>ã€‚ä¸ºå•¥å«å®ƒç»ˆæè„šæœ¬ã€‚ã€‚ã€‚å› ä¸ºå®‰è£…ä¸Šå®ƒä¹‹åï¼Œå½“ä½ æ‰“å¼€ä»»ä½•ç½‘ç«™ï¼Œä»–éƒ½ä¼šæç¤ºä½ è¿™ä¸ªç½‘ç«™å¯ä»¥å®‰è£…çš„è„šæœ¬æœ‰å“ªäº›ï¼Œè¿™æ ·ä½ å°±ä¸ç”¨åœ¨èŒ«èŒ«å¤§æµ·ä¸­å»å¯»æ‰¾è‡ªå·±éœ€è¦çš„é‚£äº›è„šæœ¬äº†ã€‚</p>
<p><img src="/blog/20190714/ä¸€ä¸ª-åˆæ ¼-çš„ç¨‹åºå‘˜å¿…é¡»å…·å¤‡çš„å·¥å…·å’Œæ’ä»¶/jb.png" alt="æ˜é‡‘æ²¹çŒ´å„¿è„šæœ¬"></p>
<p>å¯ä»¥æƒ³è±¡ï¼Œæœ‰äº†è¿™ä¸ªä¹‹åï¼Œé¢å‘ç™¾åº¦ç¼–ç¨‹çš„ç¨‹åºå‘˜æ˜¯ä¸æ˜¯ä¸ç”¨å†è¢«çœ¼èŠ±ç¼­ä¹±çš„å¹¿å‘Šæ‰€éªšæ‰°ï¼å–œæ¬¢ä½¿ç”¨æ˜é‡‘çš„ç¨‹åºå‘˜ä¹Ÿå¯ä»¥è®¾ç½®è‡ªå·±å–œæ¬¢çš„é¡µé¢æ’ç‰ˆ~ ç»å¸¸æ°´V2EXçš„ç¨‹åºå‘˜ä¹Ÿå¯ä»¥åœ¨è¯„è®ºåŒºç›–æ¥¼äº†ï¼ï¼å“ˆå“ˆæƒ³æƒ³å°±åˆºæ¿€å‘¢ï¼</p>
<h5 id="äº‘ç›˜ç²¾çµ"><a href="#äº‘ç›˜ç²¾çµ" class="headerlink" title="äº‘ç›˜ç²¾çµ"></a><a href="https://www.yunpanjingling.com/" target="_blank" rel="noopener">äº‘ç›˜ç²¾çµ</a></h5><p><img src="/blog/20190714/ä¸€ä¸ª-åˆæ ¼-çš„ç¨‹åºå‘˜å¿…é¡»å…·å¤‡çš„å·¥å…·å’Œæ’ä»¶/ypjl.png" alt="äº‘ç›˜ç²¾çµ"></p>
<p>äº‘ç›˜ç²¾çµæ˜¯ä¸€ä¸ªä¸‹è½½ç™¾åº¦ç½‘ç›˜èµ„æºçš„ç¥å¥‡çš„ç½‘ç«™ï¼Œåœ¨è¿™é‡Œä½ å‡ ä¹å¯ä»¥æ‰¾åˆ°ä»»ä½•æ‚¨æƒ³è¦çš„èµ„æºå»ä¸‹è½½ã€‚ç„¶é¹…ï¼Œéœ€è¦æ³¨å†Œç„¶åä½¿ç”¨è±†å­è´­ä¹°ã€‚ä¸è¿‡è¿™ä¹Ÿæ˜¯ç†æ‰€åº”å½“çš„ï¼Œæ¯•ç«ŸçŸ¥è¯†ä»˜è´¹çš„å¤©ä¸‹ã€‚ä½†æ˜¯éœ€è¦ä»˜çš„å¹¶ä¸å¤šï¼Œè€Œä¸”ä½ è¿˜å¯ä»¥å°†ä½ è‡ªå·±çš„èµ„æºåˆ†äº«åˆ°äº‘ç›˜ç²¾çµï¼Œæœ‰äººä¸‹è½½ä½ ä¹Ÿä¼šèµšå–åˆ°ç›¸åº”çš„è±†å­ã€‚</p>
]]></content>
      <categories>
        <category>å¼€å‘å·¥å…·</category>
      </categories>
      <tags>
        <tag>å¼€å‘å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title>å°†é˜¿é‡ŒJavaç¼–ç è§„èŒƒæ•²æˆæ€ç»´å¯¼å›¾</title>
    <url>/blog/20190714/%E5%B0%86%E9%98%BF%E9%87%8CJava%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83%E6%95%B2%E6%88%90%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/</url>
    <content><![CDATA[<p><img src="/blog/20190714/å°†é˜¿é‡ŒJavaç¼–ç è§„èŒƒæ•²æˆæ€ç»´å¯¼å›¾/fm.png" alt="é˜¿é‡ŒJavaç¼–ç è§„èŒƒ"></p>
<p><center>é˜¿é‡ŒJavaç¼–ç è§„èŒƒ</center><br><a id="more"></a></p>
<p><center></center></p>
<p><center><a href="https://mubu.com/doc/CuUSIfxtSz" target="_blank" rel="noopener">å¯ä»¥ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹åˆ†äº«çš„ç¬”è®°</a></center></p>
<p><center></center></p>
<p><center></center></p>
<p><center>æˆ–è€…æ‰«æå¦‚ä¸‹äºŒç»´ç è·å–æˆ‘åˆ†äº«çš„ã€Šé˜¿é‡ŒJavaå¼€å‘æ‰‹å†Œ-å¹•å¸ƒç‰ˆã€‹</center><br><img src="/blog/20190714/å°†é˜¿é‡ŒJavaç¼–ç è§„èŒƒæ•²æˆæ€ç»´å¯¼å›¾/qrcode.png" alt></p>
<p><center></center></p>
<p><center></center></p>
<h2 id><a href="#" class="headerlink" title></a><center></center></h2><p><center>æœ€åï¼Œæ€ç»´å¯¼å›¾æ•ˆæœå¦‚ä¸‹ï¼Œå¯†é›†ææƒ§ç—‡æ…å…¥~~</center></p>
<p><center>æŸ¥çœ‹æ¸…æ™°å®Œæ•´çš„æ•ˆæœè¯·å»å¹•å¸ƒç¬”è®°ï¼Œç‚¹å‡»æŸ¥çœ‹æ€ç»´å¯¼å›¾å³å¯</center><br><img src="/blog/20190714/å°†é˜¿é‡ŒJavaç¼–ç è§„èŒƒæ•²æˆæ€ç»´å¯¼å›¾/é˜¿é‡ŒJavaç¼–ç è§„èŒƒ.png" alt></p>
]]></content>
      <categories>
        <category>å¼€å‘å·¥å…·</category>
      </categories>
      <tags>
        <tag>å¼€å‘å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€è®¾è®¡æ¨¡å¼ã€‘æ¨¡æ¿æ–¹æ³•æ¨¡å¼</title>
    <url>/blog/20190707/%E3%80%90%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E3%80%91%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[<p><img src="/blog/20190707/ã€è®¾è®¡æ¨¡å¼ã€‘æ¨¡æ¿æ–¹æ³•æ¨¡å¼/fm.png" alt="å°é¢"><br><a id="more"></a></p>
<h4 id="ä»€ä¹ˆæ˜¯æ¨¡æ¿æ–¹æ³•æ¨¡å¼"><a href="#ä»€ä¹ˆæ˜¯æ¨¡æ¿æ–¹æ³•æ¨¡å¼" class="headerlink" title="ä»€ä¹ˆæ˜¯æ¨¡æ¿æ–¹æ³•æ¨¡å¼"></a>ä»€ä¹ˆæ˜¯æ¨¡æ¿æ–¹æ³•æ¨¡å¼</h4><p>åœ¨è®¡ç®—æœºç¨‹åºä¸­ï¼Œä¸ºäº†å°†ä¸€äº›å…·æœ‰ä¸åŒå®ç°ä½†æœ‰ç›¸åŒæ‰§è¡Œæ­¥éª¤çš„ç±»ç»Ÿä¸€èµ·æ¥ï¼Œé€šå¸¸æˆ‘ä»¬å°†è¿™äº›ç±»æŠ½è±¡æˆä¸€ä¸ªæ¨¡æ¿ç±»ã€‚æ¨¡æ¿ç±»å®šä¹‰äº†ä¸€ä¸ªç®—æ³•çš„æ¡†æ¶ï¼Œä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ç®—æ³•çš„ç»“æ„è€Œå»å¯¹ä¸€äº›ç»†èŠ‚å®ç°è¿›è¡Œé‡æ–°å®šä¹‰ã€‚</p>
<h4 id="æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„æ ¸å¿ƒè¦ç´ "><a href="#æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„æ ¸å¿ƒè¦ç´ " class="headerlink" title="æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„æ ¸å¿ƒè¦ç´ "></a>æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„æ ¸å¿ƒè¦ç´ </h4><h5 id="æŠ½è±¡æ¨¡æ¿"><a href="#æŠ½è±¡æ¨¡æ¿" class="headerlink" title="æŠ½è±¡æ¨¡æ¿"></a>æŠ½è±¡æ¨¡æ¿</h5><p>æŠ½è±¡æ¨¡æ¿ä¸­å®šä¹‰äº†ä¸¤ç§æ–¹æ³•ï¼šéœ€è¦å­ç±»å»å®ç°çš„åŸºæœ¬æ–¹æ³•ï¼Œä»¥åŠå›ºå®šçš„ä¸éœ€è¦å­ç±»å»å®ç°çš„å…·ä½“ç®—æ³•æ­¥éª¤çš„æ¨¡æ¿æ–¹æ³•ã€‚åŸºæœ¬æ–¹æ³•åœ¨æ¨¡æ¿æ–¹æ³•ä¸­è¢«è°ƒç”¨ï¼Œæ¨¡æ¿æ–¹æ³•ä¸€èˆ¬ä¼šæ˜¯ä¸€ä¸ªå…·ä½“çš„ç®—æ³•æ¡†æ¶ï¼Œè°ƒåº¦åŸºæœ¬æ–¹æ³•å®Œæˆæ‰€æœ‰åŠŸèƒ½ã€‚</p>
<h5 id="å…·ä½“å®ç°"><a href="#å…·ä½“å®ç°" class="headerlink" title="å…·ä½“å®ç°"></a>å…·ä½“å®ç°</h5><p>å­ç±»å…·ä½“å®ç°æŠ½è±¡æ¨¡æ¿ä¸­çš„åŸºæœ¬æ–¹æ³•ï¼Œå®Œæˆå¯¹æ¡†æ¶ä¸­çš„ç®—æ³•ç»†èŠ‚è¿›è¡Œé‡æ–°å®šä¹‰ã€‚</p>
<h4 id="æˆ‘åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨çš„æ¡ˆä¾‹"><a href="#æˆ‘åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨çš„æ¡ˆä¾‹" class="headerlink" title="æˆ‘åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨çš„æ¡ˆä¾‹"></a>æˆ‘åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨çš„æ¡ˆä¾‹</h4><p>åœ¨åšæŸä¸ªæŒ‰éœ€æŸ¥è¯¢ä¸åŒç±»åˆ«çš„ç”¨æˆ·ï¼Œå¹¶å°†å…¶ä¸Šä¼ åˆ°OSSä¸Šï¼Œæ¯æ—¥å‘é‚®ä»¶å‘Šè¯‰è¿è¥äººå‘˜ç»“æœçš„ä¸€ä¸ªéœ€æ±‚çš„æ—¶å€™ï¼Œæˆ‘å°±ç”¨åˆ°äº†æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€‚<br>é¦–å…ˆå®šä¹‰ä¸€ä¸ªæŠ½è±¡æ¨¡æ¿ï¼Œåˆ†åˆ«æœ‰æŸ¥è¯¢ç”¨æˆ·(æ¯å¤©éƒ½ä¸åŒçš„SQL)ï¼Œä¸Šä¼ åˆ°OSSï¼Œå‘é‚®ä»¶ç­‰å‡ ä¸ªæ­¥éª¤ï¼Œå³åŸºæœ¬æ–¹æ³•ã€‚åœ¨æ¨¡æ¿æ–¹æ³•ä¸­å°†è¿™å‡ ä¸ªæ­¥éª¤å°è£…èµ·æ¥ã€‚å®šä¹‰7ä¸ªå­ç±»åˆ†åˆ«å¯¹æ¯å¤©ä¸åŒçš„æŸ¥è¯¢ã€ä¸Šä¼ ã€é‚®ä»¶åšå…·ä½“çš„å®ç°ã€‚æœ€åæ ¹æ®ç­–ç•¥æ¨¡å¼ï¼Œä¸åŒçš„æ˜ŸæœŸè°ƒç”¨ä¸åŒçš„å¯¹è±¡çš„æ¨¡æ¿æ–¹æ³•å®Œæˆæ ¸å¿ƒåŠŸèƒ½ã€‚</p>
<h4 id="æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä»£ç ç¤ºä¾‹"><a href="#æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä»£ç ç¤ºä¾‹" class="headerlink" title="æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä»£ç ç¤ºä¾‹"></a>æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä»£ç ç¤ºä¾‹</h4><p>å¦‚å›¾ï¼Œæœ‰ä¸ªåšé¥­çš„æŠ½è±¡æ¨¡æ¿ï¼šå®šä¹‰äº†[æ´—èœ-ç‚’èœ-å®Œæˆ]ä¸‰ä¸ªæ­¥éª¤ä¸ºåŸºæœ¬æ–¹æ³•ï¼Œä¸€ä¸ª<code>ComplateCook</code>æ–¹æ³•å®Œæˆæ­¥éª¤çš„ç»„è£…</p>
<p><img src="/blog/20190707/ã€è®¾è®¡æ¨¡å¼ã€‘æ¨¡æ¿æ–¹æ³•æ¨¡å¼/bb.png" alt="æŠ½è±¡æ¨¡æ¿"></p>
<p>ä¸€ä¸ªè¥¿çº¢æŸ¿ç‚’è›‹çš„å®ç°ç±»</p>
<p><img src="/blog/20190707/ã€è®¾è®¡æ¨¡å¼ã€‘æ¨¡æ¿æ–¹æ³•æ¨¡å¼/z1.png" alt="å­ç±»1"></p>
<p>ä¸€ä¸ªé±¼é¦™è‚‰ä¸çš„å®ç°ç±»</p>
<p><img src="/blog/20190707/ã€è®¾è®¡æ¨¡å¼ã€‘æ¨¡æ¿æ–¹æ³•æ¨¡å¼/z2.png" alt="å­ç±»2"></p>
<p><strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">CookTemplate</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰æ­¥éª¤ä¸ºæŠ½è±¡æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">wash</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">cook</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">finish</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">ComplateCook</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å¼€å§‹åšèœï½"</span>);</span><br><span class="line">        wash();</span><br><span class="line">        cook();</span><br><span class="line">        finish();</span><br><span class="line">        System.out.println(<span class="string">"å®Œæˆåšèœæ­¥éª¤ï½"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">XihongshiChaoEgg</span> <span class="keyword">extends</span> <span class="title">CookTemplate</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">wash</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"åˆ‡è¥¿çº¢æŸ¿ï¼Œå‡†å¤‡é¸¡è›‹ï½"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cook</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ç‚’é¸¡è›‹ï¼Œç„¶åå†ç‚’è¥¿çº¢æŸ¿ï½"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">finish</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"è¥¿çº¢æŸ¿ç‚’è›‹åšå¥½äº†ï¼Œå‡ºé”…ï½"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">YuXiangRose</span> <span class="keyword">extends</span> <span class="title">CookTemplate</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">wash</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ´—èƒ¡èåœï½"</span>);</span><br><span class="line">        System.out.println(<span class="string">"åˆ‡è‚‰ä¸ï½"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cook</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å¼€å§‹åšé±¼é¦™è‚‰ä¸ï½"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">finish</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"é±¼é¦™è‚‰ä¸åšå¥½äº† å‡ºé”…ï½"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        CookTemplate cook = <span class="keyword">new</span> XihongshiChaoEgg();</span><br><span class="line">        cook.ComplateCook();</span><br><span class="line">        cook = <span class="keyword">new</span> YuXiangRose();</span><br><span class="line">        cook.ComplateCook();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä¼˜ç¼ºç‚¹"><a href="#æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä¼˜ç¼ºç‚¹" class="headerlink" title="æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä¼˜ç¼ºç‚¹"></a>æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä¼˜ç¼ºç‚¹</h4><ul>
<li><p>ä¼˜ç‚¹</p>
<ul>
<li>å°è£…äº†ä¸å¯å˜çš„éƒ¨åˆ†ï¼Œæ‰©å±•å¯å˜éƒ¨åˆ†</li>
<li>æä¾›å…¬å…±ä»£ç ï¼Œä¾¿äºç»´æŠ¤</li>
<li>å…·ä½“è¡Œä¸ºçˆ¶ç±»æ§åˆ¶ï¼Œå­ç±»åªç®¡è‡ªå·±çš„ç»†èŠ‚å®ç°ï¼Œç¬¦åˆå¼€é—­åŸåˆ™</li>
</ul>
</li>
<li><p>ç¼ºç‚¹</p>
<ul>
<li>ä¸€ä¸ªä¸åŒçš„å®ç°éƒ½è¦å¢åŠ ä¸€ä¸ªå­ç±»ï¼Œä¼šå¯¼è‡´ä»£ç é‡å¾ˆåºå¤§</li>
<li>çˆ¶ç±»çš„æ‰§è¡Œç»“æœä¼šå—åˆ°å­ç±»çš„å½±å“ï¼Œåœ¨å¤æ‚ä»£ç çš„é˜…è¯»ä¸­ä¼šç»™å¼€å‘äººå‘˜å¸¦æ¥å¾ˆå¤šéº»çƒ¦</li>
</ul>
</li>
</ul>
<h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼é€‚ç”¨äºï¼šæœ‰ä¸€ä¸ªå›ºå®šçš„ç®—æ³•æ­¥éª¤ï¼Œä½†æ˜¯ç»†èŠ‚å®ç°å­˜åœ¨å¤šç§å¯èƒ½çš„åœºæ™¯ï¼Œå³æ•´ä½“ç¨³å®šä½†æ˜¯ä¸ªåˆ«æ˜“å˜çš„æ—¶å€™è®²ä¼šå˜åŒ–çš„é‚£ä¸€éƒ¨åˆ†æŠ½è±¡å‡ºæ¥ã€‚<br>æ¨¡æ¿æ–¹æ³•æ¨¡å¼å¼ºè°ƒæŠ½è±¡ç±»ä¸å­ç±»ä¹‹é—´çš„åä½œï¼Œå®ƒå°†è°ƒç”¨æƒäº¤ç»™çˆ¶ç±»ï¼Œæ˜¯ä¸€ç§æ§åˆ¶åè½¬çš„è®¾è®¡ç†å¿µã€‚å­ç±»ä¸å†å»å®Œæˆæ ¸å¿ƒçš„åŠŸèƒ½ï¼Œåªéœ€è¦å…³æ³¨å±äºè‡ªå·±çš„é‚£ä¸€éƒ¨åˆ†çš„å®ç°ã€‚</p>
<hr>
<ul>
<li>JDKä¸­ç»å…¸çš„æ¨¡æ¿æ–¹æ³•æ¨¡å¼å®ç°ï¼š<strong>AQS</strong></li>
</ul>
]]></content>
      <categories>
        <category>JavaåŸºç¡€</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>JavaåŸºç¡€</tag>
        <tag>æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ¨¡å¼</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>å¹¶å‘ç¼–ç¨‹å­¦ä¹ (å…­)ï¼šExchangerçš„å­¦ä¹ åŠä½¿ç”¨åœºæ™¯</title>
    <url>/blog/20190701/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0-%E5%85%AD-%EF%BC%9AExchanger%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%8F%8A%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF/</url>
    <content><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>åœ¨JUCåŒ…ä¸­ï¼Œé™¤äº†ä¸€äº›å¸¸ç”¨çš„æˆ–è€…è¯´å¸¸è§çš„å¹¶å‘å·¥å…·ç±»(ReentrantLockï¼ŒCountDownLatchï¼ŒCyclicBarrierï¼ŒSemaphore)ç­‰ï¼Œè¿˜æœ‰ä¸€ä¸ªä¸å¸¸ç”¨çš„çº¿ç¨‹åŒæ­¥å™¨ç±» â€”â€” Exchangerã€‚<br></p>
<p>Exchangeræ˜¯é€‚ç”¨åœ¨ä¸¤ä¸ªçº¿ç¨‹ä¹‹é—´æ•°æ®äº¤æ¢çš„å¹¶å‘å·¥å…·ç±»ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ‰¾åˆ°ä¸€ä¸ªåŒæ­¥ç‚¹ï¼Œå½“ä¸¤ä¸ªçº¿ç¨‹éƒ½æ‰§è¡Œåˆ°äº†åŒæ­¥ç‚¹(<strong>exchangeæ–¹æ³•</strong>)ä¹‹å(<em>æœ‰ä¸€ä¸ªæ²¡æœ‰æ‰§è¡Œåˆ°å°±ä¸€ç›´ç­‰å¾…ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ç­‰å¾…è¶…æ—¶æ—¶é—´</em>)ï¼Œå°±å°†è‡ªèº«çº¿ç¨‹çš„æ•°æ®ä¸å¯¹æ–¹äº¤æ¢ã€‚</p>
<a id="more"></a>
<p><div style="text-align: center" center><a href="javascript:" target="_blank" rel="noopener">Exchangerå·¥å…·ç±»UML</a></div><br><img src="/blog/20190701/å¹¶å‘ç¼–ç¨‹å­¦ä¹ -å…­-ï¼šExchangerçš„å­¦ä¹ åŠä½¿ç”¨åœºæ™¯/exc.png" alt="UML"></p>
<h4 id="Exchangerç±»ç»“æ„"><a href="#Exchangerç±»ç»“æ„" class="headerlink" title="Exchangerç±»ç»“æ„"></a>Exchangerç±»ç»“æ„</h4><p>å¦‚ä¸Šå›¾UNMLï¼ŒExchangerç±»ä¸­æœ‰ä¸¤ä¸ªå†…éƒ¨ç±»ï¼Œä¸€ä¸ªNodeï¼Œä¸€ä¸ªParticipantã€‚</p>
<p>Participantç»§æ‰¿äº†ThreadLocalå¹¶ä¸”é‡å†™äº†å…¶initialValueæ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªNodeå¯¹è±¡ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/** The corresponding thread local class */</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Participant</span> <span class="keyword">extends</span> <span class="title">ThreadLocal</span>&lt;<span class="title">Node</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Node <span class="title">initialValue</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="keyword">new</span> Node(); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Nodeç±»å°è£…äº†ä¸¤ä¸ªçº¿ç¨‹å­˜å‚¨çš„æ•°æ®å¯¹è±¡ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Nodes hold partially exchanged data, plus other per-thread</span></span><br><span class="line"><span class="comment"> * bookkeeping. Padded via <span class="doctag">@sun</span>.misc.Contended to reduce memory</span></span><br><span class="line"><span class="comment"> * contention.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@sun</span>.misc.Contended <span class="keyword">static</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> index;              <span class="comment">//  node åœ¨ arena æ•°ç»„ä¸‹æ ‡</span></span><br><span class="line">    <span class="keyword">int</span> bound;              <span class="comment">//  äº¤æ¢å™¨çš„æœ€åè®°å½•å€¼ </span></span><br><span class="line">    <span class="keyword">int</span> collides;           <span class="comment">//  è®°å½•çš„ CAS å¤±è´¥æ•°</span></span><br><span class="line">    <span class="keyword">int</span> hash;               <span class="comment">//  ä¼ªéšæœºçš„è‡ªæ—‹æ•°</span></span><br><span class="line">    Object item;            <span class="comment">//  è¿™ä¸ªçº¿ç¨‹çš„æ•°æ®é¡¹</span></span><br><span class="line">    <span class="keyword">volatile</span> Object match;  <span class="comment">//  å¦ä¸€ä¸ªçº¿ç¨‹çš„æ•°æ®é¡¹</span></span><br><span class="line">    <span class="keyword">volatile</span> Thread parked; <span class="comment">//  å½“é˜»å¡æ—¶ï¼Œè®¾ç½®æ­¤çº¿ç¨‹ï¼Œä¸é˜»å¡çš„è¯ä¼šè‡ªæ—‹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Exchangeræºç åˆ†æ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">exchange</span><span class="params">(V x)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    Object v;</span><br><span class="line">    Object item = (x == <span class="keyword">null</span>) ? NULL_ITEM : x; <span class="comment">// translate null args</span></span><br><span class="line">    <span class="keyword">if</span> ((arena != <span class="keyword">null</span> || <span class="comment">// æ˜¯nullå°±æ‰§è¡Œåé¢çš„æ–¹æ³•</span></span><br><span class="line">         (v = slotExchange(item, <span class="keyword">false</span>, <span class="number">0L</span>)) == <span class="keyword">null</span>) &amp;&amp;</span><br><span class="line">        <span class="comment">// å¦‚æœæ‰§è¡ŒslotExchangeæœ‰ç»“æœå°±æ‰§è¡Œåé¢çš„ï¼Œå¦åˆ™è¿”å›</span></span><br><span class="line">        ((Thread.interrupted() || <span class="comment">// éä¸­æ–­åˆ™æ‰§è¡Œåé¢çš„æ–¹æ³•</span></span><br><span class="line">          (v = arenaExchange(item, <span class="keyword">false</span>, <span class="number">0L</span>)) == <span class="keyword">null</span>)))</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> InterruptedException();</span><br><span class="line">    <span class="keyword">return</span> (v == NULL_ITEM) ? <span class="keyword">null</span> : (V)v;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>exchange</code>æ–¹æ³•çš„æ­¥éª¤ï¼š</p>
<ul>
<li>å¦‚æœæ‰§è¡ŒslotExchangeæœ‰ç»“æœå°±æ‰§è¡Œåé¢çš„arenaExchange</li>
<li>å¦‚æœsoltè¢«å ç”¨ï¼Œå°±æ‰§è¡ŒarenaExchange</li>
<li>è¿”å›çš„æ•°æ®væ˜¯å¯¹æ–¹çº¿ç¨‹çš„æ•°æ®é¡¹</li>
<li>æ€»ç»“å³ï¼šå¦‚æœAçº¿ç¨‹å…ˆè°ƒç”¨ï¼Œé‚£ä¹ˆAçš„æ•°æ®é¡¹å­˜å‚¨çš„itemä¸­</li>
<li>åˆ™Bçº¿ç¨‹çš„æ•°æ®é¡¹å­˜å‚¨åœ¨matchä¸­</li>
<li>å½“æ²¡æœ‰å¤šçº¿ç¨‹å¹¶å‘æ“ä½œ Exchange çš„æ—¶å€™ï¼Œä½¿ç”¨ slotExchange å°±è¶³å¤Ÿäº†ã€‚ slot æ˜¯ä¸€ä¸ª node å¯¹è±¡ã€‚</li>
<li>å½“å‡ºç°å¹¶å‘äº†ï¼Œä¸€ä¸ª slot å°±ä¸å¤Ÿäº†ï¼Œå°±éœ€è¦ä½¿ç”¨ä¸€ä¸ª node æ•°ç»„ arena æ“ä½œäº†ã€‚</li>
</ul>
<p>â€‹    </p>
<h4 id="Exchangerçš„ä½¿ç”¨"><a href="#Exchangerçš„ä½¿ç”¨" class="headerlink" title="Exchangerçš„ä½¿ç”¨"></a>Exchangerçš„ä½¿ç”¨</h4><p>ä¸‹é¢çš„ä¾‹å­æ¨¡æ‹Ÿä¸€ä¸ªé˜Ÿåˆ—ä¸­æ•°æ®çš„äº¤æ¢ä½¿ç”¨çš„åœºæ™¯ï¼š</p>
<ul>
<li>çº¿ç¨‹Aå¾€é˜Ÿåˆ—ä¸­å­˜å…¥æ•°æ®</li>
<li>çº¿ç¨‹Bä»é˜Ÿåˆ—ä¸­æ¶ˆè€—æ•°æ®</li>
<li>å½“çº¿ç¨‹Aå­˜æ»¡çš„æ—¶å€™</li>
<li>æ‰äº¤æ¢ç»™çº¿ç¨‹B</li>
<li>å½“çº¿ç¨‹Bæ¶ˆè€—å®Œæˆä¹‹åæ‰äº¤æ¢ç»™çº¿ç¨‹Aã€‚</li>
<li>çº¿ç¨‹Aã€Bçš„ç”Ÿäº§å’Œæ¶ˆè€—çš„é€Ÿç‡æœ‰å¯èƒ½ä¸åŒ</li>
<li>å¯¹æ–¹çº¿ç¨‹è°ƒç”¨exchangeä¹‹å‰ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œåˆ°exchangeä¼šé˜»å¡</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/** åœ¨å¯¹æ–¹çº¿ç¨‹è°ƒç”¨exchangeä¹‹å‰ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œåˆ°exchangeä¼šé˜»å¡ ç›´åˆ°åŒæ–¹éƒ½è°ƒç”¨exchange */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExchangerStudy</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> ArrayBlockingQueue&lt;String&gt; initialFillQueue </span><br><span class="line">      = <span class="keyword">new</span> ArrayBlockingQueue&lt;&gt;(<span class="number">5</span>);</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> ArrayBlockingQueue&lt;String&gt; initialEmptyQueue </span><br><span class="line">      = <span class="keyword">new</span> ArrayBlockingQueue&lt;&gt;(<span class="number">5</span>);</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Exchanger&lt;ArrayBlockingQueue&lt;String&gt;&gt; exchanger </span><br><span class="line">      = <span class="keyword">new</span> Exchanger&lt;&gt;();</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** å¡«å……ç¼“å­˜é˜Ÿåˆ—çš„çº¿ç¨‹ */</span></span><br><span class="line">  <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">FillingRunnable</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      ArrayBlockingQueue&lt;String&gt; current = initialEmptyQueue;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (current != <span class="keyword">null</span>) &#123;</span><br><span class="line">          String str = StrUtil.uuid();</span><br><span class="line">          System.out.println(<span class="string">"ç”Ÿäº§äº†ä¸€ä¸ªåºåˆ—ï¼š"</span> + str + <span class="string">"&gt;&gt;&gt;&gt;&gt;åŠ å…¥åˆ°äº¤æ¢åŒº"</span>);</span><br><span class="line">          Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            current.add(str);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (IllegalStateException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"é˜Ÿåˆ—å·²æ»¡ï¼Œæ¢ä¸€ä¸ªç©ºçš„"</span>);</span><br><span class="line">            current = exchanger.exchange(current);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/** å¡«å……ç¼“å­˜é˜Ÿåˆ—çš„çº¿ç¨‹ */</span></span><br><span class="line">  <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">EmptyingRunnable</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      ArrayBlockingQueue&lt;String&gt; current = initialFillQueue;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (current != <span class="keyword">null</span>) &#123;</span><br><span class="line">          <span class="keyword">if</span> (!current.isEmpty()) &#123;</span><br><span class="line">            String str = current.poll();</span><br><span class="line">            System.out.println(<span class="string">"æ¶ˆè€—ä¸€ä¸ªæ•°åˆ—ï¼š"</span> + str);</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"é˜Ÿåˆ—ç©ºäº†ï¼Œæ¢ä¸ªæ»¡çš„"</span>);</span><br><span class="line">            current = exchanger.exchange(current);</span><br><span class="line">            System.out.println(<span class="string">"æ¢æ»¡çš„æˆåŠŸ~~~~~~~~~~~~~~~~~~~~~~"</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">new</span> Thread(<span class="keyword">new</span> FillingRunnable()).start();</span><br><span class="line">    <span class="keyword">new</span> Thread(<span class="keyword">new</span> EmptyingRunnable()).start();</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<blockquote>
<p><a href="https://juejin.im/post/5ae7554ff265da0b86360880" target="_blank" rel="noopener">&gt;&gt;&gt;&gt;&gt; æ›´è¯¦ç»†çš„æºç è§£æ - æ˜é‡‘</a></p>
</blockquote>
<p><img src="https://user-gold-cdn.xitu.io/2018/5/1/16317a536c642f7c?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="ç»“å°¾"></p>
]]></content>
      <categories>
        <category>JavaåŸºç¡€</category>
        <category>å¹¶å‘ç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>JavaåŸºç¡€</tag>
        <tag>å¹¶å‘ç¼–ç¨‹</tag>
        <tag>Exchanger</tag>
        <tag>çº¿ç¨‹äº¤æ¢å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title>å¹¶å‘ç¼–ç¨‹å­¦ä¹ (äº”)ï¼šSemaphoreæºç å­¦ä¹ åŠä½¿ç”¨æ¡ˆä¾‹</title>
    <url>/blog/20190623/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0-%E4%BA%94-%EF%BC%9ASemaphore%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0%E5%8F%8A%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B/</url>
    <content><![CDATA[<p><img src="/blog/20190623/å¹¶å‘ç¼–ç¨‹å­¦ä¹ -äº”-ï¼šSemaphoreæºç å­¦ä¹ åŠä½¿ç”¨æ¡ˆä¾‹/fm.png" alt></p>
<a id="more"></a>
<h3 id="SemaphoreåŒæ­¥å·¥å…·ç±»ä¹‹ä¿¡å·é‡ä»‹ç»"><a href="#SemaphoreåŒæ­¥å·¥å…·ç±»ä¹‹ä¿¡å·é‡ä»‹ç»" class="headerlink" title="SemaphoreåŒæ­¥å·¥å…·ç±»ä¹‹ä¿¡å·é‡ä»‹ç»"></a>SemaphoreåŒæ­¥å·¥å…·ç±»ä¹‹ä¿¡å·é‡ä»‹ç»</h3><h4 id="ä»€ä¹ˆæ˜¯Semaphore"><a href="#ä»€ä¹ˆæ˜¯Semaphore" class="headerlink" title="ä»€ä¹ˆæ˜¯Semaphore"></a>ä»€ä¹ˆæ˜¯Semaphore</h4><ul>
<li>Semaphoreæ˜¯JUCåŒ…ä¸­çš„ä¸€ä¸ªå¾ˆç®€å•çš„å·¥å…·ç±»ï¼Œç”¨æ¥å®ç°å¤šçº¿ç¨‹ä¸‹å¯¹äºèµ„æºçš„åŒä¸€æ—¶åˆ»çš„è®¿é—®çº¿ç¨‹æ•°é™åˆ¶</li>
<li>Semaphoreä¸­å­˜åœ¨ä¸€ä¸ªã€è®¸å¯ã€‘çš„æ¦‚å¿µï¼Œå³è®¿é—®èµ„æºä¹‹å‰ï¼Œå…ˆè¦è·å¾—è®¸å¯ï¼Œå¦‚æœå½“å‰è®¸å¯æ•°é‡ä¸º0ï¼Œé‚£ä¹ˆçº¿ç¨‹é˜»å¡ï¼Œç›´åˆ°è·å¾—è®¸å¯</li>
<li>Semaphoreå†…éƒ¨ä½¿ç”¨AQSå®ç°ï¼Œç”±æŠ½è±¡å†…éƒ¨ç±»Syncç»§æ‰¿äº†AQSã€‚å› ä¸ºSemaphoreå¤©ç”Ÿå°±æ˜¯å…±äº«çš„åœºæ™¯ï¼Œæ‰€ä»¥å…¶å†…éƒ¨å®é™…ä¸Šç±»ä¼¼äºå…±äº«é”çš„å®ç°ã€‚</li>
<li>Semaphoreæœºåˆ¶æ˜¯æä¾›ç»™çº¿ç¨‹æŠ¢å å¼è·å–è®¸å¯ï¼Œæ‰€ä»¥ä»–å¯ä»¥å®ç°å…¬å¹³æˆ–è€…éå…¬å¹³ï¼Œç±»ä¼¼äºReentrantLockã€‚</li>
<li>Semaphoreæä¾›ä¸¤ä¸ªæ„é€ æ–¹æ³•ï¼Œç”¨æ¥ä¼ å…¥è®¸å¯æ•°é‡ä»¥åŠå…¬å¹³æˆ–è€…éå…¬å¹³ï¼š<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Semaphore</span><span class="params">(<span class="keyword">int</span> permits)</span> </span>&#123;</span><br><span class="line">    sync = <span class="keyword">new</span> NonfairSync(permits);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Semaphore</span><span class="params">(<span class="keyword">int</span> permits, <span class="keyword">boolean</span> fair)</span> </span>&#123;</span><br><span class="line">    sync = fair ? <span class="keyword">new</span> FairSync(permits) : <span class="keyword">new</span> NonfairSync(permits);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="Semaphoreçš„ä½¿ç”¨åœºæ™¯"><a href="#Semaphoreçš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="Semaphoreçš„ä½¿ç”¨åœºæ™¯"></a>Semaphoreçš„ä½¿ç”¨åœºæ™¯</h4><ul>
<li>é™æµï¼šå¹¶å‘ç¯å¢ƒ(ä¾‹å¦‚æœ‰1000ä¸ªçº¿ç¨‹)ä¸‹åªå…è®¸100ä¸ªçº¿ç¨‹è®¿é—®æ•°æ®åº“æŸèµ„æº</li>
<li>äº¦ä¾‹å¦‚å®é™…çš„ï¼Œåœè½¦åœºåªæœ‰10ä¸ªè½¦ä½ï¼Œç›®å‰æœ‰15ä¸ªæ±½è½¦è¦æ¥åœè½¦ï¼Œå¤šå‡ºçš„5ä¸ªéœ€è¦ç­‰å…¶ä»–è½¦è¾†ç¦»å¼€ä¹‹åæ‰èƒ½è¿›è¡Œåœè½¦</li>
</ul>
<h3 id="Semaphoreæºç è§£è¯»"><a href="#Semaphoreæºç è§£è¯»" class="headerlink" title="Semaphoreæºç è§£è¯»"></a>Semaphoreæºç è§£è¯»</h3><p>åˆ†ä¸ºå…¬å¹³ä¸éå…¬å¹³</p>
<h4 id="è·å–è®¸å¯çš„éå…¬å¹³çš„å®ç°"><a href="#è·å–è®¸å¯çš„éå…¬å¹³çš„å®ç°" class="headerlink" title="è·å–è®¸å¯çš„éå…¬å¹³çš„å®ç°"></a>è·å–è®¸å¯çš„éå…¬å¹³çš„å®ç°</h4><p>åœ¨æŠ½è±¡ç±»Syncä¸­å®ç°äº†éå…¬å¹³çš„æ¶ˆè€—â€œè®¸å¯â€çš„æ–¹æ³•ã€‚<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">int</span> <span class="title">nonfairTryAcquireShared</span><span class="params">(<span class="keyword">int</span> acquires)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">        <span class="keyword">int</span> available = getState();</span><br><span class="line">        <span class="keyword">int</span> remaining = available - acquires;</span><br><span class="line">        <span class="keyword">if</span> (remaining &lt; <span class="number">0</span> ||</span><br><span class="line">        	compareAndSetState(available, remaining))</span><br><span class="line">        <span class="keyword">return</span> remaining;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>é¦–å…ˆè·å–å½“å‰è®¸å¯æ•°é‡</p>
</li>
<li><p>åˆ¤æ–­æ¶ˆè€—è®¸å¯ä¹‹åçš„å‰©ä½™æ•°é‡æ˜¯å¦&gt;=0</p>
</li>
<li><p>æ˜¯çš„è¯æ‰§è¡Œ<code>compareAndSetState(available, remaining)</code>è®¾ç½®è®¸å¯ä¹‹åè¿”å›</p>
</li>
<li><p>å¦åˆ™è¿”å›çš„è´Ÿæ•°ä¼šä½¿å¾—å…¶åœ¨<code>doAcquireSharedInterruptibly</code>ä¸­ç­‰å¾…è®¸å¯å¹¶æŒ‚èµ·ï¼Œç›´åˆ°è¢«å”¤é†’(è¿™æ­¥éª¤åœ¨AQSä¸­å®ç°ï¼Œå¦‚ä¸‹)</p>
</li>
</ul>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">acquireSharedInterruptibly</span><span class="params">(<span class="keyword">int</span> arg)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    <span class="comment">//å¦‚æœçº¿ç¨‹è¢«ä¸­æ–­äº†ï¼ŒæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">    <span class="keyword">if</span> (Thread.interrupted())</span><br><span class="line">    	<span class="keyword">throw</span> <span class="keyword">new</span> InterruptedException();</span><br><span class="line">    <span class="comment">//è·å–è®¸å¯å¤±è´¥ï¼Œå°†çº¿ç¨‹åŠ å…¥åˆ°ç­‰å¾…é˜Ÿåˆ—ä¸­</span></span><br><span class="line">    <span class="keyword">if</span> (tryAcquireShared(arg) &lt; <span class="number">0</span>)</span><br><span class="line">    	doAcquireSharedInterruptibly(arg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="è·å–è®¸å¯çš„å…¬å¹³å®ç°"><a href="#è·å–è®¸å¯çš„å…¬å¹³å®ç°" class="headerlink" title="è·å–è®¸å¯çš„å…¬å¹³å®ç°"></a>è·å–è®¸å¯çš„å…¬å¹³å®ç°</h4><p>é¦–å…ˆä¼šåœ¨è·å–è®¸å¯ä¹‹å‰ï¼Œåˆ¤æ–­<code>hasQueuedPredecessors()</code>ï¼Œæ˜¯å¦æœ‰çº¿ç¨‹åœ¨ç­‰å¾…é˜Ÿåˆ—ä¸­ç­‰å¾…è®¸å¯ï¼Œæœ‰çš„è¯ç›´æ¥è¿”å›-1ï¼Œè¿™ä¸ªåº•å±‚å®ç°åœ¨AQSä¸­å·²ç»å®ç°å¥½äº†ã€‚æ¥ä¸‹æ¥å‰©ä¸‹çš„æ“ä½œå°±å’Œéå…¬å¹³çš„åŸºæœ¬ä¸€è‡´äº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">FairSync</span> <span class="keyword">extends</span> <span class="title">Sync</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">2014338818796000944L</span>;</span><br><span class="line"></span><br><span class="line">    FairSync(<span class="keyword">int</span> permits) &#123;</span><br><span class="line">        <span class="keyword">super</span>(permits);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">tryAcquireShared</span><span class="params">(<span class="keyword">int</span> acquires)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">            <span class="keyword">if</span> (hasQueuedPredecessors())</span><br><span class="line">                <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> available = getState();</span><br><span class="line">            <span class="keyword">int</span> remaining = available - acquires;</span><br><span class="line">            <span class="keyword">if</span> (remaining &lt; <span class="number">0</span> ||</span><br><span class="line">                compareAndSetState(available, remaining))</span><br><span class="line">                <span class="keyword">return</span> remaining;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">hasQueuedPredecessors</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// The correctness of this depends on head being initialized</span></span><br><span class="line">    <span class="comment">// before tail and on head.next being accurate if the current</span></span><br><span class="line">    <span class="comment">// thread is first in queue.</span></span><br><span class="line">    Node t = tail; <span class="comment">// Read fields in reverse initialization order</span></span><br><span class="line">    Node h = head;</span><br><span class="line">    Node s;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­å¤´èŠ‚ç‚¹ä¸ç­‰äºå°¾èŠ‚ç‚¹å¹¶ä¸”ï¼ˆå¤´èŠ‚ç‚¹çš„ä¸‹ä¸€èŠ‚ç‚¹ä¸ºç©ºæˆ–è€…å…¶ä¸ºå½“å‰çº¿ç¨‹ï¼‰</span></span><br><span class="line">    <span class="keyword">return</span> h != t &amp;&amp;</span><br><span class="line">        ((s = h.next) == <span class="keyword">null</span> || s.thread != Thread.currentThread());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="è®¸å¯çš„é‡Šæ”¾"><a href="#è®¸å¯çš„é‡Šæ”¾" class="headerlink" title="è®¸å¯çš„é‡Šæ”¾"></a>è®¸å¯çš„é‡Šæ”¾</h4><p>è®¸å¯çš„é‡Šæ”¾å¯¹äºå…¬å¹³å’Œéå…¬å¹³çš„å®ç°éƒ½æ˜¯ä¸€è‡´çš„ï¼Œå®šä¹‰åœ¨Syncç±»ä¸­ã€‚å› ä¸ºæ˜¯å…±äº«å¼çš„ï¼Œé‡Šæ”¾çš„æ—¶å€™æ²¡æœ‰åƒReentrantLockä¸€æ ·å»åˆ¤æ–­æ˜¯å¦æ˜¯å½“å‰çº¿ç¨‹æ¥é‡Šæ”¾è®¸å¯ã€‚é‡Šæ”¾è®¸å¯ä¹Ÿæ˜¯é‡‡ç”¨åŸå­æ“ä½œå°†éœ€è¦é‡Šæ”¾çš„è®¸å¯åŠ å›å»å°±å®Œæˆäº†ã€‚</p>
<p>ä¸€æ—¦çº¿ç¨‹è°ƒç”¨<code>releaseShared</code>é‡Šæ”¾è®¸å¯æˆåŠŸï¼Œå°±ä¼šåŒæ—¶è°ƒç”¨<code>doReleaseShared</code>æ–¹æ³•ï¼Œå…¶ä¸­ä¼šå¯¹é˜»å¡çš„çº¿ç¨‹è¿›è¡Œç¯å‹ï¼Œä¸‹é¢æ˜¯<code>tryReleaseShared</code>çš„æºç ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">tryReleaseShared</span><span class="params">(<span class="keyword">int</span> releases)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">        <span class="comment">// æ‹¿åˆ°å½“å‰çš„è®¸å¯æ•°é‡</span></span><br><span class="line">        <span class="keyword">int</span> current = getState();</span><br><span class="line">        <span class="comment">// åŠ ä¸Šè¿˜å›æ¥çš„è®¸å¯</span></span><br><span class="line">        <span class="keyword">int</span> next = current + releases;</span><br><span class="line">        <span class="keyword">if</span> (next &lt; current) <span class="comment">// overflow</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">"Maximum permit count exceeded"</span>);</span><br><span class="line">        <span class="comment">// åŸå­æ“ä½œ å½’è¿˜è®¸å¯</span></span><br><span class="line">        <span class="keyword">if</span> (compareAndSetState(current, next))</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å‡å°‘è®¸å¯æ•°é‡ä»¥åŠå°†å‰©ä½™è®¸å¯æ•°é‡éƒ½å–èµ°"><a href="#å‡å°‘è®¸å¯æ•°é‡ä»¥åŠå°†å‰©ä½™è®¸å¯æ•°é‡éƒ½å–èµ°" class="headerlink" title="å‡å°‘è®¸å¯æ•°é‡ä»¥åŠå°†å‰©ä½™è®¸å¯æ•°é‡éƒ½å–èµ°"></a>å‡å°‘è®¸å¯æ•°é‡ä»¥åŠå°†å‰©ä½™è®¸å¯æ•°é‡éƒ½å–èµ°</h4><p>Semaphoreè¿˜æä¾›äº†å‡ ä¸ªé¢å¤–çš„æ“ä½œè®¸å¯çš„æ–¹æ³•</p>
<ul>
<li><p>å‡å°‘è®¸å¯æ•°é‡</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">reducePermits</span><span class="params">(<span class="keyword">int</span> reductions)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">        <span class="keyword">int</span> current = getState();</span><br><span class="line">        <span class="keyword">int</span> next = current - reductions;</span><br><span class="line">        <span class="keyword">if</span> (next &gt; current) <span class="comment">// underflow</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">"Permit count underflow"</span>);</span><br><span class="line">        <span class="keyword">if</span> (compareAndSetState(current, next))</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å–èµ°å‰©ä½™å…¨éƒ¨è®¸å¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">int</span> <span class="title">drainPermits</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">        <span class="keyword">int</span> current = getState();</span><br><span class="line">        <span class="keyword">if</span> (current == <span class="number">0</span> || compareAndSetState(current, <span class="number">0</span>))</span><br><span class="line">            <span class="keyword">return</span> current;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="å®é™…ä½¿ç”¨ä¿¡å·é‡çš„ä»£ç å®ä¾‹"><a href="#å®é™…ä½¿ç”¨ä¿¡å·é‡çš„ä»£ç å®ä¾‹" class="headerlink" title="å®é™…ä½¿ç”¨ä¿¡å·é‡çš„ä»£ç å®ä¾‹"></a>å®é™…ä½¿ç”¨ä¿¡å·é‡çš„ä»£ç å®ä¾‹</h3><p>å¦‚ä¸‹ï¼šä½¿ç”¨ä¿¡å·é‡åšäº†ä¸€ä¸ªé™æµçš„åŠŸèƒ½ã€‚</p>
<p>åœ¨1000ä¸ªçº¿ç¨‹å¹¶å‘è®¿é—®çš„æƒ…å†µä¸‹ï¼Œæ¯æ¬¡é™åˆ¶åªæœ‰100ä¸ªçº¿ç¨‹èƒ½å¤Ÿè·å–åˆ°èµ„æº</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SemaphoreStudy</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¸å¯çš„æ•°é‡</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> N = <span class="number">100</span>;</span><br><span class="line">  <span class="comment">// çº¿ç¨‹æ•°é‡</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> M = <span class="number">1000</span>;</span><br><span class="line">  <span class="comment">// è·å–è®¸å¯å¤±è´¥çš„æ¬¡æ•°</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> AtomicInteger F = <span class="keyword">new</span> AtomicInteger();</span><br><span class="line">  <span class="comment">// è·å–è®¸å¯æˆåŠŸçš„æ¬¡æ•°</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> AtomicInteger S = <span class="keyword">new</span> AtomicInteger();</span><br><span class="line">  <span class="comment">// å£°æ˜è®¸å¯</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Semaphore store = <span class="keyword">new</span> Semaphore(N);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> BrokenBarrierException, InterruptedException </span>&#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨æ …æ æ¨¡æ‹Ÿ1000å¹¶å‘</span></span><br><span class="line">    CyclicBarrier BARRIER = <span class="keyword">new</span> CyclicBarrier(M + <span class="number">1</span>);</span><br><span class="line">    <span class="comment">// ä½¿ç”¨çº¿ç¨‹æ± åˆ›å»ºçº¿ç¨‹</span></span><br><span class="line">    ExecutorService pool = Executors.newCachedThreadPool();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; M; i++) &#123;</span><br><span class="line">      pool.execute(</span><br><span class="line">          () -&gt; &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">              BARRIER.await();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">              e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            getData();</span><br><span class="line">          &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">"ç­‰å¾…2ç§’æ‰§è¡Œå¹¶å‘1000çº¿ç¨‹"</span>);</span><br><span class="line">    Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">    <span class="comment">// ç­‰å¾…ä¸¤ç§’åæ‰“å¼€æ …æ  å¹¶å‘è·å–æ•°æ®å¼€å§‹æ‰§è¡Œ</span></span><br><span class="line">    BARRIER.await();</span><br><span class="line">    pool.shutdown();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** æ¨¡æ‹Ÿè·å–æ•°æ®æˆ–è€…ä¸šåŠ¡å¤„ç† */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (!store.tryAcquire()) &#123;</span><br><span class="line">      <span class="keyword">int</span> a = <span class="number">5000</span> + <span class="keyword">new</span> Random().nextInt(<span class="number">1000</span>);</span><br><span class="line">      System.out.println(<span class="string">"æ²¡æœ‰å¯ç”¨èµ„æºï¼Œç­‰å¾…ä¸€å°ä¼šå„¿: "</span> + a + <span class="string">"ï¼Œç›®å‰ï¼š"</span> + F.incrementAndGet());</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        Thread.sleep(a);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"æˆåŠŸæ‹¿åˆ°èµ„æº"</span>);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    store.release();</span><br><span class="line">    System.out.println(<span class="string">"é‡Šæ”¾èµ„æºï¼Œç°åœ¨ï¼š"</span> + S.incrementAndGet());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>JavaåŸºç¡€</category>
        <category>å¹¶å‘ç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>JavaåŸºç¡€</tag>
        <tag>å¹¶å‘ç¼–ç¨‹</tag>
        <tag>Semaphore</tag>
        <tag>ä¿¡å·é‡</tag>
      </tags>
  </entry>
  <entry>
    <title>å¹¶å‘ç¼–ç¨‹å­¦ä¹ (å››)ï¼šç†è§£ThreadPoolExecutorçº¿ç¨‹æ± </title>
    <url>/blog/20190617/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0-%E5%9B%9B-%EF%BC%9A%E7%90%86%E8%A7%A3ThreadPoolExecutor%E7%BA%BF%E7%A8%8B%E6%B1%A0/</url>
    <content><![CDATA[<p><img src="/blog/20190617/å¹¶å‘ç¼–ç¨‹å­¦ä¹ -å››-ï¼šç†è§£ThreadPoolExecutorçº¿ç¨‹æ± /xcc.png" alt="çº¿ç¨‹æ± "></p>
<a id="more"></a>
<h3 id="å‰è¨€ï¼šå…³äºThreadPoolExecutor"><a href="#å‰è¨€ï¼šå…³äºThreadPoolExecutor" class="headerlink" title="å‰è¨€ï¼šå…³äºThreadPoolExecutor"></a>å‰è¨€ï¼šå…³äºThreadPoolExecutor</h3><p><strong>ThreadPoolExecutor</strong>å³æˆ‘ä»¬å¸¸è¯´çš„çº¿ç¨‹æ± ã€‚ã€Šé˜¿é‡Œå·´å·´Javaæ‰‹å†Œã€‹ä¸­å¯¹äºçº¿ç¨‹æ± çš„ä½¿ç”¨è§„å®šå¦‚ä¸‹ï¼š</p>
<blockquote>
<p><strong>3.ã€å¼ºåˆ¶ã€‘çº¿ç¨‹èµ„æºå¿…é¡»é€šè¿‡çº¿ç¨‹æ± æä¾›ï¼Œä¸å…è®¸åœ¨åº”ç”¨ä¸­è‡ªè¡Œæ˜¾ç¤ºåˆ›å»ºçº¿ç¨‹ã€‚</strong><br><br><strong>è¯´æ˜ï¼šä½¿ç”¨çº¿ç¨‹æ± çš„å¥½å¤„æ˜¯å‡å°‘çº¿ç¨‹åœ¨åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ä¸Šæ‰€èŠ±çš„æ—¶é—´ä»¥åŠç³»ç»Ÿèµ„æºçš„å¼€é”€ï¼Œè§£å†³èµ„æºä¸è¶³çš„é—®é¢˜ã€‚å¦‚æœä¸ä½¿ç”¨çº¿ç¨‹æ± ï¼Œæœ‰å¯èƒ½é€ æˆç³»ç»Ÿåˆ›å»ºå¤§é‡çš„åŒç±»çº¿ç¨‹è€Œå¯¼è‡´æ¶ˆè€—å®Œå†…å­˜æˆ–è€…â€œè¿‡åº¦åˆ‡æ¢â€çš„é—®é¢˜â€‹</strong></p>
</blockquote>
<h3 id="ä½¿ç”¨çº¿ç¨‹æ± çš„å¥½å¤„"><a href="#ä½¿ç”¨çº¿ç¨‹æ± çš„å¥½å¤„" class="headerlink" title="ä½¿ç”¨çº¿ç¨‹æ± çš„å¥½å¤„"></a>ä½¿ç”¨çº¿ç¨‹æ± çš„å¥½å¤„</h3><h4 id="ä½¿ç”¨çº¿ç¨‹æ± åˆ›å»ºçº¿ç¨‹å¯ä»¥"><a href="#ä½¿ç”¨çº¿ç¨‹æ± åˆ›å»ºçº¿ç¨‹å¯ä»¥" class="headerlink" title="ä½¿ç”¨çº¿ç¨‹æ± åˆ›å»ºçº¿ç¨‹å¯ä»¥"></a>ä½¿ç”¨çº¿ç¨‹æ± åˆ›å»ºçº¿ç¨‹å¯ä»¥</h4><ul>
<li>é¿å…åœ¨åº”ç”¨ä¸­é¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹</li>
<li>ä½¿ç”¨çº¿ç¨‹æ± åˆ›å»ºçº¿ç¨‹å¯ä»¥å¤ç”¨CPUèµ„æº</li>
<li>æé«˜çº¿ç¨‹çš„å¯ç®¡ç†æ€§</li>
</ul>
<h3 id="ä½¿ç”¨çº¿ç¨‹æ± çš„é£é™©"><a href="#ä½¿ç”¨çº¿ç¨‹æ± çš„é£é™©" class="headerlink" title="ä½¿ç”¨çº¿ç¨‹æ± çš„é£é™©"></a>ä½¿ç”¨çº¿ç¨‹æ± çš„é£é™©</h3><h4 id="çº¿ç¨‹é¥¥é¥¿æ­»é”"><a href="#çº¿ç¨‹é¥¥é¥¿æ­»é”" class="headerlink" title="çº¿ç¨‹é¥¥é¥¿æ­»é”"></a>çº¿ç¨‹é¥¥é¥¿æ­»é”</h4><p>çº¿ç¨‹æ± ä¸ºâ€œæ­»é”â€è¿™ä¸€æ¦‚å¿µå¸¦æ¥äº†ä¸€ç§æ–°çš„å¯èƒ½ï¼šçº¿ç¨‹é¥¥é¥¿æ­»é”ã€‚åœ¨çº¿ç¨‹æ± ä¸­ï¼Œå¦‚æœä¸€ä¸ªä»»åŠ¡å°†å¦ä¸€ä¸ªä»»åŠ¡æäº¤åˆ°åŒä¸€ä¸ªExecutorï¼Œé‚£ä¹ˆé€šå¸¸ä¼šå¼•å‘æ­»é”ã€‚ç¬¬äºŒä¸ªçº¿ç¨‹åœç•™åœ¨å·¥ä½œé˜Ÿåˆ—ä¸­ç­‰å¾…ç¬¬ä¸€ä¸ªæäº¤çš„ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œä½†æ˜¯ç¬¬ä¸€ä¸ªä»»åŠ¡åˆæ— æ³•æ‰§è¡Œå®Œæˆï¼Œå› ä¸ºå®ƒåœ¨ç­‰å¾…ç¬¬äºŒä¸ªä»»åŠ¡æ‰§è¡Œå®Œæˆã€‚å¦‚ä¸‹ä»£ç æ‰€ç¤ºã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public class MyThreadPoolDeadLock &#123;</span><br><span class="line">    static ExecutorService singlePool = Executors.newSingleThreadExecutor();</span><br><span class="line">    static class MyTask implements Callable&lt;String&gt; &#123;</span><br><span class="line">        String name;</span><br><span class="line">        public MyTask(String name) &#123;</span><br><span class="line">            this.name = name;</span><br><span class="line">        &#125;</span><br><span class="line">        @Override</span><br><span class="line">        public String call() throws Exception &#123;</span><br><span class="line">            Future&lt;String&gt; inner = singlePool.submit(new MyTask(&quot;inner&quot;));</span><br><span class="line">            return inner.get();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public static void main(String[] args) throws ExecutionException, InterruptedException &#123;</span><br><span class="line">        Future&lt;String&gt; result = singlePool.submit(new MyTask(&quot;outer&quot;));</span><br><span class="line">        System.out.println(result.get());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>åœ¨æ›´å¤§çš„çº¿ç¨‹æ± ä¸­ï¼Œå¦‚æœæ‰€æœ‰çº¿ç¨‹éƒ½ç”±äºç­‰å¾…å…¶ä»–ä»å¤„äºå·¥ä½œé˜Ÿåˆ—çš„ä»»åŠ¡è€Œé˜»å¡ï¼Œé‚£ä¹ˆä¼šå‘ç”ŸåŒæ ·çš„é—®é¢˜ï¼Œè¿™ç§æƒ…å†µè¢«ç§°ä¸ºçº¿ç¨‹é¥¥é¥¿æ­»é”ã€‚</p>
<h4 id="å†…å­˜æº¢å‡º"><a href="#å†…å­˜æº¢å‡º" class="headerlink" title="å†…å­˜æº¢å‡º"></a>å†…å­˜æº¢å‡º</h4><p>é™¤äº†Thread å¯¹è±¡æ‰€éœ€çš„å†…å­˜ä¹‹å¤–ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½éœ€è¦ä¸¤ä¸ªå¯èƒ½å¾ˆå¤§çš„æ‰§è¡Œè°ƒç”¨å †æ ˆã€‚é™¤æ­¤ä»¥å¤–ï¼ŒJVM å¯èƒ½ä¼šä¸ºæ¯ä¸ª Java çº¿ç¨‹åˆ›å»ºä¸€ä¸ªæœ¬æœºçº¿ç¨‹ï¼Œè¿™äº›æœ¬æœºçº¿ç¨‹å°†æ¶ˆè€—é¢å¤–çš„ç³»ç»Ÿèµ„æºã€‚å¦‚æœçº¿ç¨‹æ± çš„å¤§å°è®¾ç½®çš„ä¸åˆç†å°±ä¼šæœ‰å¯èƒ½å¯¼è‡´å†…å­˜æº¢å‡ºçš„é£é™©ã€‚è¿˜æœ‰å°±æ˜¯Javaé¢„ç½®çº¿ç¨‹æ± FixedThreadPool å’Œ SingleThreadPoolä¸­çš„é˜»å¡é˜Ÿåˆ—ä½¿ç”¨çš„æ— ç•Œé˜Ÿåˆ—ï¼Œæœ€å¤šå¯ä»¥ä¿å­˜2147483647ä¸ªä»»åŠ¡ï¼Œå¦‚æœä»£ç ç¼–å†™ä¸ä¸¥è°¨å°±ä¼šå †ç§¯å¤§é‡è¯·æ±‚å¯¼è‡´å†…å­˜æº¢å‡ºã€‚</p>
<h4 id="çº¿ç¨‹æ³„æ¼"><a href="#çº¿ç¨‹æ³„æ¼" class="headerlink" title="çº¿ç¨‹æ³„æ¼"></a>çº¿ç¨‹æ³„æ¼</h4><p>å„ç§çº¿ç¨‹æ± éƒ½ä¼šå¯¼è‡´ä¸€ç§é—®é¢˜å°±æ˜¯çº¿ç¨‹æ³„æ¼ã€‚å½“ä»çº¿ç¨‹æ± å–å‡ºä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œä»»åŠ¡æ—¶ï¼Œå¦‚æœä»»åŠ¡æŠ›å‡ºRuntimeException æˆ–ä¸€ä¸ªErrorè€Œæœªæ•è·å¼‚å¸¸æ—¶ï¼Œé‚£ä¹ˆçº¿ç¨‹åªä¼šé€€å‡ºè€Œçº¿ç¨‹æ± çš„å¤§å°å°†æ°¸è¿œå‡å°‘ä¸€ä¸ªï¼Œå½“è¿™ç§æƒ…å†µå‘ç”Ÿå¤šæ¬¡æ—¶ï¼Œçº¿ç¨‹æ± æœ€ç»ˆå°±ä¼šä¸ºç©ºå¹¶ä¸”å› ä¸ºæ²¡æœ‰å¯ç”¨çš„çº¿ç¨‹æ¥å¤„ç†ä»»åŠ¡ã€‚</p>
<h3 id="å¦‚æœè¦è‡ªå·±å®ç°çº¿ç¨‹æ± éœ€è¦å…³æ³¨å“ªäº›ç‚¹"><a href="#å¦‚æœè¦è‡ªå·±å®ç°çº¿ç¨‹æ± éœ€è¦å…³æ³¨å“ªäº›ç‚¹" class="headerlink" title="å¦‚æœè¦è‡ªå·±å®ç°çº¿ç¨‹æ± éœ€è¦å…³æ³¨å“ªäº›ç‚¹"></a>å¦‚æœè¦è‡ªå·±å®ç°çº¿ç¨‹æ± éœ€è¦å…³æ³¨å“ªäº›ç‚¹</h3><ul>
<li>é¦–å…ˆè¦æœ‰ä¸€ä¸ªå­˜æ”¾çº¿ç¨‹çš„å®¹å™¨å¹¶è®¾ç½®å®¹é‡</li>
<li>è¿˜éœ€è¦ä¸€ä¸ªå­˜æ”¾ç”¨æˆ·æäº¤çš„ä»»åŠ¡çš„å®¹å™¨ï¼Œé˜»å¡é˜Ÿåˆ—ï¼Œæœ‰ç•Œè¿˜æ˜¯æ— ç•Œ</li>
<li>çº¿ç¨‹æ± åˆ›å»ºçš„æ—¶å€™éœ€è¦å°†æŒ‡å®šæ•°é‡çš„çº¿ç¨‹å¯åŠ¨</li>
<li>ç”¨æˆ·æäº¤ä»»åŠ¡çš„æ—¶å€™å¦‚æœçº¿ç¨‹æ± æ²¡æœ‰ç©ºé—²çš„çº¿ç¨‹å¦‚ä½•åˆ›å»ºçº¿ç¨‹å¹¶æ”¾å…¥çº¿ç¨‹æ± </li>
<li>çº¿ç¨‹æ•°é‡è¿œå¤§äºç”¨æˆ·æäº¤çš„ä»»åŠ¡æ•°é‡éœ€è¦æœ‰ä¸€ä¸ªå›æ”¶çº¿ç¨‹çš„æœºåˆ¶</li>
<li>çº¿ç¨‹å…¨éƒ¨åœ¨æ‰§è¡Œä»»åŠ¡çš„æ—¶å€™å­˜æ”¾çš„ä»»åŠ¡éœ€è¦ç­‰å¾…è¿˜æ˜¯æ€æ ·æˆ–è€…å†æ–°åŠ å…¥ä»»åŠ¡æ—¶è¦æä¾›ä¸€ä¸ªé¥±å’Œç­–ç•¥</li>
</ul>
<h3 id="ThreadPoolExecutoræ„é€ å‡½æ•°å‚æ•°æ„ä¹‰"><a href="#ThreadPoolExecutoræ„é€ å‡½æ•°å‚æ•°æ„ä¹‰" class="headerlink" title="ThreadPoolExecutoræ„é€ å‡½æ•°å‚æ•°æ„ä¹‰"></a>ThreadPoolExecutoræ„é€ å‡½æ•°å‚æ•°æ„ä¹‰</h3><p><img src="/blog/20190617/å¹¶å‘ç¼–ç¨‹å­¦ä¹ -å››-ï¼šç†è§£ThreadPoolExecutorçº¿ç¨‹æ± /gzhs.png" alt="æ„é€ å‡½æ•°"><br>ThreadPoolExecutoræä¾›äº†å››ç§æ„é€ å‡½æ•°ï¼Œæ€»å…±æœ‰å¦‚ä¸‹å‡ ç§å‚æ•°ï¼Œæ„ä¹‰ä¸ºï¼š</p>
<ul>
<li><code>int corePoolSize</code>: æ ¸å¿ƒçº¿ç¨‹æ•°çš„å¤§å°ï¼Œåœ¨çº¿ç¨‹æ± åˆ›å»ºçš„æ—¶å€™å°±ä¼šåˆ›å»ºè¿™ä¹ˆå¤šçº¿ç¨‹å¾…å‘½ï¼Œç”¨æˆ·æäº¤ä»»åŠ¡ä¹‹åç«‹å³å¼€å§‹æ‰§è¡Œä»»åŠ¡</li>
<li><code>int maximumPoolSize</code>: æœ€å¤§çº¿ç¨‹æ•°çš„å¤§å°ï¼Œå³æœ€å¤šä¼šåˆ›å»ºè¿™ä¹ˆå¤šçº¿ç¨‹ï¼Œå½“è¶…è¿‡è¿™ä¸ªæ•°ç›®çš„æ—¶å€™å¯èƒ½ä¼šåœ¨æ‰§è¡Œå®Œä»»åŠ¡ä¹‹åå›æ”¶å¤šäºæ ¸å¿ƒçº¿ç¨‹æ•°çš„çº¿ç¨‹</li>
<li><code>long keepAliveTime</code>: çº¿ç¨‹æœ€å¤§å­˜æ´»æ—¶é—´ï¼Œæ˜¯ç›¸å¯¹äºæ ¸å¿ƒçº¿ç¨‹æ•°æ¥è®²çš„ã€‚æ²¡æœ‰è¶…è¿‡æ ¸å¿ƒçº¿ç¨‹æ•°çš„ä¼šä¸€ç›´å­˜æ´»çš„ã€‚è¶…è¿‡çš„æ‰æœ‰å­˜æ´»æ—¶é—´çš„é™åˆ¶</li>
<li><code>TimeUnit unit</code>: æ—¶é—´å•ä½</li>
<li><code>BlockingQueue&lt;Runnable&gt; workQueue</code>: é˜»å¡é˜Ÿåˆ—ï¼Œç”¨äºå­˜æ”¾ç”¨æˆ·æäº¤çš„ä»»åŠ¡ã€‚ç³»ç»Ÿé¢„ç½®çš„çº¿ç¨‹æ± çš„é˜»å¡é˜Ÿåˆ—ä¸€èˆ¬éƒ½æ˜¯æ— ç•Œçš„LinkBlockingQueueï¼Œä½†æ˜¯å»ºè®®ä½¿ç”¨æœ‰ç•Œé˜Ÿåˆ—ï¼Œå¯¹äºéå¸¸å¤§æˆ–è€…æ— ç•Œçš„çº¿ç¨‹æ± ï¼Œå¯ä»¥ä½¿ç”¨åŒæ­¥ç§»äº¤é˜Ÿåˆ—æ§åˆ¶é¿å…æ’é˜Ÿï¼Œç›´æ¥å°†ä»»åŠ¡ä»ç”Ÿäº§è€…ç§»äº¤åˆ°å·¥ä½œè€…çº¿ç¨‹ã€‚</li>
<li><code>ThreadFactory threadFactory</code>: çº¿ç¨‹å·¥å‚æ¥å£ã€‚åªæœ‰ä¸€ä¸ªnewThreadæ–¹æ³•ã€‚ä¾¿äºç”¨æˆ·æ ¹æ®ä¸šåŠ¡éœ€è¦å®ç°è‡ªå·±çš„çº¿ç¨‹åˆ›å»ºæœºåˆ¶ã€‚</li>
<li><code>RejectedExecutionHandler handler</code>: é¥±å’Œç­–ç•¥ã€‚é»˜è®¤å››ç§ï¼Œåœ¨ä¸‹é¢è®²è§£ã€‚</li>
</ul>
<h3 id="å‡ ç§é»˜è®¤çš„é¥±å’Œç­–ç•¥"><a href="#å‡ ç§é»˜è®¤çš„é¥±å’Œç­–ç•¥" class="headerlink" title="å‡ ç§é»˜è®¤çš„é¥±å’Œç­–ç•¥"></a>å‡ ç§é»˜è®¤çš„é¥±å’Œç­–ç•¥</h3><p>å½“æœ‰ç•Œé˜Ÿåˆ—è¢«å¡«æ»¡åï¼Œç”¨æˆ·åˆ›å»ºçš„ä»»åŠ¡æ— æ³•å†æ·»åŠ åˆ°çº¿ç¨‹æ± ä¸­ä¿å­˜ï¼Œé¥±å’Œç­–ç•¥å¼€å§‹å‘æŒ¥ä½œç”¨ã€‚å¦‚æœæŸä¸ªä»»åŠ¡è¢«æäº¤åˆ°å·²å…³é—­çš„Executorsæ—¶ï¼Œé¥±å’Œç­–ç•¥ä¹Ÿä¼šè¢«æ‰§è¡Œã€‚é¥±å’Œç­–ç•¥çš„å®ç°éœ€è¦å®ç°æ¥å£<code>RejectedExecutionHandler</code>ã€‚<br><img src="/blog/20190617/å¹¶å‘ç¼–ç¨‹å­¦ä¹ -å››-ï¼šç†è§£ThreadPoolExecutorçº¿ç¨‹æ± /bhcl.png" alt="å››ç§é»˜è®¤çš„é¥±å’Œç­–ç•¥"><br>å¦‚ä¸Šï¼Œåœ¨ThreadPoolExecutorç±»ä¸­æœ‰å››ä¸ªå†…éƒ¨ç±»å®ç°äº†<code>RejectedExecutionHandler</code>æ¥å£ã€‚åˆ†åˆ«æ˜¯:<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public static class AbortPolicy implements RejectedExecutionHandler &#123;...&#125;</span><br><span class="line">public static class DiscardPolicy implements RejectedExecutionHandler &#123;...&#125;</span><br><span class="line">public static class DiscardOldestPolicy implements RejectedExecutionHandler &#123;...&#125;</span><br><span class="line">public static class CallerRunsPolicy implements RejectedExecutionHandler &#123;...&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="AbortPolicy"><a href="#AbortPolicy" class="headerlink" title="AbortPolicy"></a>AbortPolicy</h4><p>â€œä¸­æ­¢â€ç­–ç•¥æ˜¯é»˜è®¤çš„é¥±å’Œç­–ç•¥ï¼Œè¯¥ç­–ç•¥å°†ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸<code>RejectedExecutionException</code>ï¼Œè°ƒç”¨è€…å¯ä»¥æ•è·è¿™ä¸ªå¼‚å¸¸ç„¶åç¼–å†™è‡ªå·±çš„ä¸šåŠ¡ä»£ç ã€‚</p>
<h4 id="DiscardPolicy"><a href="#DiscardPolicy" class="headerlink" title="DiscardPolicy"></a>DiscardPolicy</h4><p>â€œæŠ›å¼ƒâ€ç­–ç•¥ä¼šåœ¨æ–°æäº¤çš„ä»»åŠ¡æ— æ³•ä¿å­˜åœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…æ‰§è¡Œæ—¶å°†å…¶æŠ›å¼ƒæ‰ã€‚</p>
<h4 id="DiscardOldestPolicy"><a href="#DiscardOldestPolicy" class="headerlink" title="DiscardOldestPolicy"></a>DiscardOldestPolicy</h4><p>åŒâ€œæŠ›å¼ƒâ€ç­–ç•¥ï¼Œè¿™ç§ç­–ç•¥ä¼šå°†å³å°†æ‰§è¡Œçš„é‚£ä¸ªä»»åŠ¡æŠ›å¼ƒæ‰ï¼Œå³æŠ›å¼ƒæœ€è€çš„ä»»åŠ¡ç„¶åå°è¯•æäº¤æ–°çš„ä»»åŠ¡ã€‚å¦‚æœå·¥ä½œé˜Ÿåˆ—ä½¿ç”¨çš„æ˜¯ä¼˜å…ˆé˜Ÿåˆ—ï¼Œé‚£ä¹ˆä¼šå¯¼è‡´ä¼˜å…ˆçº§æœ€é«˜çš„ä»»åŠ¡è¢«æŠ›å¼ƒï¼Œ<strong>æ…ç”¨</strong>ï¼</p>
<h4 id="CallerRunsPolicy"><a href="#CallerRunsPolicy" class="headerlink" title="CallerRunsPolicy"></a>CallerRunsPolicy</h4><p>â€œè°ƒç”¨è€…æ‰§è¡Œâ€ç­–ç•¥å³åœ¨é˜Ÿåˆ—æ»¡çš„æ—¶å€™ç”±è°ƒç”¨è€…å»æ‰§è¡Œè¯¥ä»»åŠ¡ã€‚ä¸ä¼šåœ¨çº¿ç¨‹æ± çš„æŸä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œæ–°çš„ä»»åŠ¡ã€‚</p>
<blockquote>
<p>ã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ä¸­å¼ºè°ƒä½¿ç”¨çº¿ç¨‹æ± çš„æ—¶å€™å°½é‡ä½¿ç”¨ThreadPoolExecutorï¼Œç›®çš„åœ¨äºè®©ç¨‹åºå‘˜æ›´åŠ æ˜ç¡®çº¿ç¨‹æ± çš„å·¥ä½œæœºåˆ¶ï¼Œå®é™…ä¸šåŠ¡ä¸­ä¸å¯èƒ½åœ¨ä»»åŠ¡æ»¡æ—¶å°†ä»»åŠ¡æŠ›å¼ƒæ‰ï¼Œæ‰€ä»¥å®ç°è‡ªå·±çš„é¥±å’Œç­–ç•¥æ˜¯æœ‰å¿…è¦çš„ã€‚</p>
</blockquote>
<h3 id="Javaé¢„ç½®çº¿ç¨‹æ± åŠå…¶ä½¿ç”¨åœºæ™¯"><a href="#Javaé¢„ç½®çº¿ç¨‹æ± åŠå…¶ä½¿ç”¨åœºæ™¯" class="headerlink" title="Javaé¢„ç½®çº¿ç¨‹æ± åŠå…¶ä½¿ç”¨åœºæ™¯"></a>Javaé¢„ç½®çº¿ç¨‹æ± åŠå…¶ä½¿ç”¨åœºæ™¯</h3><p>å¦‚å›¾æ˜¯Executorsç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•<br><img src="/blog/20190617/å¹¶å‘ç¼–ç¨‹å­¦ä¹ -å››-ï¼šç†è§£ThreadPoolExecutorçº¿ç¨‹æ± /yzxcgz.png" alt="é¢„ç½®çº¿ç¨‹æ± æ„é€ "></p>
<h4 id="Executors-newCachedThreadPool"><a href="#Executors-newCachedThreadPool" class="headerlink" title="Executors.newCachedThreadPool()"></a>Executors.newCachedThreadPool()</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title">newCachedThreadPool</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ThreadPoolExecutor(<span class="number">0</span>, Integer.MAX_VALUE,</span><br><span class="line">                              <span class="number">60L</span>, TimeUnit.SECONDS,</span><br><span class="line">                              <span class="keyword">new</span> SynchronousQueue&lt;Runnable&gt;());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ— é™å®¹é‡çš„çº¿ç¨‹æ± (æœ€å¤§ä¸º2147483647)ï¼Œè°ƒç”¨ThreadPoolExecutoræ„é€ ä¼ å…¥çš„æ ¸å¿ƒçº¿ç¨‹æ•°ä¸º0ã€‚é€‚åˆåœºæ™¯ä¸ºåˆ›å»ºæ‰§è¡Œæ—¶é—´çŸ­æ•ˆå¿«é€Ÿçš„çº¿ç¨‹ä»»åŠ¡ï¼Œçº¿ç¨‹åœ¨æ‰§è¡Œå®Œæˆä¹‹åç›´æ¥è¢«å›æ”¶ã€‚é˜»å¡é˜Ÿåˆ—ä½¿ç”¨SynchronousQueueï¼Œè¿™æ˜¯ä¸€ä¸ªä¸ä¿å­˜æ•°æ®çš„é˜Ÿåˆ—ï¼Œå› ä¸ºè¯¥çº¿ç¨‹æ± æœ‰ä»»åŠ¡æäº¤å°±ä¼šåˆ›å»ºçº¿ç¨‹å»æ‰§è¡Œï¼Œæ‰€ä»¥ä¸éœ€è¦ä¿å­˜</p>
<h4 id="Executors-newFixedThreadPool-nThreads"><a href="#Executors-newFixedThreadPool-nThreads" class="headerlink" title="Executors.newFixedThreadPool(nThreads)"></a>Executors.newFixedThreadPool(nThreads)</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title">newFixedThreadPool</span><span class="params">(<span class="keyword">int</span> nThreads)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ThreadPoolExecutor(nThreads, nThreads,</span><br><span class="line">                                  <span class="number">0L</span>, TimeUnit.MILLISECONDS,</span><br><span class="line">                                  <span class="keyword">new</span> LinkedBlockingQueue&lt;Runnable&gt;());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºå›ºå®šæ•°é‡çš„çº¿ç¨‹æ± ã€‚è°ƒç”¨ThreadPoolExecutorçš„æ„é€ å‡½æ•°ä¼ å…¥çš„æ ¸å¿ƒçº¿ç¨‹æ•°ç­‰äºæœ€å¤§çº¿ç¨‹æ•°ã€‚è¯¥çº¿ç¨‹æ± ä¸­çš„é˜»å¡é˜Ÿåˆ—ä¹Ÿä½¿ç”¨çš„æ˜¯æ— ç•Œçš„LinkedBlockingQueueã€‚</p>
<h4 id="Executors-newSingleThreadExecutor-ï¼š"><a href="#Executors-newSingleThreadExecutor-ï¼š" class="headerlink" title="Executors.newSingleThreadExecutor()ï¼š"></a>Executors.newSingleThreadExecutor()ï¼š</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title">newSingleThreadExecutor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> FinalizableDelegatedExecutorService</span><br><span class="line">        (<span class="keyword">new</span> ThreadPoolExecutor(<span class="number">1</span>, <span class="number">1</span>,</span><br><span class="line">                                <span class="number">0L</span>, TimeUnit.MILLISECONDS,</span><br><span class="line">                                <span class="keyword">new</span> LinkedBlockingQueue&lt;Runnable&gt;()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¯æ¬¡éƒ½åªæœ‰ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œä»»åŠ¡ï¼Œç”¨æˆ·æäº¤çš„ä»»åŠ¡éƒ½ä¼šæ’é˜Ÿé˜»å¡åœ¨é˜»å¡é˜Ÿåˆ—ä¸­ç­‰å¾…ä¸Šä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œä¹‹åæ‰§è¡Œä¸‹ä¸€ä¸ªã€‚é€‚ç”¨åœºæ™¯ä¸ºåé¢ä»»åŠ¡ä¾èµ–å‰é¢ä»»åŠ¡çš„æƒ…å†µã€‚è¯¥çº¿ç¨‹æ± ä¸­çš„é˜»å¡é˜Ÿåˆ—ä¹Ÿä½¿ç”¨çš„æ˜¯æ— ç•Œçš„LinkedBlockingQueueã€‚ä½¿ç”¨è¿™ä¸ªçº¿ç¨‹æ± éœ€è¦å°å¿ƒ<a href="#çº¿ç¨‹é¥¥é¥¿æ­»é”">çº¿ç¨‹é¥¥é¥¿æ­»é”</a></p>
<h4 id="Executors-newWorkStealingPool"><a href="#Executors-newWorkStealingPool" class="headerlink" title="Executors.newWorkStealingPool()"></a>Executors.newWorkStealingPool()</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title">newWorkStealingPool</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ForkJoinPool</span><br><span class="line">        (Runtime.getRuntime().availableProcessors(),</span><br><span class="line">         ForkJoinPool.defaultForkJoinWorkerThreadFactory,</span><br><span class="line">         <span class="keyword">null</span>, <span class="keyword">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è·å–å½“å‰å¯ç”¨çš„çº¿ç¨‹æ•°é‡è¿›è¡Œåˆ›å»ºä½œä¸ºå¹¶è¡Œçº§åˆ«ï¼Œé€šè¿‡æºç å¯ä»¥çœ‹å‡ºåº•å±‚è°ƒç”¨çš„æ˜¯ForkJoinPoolçº¿ç¨‹æ± ï¼ŒnewWorkStealingPoolé€‚åˆä½¿ç”¨åœ¨å¾ˆè€—æ—¶çš„æ“ä½œï¼Œä½†æ˜¯newWorkStealingPoolä¸æ˜¯ThreadPoolExecutorçš„æ‰©å±•ï¼Œå®ƒæ˜¯æ–°çš„çº¿ç¨‹æ± ç±»ForkJoinPoolçš„æ‰©å±•ï¼Œä½†æ˜¯éƒ½æ˜¯åœ¨ç»Ÿä¸€çš„ä¸€ä¸ªExecutorsç±»ä¸­å®ç°ï¼Œç”±äºèƒ½å¤Ÿåˆç†çš„ä½¿ç”¨CPUè¿›è¡Œå¯¹ä»»åŠ¡æ“ä½œï¼ˆå¹¶è¡Œæ“ä½œï¼‰ï¼Œæ‰€ä»¥é€‚åˆä½¿ç”¨åœ¨å¾ˆè€—æ—¶çš„ä»»åŠ¡ä¸­ã€‚</p>
<h4 id="Executors-newScheduledThreadPool"><a href="#Executors-newScheduledThreadPool" class="headerlink" title="Executors.newScheduledThreadPool()"></a>Executors.newScheduledThreadPool()</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ScheduledExecutorService <span class="title">newScheduledThreadPool</span><span class="params">(<span class="keyword">int</span> corePoolSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ScheduledThreadPoolExecutor(corePoolSize);</span><br><span class="line">&#125;</span><br><span class="line">â†‘â†‘â†‘</span><br><span class="line">â†“â†“â†“</span><br><span class="line">...</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ScheduledThreadPoolExecutor</span></span></span><br><span class="line"><span class="class">        <span class="keyword">extends</span> <span class="title">ThreadPoolExecutor</span></span></span><br><span class="line"><span class="class">        <span class="keyword">implements</span> <span class="title">ScheduledExecutorService</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ScheduledThreadPoolExecutor</span><span class="params">(<span class="keyword">int</span> corePoolSize)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(corePoolSize, Integer.MAX_VALUE, <span class="number">0</span>, NANOSECONDS,</span><br><span class="line">              <span class="keyword">new</span> DelayedWorkQueue());</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è®¾å®šå»¶è¿Ÿæ—¶é—´ï¼Œå®šæœŸæ‰§è¡Œã€‚é€šè¿‡æºç å¯ä»¥çœ‹å‡ºåº•å±‚è°ƒç”¨çš„æ˜¯ä¸€ä¸ªScheduledThreadPoolExecutorï¼Œç„¶åä¼ å…¥çº¿ç¨‹æ•°é‡ã€‚åŒnewWorkStealingPoolä¸€æ ·ä¹Ÿä¸æ˜¯ç›´æ¥ä½¿ç”¨ThreadPoolExecutorè¿›è¡Œæ‰©å±•ã€‚å¯ä»¥å»¶æ—¶å¯åŠ¨ï¼Œå®šæ—¶å¯åŠ¨çš„çº¿ç¨‹æ± ï¼Œé€‚ç”¨äºéœ€è¦å¤šä¸ªåå°çº¿ç¨‹æ‰§è¡Œå‘¨æœŸä»»åŠ¡çš„åœºæ™¯ã€‚</p>
<h3 id="ä¼˜é›…çš„å…³é—­çº¿ç¨‹æ± "><a href="#ä¼˜é›…çš„å…³é—­çº¿ç¨‹æ± " class="headerlink" title="ä¼˜é›…çš„å…³é—­çº¿ç¨‹æ± "></a>ä¼˜é›…çš„å…³é—­çº¿ç¨‹æ± </h3><h4 id="shutdown"><a href="#shutdown" class="headerlink" title="shutdown"></a>shutdown</h4><p>è®¾ç½®çº¿ç¨‹æ± çŠ¶æ€ä¸ºå…³é—­ï¼Œä½†æ˜¯åªä¼šå…³é—­å·²ç»æ‰§è¡Œå®Œæˆçš„çº¿ç¨‹ï¼Œå¯¹äºè¿˜æœªæ‰§è¡Œå®Œæˆçš„çº¿ç¨‹ï¼Œä¼šç­‰å¾…æ‰§è¡Œå®Œæˆå†å…³é—­ã€‚</p>
<p>å½“æˆ‘ä»¬ä½¿ç”¨shuwdownæ–¹æ³•å…³é—­çº¿ç¨‹æ± æ—¶ï¼Œä¸€å®šè¦ç¡®ä¿ä»»åŠ¡é‡Œä¸ä¼šæœ‰æ°¸ä¹…é˜»å¡ç­‰å¾…çš„é€»è¾‘ï¼Œå¦åˆ™çº¿ç¨‹æ± å°±å…³é—­ä¸äº†ã€‚</p>
<h4 id="shutdownNow"><a href="#shutdownNow" class="headerlink" title="shutdownNow"></a>shutdownNow</h4><p>ç«‹é©¬å…³é—­çº¿ç¨‹æ± ï¼Œçº¿ç¨‹æ± é‡Œçš„ä»»åŠ¡ä¸å†æ‰§è¡Œã€‚</p>
<p>å¦‚æœæˆ‘ä»¬è°ƒç”¨shutdownNowæ–¹æ³•æ—¶ï¼Œçº¿ç¨‹å¤„äºä»é˜Ÿåˆ—é‡Œè¯»å–ä»»åŠ¡è€Œé˜»å¡ä¸­ï¼Œåˆ™ä¼šå¯¼è‡´æŠ›å‡ºInterruptedExceptionå¼‚å¸¸</p>
]]></content>
      <categories>
        <category>JavaåŸºç¡€</category>
        <category>å¹¶å‘ç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>JavaåŸºç¡€</tag>
        <tag>å¹¶å‘ç¼–ç¨‹</tag>
        <tag>çº¿ç¨‹æ± </tag>
        <tag>ThreadPoolExecutor</tag>
      </tags>
  </entry>
  <entry>
    <title>äºŒå‰æ ‘çš„å‡ ç§éé€’å½’éå†</title>
    <url>/blog/20190613/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%87%A0%E7%A7%8D%E9%9D%9E%E9%80%92%E5%BD%92%E9%81%8D%E5%8E%86/</url>
    <content><![CDATA[<p><img src="/blog/20190613/äºŒå‰æ ‘çš„å‡ ç§éé€’å½’éå†/fm.jpg" alt="å°é¢"></p>
<a id="more"></a>
<h2 id="äºŒå‰æ ‘çš„å‡ ç§éé€’å½’éå†è§£æ³•"><a href="#äºŒå‰æ ‘çš„å‡ ç§éé€’å½’éå†è§£æ³•" class="headerlink" title="äºŒå‰æ ‘çš„å‡ ç§éé€’å½’éå†è§£æ³•"></a>äºŒå‰æ ‘çš„å‡ ç§éé€’å½’éå†è§£æ³•</h2><p>äºŒå‰æ ‘çš„é€’å½’éå†æƒ³å¿…äº†è§£é€’å½’ä»¥åŠäºŒå‰æ ‘çš„åŒå­¦éƒ½èƒ½å¤Ÿè½»æ¾å†™å‡ºæ­£ç¡®ç­”æ¡ˆï¼Œç„¶è€ŒäºŒå‰æ ‘çš„éé€’å½’éå†ç¡®æ˜¯å¾ˆå¤šäººéš¾ä»¥ç†è§£å­¦ä¼šçš„ï¼Œæ‰€ä»¥æˆ‘åœ¨è¿™é‡Œè¿›è¡Œä¸€ä¸‹å½’çº³æ€»ç»“ï¼Œä¸»è¦æ˜¯å¤ä¹ å·©å›ºä¸€ä¸‹è¿™æ–¹é¢çš„çŸ¥è¯†ã€‚</p>
<h3 id="éé€’å½’å…ˆåºéå†"><a href="#éé€’å½’å…ˆåºéå†" class="headerlink" title="éé€’å½’å…ˆåºéå†"></a>éé€’å½’å…ˆåºéå†</h3><h4 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><ul>
<li>é¦–å…ˆå°†æ ¹èŠ‚ç‚¹å…¥æ ˆ</li>
<li>ç„¶åå¾ªç¯åˆ¤æ–­æ ˆä¸ä¸ºç©º</li>
<li>åˆ™å¼¹å‡ºæ ˆé¡¶å…ƒç´ </li>
<li>å¦‚æœå¼¹å‡ºå…ƒç´ çš„å³å­æ ‘ä¸ä¸ºç©ºåˆ™å…¥æ ˆ</li>
<li>å¦‚æœå¼¹å‡ºå…ƒç´ çš„å·¦å­æ ‘ä¸ä¸ºç©ºåˆ™å…¥æ ˆ</li>
<li>ç»§ç»­å¾ªç¯</li>
</ul>
<p>è§£æï¼šç”±äºå…ˆåºéå†ä¸º[æ ¹-å·¦-å³]ï¼Œæ‰€ä»¥æ ¹èŠ‚ç‚¹åº”è¯¥å…ˆå…¥æ ˆï¼Œç„¶åå‡ºæ ˆçš„åŒæ—¶ä¾æ¬¡å…¥æ ˆå³-å·¦å­æ ‘å³å¯ã€‚</p>
<h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">frontPrintByLoop</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (root != <span class="keyword">null</span>) &#123;</span><br><span class="line">        Stack&lt;TreeNode&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        stack.push(root);</span><br><span class="line">        <span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">            TreeNode node = stack.pop();</span><br><span class="line">            System.out.print(node.val + <span class="string">" | "</span>);</span><br><span class="line">            <span class="keyword">if</span> (node.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">                stack.push(node.right);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (node.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">                stack.push(node.left);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="éé€’å½’ä¸­åºéå†"><a href="#éé€’å½’ä¸­åºéå†" class="headerlink" title="éé€’å½’ä¸­åºéå†"></a>éé€’å½’ä¸­åºéå†</h3><h4 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><ul>
<li>é¦–å…ˆå°†æ ¹èŠ‚ç‚¹å…¥æ ˆ</li>
<li>å¾ªç¯åˆ¤æ–­æ ¹èŠ‚ç‚¹æ˜¯å¦æœ‰å·¦å­æ ‘ï¼Œæœ‰åˆ™å…¥æ ˆç»§ç»­å¾ªç¯ï¼Œå¦åˆ™å¾ªç¯ç»“æŸ</li>
<li>ç„¶åå¾ªç¯åˆ¤æ–­æ ˆä¸ä¸ºç©º</li>
<li>åˆ™å¼¹å‡ºæ ˆé¡¶å…ƒç´ </li>
<li>å¦‚æœæ ˆé¡¶å…ƒç´ å³å­æ ‘ä¸ä¸ºç©º</li>
<li>åˆ™å¾ªç¯å…¥æ ˆå³å­æ ‘åŠå…¶å³å­æ ‘çš„å·¦å­æ ‘</li>
<li>ç»§ç»­å¾ªç¯</li>
</ul>
<p>è§£æï¼šå› ä¸ºä¸­åºéå†ä¸º[å·¦-æ ¹-åˆ]ï¼Œæ‰€ä»¥æ ‘çš„å·¦å­æ ‘åº”è¯¥å…ˆå…¥æ ˆï¼Œå¾ªç¯å…¥æ ˆå·¦å­æ ‘ä¹‹åå¾ªç¯å‡ºæ ˆï¼Œå‡ºæ ˆçš„åŒæ—¶åˆ¤æ–­å‡ºæ ˆå…ƒç´ æ˜¯å¦æœ‰å³å­æ ‘ï¼Œå¦‚æœå³å­æ ‘ä¸ä¸ºç©ºåˆ™å¯¹å³å­æ ‘æ‰§è¡Œç›¸åŒçš„æ“ä½œï¼Œå³å…¥æ ˆå³å­æ ‘çš„å·¦å­æ ‘ã€‚</p>
<h4 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">midPrintByLoop</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (root != <span class="keyword">null</span>) &#123;</span><br><span class="line">        Stack&lt;TreeNode&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        TreeNode node = root;</span><br><span class="line">        stack.push(node);</span><br><span class="line">        <span class="keyword">while</span> (node.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">            stack.push(node.left);</span><br><span class="line">            node = node.left;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">            node = stack.pop();</span><br><span class="line">            TreeNode n = node.right;</span><br><span class="line">            <span class="keyword">while</span> (n != <span class="keyword">null</span>) &#123;</span><br><span class="line">                stack.push(n);</span><br><span class="line">                n = n.left;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.print(node.val + <span class="string">" | "</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="éé€’å½’ååºéå†"><a href="#éé€’å½’ååºéå†" class="headerlink" title="éé€’å½’ååºéå†"></a>éé€’å½’ååºéå†</h3><h4 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯ 1"></a>æ€è·¯ 1</h4><ul>
<li>é€†å‘æ€è€ƒå…ˆåºéå†ï¼Œå› ä¸ºååºéå†ä¸º[æ ¹-å·¦-å³]ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥ç±»ä¼¼å…ˆåºéå†çš„æ–¹å¼å…ˆå°†[å³-å·¦-æ ¹]çš„é¡ºåºæ‰¾å‡ºæ¥å­˜å…¥å¦ä¸€ä¸ªæ ˆï¼Œç„¶åå†ä¾æ¬¡å‡ºæ ˆè¯¥æ ˆå…ƒç´ å³å¯</li>
</ul>
<h4 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç  1"></a>ä»£ç  1</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">lastPrintByOtherStack</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (root != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">final</span> Stack&lt;TreeNode&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        <span class="keyword">final</span> Stack&lt;TreeNode&gt; stackReverse = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        stack.push(root);</span><br><span class="line">        <span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">            TreeNode node = stack.pop();</span><br><span class="line">            <span class="keyword">if</span> (node != <span class="keyword">null</span>) &#123;</span><br><span class="line">                stackReverse.push(node);</span><br><span class="line">                <span class="keyword">if</span> (node.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    stack.push(node.left);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (node.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    stack.push(node.right);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (!stackReverse.isEmpty()) &#123;</span><br><span class="line">            TreeNode node = stackReverse.pop();</span><br><span class="line">            System.out.print(node.val + <span class="string">" | "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="headerlink" title="æ€è·¯ 2"></a>æ€è·¯ 2</h4><ul>
<li>åªä½¿ç”¨ä¸€ä¸ªæ ˆ</li>
<li>å…ˆå°†æ ¹èŠ‚ç‚¹å…¥æ ˆ</li>
<li>è®¾ç½®ä¸€ä¸ªæ ‡è¯†å¼•ç”¨ hé¦–å…ˆæŒ‡å‘root</li>
<li>å¾ªç¯åˆ¤æ–­æ ˆéç©º</li>
<li>åœ¨å¾ªç¯ä¸­åˆ¤æ–­æ ˆé¡¶å…ƒç´ node</li>
<li>å¦‚æœnodeå·¦å­æ ‘ä¸ä¸ºç©ºå¹¶ä¸”å·¦å³å­æ ‘éƒ½ä¸ä¸ºhæŒ‡å‘çš„å…ƒç´ </li>
<li>å…¥æ ˆå·¦å­æ ‘</li>
<li>å¦åˆ™å†åˆ¤æ–­å³å­æ ‘æ˜¯å¦ä¸ºç©ºä»¥åŠå³å­æ ‘æ˜¯å¦ä¸ºhèŠ‚ç‚¹</li>
<li>å…¥æ ˆå³å­æ ‘</li>
<li>å¦åˆ™ï¼Œå¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œå¹¶ä¸”å°†hæŒ‡å‘è¯¥å¼¹å‡ºçš„æ ˆé¡¶å…ƒç´ </li>
</ul>
<h4 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç  2"></a>ä»£ç  2</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">lastPrintByOneStack</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> != root) &#123;</span><br><span class="line">        TreeNode h = root;</span><br><span class="line">        Stack&lt;TreeNode&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        stack.push(h);</span><br><span class="line">        <span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">            TreeNode node = stack.peek();</span><br><span class="line">            <span class="keyword">if</span> (node.left != <span class="keyword">null</span> &amp;&amp; node.left != h &amp;&amp; node.right != h) &#123;</span><br><span class="line">                stack.push(node.left);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">null</span> != node.right &amp;&amp; node.right != h) &#123;</span><br><span class="line">                stack.push(node.right);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                node = stack.pop();</span><br><span class="line">                System.out.print(node.val + <span class="string">" | "</span>);</span><br><span class="line">                h = node;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è§£æï¼šä½¿ç”¨ä¸€ä¸ªæ ˆè¿›è¡Œååºéå†çš„æ—¶å€™éœ€è¦ä½¿ç”¨ä¸€ä¸ªhå¼•ç”¨æ¥æ ‡è¯†ä¸Šä¸€ä¸ªèŠ‚ç‚¹æ˜¯å¦è¢«éå†è¿‡ï¼Œæ˜¯çš„è¯å°±å¾€ä¸Šåˆ¤æ–­ä¹‹åçš„æ ‘èŠ‚ç‚¹å³å¯ã€‚</p>
<h3 id="æŒ‰å±‚éå†äºŒå‰æ ‘"><a href="#æŒ‰å±‚éå†äºŒå‰æ ‘" class="headerlink" title="æŒ‰å±‚éå†äºŒå‰æ ‘"></a>æŒ‰å±‚éå†äºŒå‰æ ‘</h3><h4 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><p>ä»¥ä¸Šå‰ä¸­ååºéå†äºŒå‰æ ‘éƒ½æ˜¯ç”¨åˆ°äº†æ ˆè¿™ç§æ•°æ®ç»“æ„ï¼Œè€ŒæŒ‰å±‚éå†äºŒå‰æ ‘å°±éå¸¸ç®€å•äº†ï¼Œåªéœ€è¦å¼•å…¥å…ˆå…¥å…ˆå‡ºçš„é˜Ÿåˆ—ï¼Œç„¶åä¾æ¬¡åœ¨å‡ºé˜Ÿçš„æ—¶å€™å°†å‡ºé˜Ÿå…ƒç´ çš„å·¦å³å­æ ‘å…¥é˜Ÿå³å¯ã€‚</p>
<ul>
<li>æ ¹èŠ‚ç‚¹å…¥é˜Ÿ</li>
<li>é˜Ÿåˆ—ä¸ä¸ºç©ºåˆ™å¼€å§‹å¾ªç¯</li>
<li>å¦‚æœé˜Ÿé¦–å…ƒç´ å·¦å­æ ‘ä¸ä¸ºç©ºï¼Œå°±å…¥é˜Ÿ</li>
<li>å³å­æ ‘ä¸ä¸ºç©ºï¼Œä¹Ÿå…¥é˜Ÿ</li>
<li>é˜Ÿé¦–å…ƒç´ å‡ºé˜Ÿè¾“å‡º</li>
</ul>
<h4 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">levelPrintOutTree</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> != root) &#123;</span><br><span class="line">        LinkedList&lt;TreeNode&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        queue.add(root);</span><br><span class="line">        TreeNode i = root;</span><br><span class="line">        <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">                queue.add(i.left);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (i.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">                queue.add(i.right);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.print(i.val + <span class="string">" | "</span>);</span><br><span class="line">            queue.poll();</span><br><span class="line">            i = queue.peek();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>æ•°æ®ç»“æ„ä¸ç®—æ³•</category>
        <category>äºŒå‰æ ‘</category>
      </categories>
      <tags>
        <tag>æ•°æ®ç»“æ„ä¸ç®—æ³•</tag>
        <tag>äºŒå‰æ ‘</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±åº¦åˆ†æå¦‚ä½•å†™å‡ºä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å•ä¾‹</title>
    <url>/blog/20190607/%E6%B7%B1%E5%BA%A6%E5%88%86%E6%9E%90%E5%A6%82%E4%BD%95%E5%86%99%E5%87%BA%E4%B8%80%E4%B8%AA%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E5%8D%95%E4%BE%8B/</url>
    <content><![CDATA[<p><img src="/blog/20190607/æ·±åº¦åˆ†æå¦‚ä½•å†™å‡ºä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å•ä¾‹/fm.png" alt="å°é¢"></p>
<a id="more"></a>
<h3 id="ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼ï¼Ÿ</h3><p>å•ä¾‹æ¨¡å¼æ˜¯åœ¨Javaç¼–ç¨‹ä¸­é™¤äº†å·¥å‚æ¨¡å¼ä¹‹å¤–æœ€å¸¸ç”¨çš„åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚å•ä¾‹æ¨¡å¼æä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æ–¹å¼ï¼Œä½¿å¾—æ¯æ¬¡è·å–åˆ°çš„è¯¥ç±»çš„å®ä¾‹éƒ½æ˜¯åŒä¸€ä¸ªã€‚å³æ‰€è°“çš„æä¾›äº†è®¿é—®è¯¥ç±»å®ä¾‹çš„å”¯ä¸€é€”å¾„ã€‚</p>
<p><strong>å•ä¾‹æ¨¡å¼åœ¨åˆ›å»ºæ—¶çš„æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<ul>
<li>å› ä¸ºæ¯ä¸ªç±»åªèƒ½åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œæ‰€ä»¥éœ€è¦å°†å…¶æ„é€ æ–¹æ³•å°é—­èµ·æ¥ä¸èƒ½è¢«å¤–éƒ¨è°ƒç”¨ï¼Œå³ç§æœ‰åŒ–ï¼›</li>
<li>éœ€è¦æä¾›ä¸€ä¸ªè·å–ç±»å®ä¾‹çš„å…¬æœ‰æ–¹æ³•ï¼Œæ‰€æœ‰ä½¿ç”¨è¯¥ç±»å®ä¾‹çš„äººéƒ½é€šè¿‡è¿™ä¸ªæ–¹æ³•æ‹¿åˆ°å•ä¾‹å¯¹è±¡ï¼›</li>
<li>åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹éœ€è¦æ³¨æ„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œé¿å…å¤šä¸ªçº¿ç¨‹åŒæ—¶åˆ›å»ºå‡ºå¤šä¸ªä¸åŒçš„å®ä¾‹ï¼Œè¿èƒŒäº†å•ä¾‹çš„åŸåˆ™ã€‚</li>
</ul>
<h3 id="åˆ›å»ºå•ä¾‹æ¨¡å¼çš„æ–¹æ³•åŠå…¶ä¼˜ç¼ºç‚¹"><a href="#åˆ›å»ºå•ä¾‹æ¨¡å¼çš„æ–¹æ³•åŠå…¶ä¼˜ç¼ºç‚¹" class="headerlink" title="åˆ›å»ºå•ä¾‹æ¨¡å¼çš„æ–¹æ³•åŠå…¶ä¼˜ç¼ºç‚¹"></a>åˆ›å»ºå•ä¾‹æ¨¡å¼çš„æ–¹æ³•åŠå…¶ä¼˜ç¼ºç‚¹</h3><h4 id="é¥¿æ±‰å‹"><a href="#é¥¿æ±‰å‹" class="headerlink" title="é¥¿æ±‰å‹"></a>é¥¿æ±‰å‹</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HungrySingleton</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> HungrySingleton INSTANCE = <span class="keyword">new</span> HungrySingleton();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç§æœ‰æ„é€ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">HungrySingleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ç±»åœ¨åŠ è½½çš„æ—¶å€™å°±åˆ›å»ºå¥½çš„å®ä¾‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> HungrySingleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>åˆ†æï¼šé¥¿æ±‰å‹å•ä¾‹æ˜¯æœ€ç®€å•çš„å•ä¾‹åˆ›å»ºæ–¹æ³•ï¼Œåœ¨ç±»ä¸­ç»´æŠ¤ä¸€ä¸ªè¯¥ç±»ç§æœ‰ä¸å¯å˜çš„å®ä¾‹ï¼Œç„¶åæä¾›ä¸€ä¸ªè·å–è¯¥å®ä¾‹çš„é™æ€æ–¹æ³•å³å¯ã€‚</li>
<li>ä¼˜ç‚¹ï¼šä»£ç ç¼–å†™ç®€å•ï¼Œçº¿ç¨‹å®‰å…¨ï¼ˆä½¿ç”¨ç±»åŠ è½½æœºåˆ¶ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œclassloaderåœ¨åŠ è½½ç±»çš„æ—¶å€™ä½¿ç”¨synchronizedåŒæ­¥ï¼‰</li>
<li>ç¼ºç‚¹ï¼šæ— æ³•å®ç°æ‡’åŠ è½½ï¼Œåœ¨ä½¿ç”¨è¾ƒå°‘çš„æ—¶å€™æµªè´¹èµ„æºï¼Œæ— æ³•é˜²æ­¢åå°„ç ´åä»¥åŠååºåˆ—åŒ–ç ´åå•ä¾‹å”¯ä¸€æ€§</li>
</ul>
<h4 id="æ™®é€šæ‡’æ±‰å‹"><a href="#æ™®é€šæ‡’æ±‰å‹" class="headerlink" title="æ™®é€šæ‡’æ±‰å‹"></a>æ™®é€šæ‡’æ±‰å‹</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LazySingleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> LazySingleton INSTANCE ;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">LazySingleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LazySingleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">null</span> == INSTANCE)&#123;</span><br><span class="line">            INSTANCE = <span class="keyword">new</span> LazySingleton();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>åˆ†æï¼šè¿™ç§æ‡’æ±‰å‹å•ä¾‹ä¹Ÿæ˜¯ä¸€ç§æ¯”è¾ƒç®€å•çš„å•ä¾‹å®ç°æ–¹å¼ï¼Œä¸ç¬¬ä¸€ç§ä¸åŒåœ¨äºè¿™ç§å®ä¾‹æ˜¯åœ¨è°ƒç”¨è·å–å®ä¾‹çš„é™æ€æ–¹æ³•çš„æ—¶å€™æ‰åˆ›å»º</li>
<li>ä¼˜ç‚¹ï¼šä»£ç ç®€å•ï¼Œå¯ä»¥å®ç°æ‡’åŠ è½½</li>
<li>ç¼ºç‚¹ï¼šå¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶èµ°åˆ°ç¬¬8è¡Œä»£ç ï¼Œåˆ¤æ–­å®ä¾‹æœªåˆ›å»ºï¼Œåˆ™ä¼šåˆ›å»ºå‡ºå¤šä¸ªå®ä¾‹;æ— æ³•é˜²æ­¢åå°„ç ´åä»¥åŠååºåˆ—åŒ–ç ´å</li>
</ul>
<p><em>é‚£ä¹ˆä¸ºäº†å®ç°çº¿ç¨‹å®‰å…¨æˆ‘ä»¬å¯ä»¥åœ¨æ–¹æ³•ä¸ŠåŠ ä¸ŠåŒæ­¥å…³é”®å­—ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼çš„ç¼ºç‚¹å°±æ˜¯å¤šçº¿ç¨‹ç¯å¢ƒè°ƒç”¨è¯¥æ–¹æ³•éƒ½ä¼šé˜»å¡ï¼Œå¯¼è‡´æ€§èƒ½å­˜åœ¨ä¸å¿…è¦çš„æµªè´¹</em><br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">static</span> LazySingleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(<span class="keyword">null</span> == INSTANCE)&#123;</span><br><span class="line">		INSTANCE = <span class="keyword">new</span> LazySingleton();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> INSTANCE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="åŒé‡æ£€æµ‹é”å®ç°æ‡’åŠ è½½å•ä¾‹"><a href="#åŒé‡æ£€æµ‹é”å®ç°æ‡’åŠ è½½å•ä¾‹" class="headerlink" title="åŒé‡æ£€æµ‹é”å®ç°æ‡’åŠ è½½å•ä¾‹"></a>åŒé‡æ£€æµ‹é”å®ç°æ‡’åŠ è½½å•ä¾‹</h4><p>ä¸Šè¿°æ‡’æ±‰å‹åŒæ­¥æœºåˆ¶å¯ä»¥æ”¹è¿›å¦‚ä¸‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DoubleLockSingleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">DoubleLockSingleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DoubleLockSingleton INSTANCE;</span><br><span class="line">	</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DoubleLockSingleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">// è¿›å…¥æ–¹æ³•åå…ˆåˆ¤æ–­ä¸€æ¬¡ å¤§å¹…å‡å°‘å¤šçº¿ç¨‹ç¯å¢ƒåŒæ­¥é˜»å¡é—®é¢˜ </span></span><br><span class="line">	<span class="comment">// ä½†æ˜¯è¿™ç§æ–¹å¼åœ¨å¤šçº¿ç¨‹ç¬¬ä¸€æ¬¡è°ƒç”¨åˆ›å»ºå®ä¾‹çš„æ—¶å€™ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == INSTANCE) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (DoubleLockSingleton<span class="class">.<span class="keyword">class</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">null</span> == INSTANCE) &#123;</span><br><span class="line">		<span class="comment">// é—®é¢˜çš„æ ¹æºæ‰€åœ¨</span></span><br><span class="line">		<span class="comment">// æ­¤å¤„å¯èƒ½ä¼šå‡ºç°æŒ‡ä»¤é‡æ’åº </span></span><br><span class="line">		<span class="comment">// newå¯¹è±¡å¹¶ä¸æ˜¯åŸå­æ“ä½œ</span></span><br><span class="line">		INSTANCE = <span class="keyword">new</span> DoubleLockSingleton();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>åˆ†æï¼šåŒé‡æ£€æµ‹é”æœºåˆ¶åœ¨è¿›å…¥<code>getInstance()</code>æ–¹æ³•çš„æ—¶å€™ä¼šåˆ¤æ–­å®ä¾‹æ˜¯å¦è¢«åˆ›å»ºï¼Œå¦‚æœè¢«åˆ›å»ºï¼Œé‚£ä¹ˆç›´æ¥è¿”å›ï¼Œå¦‚æœæ²¡æœ‰ï¼Œè¿›å…¥åŒæ­¥ä»£ç å—ï¼Œåˆ›å»ºå®ä¾‹ã€‚è¿™ä¸ªæ–¹æ³•è²Œä¼¼æ²¡æœ‰é—®é¢˜ï¼Œè€Œä¸”è¿˜å¤§å¤§å‡å°‘çº¿ç¨‹è¿›å…¥åŒæ­¥ä»£ç å—é˜»å¡çš„æƒ…å†µï¼ˆå› ä¸ºåªæœ‰ç¬¬ä¸€æ¬¡åˆ¤æ–­å¯¹è±¡è¿˜æ²¡æœ‰åˆ›å»ºçš„æ—¶å€™æ‰ä¼šæœ‰çº¿ç¨‹è¿›å…¥åŒæ­¥ä»£ç å—ï¼‰ã€‚ä½†æ˜¯è¿™ç§æ–¹æ³•ä»ç„¶å­˜åœ¨çº¿ç¨‹å®‰å…¨æ€§é—®é¢˜ã€‚<font color="#db1414">é—®é¢˜å‡ºåœ¨ç¬¬17è¡Œï¼š<code>INSTANCE = new DoubleLockSingleton();</code>ç”±äºJVMè™šæ‹Ÿæœºå†…éƒ¨ä¼šå¯¹ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œåœ¨ä½¿ç”¨newåˆ›å»ºå¯¹è±¡çš„æ—¶å€™å¹¶ä¸æ˜¯ä¸€ä¸ªåŸå­æ“ä½œä¸”ä¼šè¢«è™šæ‹Ÿæœºè¿›è¡ŒæŒ‡ä»¤é‡æ’åºã€‚è¿™ä¸ªæ­¥éª¤ä¼šè¢«åˆ†æˆä¸‰æ­¥ï¼š<strong>1ã€åœ¨å †ä¸Šä¸ºå¯¹è±¡åˆ†é…ç©ºé—´ï¼›2ã€å¯¹è±¡è¿›è¡Œåˆå§‹åŒ–ï¼›3ã€å°†å¼•ç”¨æŒ‡å‘è¯¥å †ä¸Šçš„åœ°å€ã€‚ </strong>ç”±äºåœ¨è™šæ‹Ÿæœºä¸­ï¼ŒæŒ‡ä»¤é‡æ’åºä¼˜åŒ–å¯¼è‡´ç¬¬2æ­¥å’Œç¬¬3æ­¥çš„æ‰§è¡Œé¡ºåºå¯ä»¥è¢«æ‰“ä¹±ï¼Œé‚£ä¹ˆåœ¨ä»£ç æ‰§è¡Œåˆ°ç¬¬11è¡Œçš„æ—¶å€™å‘ç°ï¼ŒINSTANCEä¸ä¸ºnullï¼Œç›´æ¥è¿”å›ä¸€ä¸ªæœªåˆå§‹åŒ–å®Œæˆçš„å¯¹è±¡ï¼Œå¯¼è‡´ç¨‹åºå´©æºƒã€‚</font><strong>æ³¨æ„ï¼šsynchronzedå…³é”®å­—æ²¡æœ‰å±è”½æŒ‡ä»¤é‡æ’åºçš„åŠŸèƒ½</strong>ï¼Œé‚£ä¹ˆå¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä½¿ç”¨<code>volatile</code>å…³é”®å­—ä¿®é¥°å®ä¾‹å˜é‡å¼•ç”¨ï¼Œå³<code>private volatile static TripleLockSingleton INSTANCE;</code>ã€‚<code>volatile</code>å…³é”®å­—æ‰æœ‰å±è”½æŒ‡ä»¤é‡æ’åºçš„è¯­ä¹‰ã€‚</li>
<li>ä¼˜ç‚¹ï¼šå¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¤§éƒ¨åˆ†æ—¶é—´çº¿ç¨‹å®‰å…¨</li>
<li>ç¼ºç‚¹ï¼šæœ‰å¯èƒ½ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼›ä¸èƒ½é¿å…åå°„å’Œååºåˆ—åŒ–ç ´å</li>
<li>ä¼˜åŒ–ï¼š<code>private volatile static TripleLockSingleton INSTANCE;</code></li>
</ul>
<h4 id="é™æ€å†…éƒ¨ç±»å•ä¾‹"><a href="#é™æ€å†…éƒ¨ç±»å•ä¾‹" class="headerlink" title="é™æ€å†…éƒ¨ç±»å•ä¾‹"></a>é™æ€å†…éƒ¨ç±»å•ä¾‹</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticInnerClassSingleton</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">StaticInnerClassSingleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonHolder</span> </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> StaticInnerClassSingleton INSTANCE = <span class="keyword">new</span> StaticInnerClassSingleton();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> StaticInnerClassSingleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> SingletonHolder.INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>åˆ†æï¼šé™æ€å†…éƒ¨ç±»å®ç°å•ä¾‹ä¹Ÿæ˜¯å€ŸåŠ©äº†ç±»åŠ è½½çš„çº¿ç¨‹å®‰å…¨æœºåˆ¶ï¼Œå¹¶åŒæ—¶åŸºäºå†…éƒ¨ç±»çš„ä½¿ç”¨æ—¶å†åˆ›å»ºçš„æ‡’åŠ è½½æœºåˆ¶å®ç°çº¿ç¨‹å®‰å…¨çš„æ‡’åŠ è½½æ¨¡å¼çš„å•ä¾‹</li>
<li>ä¼˜ç‚¹ï¼šçº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥å®ç°æ‡’åŠ è½½</li>
<li>ç¼ºç‚¹ï¼šæ— æ³•é˜²æ­¢è¢«åå°„ä»¥åŠååºåˆ—åŒ–ç ´åå•ä¾‹çš„å”¯ä¸€æ€§</li>
</ul>
<h4 id="æšä¸¾ç±»å•ä¾‹"><a href="#æšä¸¾ç±»å•ä¾‹" class="headerlink" title="æšä¸¾ç±»å•ä¾‹"></a>æšä¸¾ç±»å•ä¾‹</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> EnumSingleton &#123;</span><br><span class="line"></span><br><span class="line">    INSTANCE;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> EnumSingleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>åˆ†æï¼š<strong>Joshua Bloch</strong>å¤§ç¥è¯´è¿‡ï¼šâ€œå•å…ƒç´ çš„æšä¸¾ç±»å‹å·²ç»æˆä¸ºå®ç°Singletonçš„æœ€ä½³æ–¹æ³•â€ã€‚è¶³ä»¥è§è¯æšä¸¾ç±»åœ¨åˆ›å»ºå•ä¾‹ä¸­çš„ä¼˜åŠ¿ã€‚</li>
<li>ä¼˜ç‚¹ï¼šä»£ç ç®€å•ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥é˜²æ­¢åå°„å’Œååºåˆ—åŒ–ç ´å</li>
<li>ç¼ºç‚¹ï¼šæš‚æ— </li>
</ul>
<h4 id="CASåˆ›å»ºå•ä¾‹"><a href="#CASåˆ›å»ºå•ä¾‹" class="headerlink" title="CASåˆ›å»ºå•ä¾‹"></a>CASåˆ›å»ºå•ä¾‹</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CASSingleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> AtomicReference&lt;CASSingleton&gt; INSTANCE = <span class="keyword">new</span> AtomicReference&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">CASSingleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨åŸå­æ“ä½œ å®ç°è·å–å”¯ä¸€å®ä¾‹</span></span><br><span class="line"><span class="comment">     * ç†è®ºä¸Šåœ¨å¤§é‡ç«äº‰çš„ç¯å¢ƒä¸­ åŸå­æ“ä½œè‡ªæ—‹ç­‰å¾…æ¶ˆè€—å¤§é‡æ€§èƒ½ ä½†æ˜¯å®é™…ä¸Šå½“ä¸€ä¸ªçº¿ç¨‹åˆ›å»ºå¥½å®ä¾‹ä¹‹åå…¶ä½™çº¿ç¨‹ä¸ä¼šå‡ºç°æ­»å¾ªç¯</span></span><br><span class="line"><span class="comment">     * ç›¸å¯¹äºé”å®ƒæ²¡æœ‰çº¿ç¨‹åˆ‡æ¢å’Œé˜»å¡çš„é¢å¤–æ¶ˆè€—,å¯ä»¥æ”¯æŒè¾ƒå¤§çš„å¹¶è¡Œåº¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> CASSingleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (; ; ) &#123;</span><br><span class="line">            CASSingleton instance = INSTANCE.get();</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">null</span> != instance) &#123;</span><br><span class="line">                <span class="keyword">return</span> instance;</span><br><span class="line">            &#125;</span><br><span class="line">            instance = <span class="keyword">new</span> CASSingleton();</span><br><span class="line">            <span class="keyword">if</span> (INSTANCE.compareAndSet(<span class="keyword">null</span>, instance)) &#123;</span><br><span class="line">                <span class="keyword">return</span> instance;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>åˆ†æï¼šä½¿ç”¨åŸå­æ“ä½œ<code>AtomicReference</code>è¿›è¡Œå•ä¾‹çš„åˆ›å»ºï¼Œäº‹å®ä¸Šç›®å‰ç›¸å¯¹äºåŒé‡æ£€æŸ¥é”æ€§èƒ½ä¸Šå·®çš„ä¹Ÿä¸æ˜¯ä¹Ÿåˆ«å¤§</li>
<li>ä¼˜ç‚¹ï¼šçº¿ç¨‹å®‰å…¨ï¼Œæ‡’åŠ è½½ï¼Œç›¸å¯¹äºé”å®ƒæ²¡æœ‰çº¿ç¨‹åˆ‡æ¢å’Œé˜»å¡çš„é¢å¤–æ¶ˆè€—,å¯ä»¥æ”¯æŒè¾ƒå¤§çš„å¹¶è¡Œåº¦</li>
<li>ç¼ºç‚¹ï¼šä»£ç ç¼–å†™ç›¸å¯¹å¤æ‚ï¼Œä¸èƒ½é˜²æ­¢è¢«åå°„å’Œååºåˆ—åŒ–ç ´å</li>
</ul>
<h3 id="é˜²æ­¢åå°„å’Œååºåˆ—åŒ–ç ´åå•ä¾‹çš„æ–¹å¼"><a href="#é˜²æ­¢åå°„å’Œååºåˆ—åŒ–ç ´åå•ä¾‹çš„æ–¹å¼" class="headerlink" title="é˜²æ­¢åå°„å’Œååºåˆ—åŒ–ç ´åå•ä¾‹çš„æ–¹å¼"></a>é˜²æ­¢åå°„å’Œååºåˆ—åŒ–ç ´åå•ä¾‹çš„æ–¹å¼</h3><p>ä¸Šè¿°å‡ ä¸ªåˆ›å»ºå•ä¾‹çš„æ–¹å¼ä¸­ï¼Œé™¤äº†ä½¿ç”¨æšä¸¾ç±»åˆ›å»ºå•ä¾‹ï¼Œéƒ½ä¼šäº§ç”Ÿè¢«åå°„å’Œååºåˆ—åŒ–ç ´åçš„æƒ…å†µï¼Œé¿å…è¯¥é—®é¢˜çš„æ–¹å¼å¦‚ä¸‹ï¼Œå¤§å®¶éœ€è¦æ·±ç©¶çš„è¯å¯ä»¥æ‰“å¼€æœç´¢å¼•æ“â€¦ è¿™é‡Œä¸å†å±•å¼€äº†~</p>
<h4 id="æšä¸¾ç±»é˜²æ­¢åå°„å’Œååºåˆ—åŒ–ç ´å"><a href="#æšä¸¾ç±»é˜²æ­¢åå°„å’Œååºåˆ—åŒ–ç ´å" class="headerlink" title="æšä¸¾ç±»é˜²æ­¢åå°„å’Œååºåˆ—åŒ–ç ´å"></a>æšä¸¾ç±»é˜²æ­¢åå°„å’Œååºåˆ—åŒ–ç ´å</h4><blockquote>
<p><strong> å‚è€ƒæ–‡ç« ï¼š<a href="https://www.cnblogs.com/chiclee/p/9097772.html" target="_blank" rel="noopener">https://www.cnblogs.com/chiclee/p/9097772.html</a> </strong></p>
</blockquote>
<h4 id="é˜²æ­¢åå°„ç ´å"><a href="#é˜²æ­¢åå°„ç ´å" class="headerlink" title="é˜²æ­¢åå°„ç ´å"></a>é˜²æ­¢åå°„ç ´å</h4><p>å› ä¸ºåå°„æ˜¯é€šè¿‡classå¯¹è±¡æ¥è°ƒç”¨ç±»çš„æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡çš„ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æ„é€ æ–¹æ³•ä¸­è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœå®ä¾‹å·²ç»å­˜åœ¨ï¼Œå°±æŠ›å‡ºå¼‚å¸¸ã€‚<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç§æœ‰æ„é€ </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(INSTANCE != <span class="keyword">null</span>)&#123;</span><br><span class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="é˜²æ­¢ååºåˆ—åŒ–ç ´å"><a href="#é˜²æ­¢ååºåˆ—åŒ–ç ´å" class="headerlink" title="é˜²æ­¢ååºåˆ—åŒ–ç ´å"></a>é˜²æ­¢ååºåˆ—åŒ–ç ´å</h4><p>åœ¨ååºåˆ—åŒ–çš„æ—¶å€™<code>ObjectInputStream.readObject()</code>ä¸­ä¼šå»åˆ¤æ–­æ˜¯å¦å­˜åœ¨<code>readResolve()</code>æ–¹æ³•ï¼Œå¦‚æœå­˜åœ¨çš„è¯ä¼šè°ƒç”¨è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå®ä¾‹ï¼Œæ‰€ä»¥åœ¨å•ä¾‹ç±»ä¸­ç¼–å†™<code>readResolve()</code>æ–¹æ³•è¿”å›<code>INSTANCE</code>å³å¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åœ¨ååºåˆ—åŒ–æ—¶ï¼Œç›´æ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè¿”å›æŒ‡å®šçš„å¯¹è±¡ï¼Œæ— éœ€å†æ–°å»ºä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> Object <span class="title">readResolve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> INSTANCE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>JavaåŸºç¡€</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>JavaåŸºç¡€</tag>
        <tag>å¹¶å‘ç¼–ç¨‹</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>å•ä¾‹æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>å¹¶å‘ç¼–ç¨‹å­¦ä¹ (ä¸‰)ï¼šCountDownLatchçš„å®ç°åŸç†åŠä½¿ç”¨</title>
    <url>/blog/20190602/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0-%E4%B8%89-%EF%BC%9ACountDownLatch%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E5%8F%8A%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<p><img src="/blog/20190602/å¹¶å‘ç¼–ç¨‹å­¦ä¹ -ä¸‰-ï¼šCountDownLatchçš„å®ç°åŸç†åŠä½¿ç”¨/cdl.png" alt="ä»€ä¹ˆæ˜¯CountDownLatchï¼Ÿ"></p>
<a id="more"></a>
<h3 id="ä»€ä¹ˆæ˜¯CountDownLatchï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯CountDownLatchï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯CountDownLatchï¼Ÿ"></a>ä»€ä¹ˆæ˜¯<code>CountDownLatch</code>ï¼Ÿ</h3><p>  åœ¨æœ¬ç¯‡åšå®¢çš„å°é¢ï¼Œæˆ‘æ”¾äº†ä¸€ä¸ªæˆªå›¾ï¼Œä¸Šé¢å¯¹äº<code>CountDownLatch</code>çš„ç¿»è¯‘æ˜¯è¿™æ ·çš„ï¼š<em>é—­é”ï¼Œå€’è®¡æ—¶é—¨é—©</em>ã€‚å…¶å®é¡¾åæ€ä¹‰ï¼Œ<code>CountDownLatch</code>å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼š<strong>è®¡æ•°-è®¡æ•°å®Œæˆååšä¸€äº›äº‹</strong>ã€‚å…¶å®è¿™ä¸ªä¸œè¥¿å¯ä»¥ç±»æ¯”ä¸ºä¸€ä¸ªæ°´åï¼šå½“æ°´è¿˜æ²¡æœ‰è£…æ»¡æ°´åº“çš„æ—¶å€™æ°´åæ˜¯å…³é—­çš„ï¼Œå½“æ°´è£…æ»¡ä¹‹åå¼€é—¸æ”¾æ°´ï¼Œæ°´åº“ä¸­çš„æ°´â€ä¸€èµ·â€æ¶Œå‡ºæ°´åº“ã€‚</p>
<p>  æ‹¥æœ‰åŒæ ·åŠŸèƒ½çš„è¿˜æœ‰<code>CyclicBarrier</code>è¿™ä¸ªç±»ï¼Œä½†æ˜¯è¿™ä¸ªç±»ç›¸å¯¹è¾ƒå¤æ‚ï¼Œå¹¶ä¸”ç›¸å¯¹äº<code>CountDownLatch</code>è¿˜å¯ä»¥é‡å¤ä½¿ç”¨ï¼Œå®é™…ä¸Šå‰è€…ä¸€èˆ¬è¢«å«åšçº¿ç¨‹è®¡æ•°å™¨ï¼Œåè€…è¢«å«åšå¾ªç¯å±éšœï¼Œè¿˜æ˜¯æœ‰å¾ˆå¤§åŒºåˆ«çš„ã€‚è¿™ä¸ª <strong>åœ¨åé¢å†è¿›è¡Œæºç å­¦ä¹ </strong>ã€‚</p>
<h3 id="CountDownLatchæ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ"><a href="#CountDownLatchæ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ" class="headerlink" title="CountDownLatchæ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ"></a><code>CountDownLatch</code>æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</h3><p>  åŒ<code>ReentrantLock</code>ç±»ä¼¼ï¼Œå†…éƒ¨ä¹Ÿæ˜¯æœ‰ä¸€ä¸ªå®ç°äº†<code>AbstractQueueSynchronizer</code>çš„å†…éƒ¨ç±»ã€‚å†…éƒ¨ç±»åšäº†çˆ¶ç±»çš„å…±äº«å¼çš„æ˜¾ç¤ºé”çš„æ–¹æ³•å®ç°ï¼Œç»´æŠ¤ä¸€ä¸ªåˆå§‹ä¸ºNçš„çŠ¶æ€<code>state</code>ï¼Œæ¯æ¬¡æœ‰çº¿ç¨‹è°ƒç”¨ä¹‹åé˜»å¡ï¼Œç„¶å<code>state</code>å‡1ï¼Œç›´åˆ°å‡ä¸º0ä¹‹åæ‰€æœ‰é˜»å¡çš„çº¿ç¨‹é‡æ–°å¼€å§‹æ‰§è¡Œã€‚</p>
<h4 id="é¦–å…ˆæ˜¯å†…éƒ¨ç±»Syncçš„å®ç°"><a href="#é¦–å…ˆæ˜¯å†…éƒ¨ç±»Syncçš„å®ç°" class="headerlink" title="é¦–å…ˆæ˜¯å†…éƒ¨ç±»Syncçš„å®ç°"></a>é¦–å…ˆæ˜¯å†…éƒ¨ç±»Syncçš„å®ç°</h4><p>  æ„é€ å™¨æ¥æ”¶ä¸€ä¸ªintå‚æ•°åˆå§‹åŒ–stateçš„å€¼ã€‚<code>tryAcquireShared()</code>æ–¹æ³•ä¸ä¼šå¯¹stateåšæ”¹å˜ï¼Œå½“stateä¸ä¸º0çš„æ—¶å€™è¿”å›-1å³å¤±è´¥ï¼Œå½“stateç­‰äº0å…¶è¿”å›1ï¼Œè¡¨ç¤ºè®¡æ•°å™¨å·²ç»è®¡æ•°å®Œæˆï¼Œ<code>await()</code>æ–¹æ³•ä¸å†é˜»å¡ã€‚<code>tryReleaseShared()</code>æ–¹æ³•ä¼šä½¿ç”¨åŸå­æ“ä½œå½“<code>countDown()</code>è¢«è°ƒç”¨çš„æ—¶å€™é‡Šæ”¾ä¸€ä¸ªstateçš„å ç”¨ï¼Œå³state-1ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Sync</span> <span class="keyword">extends</span> <span class="title">AbstractQueuedSynchronizer</span> </span>&#123;</span><br><span class="line">      <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">4982264981922014374L</span>;</span><br><span class="line">      Sync(<span class="keyword">int</span> count) &#123;</span><br><span class="line">          setState(count);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="function"><span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">          <span class="keyword">return</span> getState();</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">tryAcquireShared</span><span class="params">(<span class="keyword">int</span> acquires)</span> </span>&#123;</span><br><span class="line">          <span class="keyword">return</span> (getState() == <span class="number">0</span>) ? <span class="number">1</span> : -<span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">tryReleaseShared</span><span class="params">(<span class="keyword">int</span> releases)</span> </span>&#123;</span><br><span class="line">          <span class="comment">// Decrement count; signal when transition to zero</span></span><br><span class="line">          <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">              <span class="keyword">int</span> c = getState();</span><br><span class="line">              <span class="keyword">if</span> (c == <span class="number">0</span>)</span><br><span class="line">                  <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">              <span class="keyword">int</span> nextc = c-<span class="number">1</span>;</span><br><span class="line">              <span class="keyword">if</span> (compareAndSetState(c, nextc))</span><br><span class="line">                  <span class="keyword">return</span> nextc == <span class="number">0</span>;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="CountDownLatchçš„countDownæ–¹æ³•"><a href="#CountDownLatchçš„countDownæ–¹æ³•" class="headerlink" title="CountDownLatchçš„countDownæ–¹æ³•"></a>CountDownLatchçš„countDownæ–¹æ³•</h4><p>  countDownæ–¹æ³•ä¸»è¦ä½œç”¨å°±æ˜¯ä½¿state-1</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">countDown</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    sync.releaseShared(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  AQSä¸­çš„<code>releaseShared()</code>æ–¹æ³•çš„å®ç°ï¼Œå¦‚æœé‡Šæ”¾æˆåŠŸæ‰§è¡Œ<code>doReleaseShared();</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">releaseShared</span><span class="params">(<span class="keyword">int</span> arg)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (tryReleaseShared(arg)) &#123;</span><br><span class="line">        doReleaseShared();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="CountDownLatchçš„awaitæ–¹æ³•"><a href="#CountDownLatchçš„awaitæ–¹æ³•" class="headerlink" title="CountDownLatchçš„awaitæ–¹æ³•"></a>CountDownLatchçš„awaitæ–¹æ³•</h4><p>  awaitæ–¹æ³•ä¼šç­‰å¾…å½“å‰stateå€¼æ˜¯å¦æ˜¯0ï¼Œå¦‚æœä¸æ˜¯çš„è¯å°±ä¸€ç›´é˜»å¡ã€‚ç›´åˆ°stateä¸º0ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">await</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    sync.acquireSharedInterruptibly(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">await</span><span class="params">(<span class="keyword">long</span> timeout, TimeUnit unit)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> sync.tryAcquireSharedNanos(<span class="number">1</span>, unit.toNanos(timeout));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  AQSä¸­çš„<code>acquireSharedInterruptibly()</code>æ–¹æ³•å®ç°å¦‚ä¸‹ï¼Œåœ¨AQSçš„å®ç°ä¸­ï¼Œåˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦ä¸­æ–­ï¼Œæ˜¯çš„è¯æŠ›å‡ºä¸­æ–­å¼‚å¸¸ï¼Œå¦åˆ™åˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦ç»§ç»­éœ€è¦é˜»å¡ï¼Œå³è°ƒç”¨<code>tryAcquireShared()</code>ã€‚æ˜¯çš„è¯è¿›å…¥<code>doAcquireSharedInterruptibly()</code>æ–¹æ³•ï¼Œä¸æ–­çš„åˆ¤æ–­<code>int r = tryAcquireShared(arg);</code>ï¼Œstateå¦‚æœä¸€ç›´ä¸ç­‰äº0ï¼Œrå°±ä¸€ç›´æ˜¯è´Ÿæ•°ï¼Œå°±ä¼šç»§ç»­è¿›å…¥å¾ªç¯ã€‚<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">acquireSharedInterruptibly</span><span class="params">(<span class="keyword">int</span> arg)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (Thread.interrupted())</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> InterruptedException();</span><br><span class="line">    <span class="keyword">if</span> (tryAcquireShared(arg) &lt; <span class="number">0</span>)</span><br><span class="line">        doAcquireSharedInterruptibly(arg);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Acquires in shared interruptible mode.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arg the acquire argument</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doAcquireSharedInterruptibly</span><span class="params">(<span class="keyword">int</span> arg)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> Node node = addWaiter(Node.SHARED);</span><br><span class="line">    <span class="keyword">boolean</span> failed = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">            <span class="keyword">final</span> Node p = node.predecessor();</span><br><span class="line">            <span class="keyword">if</span> (p == head) &#123;</span><br><span class="line">                <span class="keyword">int</span> r = tryAcquireShared(arg);</span><br><span class="line">                <span class="keyword">if</span> (r &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                    setHeadAndPropagate(node, r);</span><br><span class="line">                    p.next = <span class="keyword">null</span>; <span class="comment">// help GC</span></span><br><span class="line">                    failed = <span class="keyword">false</span>;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (shouldParkAfterFailedAcquire(p, node) &amp;&amp;</span><br><span class="line">                parkAndCheckInterrupt())</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> InterruptedException();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (failed)</span><br><span class="line">            cancelAcquire(node);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å…¶å®ä»¥ä¸Šä»£ç çš„æ•´ä½“æµç¨‹éå¸¸ç®€å•ï¼Œå³åˆå§‹åŒ–<code>CountDownLatch</code>çš„state=Nï¼Œæ¯æ¬¡è°ƒç”¨countDownæ—¶state-1ï¼Œå‡åˆ°0çš„æ—¶å€™åœæ­¢é˜»å¡ï¼Œç»§ç»­å‘ä¸‹æ‰§è¡Œã€‚</p>
<h3 id="æˆ‘å¯ä»¥ç”¨CountDownLatchæ¥åšä»€ä¹ˆäº‹æƒ…ï¼Ÿ"><a href="#æˆ‘å¯ä»¥ç”¨CountDownLatchæ¥åšä»€ä¹ˆäº‹æƒ…ï¼Ÿ" class="headerlink" title="æˆ‘å¯ä»¥ç”¨CountDownLatchæ¥åšä»€ä¹ˆäº‹æƒ…ï¼Ÿ"></a>æˆ‘å¯ä»¥ç”¨<code>CountDownLatch</code>æ¥åšä»€ä¹ˆäº‹æƒ…ï¼Ÿ</h3><h4 id="ä½¿ç”¨CountDownLatchæ¨¡æ‹Ÿå¹¶å‘åœºæ™¯"><a href="#ä½¿ç”¨CountDownLatchæ¨¡æ‹Ÿå¹¶å‘åœºæ™¯" class="headerlink" title="ä½¿ç”¨CountDownLatchæ¨¡æ‹Ÿå¹¶å‘åœºæ™¯"></a>ä½¿ç”¨<code>CountDownLatch</code>æ¨¡æ‹Ÿå¹¶å‘åœºæ™¯</h4><ul>
<li>å¯ä»¥ä½¿ç”¨<code>CountDownLatch</code>ï¼Œåˆ›å»ºå¤šä¸ªçº¿ç¨‹å¹¶ç­‰å¾…çº¿ç¨‹å…¨éƒ¨å°±ç»ªä¹‹åå”¤é†’æ‰€æœ‰çº¿ç¨‹ã€‚å¯ä»¥ç”¨è¿™ç§æ–¹å¼æµ‹è¯•ä»£ç çš„å¯ç”¨æ€§ï¼Œæˆ–è€…æµ‹è¯•å•ä¾‹ç±»ç­‰ï¼›</li>
</ul>
<p>æˆ‘åœ¨è‡ªå·±å­¦ä¹ è¿‡ç¨‹ä¸­ä¹Ÿæœ‰å†™è¿‡ç±»ä¼¼çš„æµ‹è¯•ç±» - <a href="https://github.com/Fatezhang/Concurrent/tree/master/src/main/java/com/mime/concurrent/CountDownLatchStudy" target="_blank" rel="noopener">github</a></p>
<h4 id="ä½¿ç”¨CountDownLatchç­‰å¾…ä¾èµ–çº¿ç¨‹æ‰§è¡Œ"><a href="#ä½¿ç”¨CountDownLatchç­‰å¾…ä¾èµ–çº¿ç¨‹æ‰§è¡Œ" class="headerlink" title="ä½¿ç”¨CountDownLatchç­‰å¾…ä¾èµ–çº¿ç¨‹æ‰§è¡Œ"></a>ä½¿ç”¨<code>CountDownLatch</code>ç­‰å¾…ä¾èµ–çº¿ç¨‹æ‰§è¡Œ</h4><ul>
<li><code>CountDownLatch</code>ç”¨æ¥ç­‰å¾…å…¶ä»–ä¾èµ–æœåŠ¡éƒ½å¯åŠ¨å¥½ä¹‹ååœ¨è¿›è¡Œè‡ªèº«çº¿ç¨‹çš„ä»»åŠ¡å¤„ç†</li>
</ul>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>  <code>CountDownLatch</code>æ˜¯é¢è¯•çš„æ—¶å€™å¤šçº¿ç¨‹è¿™å—å¾ˆå®¹æ˜“è¢«é—®åˆ°çš„ç‚¹ï¼Œå®é™…ä¸Šä¼šè€ƒå¯Ÿè¿™å‡ ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li>1ã€å†…éƒ¨å®ç°åŸç† <strong>â€”â€”</strong> ä½¿ç”¨å†…éƒ¨ç±»ç»§æ‰¿AQSå®ç°ï¼›</li>
<li>2ã€éœ€è¦æ³¨æ„çš„æ–¹é¢ <strong>â€”â€”</strong> è®¡æ•°å™¨ä¸º0æ—¶ï¼Œawaitåé¢çš„æ–¹æ³•æ‰ä¼šæ‰§è¡Œï¼Œå¦åˆ™ä¸€ç›´é˜»å¡ï¼ŒcountDownæ–¹æ³•å°½é‡å†™åœ¨finallyä»£ç å—ä¸­ï¼Œé¿å…å‡ºç°å¼‚å¸¸å¯¼è‡´æ­»é”ï¼›</li>
<li>3ã€ä½¿ç”¨åœºæ™¯ <strong>â€”â€”</strong> ç›‘æ§ä¸€äº›ä¾èµ–æœåŠ¡å¯åŠ¨å®Œæˆä¹‹åæ‰§è¡Œä»£ç ï¼Œæˆ–è€…é€ â€œæ°´åâ€ï¼Œå³æ¨¡æ‹Ÿå¤§é‡å¹¶å‘åœºæ™¯ç­‰ã€‚</li>
</ul>
]]></content>
      <categories>
        <category>JavaåŸºç¡€</category>
        <category>å¹¶å‘ç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>JavaåŸºç¡€</tag>
        <tag>å¹¶å‘ç¼–ç¨‹</tag>
        <tag>AQS</tag>
        <tag>CountDownLatch</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¼–å†™è‡ªå·±çš„SpringMVCæ¡†æ¶</title>
    <url>/blog/20190531/%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84SpringMVC%E6%A1%86%E6%9E%B6/</url>
    <content><![CDATA[<p><img src="/blog/20190531/ç¼–å†™è‡ªå·±çš„SpringMVCæ¡†æ¶/aaa.jpeg" alt="å°é¢"><br><a id="more"></a></p>
<h2 id="Summeré¡¹ç›®"><a href="#Summeré¡¹ç›®" class="headerlink" title="Summeré¡¹ç›®"></a>Summeré¡¹ç›®</h2><p><strong><a href="https://github.com/Fatezhang/Summer" target="_blank" rel="noopener">é¡¹ç›®githubåœ°å€</a></strong></p>
<h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><ul>
<li>Summeré¡¹ç›®æ˜¯æœ¬äººåœ¨å­¦ä¹ Springæºç çš„æ—¶å€™æŒ‰ç…§SpringMVCçš„æµç¨‹ç¼–å†™çš„ä¸€ä¸ªç®€æ˜“çš„SpringMVCæ¡†æ¶ï¼Œä¸»è¦å®Œæˆä»¥ä¸‹åŠŸèƒ½ï¼š<ul>
<li>è¯»å–é…ç½®æ–‡ä»¶è¿›è¡ŒåŒ…çš„æ‰«æ</li>
<li>å¯¹æ‰€æœ‰åŠ å…¥æ³¨è§£çš„beanè¿›è¡Œè£…é…</li>
<li>å¯¹åŠ äº†æ³¨è§£çš„å­—æ®µè¿›è¡Œä¾èµ–è‡ªåŠ¨æ³¨å…¥</li>
<li>URLä¸ç›¸åº”æ–¹æ³•çš„æ˜ å°„</li>
<li>è¯·æ±‚çš„åˆ†å‘å¤„ç†</li>
</ul>
</li>
</ul>
<p>é¡¹ç›®é€šè¿‡å®ç°ä»¥ä¸Šæµç¨‹å®ŒæˆSpringMVCæ¡†æ¶å·¥ä½œçš„æ•´ä½“è¿‡ç¨‹æ¼”ç¤º</p>
<h3 id="ä»¥ä¸‹æ˜¯æ¡†æ¶æµç¨‹çš„è¯¦ç»†æ­¥éª¤è¯´æ˜"><a href="#ä»¥ä¸‹æ˜¯æ¡†æ¶æµç¨‹çš„è¯¦ç»†æ­¥éª¤è¯´æ˜" class="headerlink" title="ä»¥ä¸‹æ˜¯æ¡†æ¶æµç¨‹çš„è¯¦ç»†æ­¥éª¤è¯´æ˜"></a>ä»¥ä¸‹æ˜¯æ¡†æ¶æµç¨‹çš„è¯¦ç»†æ­¥éª¤è¯´æ˜</h3><h4 id="é¡¹ç›®çš„ç»“æ„"><a href="#é¡¹ç›®çš„ç»“æ„" class="headerlink" title="é¡¹ç›®çš„ç»“æ„"></a>é¡¹ç›®çš„ç»“æ„</h4><p>Summeré¡¹ç›®ä»…ä»…æ˜¯ä¸€ä¸ªå•ç‹¬çš„Servleté¡¹ç›®ï¼Œæ²¡æœ‰å¼•å…¥Springç›¸å…³çš„ä»»ä½•ä¾èµ–ï¼Œä»…ä»…ä½¿ç”¨äº†ä¸€äº›å¤–éƒ¨çš„å·¥å…·ç±»ï¼Œæˆ‘çš„pom.xmlæ–‡ä»¶å¦‚ä¸‹ï¼š<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.5.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.eclipse.jetty<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jetty-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>9.3.12.v20160915<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>é¡¹ç›®ä½¿ç”¨jettyå¯åŠ¨ï¼Œæ‰€ä»¥æˆ‘è¿˜é…ç½®äº†jettyæ’ä»¶<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- jettyæ’ä»¶ --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mortbay.jetty<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-jetty-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>6.1.26<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">scanIntervalSeconds</span>&gt;</span>0<span class="tag">&lt;/<span class="name">scanIntervalSeconds</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">contextPath</span>&gt;</span>/Summer<span class="tag">&lt;/<span class="name">contextPath</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">connectors</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">connector</span> <span class="attr">implementation</span>=<span class="string">"org.mortbay.jetty.nio.SelectChannelConnector"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">port</span>&gt;</span>4000<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">connector</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">connectors</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="æ•´ä½“æ¡†æ¶ç»“æ„"><a href="#æ•´ä½“æ¡†æ¶ç»“æ„" class="headerlink" title="æ•´ä½“æ¡†æ¶ç»“æ„"></a>æ•´ä½“æ¡†æ¶ç»“æ„</h4><p><img src="/blog/20190531/ç¼–å†™è‡ªå·±çš„SpringMVCæ¡†æ¶/zj.png" alt="æ³¨è§£"><br>é™¤äº†è‡ªå®šä¹‰çš„è¿™å‡ ä¸ªæ³¨è§£ä¹‹å¤–å…¶ä»–çš„å°±å’Œå¹³å¸¸ç¼–å†™Controllerä»¥åŠServiceçš„æµç¨‹ä¸€æ ·ï¼Œæˆ‘çš„æ ¸å¿ƒä»£ç ä¸»è¦åœ¨MyServletä¸­</p>
<h4 id="MyServletä¸»è¦åšäº†ä»€ä¹ˆ"><a href="#MyServletä¸»è¦åšäº†ä»€ä¹ˆ" class="headerlink" title="MyServletä¸»è¦åšäº†ä»€ä¹ˆ"></a>MyServletä¸»è¦åšäº†ä»€ä¹ˆ</h4><h5 id="åŠ è½½é…ç½®æ–‡ä»¶ï¼Œé¦–å…ˆè¯»å–web-xmlä¸­é…ç½®çš„é…ç½®æ–‡ä»¶"><a href="#åŠ è½½é…ç½®æ–‡ä»¶ï¼Œé¦–å…ˆè¯»å–web-xmlä¸­é…ç½®çš„é…ç½®æ–‡ä»¶" class="headerlink" title="åŠ è½½é…ç½®æ–‡ä»¶ï¼Œé¦–å…ˆè¯»å–web.xmlä¸­é…ç½®çš„é…ç½®æ–‡ä»¶"></a>åŠ è½½é…ç½®æ–‡ä»¶ï¼Œé¦–å…ˆè¯»å–web.xmlä¸­é…ç½®çš„é…ç½®æ–‡ä»¶</h5><p>æŠŠæ‰«æåˆ°çš„æ‰€æœ‰ç±»å…¨é“¾è·¯å¾„åä¿å­˜åœ¨listä¸­</p>
<blockquote>
<p>ä»¥ä¸‹æ˜¯servletçš„é…ç½®</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å£°æ˜Servletå¯¹è±¡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>myServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä¸Šé¢ä¸€å¥æŒ‡å®šServletå¯¹è±¡çš„åç§° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.zhang.summer.servlet.MyServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä¸Šé¢ä¸€å¥æŒ‡å®šServletå¯¹è±¡çš„å®Œæ•´ä½ç½®ï¼ŒåŒ…å«åŒ…åå’Œç±»å --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:config.properties<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä¸‹é¢ä¸€å¥æ˜¯åœ¨å¯åŠ¨æ—¶åŠ è½½servlet --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>0<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ˜ å°„Servlet --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>myServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;servlet-name&gt;ä¸ä¸Šé¢&lt;Servlet&gt;æ ‡ç­¾çš„&lt;servlet-name&gt;å…ƒç´ ç›¸å¯¹åº”ï¼Œä¸å¯ä»¥éšä¾¿èµ·å  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä¸Šé¢ä¸€å¥è¯ç”¨äºæ˜ å°„è®¿é—®URL --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="éå†æ‰€æœ‰ç±»ï¼Œä½¿ç”¨åå°„åˆ›å»ºå¯¹è±¡class-forName"><a href="#éå†æ‰€æœ‰ç±»ï¼Œä½¿ç”¨åå°„åˆ›å»ºå¯¹è±¡class-forName" class="headerlink" title="éå†æ‰€æœ‰ç±»ï¼Œä½¿ç”¨åå°„åˆ›å»ºå¯¹è±¡class.forName"></a>éå†æ‰€æœ‰ç±»ï¼Œä½¿ç”¨åå°„åˆ›å»ºå¯¹è±¡<code>class.forName</code></h5><p>åˆ›å»ºå¯¹è±¡ï¼Œå°†æ‰€æœ‰æˆ‘ä»¬å£°æ˜äº†è‡ªå·±æ³¨è§£çš„ç±»åŠ å…¥åˆ°ä¸€ä¸ªMapä¸­ï¼Œå³IOC-Map</p>
<h5 id="éå†IOC-Mapä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼Œè¿›è¡Œä¾èµ–æ³¨å…¥"><a href="#éå†IOC-Mapä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼Œè¿›è¡Œä¾èµ–æ³¨å…¥" class="headerlink" title="éå†IOC-Mapä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼Œè¿›è¡Œä¾èµ–æ³¨å…¥"></a>éå†IOC-Mapä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼Œè¿›è¡Œä¾èµ–æ³¨å…¥</h5><p>åœ¨è¿™é‡Œæˆ‘åªåˆ¤æ–­æ˜¯<code>@MyController</code>æ³¨è§£çš„ç±»æ‰è¿›è¡Œä¾èµ–æ³¨å…¥</p>
<h5 id="å¤„ç†URLå’Œæ–¹æ³•ä¹‹é—´çš„æ˜ å°„"><a href="#å¤„ç†URLå’Œæ–¹æ³•ä¹‹é—´çš„æ˜ å°„" class="headerlink" title="å¤„ç†URLå’Œæ–¹æ³•ä¹‹é—´çš„æ˜ å°„"></a>å¤„ç†URLå’Œæ–¹æ³•ä¹‹é—´çš„æ˜ å°„</h5><p>å°†æ³¨è§£äº†<code>@MyRequestMapping</code>çš„ç±»å’Œæ–¹æ³•è·¯å¾„æ‹¼æ¥èµ·æ¥ï¼Œå¯¹æ–¹æ³•å’Œæ‹¼æ¥èµ·æ¥çš„urlè·¯å¾„è¿›è¡Œæ˜ å°„ï¼Œå¹¶ä¸”å¯¹æ–¹æ³•å‚æ•°åšç‰¹æ®Šå¤„ç†</p>
<h5 id="è¯·æ±‚åˆ†å‘"><a href="#è¯·æ±‚åˆ†å‘" class="headerlink" title="è¯·æ±‚åˆ†å‘"></a>è¯·æ±‚åˆ†å‘</h5><p>åœ¨doGetæˆ–è€…doPostè¯·æ±‚ä¸­é€šè¿‡æ˜ å°„å¥½çš„url-methodæ‰¾åˆ°æ–¹æ³•è¿›è¡Œè¯·æ±‚çš„åˆ†å‘å¤„ç†</p>
]]></content>
      <categories>
        <category>SpringMVCæ¡†æ¶</category>
      </categories>
      <tags>
        <tag>JavaåŸºç¡€</tag>
        <tag>Spring</tag>
        <tag>SpringMVC</tag>
        <tag>Servlet</tag>
      </tags>
  </entry>
  <entry>
    <title>å¹¶å‘ç¼–ç¨‹å­¦ä¹ (äºŒ)ï¼šä½¿ç”¨AQSç¼–å†™å¯é‡å…¥é”</title>
    <url>/blog/20190525/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0-%E4%BA%8C-%EF%BC%9A%E4%BD%BF%E7%94%A8AQS%E7%BC%96%E5%86%99%E5%8F%AF%E9%87%8D%E5%85%A5%E9%94%81/</url>
    <content><![CDATA[<p><img src="/blog/20190525/å¹¶å‘ç¼–ç¨‹å­¦ä¹ -äºŒ-ï¼šä½¿ç”¨AQSç¼–å†™å¯é‡å…¥é”/aqs.png" alt="AQSä¸­æ–‡æ–‡æ¡£ä»‹ç»"></p>
<div style="width:100%;text-align: center;"><a href="http://www.matools.com/api/java8" target="_blank" rel="noopener">AQSä¸­æ–‡æ–‡æ¡£ä»‹ç»</a></div>

<a id="more"></a>
<hr>
<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p><strong> <a href="/blog/20190517/ç¼–å†™ä¸€ä¸ªç®€æ˜“çš„å¯é‡å…¥é”-ä¸€/">ä¸Šä¸€ç« </a> </strong> æˆ‘ä½¿ç”¨å®ç°<code>Lock</code>æ¥å£çš„æ–¹å¼å¹¶ç»“åˆ<code>Synchronized</code>å…³é”®å­—å®ç°äº†è‡ªå·±çš„å¯é‡å…¥é”ï¼Œå­¦ä¹ å¹¶äº†è§£äº†å¯é‡å…¥é”çš„åŸç†æœºåˆ¶ã€‚è¿™ä¸€ç« æˆ‘åœ¨å­¦ä¹ äº†AQSä¹‹åç»“åˆAQSå®ç°è‡ªå·±çš„æ˜¾ç¤ºå¯é‡å…¥é”ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯AQS"><a href="#ä»€ä¹ˆæ˜¯AQS" class="headerlink" title="ä»€ä¹ˆæ˜¯AQS"></a>ä»€ä¹ˆæ˜¯AQS</h3><p>å¦‚ä¸Šæ‰€è¿°ï¼ŒJava8ä¸­æ–‡æ–‡æ¡£ä¸­æè¿°çš„ï¼ŒAQSå³<code>AbstractQueuedSynchronizer</code>ã€‚å®ƒæä¾›äº†ä¸€ä¸ªæ¡†æ¶ï¼Œç”¨äºå®ç°ä¾èµ–å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰ç­‰å¾…é˜Ÿåˆ—çš„é˜»å¡é”å’Œç›¸å…³åŒæ­¥å™¨ï¼ˆä¿¡å·é‡ï¼Œäº‹ä»¶ç­‰ï¼‰ã€‚è¯¥ç±»è¢«è®¾è®¡ä¸ºå¤§å¤šæ•°ç±»å‹çš„åŒæ­¥å™¨çš„æœ‰ç”¨ä¾æ®ï¼Œè¿™äº›åŒæ­¥å™¨ä¾èµ–äºå•ä¸ªåŸå­intå€¼æ¥è¡¨ç¤ºçŠ¶æ€ã€‚ å­ç±»å¿…é¡»å®šä¹‰æ”¹å˜æ­¤çŠ¶æ€çš„å—ä¿æŠ¤æ–¹æ³•ï¼Œä»¥åŠæ ¹æ®è¯¥å¯¹è±¡è¢«è·å–æˆ–é‡Šæ”¾æ¥å®šä¹‰è¯¥çŠ¶æ€çš„å«ä¹‰ã€‚ ç»™å®šè¿™äº›ï¼Œè¿™ä¸ªç±»ä¸­çš„å…¶ä»–æ–¹æ³•æ‰§è¡Œæ‰€æœ‰æ’é˜Ÿå’Œé˜»å¡æœºåˆ¶ã€‚ å­ç±»å¯ä»¥ä¿æŒå…¶ä»–çŠ¶æ€å­—æ®µï¼Œä½†åªä»¥åŸå­æ–¹å¼æ›´æ–°intä½¿ç”¨æ–¹æ³•æ“çºµå€¼getState() ï¼Œ setState(int)å’ŒcompareAndSetState(int, int)è¢«è·Ÿè¸ªç›¸å¯¹äºåŒæ­¥ã€‚<strong>å­ç±»åº”å®šä¹‰ä¸ºéå…¬å…±å†…éƒ¨åŠ©æ‰‹ç±»ï¼Œç”¨äºå®ç°å…¶å°é—­ç±»çš„åŒæ­¥å±æ€§ã€‚ AbstractQueuedSynchronizerç±»ä¸å®ç°ä»»ä½•åŒæ­¥æ¥å£ã€‚ ç›¸åï¼Œå®ƒå®šä¹‰äº†ä¸€äº›æ–¹æ³•ï¼Œå¦‚acquireInterruptibly(int) ï¼Œå¯ä»¥é€šè¿‡å…·ä½“çš„é”å’Œç›¸å…³åŒæ­¥å™¨æ¥è°ƒç”¨é€‚å½“å±¥è¡Œå…¶å…¬å…±æ–¹æ³•ã€‚</strong></p>
<p>å…¶å®AQSç±»æ˜¯ä¸€ä¸ªä½¿ç”¨äº†æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„æŠ½è±¡æ¡†æ¶ç±»ã€‚å®ƒå°†æ ¸å¿ƒå®ç°å°è£…åœ¨æ¨¡æ¿æ–¹æ³•ä¸­ï¼Œæä¾›ç»™ç¨‹åºå‘˜å»å®ç°å…·ä½“çš„åŠ é”å’Œé‡Šæ”¾çš„æœºåˆ¶ï¼Œä»¥ä¾¿äºå®ç°ä¸€äº›ç‰¹æ®ŠåŠŸèƒ½çš„é”ï¼Œæ¯”å¦‚JDKæä¾›çš„å¯é‡å…¥é”å’Œå¯é‡å…¥è¯»å†™é”ç­‰ç­‰ã€‚</p>
<h3 id="å¦‚ä½•ä½¿ç”¨AQS"><a href="#å¦‚ä½•ä½¿ç”¨AQS" class="headerlink" title="å¦‚ä½•ä½¿ç”¨AQS"></a>å¦‚ä½•ä½¿ç”¨AQS</h3><p><strong>AQSåœ¨ä½¿ç”¨çš„æ—¶å€™ä¸»è¦éœ€è¦é‡å†™ä»¥ä¸‹æ–¹æ³•</strong></p>
<ul>
<li><code>isHeldExclusively()</code>ï¼šè¯¥çº¿ç¨‹æ˜¯å¦æ­£åœ¨ç‹¬å èµ„æºã€‚åªæœ‰ç”¨åˆ°conditionæ‰éœ€è¦å»å®ç°å®ƒã€‚</li>
<li><code>tryAcquire(int)</code>ï¼šç‹¬å æ–¹å¼ã€‚å°è¯•è·å–èµ„æºï¼ŒæˆåŠŸåˆ™è¿”å›trueï¼Œå¤±è´¥åˆ™è¿”å›falseã€‚</li>
<li><code>tryRelease(int)</code>ï¼šç‹¬å æ–¹å¼ã€‚å°è¯•é‡Šæ”¾èµ„æºï¼ŒæˆåŠŸåˆ™è¿”å›trueï¼Œå¤±è´¥åˆ™è¿”å›falseã€‚</li>
<li><code>tryAcquireShared(int)</code>ï¼šå…±äº«æ–¹å¼ã€‚å°è¯•è·å–èµ„æºã€‚è´Ÿæ•°è¡¨ç¤ºå¤±è´¥ï¼›0è¡¨ç¤ºæˆåŠŸï¼Œä½†æ²¡æœ‰å‰©ä½™å¯ç”¨èµ„æºï¼›æ­£æ•°è¡¨ç¤ºæˆåŠŸï¼Œä¸”æœ‰å‰©ä½™èµ„æºã€‚</li>
<li><code>tryReleaseShared(int)</code>ï¼šå…±äº«æ–¹å¼ã€‚å°è¯•é‡Šæ”¾èµ„æºï¼Œå¦‚æœé‡Šæ”¾åå…è®¸å”¤é†’åç»­ç­‰å¾…ç»“ç‚¹è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚</li>
</ul>
<h3 id="ä½¿ç”¨AQSå®ç°è‡ªå·±çš„å¯é‡å…¥ç‹¬å éå…¬å¹³é”çš„ä¼ªä»£ç å¦‚ä¸‹"><a href="#ä½¿ç”¨AQSå®ç°è‡ªå·±çš„å¯é‡å…¥ç‹¬å éå…¬å¹³é”çš„ä¼ªä»£ç å¦‚ä¸‹" class="headerlink" title="ä½¿ç”¨AQSå®ç°è‡ªå·±çš„å¯é‡å…¥ç‹¬å éå…¬å¹³é”çš„ä¼ªä»£ç å¦‚ä¸‹"></a>ä½¿ç”¨AQSå®ç°è‡ªå·±çš„å¯é‡å…¥ç‹¬å éå…¬å¹³é”çš„ä¼ªä»£ç å¦‚ä¸‹</h3><h4 id="åŠ é”æ­¥éª¤ä¼ªä»£ç "><a href="#åŠ é”æ­¥éª¤ä¼ªä»£ç " class="headerlink" title="åŠ é”æ­¥éª¤ä¼ªä»£ç "></a>åŠ é”æ­¥éª¤ä¼ªä»£ç </h4><p>çº¿ç¨‹è°ƒç”¨<code>lock</code>æ–¹æ³•åŠ é”ï¼Œç›´æ¥è°ƒç”¨<code>sync.acquire(1);</code>ï¼Œå…·ä½“å®ç°åœ¨<code>tryAcquire</code></p>
<ul>
<li>é¦–å…ˆçº¿ç¨‹è¿›å…¥æƒ³è¦è·å–é”</li>
<li>æ‹¿åˆ°å½“å‰çº¿ç¨‹çš„å¼•ç”¨</li>
<li>åˆ¤æ–­åŠ é”çŠ¶æ€ï¼Œå¦‚æœæ˜¯æœªåŠ é”çŠ¶æ€<ul>
<li>ä½¿ç”¨<code>compareAndSetState</code>è‡ªæ—‹åŸå­æ“ä½œåŠ é”</li>
<li>è®¾ç½®å½“å‰çº¿ç¨‹</li>
<li>è¿”å›trueåŠ é”æˆåŠŸ</li>
</ul>
</li>
<li>å¦‚æœæ˜¯åŠ é”çŠ¶æ€<ul>
<li>åˆ¤æ–­æ˜¯å¦æ˜¯å½“å‰çº¿ç¨‹é‡å…¥</li>
<li>å¦‚æœæ˜¯å½“å‰çº¿ç¨‹é‡å…¥ï¼ŒstateåŠ 1ï¼Œå¹¶è¿”å›trueåŠ é”æˆåŠŸ</li>
</ul>
</li>
<li>æœ€åå¦‚æœéƒ½ä¸æ˜¯å°±è¿”å›falseåŠ é”å¤±è´¥</li>
</ul>
<h4 id="é‡Šæ”¾é”æ­¥éª¤ä¼ªä»£ç "><a href="#é‡Šæ”¾é”æ­¥éª¤ä¼ªä»£ç " class="headerlink" title="é‡Šæ”¾é”æ­¥éª¤ä¼ªä»£ç "></a>é‡Šæ”¾é”æ­¥éª¤ä¼ªä»£ç </h4><p>çº¿ç¨‹è°ƒç”¨<code>unLock</code>æ–¹æ³•åŠ é”ï¼Œç›´æ¥è°ƒç”¨<code>sync.release(1);</code>ï¼Œå…·ä½“å®ç°åœ¨<code>tryRelease</code></p>
<ul>
<li>é¦–å…ˆçº¿ç¨‹è¿›å…¥æ–¹æ³•æƒ³è¦é‡Šæ”¾é”</li>
<li>åˆ¤æ–­å¦‚æœä¸æ˜¯å½“å‰çº¿ç¨‹ï¼Œå°±æŠ›å‡ºå¼‚å¸¸</li>
<li>å¦‚æœæ˜¯å½“å‰çº¿ç¨‹ï¼Œstateå°±å‡1ï¼ˆargä¸€èˆ¬ä¸º1ï¼‰ï¼Œè¡¨ç¤ºé‡Šæ”¾ä¸€æ¬¡</li>
<li>å½“stateé‡Šæ”¾åˆ°0æ—¶ï¼Œè®¾ç½®æ‹¥æœ‰é”çš„çº¿ç¨‹ä¸ºnullï¼Œç„¶åè¿”å›true</li>
</ul>
<p><strong>å…·ä½“çš„ä»£ç å®ç°å¦‚ä¸‹</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> zhangjiaheng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> ä½¿ç”¨AQSé‡å†™ä¸€ä¸ªå¯é‡å…¥é”</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyReentrantLockByAQS</span> <span class="keyword">implements</span> <span class="title">Lock</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Sync sync = <span class="keyword">new</span> Sync();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å†…éƒ¨ç±»Sync ReentrantLockä½¿ç”¨çš„å†…éƒ¨æŠ½è±¡ç±» å¹¶æ´¾ç”Ÿä¸¤ä¸ªå­ç±»å®ç°ä¸¤ç§(å…¬å¹³/éå…¬å¹³)é”</span></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Sync</span> <span class="keyword">extends</span> <span class="title">AbstractQueuedSynchronizer</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">tryAcquire</span><span class="params">(<span class="keyword">int</span> arg)</span> </span>&#123;</span><br><span class="line">            Thread t = Thread.currentThread();</span><br><span class="line">            <span class="comment">// å¦‚æœç¬¬ä¸€ä¸ªçº¿ç¨‹è¿›æ¥ å¯ä»¥æ‹¿åˆ°é” åˆ™è¿”å›true</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// å¦‚æœç¬¬äºŒä¸ªçº¿ç¨‹è¿›æ¥ å¦‚æœä¸ç­‰äºå½“å‰çº¿ç¨‹ è¿”å›false å¦åˆ™æ›´æ–°å½“å‰çº¿ç¨‹å€¼</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> state = getState();</span><br><span class="line">            <span class="keyword">if</span> (state == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">while</span> (compareAndSetState(<span class="number">0</span>, <span class="number">1</span>)) &#123;</span><br><span class="line">                    setExclusiveOwnerThread(t);</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (t == getExclusiveOwnerThread()) &#123;</span><br><span class="line">                <span class="comment">// å½“å‰çº¿ç¨‹å†è¿›æ¥</span></span><br><span class="line">                setState(getState() + <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">tryRelease</span><span class="params">(<span class="keyword">int</span> arg)</span> </span>&#123;</span><br><span class="line">            <span class="comment">// é”çš„è·å–å’Œé‡Šæ”¾æ—¶ä¸€ä¸€å¯¹åº”çš„</span></span><br><span class="line">            <span class="comment">// è°ƒç”¨æ­¤æ–¹æ³•çš„çº¿ç¨‹è‚¯å®šæ˜¯å½“å‰çº¿ç¨‹</span></span><br><span class="line">            <span class="keyword">if</span> (Thread.currentThread() != getExclusiveOwnerThread()) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span> c = getState() - arg;</span><br><span class="line">            <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="number">0</span>) &#123;</span><br><span class="line">                setExclusiveOwnerThread(<span class="keyword">null</span>);</span><br><span class="line">                flag = <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            setState(c);</span><br><span class="line">            <span class="keyword">return</span> flag;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Condition <span class="title">newCondition</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> newCondition();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lock</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        sync.acquire(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lockInterruptibly</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        sync.acquireInterruptibly(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">tryLock</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sync.tryAcquire(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">tryLock</span><span class="params">(<span class="keyword">long</span> time, TimeUnit unit)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sync.tryAcquireNanos(<span class="number">1</span>, unit.toNanos(time));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">unlock</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        sync.release(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Condition <span class="title">newCondition</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sync.newCondition();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>JavaåŸºç¡€</category>
        <category>å¹¶å‘ç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>JavaåŸºç¡€</tag>
        <tag>å¹¶å‘ç¼–ç¨‹</tag>
        <tag>å¯é‡å…¥é”</tag>
        <tag>AQS</tag>
      </tags>
  </entry>
  <entry>
    <title>å¹¶å‘ç¼–ç¨‹å­¦ä¹ (ä¸€)ï¼šç¼–å†™ä¸€ä¸ªç®€æ˜“çš„å¯é‡å…¥é”</title>
    <url>/blog/20190517/%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E5%8F%AF%E9%87%8D%E5%85%A5%E9%94%81-%E4%B8%80/</url>
    <content><![CDATA[<p><img src="/blog/20190517/ç¼–å†™ä¸€ä¸ªç®€æ˜“çš„å¯é‡å…¥é”-ä¸€/nullIsMistake.jpg" alt="å°é¢"></p>
<a id="more"></a>
<h4 id="ä»€ä¹ˆæ˜¯å¯é‡å…¥é”"><a href="#ä»€ä¹ˆæ˜¯å¯é‡å…¥é”" class="headerlink" title="ä»€ä¹ˆæ˜¯å¯é‡å…¥é”"></a>ä»€ä¹ˆæ˜¯å¯é‡å…¥é”</h4><p>åœ¨Javaå¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œé”æ˜¯ç”¨æ¥æ§åˆ¶ä»£ç æ“ä½œçš„åŸå­æ€§çš„é‡è¦æœºåˆ¶ï¼Œå³å¯¹æŸçº¿ç¨‹å…±äº«çš„æ•°æ®è¿›è¡Œæ“ä½œçš„æ—¶å€™ï¼Œä¿è¯è¯¥æ“ä½œåŒä¸€æ—¶é—´æ®µåªæœ‰ä¸€ä¸ªçº¿ç¨‹æ“ä½œï¼Œæ•´ä¸ªè¿‡ç¨‹æ˜¯åŸå­æ“ä½œï¼Œå…¶ä»–çº¿ç¨‹å†æ“ä½œçš„æ—¶å€™åªèƒ½ç­‰å¾…é”çš„é‡Šæ”¾(æ’ä»–é”)ã€‚ä¸€èˆ¬æˆ‘ä»¬çš„é”éƒ½æ˜¯å£°æ˜åœ¨æ–¹æ³•ä¸Šæˆ–è€…ä»£ç å—ä¸­ï¼Œé‚£ä¹ˆåœ¨å®é™…ç¼–ç¨‹ä¸­æˆ‘ä»¬ç»å¸¸ä¼šå‡ºç°ä¸€ä¸ªç±»çš„å®ä¾‹æ–¹æ³•è°ƒç”¨å¦ä¸€ä¸ªå®ä¾‹æ–¹æ³•çš„æƒ…å†µï¼Œæˆ‘ä»¬ä¸å¸Œæœ›è¿™ä¸ªæ—¶å€™åŒä¸€ä¸ªçº¿ç¨‹è¿›å…¥å¦ä¸€å®ä¾‹æ–¹æ³•æ—¶è¿˜è¦å†å»ç­‰å¾…é”çš„é‡Šæ”¾ï¼Œå¯é‡å…¥é”å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå³ <strong>çº¿ç¨‹å¯ä»¥è¿›å…¥ä»»ä½•ä¸€ä¸ªå®ƒå·²ç»æ‹¥æœ‰çš„é”æ‰€åŒæ­¥ç€çš„ä»£ç å—</strong>ã€‚</p>
<h4 id="å¦‚ä½•å®ç°ä¸€ä¸ªç®€å•çš„å¯é‡å…¥é”"><a href="#å¦‚ä½•å®ç°ä¸€ä¸ªç®€å•çš„å¯é‡å…¥é”" class="headerlink" title="å¦‚ä½•å®ç°ä¸€ä¸ªç®€å•çš„å¯é‡å…¥é”"></a>å¦‚ä½•å®ç°ä¸€ä¸ªç®€å•çš„å¯é‡å…¥é”</h4><ul>
<li>é¦–å…ˆåŠ é”çš„æ—¶å€™éœ€è¦è®°å½•å½“å‰æ˜¯å“ªä¸€ä¸ªçº¿ç¨‹åŠ é”ï¼ŒåŠ é”ä¹‹ååŠ é”æ ‡å¿—ä½æ ‡è®°é”å·²è¢«å ç”¨</li>
<li>ç»´æŠ¤ä¸€ä¸ªåŠ é”è®¡æ•°å™¨ï¼Œçº¿ç¨‹æ¯æ¬¡åŠ é”è®¡æ•°å™¨éƒ½è¦åŠ 1ï¼Œæ¯é‡Šæ”¾ä¸€æ¬¡è®¡æ•°å™¨å‡1</li>
<li>å½“éå ç”¨é”çš„çº¿ç¨‹è¿›æ¥ä¹‹åè‡ªæ—‹ç­‰å¾…é”çš„é‡Šæ”¾ï¼Œå¦‚æœé”è¿˜åœ¨è¢«å ç”¨ï¼Œå°±wait();</li>
<li>æ‰€é‡Šæ”¾çš„æ—¶å€™åªæœ‰å½“å‰è·å–é”çš„çº¿ç¨‹è°ƒç”¨æ‰æœ‰ç”¨ï¼Œé”é‡Šæ”¾åŠ é”è®¡æ•°å™¨å‡1ï¼Œå½“å‡åˆ°0çš„æ—¶å€™ï¼ŒåŠ é”æ ‡å¿—ä½ç½®ä¸ºfalseï¼Œç„¶åå”¤é†’å…¶ä»–ç­‰å¾…çš„çº¿ç¨‹</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyLock</span> <span class="keyword">implements</span> <span class="title">Lock</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> locked = <span class="keyword">false</span>;<span class="comment">// å½“å‰é”æ˜¯å¦å·²ç»è¢«çº¿ç¨‹ä½¿ç”¨</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> lockCount;<span class="comment">// ä¿å­˜å½“å‰çº¿ç¨‹åŠ é”çš„æ¬¡æ•°</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Thread thread;<span class="comment">// ä¿å­˜å½“å‰çº¿ç¨‹æ˜¯å“ªä¸€ä¸ª</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">lock</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// è‡ªæ—‹ç­‰å¾…</span></span><br><span class="line">            <span class="comment">// å¯é‡å…¥ï¼šå¦‚æœè·å–é”çš„ä¸æ˜¯å½“å‰çº¿ç¨‹å¹¶ä¸”å½“å‰å·²ç»æœ‰çº¿ç¨‹åŠ é”ï¼Œåˆ™ç­‰å¾…</span></span><br><span class="line">            <span class="keyword">while</span> (locked &amp;&amp; Thread.currentThread() != <span class="keyword">this</span>.thread) &#123;</span><br><span class="line">                System.out.println(<span class="string">"æˆ‘ç­‰ä¼šå„¿ã€‚ã€‚ã€‚"</span>);</span><br><span class="line">                wait();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å¦‚æœæ²¡æœ‰çº¿ç¨‹ä½¿ç”¨é”æˆ–è€…è·å–é”çš„æ˜¯å½“å‰çº¿ç¨‹ åŠ é”è®¡æ•°å™¨+1 ç„¶åthreadæŒ‡å‘è·å–é”çš„çº¿ç¨‹</span></span><br><span class="line">            <span class="keyword">this</span>.thread = Thread.currentThread();</span><br><span class="line">            lockCount++;</span><br><span class="line">            locked = <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é‡Šæ”¾é”çš„æ“ä½œ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">unlock</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœä¸æ˜¯å½“å‰çº¿ç¨‹ ä¸éœ€è¦åšä»»ä½•æ“ä½œ</span></span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">this</span>.thread == Thread.currentThread())&#123;</span><br><span class="line">                <span class="comment">// é”è®¡æ•°å™¨å‡1 å¦‚æœå½“å‰çº¿ç¨‹è·å–é”ä¸ªæ•°é‡Šæ”¾å®Œæˆ</span></span><br><span class="line">                lockCount--;</span><br><span class="line">                <span class="keyword">if</span>(lockCount == <span class="number">0</span> )&#123;</span><br><span class="line">                    <span class="comment">// é‡Šæ”¾å®Œæˆ åŠ é”æ ‡å¿—ç½®ä¸ºfalse å†å”¤é†’ç­‰å¾…é”çš„çº¿ç¨‹</span></span><br><span class="line">                    locked = <span class="keyword">false</span>;</span><br><span class="line">                    notifyAll();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="åœ¨Javaä¸­å¸¸ç”¨çš„å¯é‡å…¥é”"><a href="#åœ¨Javaä¸­å¸¸ç”¨çš„å¯é‡å…¥é”" class="headerlink" title="åœ¨Javaä¸­å¸¸ç”¨çš„å¯é‡å…¥é”"></a>åœ¨Javaä¸­å¸¸ç”¨çš„å¯é‡å…¥é”</h4><ul>
<li>synchronized å…³é”®å­—åŠ é”</li>
<li>java.util.concurrent.locks.ReentrantLock</li>
<li>java.util.concurrent.locks.ReentrantReadWriteLock<blockquote>
<p>ä¸Šè¿°ReentrantLockå†…éƒ¨å®é™…ä¸Šè¿˜æ˜¯ä½¿ç”¨AQSï¼Œå…³äºAQSï¼Œåé¢è¿˜è¦è¿›è¡Œå­¦ä¹ ä¸æ•´ç†</p>
</blockquote>
</li>
</ul>
]]></content>
      <categories>
        <category>JavaåŸºç¡€</category>
        <category>å¹¶å‘ç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>JavaåŸºç¡€</tag>
        <tag>å¹¶å‘ç¼–ç¨‹</tag>
        <tag>å¯é‡å…¥é”</tag>
      </tags>
  </entry>
  <entry>
    <title>æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</title>
    <url>/blog/20190512/%E6%97%A0%E9%87%8D%E5%A4%8D%E5%AD%97%E7%AC%A6%E7%9A%84%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/</url>
    <content><![CDATA[<p><img src="/blog/20190512/æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²/bb.png" alt="å°é¢"></p>
<h4 id="ç®—æ³•é¢˜è§£ï¼šæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²"><a href="#ç®—æ³•é¢˜è§£ï¼šæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²" class="headerlink" title="ç®—æ³•é¢˜è§£ï¼šæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²"></a>ç®—æ³•é¢˜è§£ï¼šæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</h4><p>leetcodeåœ°å€ï¼š <a href="https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/" target="_blank" rel="noopener">leetcode</a></p>
<blockquote>
<p><strong>é¢˜ç›®ï¼š</strong> ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„ æœ€é•¿å­ä¸² çš„é•¿åº¦ã€‚</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ç¤ºä¾‹ <span class="number">1</span>:</span><br><span class="line"></span><br><span class="line">è¾“å…¥: <span class="string">"abcabcbb"</span></span><br><span class="line">è¾“å‡º: <span class="number">3</span></span><br><span class="line">è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ <span class="string">"abc"</span>ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º <span class="number">3</span>ã€‚</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h4 id="è§£æ³•1ï¼šæš´åŠ›æ±‚è§£"><a href="#è§£æ³•1ï¼šæš´åŠ›æ±‚è§£" class="headerlink" title="è§£æ³•1ï¼šæš´åŠ›æ±‚è§£"></a>è§£æ³•1ï¼šæš´åŠ›æ±‚è§£</h4><ul>
<li><p>æ€è·¯ï¼šéå†å­—ç¬¦ä¸²ï¼Œä»¥æ¯ä¸€ä¸ªå­—ç¬¦ä½œä¸ºå­ä¸²çš„èµ·å§‹å­—ç¬¦ï¼Œå‘åæŸ¥æ‰¾ç›´åˆ°é‡åˆ°å’Œè¯¥å­—ç¬¦ç›¸åŒçš„å­—ç¬¦ï¼Œè®°å½•é•¿åº¦ï¼Œä¾æ¬¡æ‰§è¡Œç›´åˆ°æ‰¾åˆ°æœ€é•¿é•¿åº¦ã€‚</p>
</li>
<li><p>é¢˜è§£å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxIndexStrLength</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">int</span> maxLength = <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; s.length(); index++) &#123;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">int</span> length = <span class="number">1</span>;</span><br><span class="line">       <span class="keyword">int</span> i = index + <span class="number">1</span>;</span><br><span class="line">       <span class="keyword">for</span> (; ; ) &#123;</span><br><span class="line">           <span class="keyword">if</span> (i &gt;= s.length()) &#123;</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           String ts = s.substring(index, i);</span><br><span class="line">           <span class="keyword">char</span> c = s.charAt(i);</span><br><span class="line">           <span class="keyword">if</span> (ts.contains(c + <span class="string">""</span>)) &#123;</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           length++;</span><br><span class="line">           i++;</span><br><span class="line">       &#125;</span><br><span class="line">       maxLength = maxLength &gt; length ? maxLength : length;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> maxLength;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="è§£æ³•2ï¼šæ»‘åŠ¨çª—å£æ³•"><a href="#è§£æ³•2ï¼šæ»‘åŠ¨çª—å£æ³•" class="headerlink" title="è§£æ³•2ï¼šæ»‘åŠ¨çª—å£æ³•"></a>è§£æ³•2ï¼šæ»‘åŠ¨çª—å£æ³•</h4><ul>
<li>æ€è·¯ï¼šåœ¨ä½¿ç”¨æš´åŠ›è§£æ³•æ—¶æˆ‘ä»¬ä¼šå‘ç°å®é™…ä¸Šå¯¹äºæ— é‡å¤å­ä¸²æ¥è®²ï¼Œæˆ‘ä»¬äº§ç”Ÿäº†ä¸€äº›å†—ä½™çš„åˆ¤æ–­æ“ä½œã€‚ä¾‹å¦‚å¯¹äºä¸²<code>sdabcabcbb</code>ï¼Œåˆ¤æ–­äº†å­ä¸²<code>sdabc</code>ä¹‹åï¼Œå½“åé¢å†å‡ºç°å­—ç¬¦<code>a</code>ï¼Œé‚£ä¹ˆé‡å¤å­—ç¬¦ä¹‹å‰çš„ä¸²ç›´æ¥èˆå¼ƒå°±å¥½ã€‚å³ç›´æ¥ä»<code>bca</code>â€¦å¼€å§‹åˆ¤æ–­å³å¯ã€‚è¿™æ ·å¯ä»¥å‡å°‘å¤§é‡çš„ä¸å¿…è¦çš„åˆ¤æ–­ä¸è®¡ç®—æ“ä½œã€‚</li>
<li>é¢˜è§£å¦‚ä¸‹ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxIndexStrLength</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">  HashMap&lt;Character, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">  <span class="keyword">int</span> start = <span class="number">0</span>, max = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.length(); i++) &#123;</span><br><span class="line">      <span class="keyword">char</span> c = s.charAt(i);</span><br><span class="line">      <span class="comment">//å¦‚æœå½“å‰å…ƒç´ ä¸æ»‘åŠ¨çª—å£ä¸­çš„å…ƒç´ é‡å¤ï¼š</span></span><br><span class="line">      <span class="keyword">if</span> (map.containsKey(c) &amp;&amp; map.get(c) &gt;= start) &#123;</span><br><span class="line">          max = Math.max(max, i - start);</span><br><span class="line">          start = map.get(c) + <span class="number">1</span>;</span><br><span class="line">          <span class="comment">//å¦‚æœå½“å‰å…ƒç´ ä¸æ»‘åŠ¨çª—å£ä¸­çš„å…ƒç´ ä¸é‡å¤ï¼Œä½†å·²ç»éå†åˆ°äº†æœ€åä¸€ä¸ªå­—ç¬¦ï¼š</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i == s.length() - <span class="number">1</span>) &#123;</span><br><span class="line">          max = Math.max(max, i - start + <span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      map.put(c, i);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><ul>
<li>æ»‘åŠ¨çª—å£æ³•çš„æ€è·¯å¯ä»¥ç”¨æ¥è§£å†³å¾ˆå¤šå­—ç¬¦ä¸²ç›¸å…³çš„é—®é¢˜</li>
</ul>
]]></content>
      <categories>
        <category>æ•°æ®ç»“æ„ä¸ç®—æ³•</category>
        <category>ç®—æ³•é¢˜è§£</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>ç®—æ³•é¢˜è§£</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaåºåˆ—åŒ–å’Œtransientå…³é”®å­—çš„ç†è§£ä¸å­¦ä¹ </title>
    <url>/blog/20190511/Java%E5%BA%8F%E5%88%97%E5%8C%96%E5%92%8Ctransient%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E7%90%86%E8%A7%A3%E4%B8%8E%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<h4 id="Javaåºåˆ—åŒ–"><a href="#Javaåºåˆ—åŒ–" class="headerlink" title="Javaåºåˆ—åŒ–"></a>Javaåºåˆ—åŒ–</h4><p><img src="/blog/20190511/Javaåºåˆ—åŒ–å’Œtransientå…³é”®å­—çš„ç†è§£ä¸å­¦ä¹ /xuliehua.png" alt="Javaåºåˆ—åŒ–è¿‡ç¨‹"></p>
<blockquote>
<p>åœ¨æˆ‘ä»¬å¹³æ—¶å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°å°†å¯¹è±¡è½¬æˆå¯ä¼ è¾“çš„å­—èŠ‚æµæˆ–è€…ä¿å­˜åœ¨æŸäº›æ–‡ä»¶ä¸­å»ä½¿ç”¨çš„åœºæ™¯ã€‚è¿™ç§å°†å¯¹è±¡è½¬æˆå­—èŠ‚åºåˆ—çš„è¿‡ç¨‹ç§°ä¹‹ä¸ºåºåˆ—åŒ–ã€‚åä¹‹ï¼Œå°†å­—èŠ‚åºåˆ—è½¬æˆå¯¹è±¡çš„è¿‡ç¨‹æˆ‘ä»¬ç§°ä¹‹ä¸ºååºåˆ—åŒ–ã€‚åºåˆ—åŒ–æ˜¯ä¿å­˜ä¸ä¼ è¾“å¯¹è±¡ç›¸å…³æ•°æ®çš„ä¸€ç§æ–¹å¼ï¼Œå¹¶ä¸æ˜¯ä¿å­˜ç±»ä¿¡æ¯çš„ä¸€ç§æ–¹å¼ã€‚</p>
</blockquote>
<a id="more"></a>
<h5 id="Javaä¸­å¦‚ä½•è¿›è¡Œåºåˆ—åŒ–ä¸ååºåˆ—åŒ–"><a href="#Javaä¸­å¦‚ä½•è¿›è¡Œåºåˆ—åŒ–ä¸ååºåˆ—åŒ–" class="headerlink" title="Javaä¸­å¦‚ä½•è¿›è¡Œåºåˆ—åŒ–ä¸ååºåˆ—åŒ–"></a>Javaä¸­å¦‚ä½•è¿›è¡Œåºåˆ—åŒ–ä¸ååºåˆ—åŒ–</h5><ul>
<li><p>åœ¨Javaä¸­ï¼Œå¯¹è±¡ä¸€èˆ¬æ˜¯æ— æ³•è¿›è¡Œåºåˆ—åŒ–ä¸ååºåˆ—åŒ–çš„ã€‚è€Œä½¿å¾—å¯¹è±¡èƒ½å¤Ÿè¢«åºåˆ—åŒ–çš„æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œå³å®ç°æ¥å£ <code>Serializable</code> ã€‚å¦‚ä¸‹ä»£ç å³å°†å¯¹è±¡åºåˆ—åŒ–ä»¥åŠååºåˆ—åŒ–çš„è¿‡ç¨‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestSerializable</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    TestSerializable() &#123;</span><br><span class="line">        age = <span class="number">20</span>;</span><br><span class="line">        name = <span class="string">"aachuanpu"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException </span>&#123;</span><br><span class="line">        TestSerializable test = <span class="keyword">new</span> TestSerializable();</span><br><span class="line">        File file = <span class="keyword">new</span> File(<span class="string">"e:/test.txt"</span>);</span><br><span class="line">        ObjectOutputStream out = <span class="keyword">new</span> ObjectOutputStream(<span class="keyword">new</span> FileOutputStream(file));</span><br><span class="line">        out.writeObject(test);</span><br><span class="line">        ObjectInputStream in = <span class="keyword">new</span> ObjectInputStream(<span class="keyword">new</span> FileInputStream(file));</span><br><span class="line">        TestSerializable newTest = (TestSerializable) in.readObject();</span><br><span class="line">        System.out.println(newTest.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="serialVersionUIDçš„ä½œç”¨"><a href="#serialVersionUIDçš„ä½œç”¨" class="headerlink" title="serialVersionUIDçš„ä½œç”¨"></a>serialVersionUIDçš„ä½œç”¨</h5><ul>
<li>serialVersionUIDä½œä¸ºå®ç°åºåˆ—åŒ–æ¥å£çš„ä¸€ä¸ªéå¿…é¡»éå¿…é¡»å£°æ˜çš„é™æ€å¸¸é‡ç»å¸¸ä¸è¢«å¼€å‘è€…æ‰€é‡è§†ï¼Œå¿˜è®°å£°æ˜ã€‚å…¶å®serialVersionUIDçš„ä½œç”¨æ˜¯ä¸ºäº†ä¿è¯åºåˆ—åŒ–ä¹‹å‰å’Œä¹‹åçš„å¯¹è±¡æ˜¯åŒä¸€å¯¹è±¡ã€‚æˆ‘ä»¬çŸ¥é“JVMåˆ¤æ–­å¯¹è±¡æ˜¯å¦ç›¸åŒæ˜¯æ ¹æ®å¯¹è±¡çš„ç±»è·¯å¾„å…¨é™å®šåç¡®å®šçš„ï¼Œè€Œè™šæ‹Ÿæœºå†³å®šä¸€ä¸ªå¯¹è±¡æ˜¯å¦å…è®¸åºåˆ—åŒ–å’Œååºåˆ—åŒ–æˆè¿™ä¸ªç±»è¿˜å–å†³äºå…¶serialVersionUIDæ˜¯å¦ä¸€è‡´ã€‚ä¸ä¸€è‡´çš„è¯ä¼šå¯¼è‡´<code>java.io.InvalidClassExceptionçš„å¼‚å¸¸</code>ï¼Œä¹Ÿå¯ä»¥ä¸æŒ‡å®šserialVersionUIDï¼Œå¦‚æœä¸æŒ‡å®šçš„è¯javaä¼šæ ¹æ®classè®¡ç®—serialVersionUIDã€‚</li>
<li>å¯¹äºä¸¤ä¸ªç›¸åŒçš„ç±»åŠæ‹¥æœ‰ç›¸åŒçš„serialVersionUIDï¼Œå¦‚æœä¸¤ä¸ªç±»å­—æ®µä¸ä¸€è‡´ä¹Ÿä¼šåºåˆ—åŒ–å’Œååºåˆ—åŒ–æˆåŠŸã€‚è¿™æ—¶Javaä¼šåœ¨ååºåˆ—åŒ–çš„æ—¶å€™å¿½ç•¥æ‰ä¸ä¸€è‡´çš„å­—æ®µã€‚</li>
</ul>
<h5 id="é™æ€å˜é‡çš„åºåˆ—åŒ–"><a href="#é™æ€å˜é‡çš„åºåˆ—åŒ–" class="headerlink" title="é™æ€å˜é‡çš„åºåˆ—åŒ–"></a>é™æ€å˜é‡çš„åºåˆ—åŒ–</h5><ul>
<li><p>åœ¨åºåˆ—åŒ–çš„æ—¶å€™ï¼Œé™æ€å˜é‡èƒ½å¤Ÿè¢«åºåˆ—åŒ–æˆåŠŸå—ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestSerializable</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String staticName;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    TestSerializable() &#123;</span><br><span class="line">        age = <span class="number">20</span>;</span><br><span class="line">        name = <span class="string">"aachuanpu"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException </span>&#123;</span><br><span class="line">        TestSerializable test = <span class="keyword">new</span> TestSerializable();</span><br><span class="line">        TestSerializable.staticName = <span class="string">"name11111"</span>;</span><br><span class="line">        File file = <span class="keyword">new</span> File(<span class="string">"e:/test.txt"</span>);</span><br><span class="line">        ObjectOutputStream out = <span class="keyword">new</span> ObjectOutputStream(<span class="keyword">new</span> FileOutputStream(file));</span><br><span class="line">        out.writeObject(test);</span><br><span class="line">        TestSerializable.staticName = <span class="string">"name222"</span>;</span><br><span class="line">        ObjectInputStream in = <span class="keyword">new</span> ObjectInputStream(<span class="keyword">new</span> FileInputStream(file));</span><br><span class="line">        TestSerializable newTest = (TestSerializable) in.readObject();</span><br><span class="line">        System.out.println(newTest.name);</span><br><span class="line">        System.out.println(TestSerializable.staticName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä»¥ä¸Šä»£ç ä¼šè¾“å‡ºä»€ä¹ˆï¼Ÿ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">aachuanpu</span><br><span class="line">name222</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¦‚ä¸Šæ‰€è§ï¼šå°†å¯¹è±¡åºåˆ—åŒ–ä¹‹åï¼Œä¿®æ”¹é™æ€å˜é‡çš„å€¼ï¼Œå†å°†å¯¹è±¡ååºåˆ—åŒ–ï¼Œè¾“å‡ºçš„é™æ€å˜é‡çš„å€¼æ˜¯ä¿®æ”¹ä¹‹åçš„ã€‚å³åºåˆ—åŒ–ä¿å­˜çš„æ˜¯å¯¹è±¡çš„çŠ¶æ€ï¼Œé™æ€å˜é‡å±äºç±»ï¼Œå› æ­¤åºåˆ—åŒ–å¹¶ä¸ä¿å­˜é™æ€å˜é‡ã€‚</p>
</li>
</ul>
<h5 id="transientå…³é”®å­—ä¸è‡ªå®šä¹‰åºåˆ—åŒ–"><a href="#transientå…³é”®å­—ä¸è‡ªå®šä¹‰åºåˆ—åŒ–" class="headerlink" title="transientå…³é”®å­—ä¸è‡ªå®šä¹‰åºåˆ—åŒ–"></a>transientå…³é”®å­—ä¸è‡ªå®šä¹‰åºåˆ—åŒ–</h5><ul>
<li><p>å¯¹è±¡çš„åºåˆ—åŒ–æ˜¯å°†å¯¹è±¡ä¸­çš„æ•°æ®å†™å…¥æœ¬åœ°æ–‡ä»¶æˆ–è€…ç”¨äºç½‘ç»œä¼ è¾“çš„è¿‡ç¨‹ï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™ä¼šæœ‰ä¸€äº›æ•°æ®æ— éœ€è¿›è¡Œåºåˆ—åŒ–ä¿å­˜èµ·æ¥æˆ–è€…ä¼ è¾“å‡ºå»ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>transient</code>å…³é”®å­—ä¿®é¥°æˆå‘˜å˜é‡ã€‚é‚£ä¹ˆåœ¨Javaåºåˆ—åŒ–çš„æ—¶å€™å°±<strong>ä¸ä¼šä½¿ç”¨Javaæœ¬èº«çš„åºåˆ—åŒ–æ–¹å¼å¯¹å…¶è¿›è¡Œåºåˆ—åŒ–</strong>ã€‚ä½†æ˜¯æˆ‘ä»¬ä¾ç„¶å¯ä»¥è‡ªå®šä¹‰è‡ªå·±çš„åºåˆ—åŒ–è¡Œä¸ºå¯¹å…¶è¿›è¡Œåºåˆ—åŒ–ï¼</p>
<p><strong>è‡ªå®šä¹‰åºåˆ—åŒ–ï¼š</strong> å®šä¹‰è‡ªå·±çš„<code>writeObject</code>å’Œ<code>readObject</code>æ–¹æ³•</p>
</li>
<li><p>å¯¹äºä½¿ç”¨transientä¿®é¥°çš„æˆå‘˜å˜é‡ï¼Œå¯ä»¥ç¼–å†™<code>writeObject</code>å’Œ<code>readObject</code>æ–¹æ³•å®ç°å¯¹äºè¯¥æˆå‘˜å˜é‡(ä¸ä»…ä»…åªæ˜¯é’ˆå¯¹è¯¥æˆå‘˜å˜é‡)çš„è‡ªå®šä¹‰åºåˆ—åŒ–ã€‚åœ¨ç¼–å†™<code>writeObject</code>å’Œ<code>readObject</code>æ–¹æ³•çš„æ—¶å€™éœ€è¦æ³¨æ„çš„åœ°æ–¹åœ¨äºï¼šè¿™ä¿©æ–¹æ³•æ²¡æœ‰åœ¨Objectä¸­å®šä¹‰ï¼Œä¹Ÿæ²¡æœ‰åœ¨<code>Serializable</code>æ¥å£ä¸­å£°æ˜ï¼ŒJVMæ˜¯å¦‚ä½•è°ƒç”¨åˆ°è¿™ä¿©æ–¹æ³•çš„å‘¢ï¼Ÿç­”æ¡ˆæ˜¯é€šè¿‡åå°„ï¼Œå»æ ¹æ®æ–¹æ³•åå’Œå‚æ•°å¯»æ‰¾åˆ°ç›¸åº”çš„æ–¹æ³•ï¼Œæ‰¾åˆ°ä¹‹åä¼šè¢«ObjectOutputStreamè°ƒç”¨ï¼Œæ²¡æœ‰è¿™ä¿©æ–¹æ³•å°±è°ƒç”¨é»˜è®¤çš„åºåˆ—åŒ–å‘—ã€‚è¿˜æœ‰å°±æ˜¯å› ä¸ºObjectOutputStreamä½¿ç”¨getPrivateMethodï¼Œæ‰€ä»¥è¿™äº›æ–¹æ³•ä¸å¾—ä¸è¢«å£°æ˜ä¸ºpriateä»¥è‡³äºä¾›ObjectOutputStreamæ¥ä½¿ç”¨ã€‚</p>
</li>
<li><p>é€šè¿‡è¿™ç§æ–¹æ³•ï¼Œæˆ‘ä»¬å®ç°è‡ªå·±çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–å¯ä»¥å®ç°å¾ˆå¤šåœºæ™¯ä¸‹çš„éœ€æ±‚ã€‚æ¯”å¦‚ç½‘ç»œä¼ è¾“çš„æ—¶å€™å¯¹äºç‰¹æ®Šå­—æ®µè¿›è¡ŒåŠ å¯†ç­‰ç­‰ã€‚</p>
</li>
<li><p>å¦‚ä¸‹ï¼Œä½ ä¼šå‘ç°æˆ‘åœ¨è¿™ä¿©æ–¹æ³•ä¸­è°ƒç”¨äº†defaultWriteObject()å’ŒdefaultReadObject()ç”¨äºå¤„ç†æœªè¢«transientä¿®é¥°çš„æˆå‘˜å˜é‡ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestSerializable</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String staticName;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> String name;</span><br><span class="line">    TestSerializable() &#123;</span><br><span class="line">        age = <span class="number">20</span>;</span><br><span class="line">        name = <span class="string">"aachuanpu"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException </span>&#123;</span><br><span class="line">        TestSerializable test = <span class="keyword">new</span> TestSerializable();</span><br><span class="line">        TestSerializable.staticName = <span class="string">"name11111"</span>;</span><br><span class="line">        File file = <span class="keyword">new</span> File(<span class="string">"e:/test.txt"</span>);</span><br><span class="line">        ObjectOutputStream out = <span class="keyword">new</span> ObjectOutputStream(<span class="keyword">new</span> FileOutputStream(file));</span><br><span class="line">        out.writeObject(test);</span><br><span class="line">        TestSerializable.staticName = <span class="string">"name222"</span>;</span><br><span class="line">        ObjectInputStream in = <span class="keyword">new</span> ObjectInputStream(<span class="keyword">new</span> FileInputStream(file));</span><br><span class="line">        TestSerializable newTest = (TestSerializable) in.readObject();</span><br><span class="line">        System.out.println(newTest.name);</span><br><span class="line">        System.out.println(TestSerializable.staticName);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">writeObject</span><span class="params">(ObjectOutputStream oos)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        oos.defaultWriteObject();</span><br><span class="line">        name = <span class="string">"è‡ªå®šä¹‰åç§°"</span>;</span><br><span class="line">        oos.writeObject(name);</span><br><span class="line">        System.out.println(<span class="string">"è°ƒç”¨writeObject"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">readObject</span><span class="params">(ObjectInputStream ois)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException </span>&#123;</span><br><span class="line">        ois.defaultReadObject();</span><br><span class="line">        String name = (String) ois.readObject();</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        System.out.println(<span class="string">"è¯»å‡ºçš„name="</span> + name);</span><br><span class="line">        System.out.println(<span class="string">"è°ƒç”¨readObject"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è°ƒç”¨writeObject</span><br><span class="line">è¯»å‡ºçš„name=è‡ªå®šä¹‰åç§°</span><br><span class="line">è°ƒç”¨readObject</span><br><span class="line">è‡ªå®šä¹‰åç§°</span><br><span class="line">name222</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="çˆ¶ç±»çš„åºåˆ—åŒ–"><a href="#çˆ¶ç±»çš„åºåˆ—åŒ–" class="headerlink" title="çˆ¶ç±»çš„åºåˆ—åŒ–"></a>çˆ¶ç±»çš„åºåˆ—åŒ–</h5><ul>
<li>ä¸€ä¸ªå­ç±»å®ç°äº† Serializable æ¥å£ï¼Œå®ƒçš„çˆ¶ç±»éƒ½æ²¡æœ‰å®ç° Serializable æ¥å£ï¼Œåºåˆ—åŒ–è¯¥å­ç±»å¯¹è±¡ï¼Œç„¶åååºåˆ—åŒ–åè¾“å‡ºçˆ¶ç±»å®šä¹‰çš„æŸå˜é‡çš„æ•°å€¼ï¼Œè¯¥å˜é‡æ•°å€¼ä¸åºåˆ—åŒ–æ—¶çš„æ•°å€¼ä¸åŒã€‚è¦æƒ³å°†çˆ¶ç±»å¯¹è±¡ä¹Ÿåºåˆ—åŒ–ï¼Œå°±éœ€è¦è®©çˆ¶ç±»ä¹Ÿå®ç°Serializable æ¥å£ã€‚å¦‚æœçˆ¶ç±»ä¸å®ç°çš„è¯çš„ï¼Œå°±éœ€è¦æœ‰é»˜è®¤çš„æ— å‚çš„æ„é€ å‡½æ•°ã€‚ åœ¨çˆ¶ç±»æ²¡æœ‰å®ç° Serializable æ¥å£æ—¶ï¼Œè™šæ‹Ÿæœºæ˜¯ä¸ä¼šåºåˆ—åŒ–çˆ¶å¯¹è±¡çš„ï¼Œè€Œä¸€ä¸ª Java å¯¹è±¡çš„æ„é€ å¿…é¡»å…ˆæœ‰çˆ¶å¯¹è±¡ï¼Œæ‰æœ‰å­å¯¹è±¡ï¼Œååºåˆ—åŒ–ä¹Ÿä¸ä¾‹å¤–ã€‚æ‰€ä»¥ååºåˆ—åŒ–æ—¶ï¼Œä¸ºäº†æ„é€ çˆ¶å¯¹è±¡ï¼Œåªèƒ½è°ƒç”¨çˆ¶ç±»çš„æ— å‚æ„é€ å‡½æ•°ä½œä¸ºé»˜è®¤çš„çˆ¶å¯¹è±¡ã€‚å› æ­¤å½“æˆ‘ä»¬å– çˆ¶å¯¹è±¡çš„å˜é‡å€¼æ—¶ï¼Œå®ƒçš„å€¼æ˜¯è°ƒç”¨çˆ¶ç±»æ— å‚æ„é€ å‡½æ•°åçš„å€¼ã€‚å¦‚æœä½ è€ƒè™‘åˆ°è¿™ç§åºåˆ—åŒ–çš„æƒ…å†µï¼Œåœ¨çˆ¶ç±»æ— å‚æ„é€ å‡½æ•°ä¸­å¯¹å˜é‡è¿›è¡Œåˆå§‹åŒ–ï¼Œå¦åˆ™çš„è¯ï¼Œçˆ¶ç±»å˜é‡å€¼éƒ½ æ˜¯é»˜è®¤å£°æ˜çš„å€¼ã€‚</li>
</ul>
<h5 id="å¸¸é—®ï¼šArrayListä¸­æ•°ç»„ä½¿ç”¨transientä¿®é¥°ä¸ºä½•è¿˜èƒ½è¢«åºåˆ—åŒ–"><a href="#å¸¸é—®ï¼šArrayListä¸­æ•°ç»„ä½¿ç”¨transientä¿®é¥°ä¸ºä½•è¿˜èƒ½è¢«åºåˆ—åŒ–" class="headerlink" title="å¸¸é—®ï¼šArrayListä¸­æ•°ç»„ä½¿ç”¨transientä¿®é¥°ä¸ºä½•è¿˜èƒ½è¢«åºåˆ—åŒ–"></a>å¸¸é—®ï¼šArrayListä¸­æ•°ç»„ä½¿ç”¨transientä¿®é¥°ä¸ºä½•è¿˜èƒ½è¢«åºåˆ—åŒ–</h5><p>  <strong>ArrayListæºç ï¼š</strong><br>  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The array buffer into which the elements of the ArrayList are stored.</span></span><br><span class="line"><span class="comment"> * The capacity of the ArrayList is the length of this array buffer. Any</span></span><br><span class="line"><span class="comment"> * empty ArrayList with elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span></span><br><span class="line"><span class="comment"> * will be expanded to DEFAULT_CAPACITY when the first element is added.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">transient</span> Object[] elementData; <span class="comment">// non-private to simplify nested class access</span></span><br></pre></td></tr></table></figure></p>
<p>  transientç”¨æ¥è¡¨ç¤ºä¸€ä¸ªåŸŸä¸æ˜¯è¯¥å¯¹è±¡åºè¡ŒåŒ–çš„ä¸€éƒ¨åˆ†ï¼Œå½“ä¸€ä¸ªå¯¹è±¡è¢«åºè¡ŒåŒ–çš„æ—¶å€™ï¼Œtransientä¿®é¥°çš„å˜é‡çš„å€¼æ˜¯ä¸åŒ…æ‹¬åœ¨åºè¡ŒåŒ–çš„è¡¨ç¤ºä¸­çš„ã€‚ä½†æ˜¯ArrayListåˆæ˜¯å¯åºè¡ŒåŒ–çš„ç±»ï¼ŒelementDataæ˜¯ArrayListå…·ä½“å­˜æ”¾å…ƒç´ çš„æˆå‘˜ï¼Œç”¨transientæ¥ä¿®é¥°elementDataï¼Œéœ€è¦å®ç°è‡ªå·±çš„åºåˆ—åŒ–æ–¹å¼å»å¤„ç†ã€‚å³å¯¹äºæ•°ç»„ä¸­å¤šä½™çš„ç©ºé—´ä¸å»è¿›è¡Œåºåˆ—åŒ–ã€‚å¦‚ä¸‹ï¼š<br>  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Save the state of the &lt;tt&gt;ArrayList&lt;/tt&gt; instance to a stream (that</span></span><br><span class="line"><span class="comment"> * is, serialize it).</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@serialData</span> The length of the array backing the &lt;tt&gt;ArrayList&lt;/tt&gt;</span></span><br><span class="line"><span class="comment"> *             instance is emitted (int), followed by all of its elements</span></span><br><span class="line"><span class="comment"> *             (each an &lt;tt&gt;Object&lt;/tt&gt;) in the proper order.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">writeObject</span><span class="params">(java.io.ObjectOutputStream s)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> java.io.IOException</span>&#123;</span><br><span class="line">    <span class="comment">// Write out element count, and any hidden stuff</span></span><br><span class="line">    <span class="keyword">int</span> expectedModCount = modCount;</span><br><span class="line">    s.defaultWriteObject();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Write out size as capacity for behavioural compatibility with clone()</span></span><br><span class="line">    s.writeInt(size);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Write out all elements in the proper order.</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;size; i++) &#123;</span><br><span class="line">        s.writeObject(elementData[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (modCount != expectedModCount) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Reconstitute the &lt;tt&gt;ArrayList&lt;/tt&gt; instance from a stream (that is,</span></span><br><span class="line"><span class="comment"> * deserialize it).</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">readObject</span><span class="params">(java.io.ObjectInputStream s)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> java.io.IOException, ClassNotFoundException </span>&#123;</span><br><span class="line">    elementData = EMPTY_ELEMENTDATA;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Read in size, and any hidden stuff</span></span><br><span class="line">    s.defaultReadObject();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Read in capacity</span></span><br><span class="line">    s.readInt(); <span class="comment">// ignored</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (size &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// be like clone(), allocate array based upon size not capacity</span></span><br><span class="line">        ensureCapacityInternal(size);</span><br><span class="line"></span><br><span class="line">        Object[] a = elementData;</span><br><span class="line">        <span class="comment">// Read in all elements in the proper order.</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;size; i++) &#123;</span><br><span class="line">            a[i] = s.readObject();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>  <strong>elementDataæ˜¯ä¸€ä¸ªç¼“å­˜æ•°ç»„ï¼Œå®ƒé€šå¸¸ä¼šé¢„ç•™ä¸€äº›å®¹é‡ï¼Œç­‰å®¹é‡ä¸è¶³æ—¶å†æ‰©å……å®¹é‡ï¼Œé‚£ä¹ˆæœ‰äº›ç©ºé—´å¯èƒ½å°±æ²¡æœ‰å®é™…å­˜å‚¨å…ƒç´ ï¼Œé‡‡ç”¨ä¸Šè¯‰çš„æ–¹å¼æ¥å®ç°åºåˆ—åŒ–æ—¶ï¼Œå°±å¯ä»¥ä¿è¯åªåºåˆ—åŒ–å®é™…å­˜å‚¨çš„é‚£äº›å…ƒç´ ï¼Œè€Œä¸æ˜¯æ•´ä¸ªæ•°ç»„ï¼Œä»è€ŒèŠ‚çœç©ºé—´å’Œæ—¶é—´ã€‚</strong></p>
<h5 id="å…¶ä½™è¡¥å……"><a href="#å…¶ä½™è¡¥å……" class="headerlink" title="å…¶ä½™è¡¥å……"></a>å…¶ä½™è¡¥å……</h5><p><a href="https://bluepopopo.iteye.com/blog/486548" target="_blank" rel="noopener">æ¥è‡ªæ–‡ç« </a> â† ç‚¹å‡»é“¾æ¥æŸ¥çœ‹å‚è€ƒåšå®¢</p>
<blockquote>
<p>1.Writeçš„é¡ºåºå’Œreadçš„é¡ºåºéœ€è¦å¯¹åº”ï¼Œè­¬å¦‚æœ‰å¤šä¸ªå­—æ®µéƒ½ç”¨wirteIntä¸€ä¸€å†™å…¥æµä¸­ï¼Œé‚£ä¹ˆreadIntéœ€è¦æŒ‰ç…§é¡ºåºå°†å…¶èµ‹å€¼;</p>
</blockquote>
<blockquote>
<p>2.Externalizable,è¯¥æ¥å£æ˜¯ç»§æ‰¿äºSerializable ,æ‰€ä»¥å®ç°åºåˆ—åŒ–æœ‰ä¸¤ç§æ–¹å¼ã€‚åŒºåˆ«åœ¨äºExternalizableå¤šå£°æ˜äº†ä¸¤ä¸ªæ–¹æ³•readExternalå’ŒwriteExternalï¼Œå­ç±»å¿…é¡»å®ç°äºŒè€…ã€‚Serializableæ˜¯å†…å»ºæ”¯æŒçš„ä¹Ÿå°±æ˜¯ç›´æ¥implementå³å¯ï¼Œä½†Externalizableçš„å®ç°ç±»å¿…é¡»æä¾›readExternalå’ŒwriteExternalå®ç°ã€‚å¯¹äºSerializableæ¥è¯´ï¼ŒJavaè‡ªå·±å»ºç«‹å¯¹è±¡å›¾å’Œå­—æ®µè¿›è¡Œå¯¹è±¡åºåˆ—åŒ–ï¼Œå¯èƒ½ä¼šå ç”¨æ›´å¤šç©ºé—´ã€‚è€ŒExternalizableåˆ™å®Œå…¨éœ€è¦ç¨‹åºå‘˜è‡ªå·±æ§åˆ¶å¦‚ä½•å†™/è¯»ï¼Œéº»çƒ¦ä½†å¯ä»¥æœ‰æ•ˆæ§åˆ¶åºåˆ—åŒ–çš„å­˜å‚¨çš„å†…å®¹ã€‚</p>
</blockquote>
<blockquote>
<p>3.æ­£å¦‚Effectvie Javaä¸­æåˆ°çš„ï¼Œåºåˆ—åŒ–å°±å¦‚åŒå¦å¤–ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œåªä¸è¿‡æ˜¯æœ‰ç”±streamè¿›è¡Œåˆ›å»ºçš„ã€‚å¦‚æœå­—æ®µæœ‰ä¸€äº›æ¡ä»¶é™åˆ¶çš„ï¼Œç‰¹åˆ«æ˜¯éå¯å˜çš„ç±»å®šä¹‰äº†å¯å˜çš„å­—æ®µä¼šååºåˆ—åŒ–å¯èƒ½ä¼šæœ‰é—®é¢˜ã€‚å¯ä»¥åœ¨readObjectæ–¹æ³•ä¸­æ·»åŠ æ¡ä»¶é™åˆ¶ï¼Œä¹Ÿå¯ä»¥åœ¨readResolveä¸­åšã€‚å‚è€ƒ56æ¡â€œä¿æŠ¤æ€§çš„ç¼–å†™readObjectâ€å’Œâ€œæä¾›ä¸€ä¸ªreadResolveæ–¹æ³•â€ã€‚</p>
</blockquote>
<blockquote>
<p>4.å½“æœ‰éå¸¸å¤æ‚çš„å¯¹è±¡éœ€è¦æä¾›deep cloneæ—¶ï¼Œå¯ä»¥è€ƒè™‘å°†å…¶å£°æ˜ä¸ºå¯åºåˆ—åŒ–ï¼Œä¸è¿‡ç¼ºç‚¹ä¹Ÿæ˜¾è€Œæ˜“è§ï¼Œæ€§èƒ½å¼€é”€ã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>JavaåŸºç¡€</category>
      </categories>
      <tags>
        <tag>JavaåŸºç¡€</tag>
        <tag>åºåˆ—åŒ–</tag>
        <tag>transientå…³é”®å­—</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨[å¹•å¸ƒ]åˆ›å»ºJavaçŸ¥è¯†ä½“ç³»æ€ç»´å¯¼å›¾</title>
    <url>/blog/20190507/%E4%BD%BF%E7%94%A8-%E5%B9%95%E5%B8%83-%E5%88%9B%E5%BB%BAJava%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/</url>
    <content><![CDATA[<p><img src="/blog/20190507/ä½¿ç”¨-å¹•å¸ƒ-åˆ›å»ºJavaçŸ¥è¯†ä½“ç³»æ€ç»´å¯¼å›¾/java_core.png" alt="Javaæ€ç»´å¯¼å›¾"></p>
<a id="more"></a>
<p><strong>æ˜¨å¤©åœ¨V2EXä¸Šé€›çš„æ—¶å€™çªç„¶å‘ç°æœ‰äººæ¨èä¸€ä¸ªå¾ˆä¸é”™çš„ä¸œè¥¿â€”â€”å¹•å¸ƒã€‚æˆ‘æœ¬èº«å°±æ˜¯ä¸€ä¸ªå¯¹ä¸€äº›åç§°å¾ˆæ•æ„Ÿçš„äººï¼Œçœ‹åˆ°è¿™ä¸ªåå­—å°±å¾ˆæƒ³çŸ¥é“è¿™åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Œæ²¡æƒ³åˆ°ç«Ÿå¶ç„¶å‘ç°è¿™ä¹ˆä¸€ä¸ªå¥½ä¸œè¥¿ã€‚</strong></p>
<p>å¹•å¸ƒæ˜¯ä¸€ä¸ªåˆ¶ä½œç¬”è®°ä¸è®°å½•äº‹ä»¶çš„æ–‡æœ¬ç¼–è¾‘å·¥å…·ï¼ˆè¿™æ ·è¯´è¦æŠŠå¹•å¸ƒå¼€å‘è€…æ°”æ­»äº†å“ˆå“ˆï¼‰ã€‚ç¼–è¾‘è§†å›¾å¦‚ä¸‹ï¼š<br><img src="/blog/20190507/ä½¿ç”¨-å¹•å¸ƒ-åˆ›å»ºJavaçŸ¥è¯†ä½“ç³»æ€ç»´å¯¼å›¾/mb.png" alt="å¹•å¸ƒ"><br>ä¸€é”®è½¬æ¢æˆæ€ç»´å¯¼å›¾å°±æ˜¯æœ¬æ–‡æœ€ä¸Šé¢çš„é‚£ä¸ªå›¾ç‰‡ã€‚</p>
<p>å…¶å®æˆ‘ä¸ªäººæ˜¯æ¯”è¾ƒå–œæ¬¢å¹•å¸ƒçš„ä¸€é”®è½¬æ¢æ€ç»´å¯¼å›¾çš„åŠŸèƒ½ï¼Œä»¥åŠå®ƒçš„å¯¼å‡º.mmæ–‡ä»¶çš„åŠŸèƒ½ï¼Œè€Œä¸”å¯ä»¥è‡ªåŠ¨åŒæ­¥äº‘ç«¯ã€‚è¿™æ ·å°±å¯ä»¥éšæ—¶éšåœ°æ— è®ºæ˜¯åœ¨ç”µè„‘è¿˜æ˜¯æ‰‹æœºä¸Šéƒ½å¯ä»¥æ‰“å¼€æ¥ç¼–è¾‘ä»¥åŠæŸ¥çœ‹äº†ã€‚</p>
<p>è¿™é‡Œæ˜¯æˆ‘è‡ªå·±ç¼–å†™çš„<a href="https://mubu.com/doc/hpBd1e5h6z" target="_blank" rel="noopener">JavaçŸ¥è¯†ä½“ç³»</a>ï¼Œè¿˜æ²¡æœ‰å†™çš„å¾ˆå®Œæ•´ã€‚å¸Œæœ›è‡ªå·±èƒ½å¤ŸåšæŒä¸æ–­æ›´æ–°çŸ¥è¯†ç‚¹ï¼Œæ€»ç»“ä¸å·©å›ºè‡ªå·±çš„æŠ€æœ¯æ°´å¹³ï¼</p>
]]></content>
      <categories>
        <category>å¼€å‘å·¥å…·</category>
      </categories>
      <tags>
        <tag>å¼€å‘å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title>äºŒå‰æœç´¢æ ‘ä¸å®Œå…¨äºŒå‰æ ‘</title>
    <url>/blog/20190504/%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E4%B8%8E%E5%AE%8C%E5%85%A8%E4%BA%8C%E5%8F%89%E6%A0%91/</url>
    <content><![CDATA[<h4 id="ä»€ä¹ˆæ˜¯äºŒå‰æ ‘ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯äºŒå‰æ ‘ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯äºŒå‰æ ‘ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯äºŒå‰æ ‘ï¼Ÿ</h4><p>åœ¨æ•°æ®ç»“æ„ä¸­ï¼Œå¯¹äºæ ‘ï¼Œæ¯ä¸€ä¸ªåˆ†æ”¯ï¼Œç§°ä¹‹ä¸ºä¸€ä¸ªåº¦ã€‚é‚£ä¹ˆï¼Œåº¦æœ€å¤§ä¸º2çš„æ ‘æˆ‘ä»¬ç§°ä¹‹ä¸ºäºŒå‰æ ‘ã€‚é€šå¸¸å­æ ‘æˆ‘ä»¬ä¼šç§°ä¹‹ä¸ºå·¦å­æ ‘å’Œå³å­æ ‘ã€‚äºŒå‰æ ‘é€šå¸¸ç”¨äºå®ç°äºŒå‰æŸ¥æ‰¾æ ‘å’ŒäºŒå‰å †ã€‚é‚£ä¹ˆåœ¨Javaä¸­å¦‚ä½•å®šä¹‰ä¸€ä¸ªäºŒå‰æ ‘èŠ‚ç‚¹ï¼Ÿ</p>
<p>é¦–å…ˆï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹éœ€è¦æœ‰ä¸€ä¸ªå€¼åŸŸã€‚å…¶æ¬¡ï¼Œå…¶è¿˜åº”è¯¥æŒæœ‰ä¸¤ä¸ªæ ‘èŠ‚ç‚¹çš„å¼•ç”¨ï¼Œå³æŒ‡å‘è‡ªå·±çš„å·¦å­æ ‘å’Œè‡ªå·±çš„å³å­æ ‘ã€‚</p>
<a id="more"></a>
<p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> val;</span><br><span class="line">    TreeNode left;</span><br><span class="line">    TreeNode right;</span><br><span class="line"></span><br><span class="line">    TreeNode() &#123;</span><br><span class="line">        <span class="keyword">this</span>.val = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.left = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">this</span>.right = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    TreeNode(<span class="keyword">int</span> val) &#123;</span><br><span class="line">        <span class="keyword">this</span>.val = val;</span><br><span class="line">        <span class="keyword">this</span>.left = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">this</span>.right = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"("</span> + val + <span class="string">")[left:"</span> + left + <span class="string">",right:"</span> + right + <span class="string">"]"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="å¦‚ä½•åˆ›å»ºäºŒå‰æ ‘"><a href="#å¦‚ä½•åˆ›å»ºäºŒå‰æ ‘" class="headerlink" title="å¦‚ä½•åˆ›å»ºäºŒå‰æ ‘"></a>å¦‚ä½•åˆ›å»ºäºŒå‰æ ‘</h4><p>äºŒå‰æ ‘çš„èŠ‚ç‚¹çš„æ•°æ®ç»“æ„å·²ç»ç”¨Javaä»£ç è¡¨ç¤ºå‡ºæ¥äº†ï¼Œé‚£ä¹ˆå¦‚ä½•ç”¨è¿™äº›èŠ‚ç‚¹æ¥æ„é€ å‡ºä¸€ä¸ªå®Œæ•´çš„äºŒå‰æ ‘å‘¢ï¼Ÿè¯·çœ‹ä¸‹å›¾äºŒå‰æ ‘çš„ç»“æ„ï¼š</p>
<p><img src="/blog/20190504/äºŒå‰æœç´¢æ ‘ä¸å®Œå…¨äºŒå‰æ ‘/ecs.png" alt="äºŒå‰æ ‘ç»“æ„"></p>
<p>å¦‚ä¸Šå›¾ï¼Œå¯¹äºä¸€ä¸ªäºŒå‰æ ‘ï¼Œéœ€è¦æœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ã€‚æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šæœ‰ä¸¤è¯¾å­æ ‘ï¼Œåˆ†åˆ«åŒºåˆ†å·¦å­æ ‘è¿˜æ˜¯å³å­æ ‘ã€‚å³å°±ç®—æœ‰ä¸€ä¸ªå­æ ‘ï¼Œè¿˜æ˜¯éœ€è¦åŒºåˆ†æ˜¯å·¦å­æ ‘è¿˜æ˜¯å³å­æ ‘ã€‚åˆ›å»ºäºŒå‰æ ‘æˆ‘ä»¬åªéœ€è¦å°†æ¯ä¸€ä¸ªæ ‘èŠ‚ç‚¹æŒ‰ç…§è¿™æ ·çš„è§„åˆ™è¿æ¥èµ·æ¥å³å¯ã€‚</p>
<h5 id="åˆ›å»ºäºŒå‰æœç´¢æ ‘"><a href="#åˆ›å»ºäºŒå‰æœç´¢æ ‘" class="headerlink" title="åˆ›å»ºäºŒå‰æœç´¢æ ‘"></a>åˆ›å»ºäºŒå‰æœç´¢æ ‘</h5><ul>
<li>æ¦‚å¿µï¼šäºŒå‰æœç´¢æ ‘ï¼Œåˆå«äºŒå‰æŸ¥æ‰¾æ ‘ã€‚ä»–æ˜¯ä¸€æ£µç‰¹æ®Šçš„äºŒå‰æ ‘ï¼Œå¯¹äºäºŒå‰æœç´¢æ ‘ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå®ƒçš„å·¦å­æ ‘éƒ½ä¸å¤§äºçˆ¶èŠ‚ç‚¹ï¼Œå³å­æ ‘éƒ½ä¸å°äºçˆ¶èŠ‚ç‚¹ã€‚ç©ºæ ‘æ˜¯ç‰¹æ®Šçš„äºŒå‰æœç´¢æ ‘ã€‚</li>
<li><p>åˆ›å»ºï¼šæœ¬ä¾‹æ ¹æ®ä¸€ä¸ªå·²æœ‰çš„æ•°ç»„è¿›è¡ŒäºŒå‰æ ‘çš„åˆ›å»ºï¼ŒåŸºæœ¬çš„æ€è·¯å°±æ˜¯éå†æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ åˆ›å»ºä¸€ä¸ªæ ‘èŠ‚ç‚¹ï¼Œç„¶åç»§ç»­æ ¹æ®èŠ‚ç‚¹å€¼å¾—å¤§å°å‘ä¸‹éå†åˆ¤æ–­ï¼Œæœ€åå°†å€¼åŸŸå°çš„æ”¾åœ¨èŠ‚ç‚¹çš„å·¦å­æ ‘ï¼Œå°†å€¼å¤§çš„æ”¾åœ¨èŠ‚ç‚¹çš„å³å­æ ‘å³å¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TreeNode <span class="title">createSearchTree</span><span class="params">(<span class="keyword">int</span>[] a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (a.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        TreeNode root = <span class="keyword">new</span> TreeNode(a[<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; a.length; i++) &#123;</span><br><span class="line">            TreeNode c = root;</span><br><span class="line">            TreeNode p = c;</span><br><span class="line">            TreeNode q = <span class="keyword">new</span> TreeNode(a[i]);</span><br><span class="line">            <span class="keyword">while</span> (c != <span class="keyword">null</span>) &#123;</span><br><span class="line">                p = c;</span><br><span class="line">                <span class="keyword">if</span> (a[i] &lt;= c.val) &#123;</span><br><span class="line">                    c = c.left;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    c = c.right;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (q.val &lt; p.val) &#123;</span><br><span class="line">                p.left = q;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                p.right = q;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç‰¹ç‚¹ï¼šäºŒå‰æœç´¢æ ‘åœ¨åº”ç”¨äºç»å¸¸æŸ¥æ‰¾å…ƒç´ çš„åœºæ™¯æ•ˆç‡ä¼šæ¯”è¾ƒå¿«ï¼Œå› ä¸ºå®ƒçš„æ•°æ®ç»“æ„ç±»ä¼¼äºäºŒåˆ†æŸ¥æ‰¾ï¼ŒæŸ¥æ‰¾å…ƒç´ æ—¶æ ¹æ®å…¶ç‰¹æ€§å‘ä¸‹æœç´¢å³å¯ã€‚</p>
</li>
</ul>
<h5 id="åˆ›å»ºå®Œå…¨äºŒå‰æ ‘"><a href="#åˆ›å»ºå®Œå…¨äºŒå‰æ ‘" class="headerlink" title="åˆ›å»ºå®Œå…¨äºŒå‰æ ‘"></a>åˆ›å»ºå®Œå…¨äºŒå‰æ ‘</h5><ul>
<li><p>æ¦‚å¿µï¼šé¦–å…ˆä»‹ç»ä¸€ä¸‹æ»¡äºŒå‰æ ‘ï¼šå³æ ‘ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹é™¤äº†å¶èŠ‚ç‚¹éƒ½æœ‰å·¦å­æ ‘å’Œå³å­æ ‘ï¼Œå¶èŠ‚ç‚¹çš„å·¦å³å­æ ‘éƒ½ä¸ºç©ºï¼Œè¿™æ ·çš„æ ‘ç§°ä¹‹ä¸ºæ»¡äºŒå‰æ ‘ã€‚è€Œå¯¹äºä¸€æ£µå®Œå…¨äºŒå‰æ ‘ï¼Œåªæœ‰æ ‘çš„æœ€åä¸€å±‚è¿ç»­ç¼ºå¤±å³è¾¹èŠ‚ç‚¹ã€‚æ»¡äºŒå‰æ ‘ä¸€å®šæ˜¯å®Œå…¨äºŒå‰æ ‘ï¼Œåä¹‹åˆ™ä¸ä¸€å®šæˆç«‹ã€‚å¦‚å›¾åˆ†åˆ«æ˜¯ä¸€æ£µæ»¡äºŒå‰æ ‘å’Œä¸€æ£µå®Œå…¨äºŒå‰æ ‘ï¼š<br><img src="/blog/20190504/äºŒå‰æœç´¢æ ‘ä¸å®Œå…¨äºŒå‰æ ‘/mecs.png" alt="æ»¡äºŒå‰æ ‘"><br><img src="/blog/20190504/äºŒå‰æœç´¢æ ‘ä¸å®Œå…¨äºŒå‰æ ‘/wqecs.png" alt="å®Œå…¨äºŒå‰æ ‘"></p>
</li>
<li><p>åˆ›å»ºï¼š å®Œå…¨äºŒå‰æ ‘çš„åˆ›å»ºéœ€è¦æŒ‰å±‚å»åˆ›å»ºã€‚è¿™è¾¹æˆ‘ä»¬å€ŸåŠ©é˜Ÿåˆ—çš„ç‰¹ç‚¹ï¼Œå°†äºŒå‰æ ‘çš„èŠ‚ç‚¹è¿æ¥èµ·æ¥ï¼Œæ„é€ æˆå®Œå…¨äºŒå‰æ ‘</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TreeNode <span class="title">createWholeTree</span><span class="params">(<span class="keyword">int</span>[] a)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (a.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            LinkedList&lt;TreeNode&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">            TreeNode root = <span class="keyword">new</span> TreeNode(a[<span class="number">0</span>]);</span><br><span class="line">            queue.add(root);</span><br><span class="line">            <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; a.length; i++) &#123;</span><br><span class="line">                TreeNode curn = queue.get(index);</span><br><span class="line">                TreeNode ti = <span class="keyword">new</span> TreeNode(a[i]);</span><br><span class="line">                queue.add(ti);</span><br><span class="line">                <span class="keyword">if</span> (curn.left == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    curn.left = ti;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (curn.right == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    curn.right = ti;</span><br><span class="line">                    index++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> root;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç‰¹ç‚¹ï¼šå¯¹äºä¸€ä¸ªhå±‚çš„å®Œå…¨äºŒå‰æ ‘ï¼Œå‰h-1å±‚æ˜¯æ»¡çš„ï¼Œç¬¬hå±‚è¿ç»­ç¼ºå¤±å³è¾¹èŠ‚ç‚¹ã€‚æ‰€ä»¥å¶å­ç»“ç‚¹åªèƒ½å‡ºç°åœ¨æœ€ä¸‹å±‚å’Œæ¬¡ä¸‹å±‚ï¼Œæœ€ä¸‹å±‚çš„å¶å­ç»“ç‚¹é›†ä¸­åœ¨æ ‘çš„å·¦éƒ¨ï¼Œå€’æ•°ç¬¬äºŒå±‚è‹¥å­˜åœ¨å¶å­ç»“ç‚¹ï¼Œä¸€å®šåœ¨å³éƒ¨è¿ç»­ä½ç½®ï¼Œå¦‚æœç»“ç‚¹åº¦ä¸º1ï¼Œåˆ™è¯¥ç»“ç‚¹åªæœ‰å·¦å­©å­ï¼Œå³æ²¡æœ‰å³å­æ ‘ï¼ŒåŒæ ·ç»“ç‚¹æ•°ç›®çš„äºŒå‰æ ‘ï¼Œå®Œå…¨äºŒå‰æ ‘æ·±åº¦æœ€å°ã€‚</p>
</li>
</ul>
<h4 id="äºŒå‰æ ‘çš„éå†"><a href="#äºŒå‰æ ‘çš„éå†" class="headerlink" title="äºŒå‰æ ‘çš„éå†"></a>äºŒå‰æ ‘çš„éå†</h4><ul>
<li><p>å‰ä¸­ååºé€’å½’éå†ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€’å½’å…ˆåºéå†äºŒå‰æ ‘ å·¦-æ ¹-å³</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">frontPrintOutTree</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> != root) &#123;</span><br><span class="line">        System.out.print(root.val);</span><br><span class="line">        frontPrintOutTree(root.left);</span><br><span class="line">        frontPrintOutTree(root.right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€’å½’ä¸­åºéå†äºŒå‰æ ‘ å·¦-æ ¹-å³</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">midPrintOutTree</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> != root) &#123;</span><br><span class="line">        midPrintOutTree(root.left);</span><br><span class="line">        System.out.print(root.val);</span><br><span class="line">        midPrintOutTree(root.right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€’å½’å…ˆåºéå†äºŒå‰æ ‘ å·¦-æ ¹-å³</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">lastPrintOutTree</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> != root) &#123;</span><br><span class="line">        lastPrintOutTree(root.left);</span><br><span class="line">        lastPrintOutTree(root.right);</span><br><span class="line">        System.out.print(root.val);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŒ‰å±‚éå†ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŒ‰å±‚éå†äºŒå‰æ ‘</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">levelPrintOutTree</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> != root) &#123;</span><br><span class="line">        LinkedList&lt;TreeNode&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        queue.add(root);</span><br><span class="line">        TreeNode i = root;</span><br><span class="line">        <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">                queue.add(i.left);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (i.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">                queue.add(i.right);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.print(i.val);</span><br><span class="line">            queue.poll();</span><br><span class="line">            i = queue.peek();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="ä»¥ä¸Šä»£ç çš„githubåœ°å€ï¼šGITHUBåœ°å€"><a href="#ä»¥ä¸Šä»£ç çš„githubåœ°å€ï¼šGITHUBåœ°å€" class="headerlink" title="ä»¥ä¸Šä»£ç çš„githubåœ°å€ï¼šGITHUBåœ°å€"></a>ä»¥ä¸Šä»£ç çš„githubåœ°å€ï¼š<a href="https://github.com/Fatezhang/DataStructureAndAlgorithm/tree/master/src/main/java/DataStructure/Tree" target="_blank" rel="noopener">GITHUBåœ°å€</a></h4>]]></content>
      <categories>
        <category>æ•°æ®ç»“æ„ä¸ç®—æ³•</category>
        <category>äºŒå‰æ ‘</category>
      </categories>
      <tags>
        <tag>æ•°æ®ç»“æ„ä¸ç®—æ³•</tag>
        <tag>äºŒå‰æ ‘</tag>
      </tags>
  </entry>
  <entry>
    <title>å¦‚ä½•åœ¨SpringbootæœåŠ¡å¯åŠ¨ä¹‹åæ‰§è¡Œä¸€äº›ä»£ç (ä¸‰ç§æ–¹å¼)</title>
    <url>/blog/20190419/%E5%A6%82%E4%BD%95%E5%9C%A8springboot%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8%E4%B9%8B%E5%90%8E%E6%89%A7%E8%A1%8C%E4%B8%80%E4%BA%9B%E4%BB%A3%E7%A0%81(%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F)/</url>
    <content><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>  é€šå¸¸çš„æˆ‘ä»¬çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°é‚£ç§åœ¨æœåŠ¡ä¸€å¯åŠ¨å°±éœ€è¦è‡ªåŠ¨æ‰§è¡Œä¸€äº›ä¸šåŠ¡ä»£ç çš„æƒ…å†µã€‚æ¯”å¦‚å°†æ•°æ®åº“ä¸­çš„é…ç½®ä¿¡æ¯æˆ–è€…æ•°æ®å­—å…¸ä¹‹ç±»çš„ç¼“å­˜åˆ°redisï¼Œæˆ–è€…åœ¨æœåŠ¡å¯åŠ¨çš„æ—¶å€™å°†ä¸€äº›é…ç½®åŒ–çš„å®šæ—¶ä»»åŠ¡å¼€èµ·æ¥ã€‚å…³äºspring mvcæˆ–è€…springbootå¦‚ä½•åœ¨é¡¹ç›®å¯åŠ¨çš„æ—¶å€™å°±æ‰§è¡Œä¸€äº›ä»£ç ï¼Œæ–¹æ³•å…¶å®æœ‰å¾ˆå¤šï¼Œæˆ‘è¿™è¾¹ä»‹ç»ä¸€ä¸‹æˆ‘ä½¿ç”¨è¿‡çš„ä¸‰ç§ã€‚</p>
  <a id="more"></a>
<h4 id="1ã€-PostConstruct-æ³¨è§£"><a href="#1ã€-PostConstruct-æ³¨è§£" class="headerlink" title="1ã€@PostConstruct æ³¨è§£"></a>1ã€<code>@PostConstruct</code> æ³¨è§£</h4><p>ä»Java EE5è§„èŒƒå¼€å§‹ï¼ŒServletä¸­å¢åŠ äº†ä¸¤ä¸ªå½±å“Servletç”Ÿå‘½å‘¨æœŸçš„æ³¨è§£ï¼Œ<code>@PostConstruct</code>å’Œ<code>@PreDestroy</code>ï¼Œè¿™ä¸¤ä¸ªæ³¨è§£è¢«ç”¨æ¥ä¿®é¥°ä¸€ä¸ªéé™æ€çš„voidï¼ˆï¼‰æ–¹æ³•ã€‚<code>@PostConstruct</code>ä¼šåœ¨æ‰€åœ¨ç±»çš„æ„é€ å‡½æ•°æ‰§è¡Œä¹‹åæ‰§è¡Œï¼Œåœ¨init()æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œã€‚(<code>@PreDestroy</code>æ³¨è§£çš„æ–¹æ³•ä¼šåœ¨è¿™ä¸ªç±»çš„destory()æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œã€‚)</p>
<ul>
<li>ä½¿ç”¨ç¤ºä¾‹ï¼šåœ¨Springå®¹å™¨åŠ è½½ä¹‹åï¼Œæˆ‘éœ€è¦å¯åŠ¨å®šæ—¶ä»»åŠ¡å»åšä»»åŠ¡çš„å¤„ç†ï¼ˆæˆ‘çš„å®šæ—¶ä»»åŠ¡é‡‡ç”¨çš„æ˜¯è¯»å–æ•°æ®åº“é…ç½®çš„æ–¹å¼ï¼‰ã€‚åœ¨è¿™é‡Œæˆ‘ä½¿ç”¨<code>@PostConstruct</code> æŒ‡å®šäº†éœ€è¦å¯åŠ¨çš„æ–¹æ³•ã€‚<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span> <span class="comment">// æ³¨æ„ è¿™é‡Œå¿…é¡»æœ‰</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StartAllJobInit</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Logger logger = LoggerFactory.getLogger(getClass().getName());</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    JobInfoService jobInfoService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    JobTaskUtil jobTaskUtil;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span> <span class="comment">// æ„é€ å‡½æ•°ä¹‹åæ‰§è¡Œ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å®¹å™¨å¯åŠ¨åæ‰§è¡Œ"</span>);</span><br><span class="line">        startJob();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startJob</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;JobInfoBO&gt; list = jobInfoService.findList();</span><br><span class="line">        <span class="keyword">for</span> (JobInfoBO jobinfo :list) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(<span class="string">"0"</span>.equals(jobinfo.getStartWithrun()))&#123;</span><br><span class="line">                    logger.info(<span class="string">"ä»»åŠ¡&#123;&#125;æœªè®¾ç½®è‡ªåŠ¨å¯åŠ¨ã€‚"</span>, jobinfo.getJobName());</span><br><span class="line">                    jobInfoService.updateJobStatus(jobinfo.getId(), BasicsConstantManual.BASICS_SYS_JOB_STATUS_STOP);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    logger.info(<span class="string">"ä»»åŠ¡&#123;&#125;è®¾ç½®äº†è‡ªåŠ¨å¯åŠ¨ã€‚"</span>, jobinfo.getJobName());</span><br><span class="line">                    jobTaskUtil.addOrUpdateJob(jobinfo);</span><br><span class="line">                    jobInfoService.updateJobStatus(jobinfo.getId(), BasicsConstantManual.BASICS_SYS_JOB_STATUS_STARTING);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SchedulerException e) &#123;</span><br><span class="line">                logger.error(<span class="string">"æ‰§è¡Œå®šæ—¶ä»»åŠ¡å‡ºé”™ï¼Œä»»åŠ¡åç§° &#123;&#125; "</span>, jobinfo.getJobName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="2ã€å®ç°CommandLineRunneræ¥å£å¹¶é‡å†™run-æ–¹æ³•"><a href="#2ã€å®ç°CommandLineRunneræ¥å£å¹¶é‡å†™run-æ–¹æ³•" class="headerlink" title="2ã€å®ç°CommandLineRunneræ¥å£å¹¶é‡å†™run()æ–¹æ³•"></a>2ã€å®ç°<code>CommandLineRunner</code>æ¥å£å¹¶é‡å†™run()æ–¹æ³•</h4><p><code>CommandLineRunner</code>æ¥å£æ–‡æ¡£æè¿°å¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Interface used to indicate that a bean should &lt;em&gt;run&lt;/em&gt; when it is contained within</span></span><br><span class="line"><span class="comment"> * a &#123;<span class="doctag">@link</span> SpringApplication&#125;. Multiple &#123;<span class="doctag">@link</span> CommandLineRunner&#125; beans can be defined</span></span><br><span class="line"><span class="comment"> * within the same application context and can be ordered using the &#123;<span class="doctag">@link</span> Ordered&#125;</span></span><br><span class="line"><span class="comment"> * interface or &#123;<span class="doctag">@link</span> Order <span class="doctag">@Order</span>&#125; annotation.</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * If you need access to &#123;<span class="doctag">@link</span> ApplicationArguments&#125; instead of the raw String array</span></span><br><span class="line"><span class="comment"> * consider using &#123;<span class="doctag">@link</span> ApplicationRunner&#125;.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Dave Syer</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> ApplicationRunner</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CommandLineRunner</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Callback used to run the bean.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> args incoming main method arguments</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> Exception on error</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">(String... args)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å¦‚ä¸Šæ‰€è¯´ï¼šæ¥å£è¢«ç”¨ä½œåŠ å…¥Springå®¹å™¨ä¸­æ—¶æ‰§è¡Œrun(Stringâ€¦ args)æ–¹æ³•ï¼Œé€šè¿‡å‘½ä»¤è¡Œä¼ é€’å‚æ•°ã€‚SpringBootåœ¨é¡¹ç›®å¯åŠ¨åä¼šéå†æ‰€æœ‰å®ç°CommandLineRunnerçš„å®ä½“ç±»å¹¶æ‰§è¡Œrunæ–¹æ³•ï¼Œå¤šä¸ªå®ç°ç±»å¯ä»¥å¹¶å­˜å¹¶ä¸”æ ¹æ®orderæ³¨è§£æ’åºé¡ºåºæ‰§è¡Œã€‚è¿™è¾¹è¿˜æœ‰ä¸ª<code>ApplicationRunner</code>æ¥å£ï¼Œä½†æ˜¯æ¥æ”¶å‚æ•°æ˜¯ä½¿ç”¨çš„<code>ApplicationArguments</code>ã€‚è¿™è¾¹ä¸å†èµ˜è¿°ã€‚</p>
<p><strong>åŒæ ·æ˜¯å¯åŠ¨æ—¶æ‰§è¡Œå®šæ—¶ä»»åŠ¡ï¼Œä½¿ç”¨è¿™ç§æ–¹å¼æˆ‘çš„å†™æ³•å¦‚ä¸‹ï¼š</strong><br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span> <span class="comment">// æ³¨æ„ è¿™é‡Œå¿…é¡»æœ‰</span></span><br><span class="line"><span class="comment">//@Order(2) å¦‚æœæœ‰å¤šä¸ªç±»éœ€è¦å¯åŠ¨åæ‰§è¡Œ orderæ³¨è§£ä¸­çš„å€¼ä¸ºå¯åŠ¨çš„é¡ºåº</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StartAllJobInit</span> <span class="keyword">implements</span> <span class="title">CommandLineRunner</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Logger logger = LoggerFactory.getLogger(getClass().getName());</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    JobInfoService jobInfoService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    JobTaskUtil jobTaskUtil;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String... args)</span> </span>&#123;</span><br><span class="line">        List&lt;JobInfoBO&gt; list = jobInfoService.findList();</span><br><span class="line">        <span class="keyword">for</span> (JobInfoBO jobinfo :list) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(<span class="string">"0"</span>.equals(jobinfo.getStartWithrun()))&#123;</span><br><span class="line">                    logger.info(<span class="string">"ä»»åŠ¡&#123;&#125;æœªè®¾ç½®è‡ªåŠ¨å¯åŠ¨ã€‚"</span>, jobinfo.getJobName());</span><br><span class="line">                    jobInfoService.updateJobStatus(jobinfo.getId(), BasicsConstantManual.BASICS_SYS_JOB_STATUS_STOP);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    logger.info(<span class="string">"ä»»åŠ¡&#123;&#125;è®¾ç½®äº†è‡ªåŠ¨å¯åŠ¨ã€‚"</span>, jobinfo.getJobName());</span><br><span class="line">                    jobTaskUtil.addOrUpdateJob(jobinfo);</span><br><span class="line">                    jobInfoService.updateJobStatus(jobinfo.getId(), BasicsConstantManual.BASICS_SYS_JOB_STATUS_STARTING);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SchedulerException e) &#123;</span><br><span class="line">                logger.error(<span class="string">"æ‰§è¡Œå®šæ—¶ä»»åŠ¡å‡ºé”™ï¼Œä»»åŠ¡åç§° &#123;&#125; "</span>, jobinfo.getJobName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="3ã€ä½¿ç”¨ContextRefreshedEventäº‹ä»¶-ä¸Šä¸‹æ–‡ä»¶åˆ·æ–°äº‹ä»¶"><a href="#3ã€ä½¿ç”¨ContextRefreshedEventäº‹ä»¶-ä¸Šä¸‹æ–‡ä»¶åˆ·æ–°äº‹ä»¶" class="headerlink" title="3ã€ä½¿ç”¨ContextRefreshedEventäº‹ä»¶(ä¸Šä¸‹æ–‡ä»¶åˆ·æ–°äº‹ä»¶)"></a>3ã€ä½¿ç”¨<code>ContextRefreshedEvent</code>äº‹ä»¶(ä¸Šä¸‹æ–‡ä»¶åˆ·æ–°äº‹ä»¶)</h4><blockquote>
<p>ContextRefreshedEvent å®˜æ–¹åœ¨æ¥å£ä¸Šçš„docè¯´æ˜<br><br>Event raised when an {@code ApplicationContext} gets initialized or refreshed.</p>
</blockquote>
<p>ContextRefreshedEventæ˜¯Springçš„ApplicationContextEventä¸€ä¸ªå®ç°ï¼ŒContextRefreshedEvent äº‹ä»¶ä¼šåœ¨Springå®¹å™¨åˆå§‹åŒ–å®Œæˆåä»¥åŠåˆ·æ–°æ—¶è§¦å‘ã€‚</p>
<p><strong>åœ¨è¿™é‡Œæˆ‘éœ€è¦åœ¨springbootç¨‹åºå¯åŠ¨ä¹‹ååŠ è½½é…ç½®ä¿¡æ¯å’Œå­—å…¸ä¿¡æ¯åˆ°Redisç¼“å­˜ä¸­å»ï¼Œæˆ‘å¯ä»¥è¿™æ ·å†™ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span> <span class="comment">// æ³¨æ„ è¿™ä¸ªä¹Ÿæ˜¯å¿…é¡»æœ‰çš„æ³¨è§£ ä¸‰ç§éƒ½éœ€è¦ ä½¿springæ‰«æåˆ°è¿™ä¸ªç±»å¹¶äº¤ç»™å®ƒç®¡ç†</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InitRedisCache</span> <span class="keyword">implements</span> <span class="title">ApplicationListener</span>&lt;<span class="title">ContextRefreshedEvent</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory</span><br><span class="line">            .getLogger(InitRedisCache<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SysConfigService sysConfigService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SysDictService sysDictService;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onApplicationEvent</span><span class="params">(ContextRefreshedEvent contextRefreshedEvent)</span> </span>&#123;</span><br><span class="line">        logger.info(<span class="string">"-------åŠ è½½é…ç½®ä¿¡æ¯ start-------"</span>);</span><br><span class="line">        sysConfigService.loadConfigIntoRedis();</span><br><span class="line">        logger.info(<span class="string">"-------åŠ è½½é…ç½®ä¿¡æ¯ end-------"</span>);</span><br><span class="line"></span><br><span class="line">        logger.info(<span class="string">"-------åŠ è½½å­—å…¸ä¿¡æ¯ start-------"</span>);</span><br><span class="line">        sysDictService.loadDictIntoRedis();</span><br><span class="line">        logger.info(<span class="string">"-------åŠ è½½å­—å…¸ä¿¡æ¯ end-------"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">```java</span><br><span class="line">**æ³¨æ„**ï¼šè¿™ç§æ–¹å¼åœ¨springmvc-springçš„é¡¹ç›®ä¸­ä½¿ç”¨çš„æ—¶å€™ä¼šå‡ºç°æ‰§è¡Œä¸¤æ¬¡çš„æƒ…å†µã€‚è¿™ç§æ˜¯å› ä¸ºåœ¨åŠ è½½springå’Œspringmvcçš„æ—¶å€™ä¼šåˆ›å»ºä¸¤ä¸ªå®¹å™¨ï¼Œéƒ½ä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶çš„æ‰§è¡Œã€‚è¿™æ—¶å€™åªéœ€è¦åœ¨`onApplicationEvent`æ–¹æ³•ä¸­åˆ¤æ–­æ˜¯å¦æœ‰çˆ¶å®¹å™¨å³å¯ã€‚</span><br></pre></td></tr></table></figure>
<p>@Override<br>  public void onApplicationEvent(ContextRefreshedEvent event) {<br>      if(event.getApplicationContext().getParent() == null){//root application context æ²¡æœ‰parentï¼Œä»–å°±æ˜¯è€å¤§.<br>           //éœ€è¦æ‰§è¡Œçš„é€»è¾‘ä»£ç ï¼Œå½“springå®¹å™¨åˆå§‹åŒ–å®Œæˆåå°±ä¼šæ‰§è¡Œè¯¥æ–¹æ³•ã€‚<br>      }<br>  }<br><code>`</code></p>
<h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>ä»¥ä¸Šï¼Œå°±æ˜¯æˆ‘åœ¨å®é™…å¼€å‘ä¸­å¸¸ç”¨çš„ä¸‰ç§ï¼Œåœ¨é¡¹ç›®å¯åŠ¨æ—¶æ‰§è¡Œä»£ç çš„æ–¹å¼ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®ä¸åŒçš„ä½¿ç”¨æƒ…å†µé€‰æ‹©åˆé€‚çš„æ–¹æ³•å»æ‰§è¡Œè‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ã€‚</p>
]]></content>
      <categories>
        <category>springboot</category>
      </categories>
      <tags>
        <tag>springboot</tag>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaå†…å­˜åˆ†é…ä¸åƒåœ¾å›æ”¶çš„å¤ä¹ æ•´ç†</title>
    <url>/blog/20190414/Java%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%9A%84%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/</url>
    <content><![CDATA[<p><img src="/blog/20190414/Javaå†…å­˜åˆ†é…ä¸åƒåœ¾å›æ”¶çš„å¤ä¹ æ•´ç†/zy.png" alt="æ‘˜è¦"></p>
<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>ä¼—æ‰€å‘¨çŸ¥Javaä½œä¸ºä¸€ä¸ªâ€œä¸€æ¬¡ç¼–è¯‘ï¼Œåˆ°å¤„è¿è¡Œâ€çš„ç¼–è¯‘å‹è¯­è¨€ï¼ŒJVMè™šæ‹Ÿæœºå½“ä¹‹æ— æ„§çš„æ˜¯Javaè¯­è¨€ä¸–ç•Œçš„å…ˆé”‹å°†å†›ã€‚ä½œä¸ºä¸€ä¸ªJavaç¨‹åºå‘˜ï¼ŒJVMè™šæ‹Ÿæœºå…¶ç›¸å…³çŸ¥è¯†æ˜¯æˆ‘ä»¬å¿…é¡»è¦äº†è§£ä»¥åŠæ·±å…¥æŒæ¡çš„é‡ç‚¹ã€‚åœ¨æœ¬ç¯‡åšå®¢æˆ‘å°†æ€»ç»“ä¸€ä¸‹JVMè™šæ‹Ÿæœºçš„å†…å­˜ç»“æ„ã€å¯¹è±¡å†…å­˜åˆ†é…ä»¥åŠåƒåœ¾å›æ”¶ç®—æ³•ã€‚è¿™ä¹Ÿæ˜¯ç»å¸¸æ‰¾å·¥ä½œæ±‚èŒå¿…é—®çš„ç‚¹ã€‚</p>
<a id="more"></a>
<h3 id="Javaå†…å­˜åˆ†é…ä¸åƒåœ¾å›æ”¶çš„å¤ä¹ æ•´ç†"><a href="#Javaå†…å­˜åˆ†é…ä¸åƒåœ¾å›æ”¶çš„å¤ä¹ æ•´ç†" class="headerlink" title="Javaå†…å­˜åˆ†é…ä¸åƒåœ¾å›æ”¶çš„å¤ä¹ æ•´ç†"></a>Javaå†…å­˜åˆ†é…ä¸åƒåœ¾å›æ”¶çš„å¤ä¹ æ•´ç†</h3><h4 id="Javaå†…å­˜åŒºåŸŸåˆ’åˆ†"><a href="#Javaå†…å­˜åŒºåŸŸåˆ’åˆ†" class="headerlink" title="Javaå†…å­˜åŒºåŸŸåˆ’åˆ†"></a>Javaå†…å­˜åŒºåŸŸåˆ’åˆ†</h4><p>Javaè™šæ‹Ÿæœºåœ¨æ‰§è¡ŒJavaç¨‹åºçš„è¿‡ç¨‹ä¸­ä¼šå°†å®ƒæ‰€ç®¡ç†çš„å†…å­˜åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªä¸åŒçš„åŒºåŸŸã€‚æ¯ä¸ªåŒºåŸŸå„å¸å…¶èŒï¼Œå…¶åˆ›å»ºä¸é”€æ¯æ•°æ®çš„è§„åˆ™ä¹Ÿéƒ½å„ä¸ç›¸åŒã€‚æ ¹æ®ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒï¼ˆJava SE 7ç‰ˆï¼‰ã€‹çš„è§„å®šï¼Œä¸»è¦åˆ†ä¸ºå¦‚ä¸‹å›¾å‡ ä¸ªåŒºåŸŸã€‚</p>
<p><img src="/blog/20190414/Javaå†…å­˜åˆ†é…ä¸åƒåœ¾å›æ”¶çš„å¤ä¹ æ•´ç†/jvm.png" alt="Javaå†…å­˜åˆ’åˆ†"></p>
<ul>
<li><strong>ç¨‹åºè®¡æ•°å™¨</strong>ï¼šå½“å‰çº¿ç¨‹æ‰§è¡Œå­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨ã€‚[<em>çº¿ç¨‹ç§æœ‰</em>]</li>
<li><strong>è™šæ‹Ÿæœºæ ˆ</strong>ï¼šæ¯ä¸ªæ–¹æ³•æ‰§è¡Œæ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼Œç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚å¹³å¸¸æˆ‘ä»¬æ‰€è¯´çš„Javaè™šæ‹Ÿæœºåˆ’åˆ†ä¸ºå †å’Œæ ˆä¸­çš„â€œæ ˆâ€ä¸­çš„ä¸€éƒ¨åˆ†å°±æ˜¯è™šæ‹Ÿæœºæ ˆã€‚å…¶ä¸­å±€éƒ¨å˜é‡è¡¨å­˜æ”¾ç€ç¼–è¯‘æœŸå¯çŸ¥çš„æ‰€æœ‰åŸºæœ¬æ•°æ®ç±»å‹ã€å¯¹è±¡å¼•ç”¨ç­‰ã€‚å±€éƒ¨å˜é‡è¡¨æ‰€éœ€çš„å†…å­˜ç©ºé—´åœ¨ç¼–è¯‘æœŸé—´å®Œæˆåˆ†é…ï¼Œå½“è¿›å…¥ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•æ‰€éœ€è¦çš„å¸§çš„å¤§å°æ˜¯å·²ç»ç¡®å®šäº†çš„ã€‚[<em>çº¿ç¨‹ç§æœ‰</em>]</li>
<li><strong>æœ¬åœ°æ–¹æ³•æ ˆ</strong>ï¼šä¸è™šæ‹Ÿæœºæ ˆå‘æŒ¥çš„ä½œç”¨ç›¸ä¼¼ï¼Œåªä¸è¿‡è¿™ä¸ªåŒºåŸŸæ‰§è¡Œçš„æ˜¯nativeæ–¹æ³•ï¼Œå³ç”±c/c++æˆ–è€…å…¶ä»–è¯­è¨€ç¼–å†™çš„æ–¹æ³•ã€‚[<em>çº¿ç¨‹ç§æœ‰</em>]</li>
<li><strong>Javaå †</strong>ï¼šç”¨æ¥å­˜æ”¾å¯¹è±¡å®ä¾‹ï¼Œå³æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„ä¸€å—åŒºåŸŸã€‚Javaå †æ˜¯åƒåœ¾æ”¶é›†å™¨ç®¡ç†çš„ä¸»è¦åŒºåŸŸï¼Œæ‰€ä»¥æœ‰æ—¶ä¹Ÿå«â€œGCå †â€ã€‚[<em>çº¿ç¨‹å…±äº«</em>]</li>
<li><strong>æ–¹æ³•åŒº</strong>ï¼šç”¨äºå­˜å‚¨è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ® [<em>çº¿ç¨‹å…±äº«</em>]</li>
<li><strong>è¿è¡Œæ—¶å¸¸é‡æ± </strong>ï¼šè¿™æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ã€‚Classæ–‡ä»¶ä¸­é™¤äº†æœ‰ç±»çš„ç‰ˆæœ¬ã€å­—æ®µã€æ–¹æ³•ã€æ¥å£ç­‰ä¿¡æ¯ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€é¡¹ä¿¡æ¯æ˜¯å¸¸é‡æ± ï¼Œç”¨äºå­˜æ”¾ç¼–è¯‘æœŸç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ã€‚è¿™éƒ¨åˆ†å†…å®¹å°†åœ¨ç±»åŠ è½½åè¿›å…¥æ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± ä¸­å­˜æ”¾ã€‚[<em>çº¿ç¨‹å…±äº«</em>]</li>
</ul>
<h4 id="å¸¸ç”¨çš„åƒåœ¾å›æ”¶ç®—æ³•"><a href="#å¸¸ç”¨çš„åƒåœ¾å›æ”¶ç®—æ³•" class="headerlink" title="å¸¸ç”¨çš„åƒåœ¾å›æ”¶ç®—æ³•"></a>å¸¸ç”¨çš„åƒåœ¾å›æ”¶ç®—æ³•</h4><blockquote>
<p>åœ¨Javaä»£ç ä¸­ï¼Œæˆ‘ä»¬ç¨‹åºå‘˜é€šå¸¸åªå…³æ³¨å¹¿ä¹‰ä¸Šçš„â€œæ ˆâ€å’Œâ€œå †â€è¿™ä¸¤ç§åŒºåŸŸã€‚ä¸Šè¿°åˆ’åˆ†çš„Javaå†…å­˜åŒºåŸŸå‘Šè¯‰æˆ‘ä»¬ï¼Œæ ˆæ˜¯æœç”Ÿå¤•æ­»çš„ä¸€å—åŒºåŸŸï¼Œå½“çº¿ç¨‹è¿›å…¥çš„æ—¶å€™ï¼Œæ ˆç©ºé—´è¢«åˆ†é…ï¼Œçº¿ç¨‹ç»“æŸä¹‹åï¼Œæ ˆçš„å†…å­˜ç©ºé—´å³è¢«å›æ”¶ç”¨æ¥å»åšå…¶ä»–çš„ä»»åŠ¡ï¼Œæ ˆä¸­çš„æ ˆå¸§éšç€çº¿ç¨‹çš„è¿›å…¥ä¸é€€å‡ºæœ‰æ¡ä¸ç´Šçš„æ‰§è¡Œç€å…¥æ ˆå’Œå‡ºæ ˆçš„æ“ä½œï¼Œæ¯ä¸€ä¸ªæ ˆå¸§ä¸­åˆ†é…å¤šå°‘å†…å­˜åŸºæœ¬ä¸Šæ˜¯åœ¨ç±»ç»“æ„ç¡®å®šä¸‹æ¥å°±å·²çŸ¥çš„ã€‚è€Œå †å´ä¸åŒï¼Œæˆ‘ä»¬åªæœ‰åœ¨ç¨‹åºè¿è¡ŒæœŸé—´æ‰ä¼šçŸ¥é“åˆ›å»ºé‚£äº›å¯¹è±¡ï¼Œè¿™éƒ¨åˆ†å†…å­˜åˆ†é…å’Œå›æ”¶éƒ½æ˜¯åŠ¨æ€çš„ã€‚éƒ½ç”±è™šæ‹Ÿæœºçš„åƒåœ¾å›æ”¶å™¨è¿›è¡Œâ€œå·²æ­»â€å¯¹è±¡çš„å›æ”¶ã€‚</p>
</blockquote>
<h5 id="å¦‚ä½•åˆ¤æ–­å¯¹è±¡å·²æ­»"><a href="#å¦‚ä½•åˆ¤æ–­å¯¹è±¡å·²æ­»" class="headerlink" title="å¦‚ä½•åˆ¤æ–­å¯¹è±¡å·²æ­»"></a>å¦‚ä½•åˆ¤æ–­å¯¹è±¡å·²æ­»</h5><ul>
<li><strong>å¼•ç”¨è®¡æ•°æ³•</strong>ï¼šç»™å¯¹è±¡æ·»åŠ ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ï¼Œæ¯å½“æœ‰å¼•ç”¨æŒ‡å‘å®ƒæ—¶è®¡æ•°å™¨åŠ 1ï¼Œå¼•ç”¨å¤±æ•ˆåè®¡æ•°å™¨å‡1ã€‚åƒåœ¾å›æ”¶å™¨å›æ”¶å¯¹è±¡è®¡æ•°å™¨ä¸º0çš„å¯¹è±¡æ˜‚å³å¯ã€‚ä½†æ˜¯å½“å‡ºç°å¯¹è±¡ä¹‹é—´å¾ªç¯å¼•ç”¨ï¼Œè€Œå¯¹è±¡å´æ— å®é™…ä½œç”¨çš„æ—¶å€™ï¼Œè¿™ç§æ–¹å¼å°±ä¼šå‡ºç°å†…å­˜æ³„æ¼ã€‚</li>
<li><strong>å¯è¾¾æ€§åˆ†æ</strong>ï¼šé€šè¿‡ä¸€ç³»åˆ—çš„ç§°ä¸ºâ€œGC ROOTSâ€çš„å¯¹è±¡ä½œä¸ºèµ·ç‚¹ï¼Œå‘ä¸‹æœç´¢ï¼Œæœç´¢èµ°è¿‡çš„è·¯å¾„éƒ½ç§°ä¸ºå¼•ç”¨é“¾ï¼Œå½“ä¸€ä¸ªå¯¹è±¡åˆ°â€œGC ROOTSâ€æ²¡æœ‰å¼•ç”¨é“¾çš„æ—¶å€™ï¼Œè¯æ˜è¿™ä¸ªå¯¹è±¡ä¸å¯è¾¾ã€‚æ­¤æ—¶ä¼šè¢«åˆ¤å®šä¸ºå¯å›æ”¶å¯¹è±¡ã€‚ï¼ˆæ­¤æ—¶å¹¶éä¸€å®šæ­»äº¡ï¼Œåœ¨æ­¤ä¹‹åè¿˜ä¼šè¿›è¡Œä¸¤æ¬¡æ ‡è®°å¤„ç†ï¼Œä¸finalize()æ–¹æ³•æœ‰å…³ï¼Œæ­¤å¤„ä¸å†æ•´ç†ã€‚æ³¨æ„ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼šä»»ä½•å¯¹è±¡çš„finalize()æ–¹æ³•åªä¼šè¢«ç³»ç»Ÿè°ƒç”¨ä¸€æ¬¡ï¼Œå¹¶ä¸”ä¸å»ºè®®ä½¿ç”¨ï¼‰</li>
</ul>
<blockquote>
<p>çŸ¥é“å“ªäº›å¯¹è±¡æ˜¯â€œåƒåœ¾â€ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å›æ”¶æ“ä½œäº†</p>
</blockquote>
<h5 id="æ ‡è®°-æ¸…é™¤æ³•"><a href="#æ ‡è®°-æ¸…é™¤æ³•" class="headerlink" title="æ ‡è®°-æ¸…é™¤æ³•"></a>æ ‡è®°-æ¸…é™¤æ³•</h5><ul>
<li>é¦–å…ˆæ ‡è®°å‡ºæ‰€æœ‰éœ€è¦å›æ”¶çš„å¯¹è±¡ï¼Œç„¶åç»Ÿä¸€å›æ”¶ã€‚æ˜¯æœ€åŸºç¡€çš„å›æ”¶ç®—æ³•ã€‚</li>
<li>ä¸è¶³ä¹‹å¤„ï¼š1ã€æ•ˆç‡ä½ä¸‹ï¼Œæ ‡è®°å’Œæ¸…é™¤çš„æ•ˆç‡éƒ½ä¸é«˜ï¼›2ã€äº§ç”Ÿå¤§é‡å†…å­˜ç¢ç‰‡ï¼Œä½¿å¾—ä¹‹åç¨‹åºè¦åˆ†é…å¤§å¯¹è±¡å´æ²¡æœ‰ç©ºé—´ï¼Œä¸å¾—ä¸é™¤æ³•GCã€‚</li>
</ul>
<h5 id="å¤åˆ¶"><a href="#å¤åˆ¶" class="headerlink" title="å¤åˆ¶"></a>å¤åˆ¶</h5><ul>
<li>é¦–å…ˆå°†å†…å­˜åŒºåŸŸåˆ’åˆ†ä¸ºä¸¤ç­‰åˆ†ï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­ä¸€å—å†…å­˜ï¼Œå½“ç”¨å®Œä¹‹åï¼Œå°†æ´»ç€çš„å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—å†…å­˜ï¼Œç„¶åæ•´ä¸ªå›æ”¶ä¸Šä¸€åŠã€‚è¿™ç§æŒ‰é¡ºåºåˆ†é…å†…å­˜ï¼Œå®ç°ç®€å•ï¼Œè¿è¡Œé«˜æ•ˆã€‚</li>
<li>ä¸è¶³ä¹‹å¤„ï¼šç›´æ¥å°†å†…å­˜ç¼©å°äº†ä¸€åŠï¼Œäº§ç”Ÿå¤§é‡çš„ç©ºé—´æµªè´¹ã€‚ç„¶è€Œå¾ˆå¤šåƒåœ¾æ”¶é›†å™¨éƒ½æ˜¯ç”¨è¿™ç§æ–¹å¼ï¼Œä½†æ˜¯æœ‰è¿‡æ”¹è¿›ã€‚å› ä¸ºå †ä¸­çš„å¯¹è±¡90%éƒ½æ˜¯æœç”Ÿå¤•æ­»çš„ï¼Œåªæœ‰10%æ˜¯ä¼šé•¿æœŸå­˜æ´»ä¸‹æ¥çš„å¯¹è±¡ï¼Œé‚£ä¹ˆå¯¹äºè¿™90%çš„å¯¹è±¡ï¼Œå®Œå…¨å¯ä»¥ä½¿ç”¨è¿™ç§é«˜æ•ˆçš„å¤åˆ¶æ”¶é›†ç®—æ³•ã€‚é¦–å…ˆå°†å†…å­˜åŒºåŸŸåˆ’åˆ†ä¸‰ä»½ï¼Œ10%çš„å¯¹è±¡å­˜åœ¨å…¶ä¸­è¾ƒå¤§çš„ä¸€åˆ†ä¸­ï¼Œå¦å¤–çš„ä¸¤ä»½ç­‰ä»½åˆ†é…ï¼Œå¤„ç†è¿™90%çš„â€œæ­»çš„å¿«â€çš„å¯¹è±¡ã€‚è¿™å°±æ˜¯Form,To,EdenåŒºåŸŸã€‚å³Eden:From:To=8:1:1</li>
</ul>
<h5 id="æ ‡è®°-æ•´ç†æ³•"><a href="#æ ‡è®°-æ•´ç†æ³•" class="headerlink" title="æ ‡è®°-æ•´ç†æ³•"></a>æ ‡è®°-æ•´ç†æ³•</h5><ul>
<li>æ ‡è®°æ•´ç†çš„æ–¹å¼å®é™…ä¸Šä¹Ÿæ˜¯å…ˆå°†å¯å›æ”¶å¯¹è±¡æ ‡è®°èµ·æ¥ï¼Œç„¶åå¯¹äºè¿™äº›å­˜æ´»ç€çš„å¯¹è±¡ï¼Œå¹¶ä¸ç›´æ¥å›æ”¶ï¼Œè€Œæ˜¯å…ˆå‘ä¸€ç«¯ç§»åŠ¨ï¼Œæœ€åç›´æ¥å›æ”¶ç«¯è¾¹ç•Œä¹‹å¤–çš„å¯¹è±¡ã€‚è¿™ç§åšæ³•è§£å†³äº†å¤„ç†å­˜æ´»ç‡è¾ƒé«˜çš„å¤§å¯¹è±¡çš„å›æ”¶ï¼Œé€‚åˆè€å¹´ä»£å †å¯¹è±¡å›æ”¶ã€‚</li>
</ul>
<h5 id="åˆ†ä»£æ”¶é›†"><a href="#åˆ†ä»£æ”¶é›†" class="headerlink" title="åˆ†ä»£æ”¶é›†"></a>åˆ†ä»£æ”¶é›†</h5><ul>
<li>å½“å‰å•†ä¸šè™šæ‹ŸæœºåŸºæœ¬ä¸Šéƒ½ä¼šé‡‡å–åˆ†ä»£æ”¶é›†ç®—æ³•ã€‚å³æ ¹æ®å¯¹è±¡å­˜æ´»å‘¨æœŸçš„ä¸åŒå°†å†…å­˜åˆ’åˆ†ä¸ºä¸åŒåŒºåŸŸï¼Œåˆ†åˆ«ä½¿ç”¨ä¸åŒçš„åƒåœ¾å›æ”¶ç®—æ³•è¿›è¡Œåƒåœ¾å›æ”¶ã€‚æ¯”å¦‚åœ¨æ–°ç”Ÿä»£ä½¿ç”¨å¤åˆ¶ç®—æ³•ï¼Œå› ä¸ºæ–°ç”Ÿä»£å¤§é‡å¯¹è±¡éƒ½æ˜¯æœç”Ÿå¤•æ­»éœ€è¦å¾ˆé«˜çš„å›æ”¶æ•ˆç‡ï¼Œè€Œå¯¹äºè€å¹´ä»£åˆ™ä½¿ç”¨æ ‡è®°æ¸…é™¤æˆ–è€…æ ‡è®°æ•´ç†ã€‚</li>
</ul>
<h4 id="Javaè™šæ‹Ÿæœºçš„å¯¹è±¡å†…å­˜åˆ†é…"><a href="#Javaè™šæ‹Ÿæœºçš„å¯¹è±¡å†…å­˜åˆ†é…" class="headerlink" title="Javaè™šæ‹Ÿæœºçš„å¯¹è±¡å†…å­˜åˆ†é…"></a>Javaè™šæ‹Ÿæœºçš„å¯¹è±¡å†…å­˜åˆ†é…</h4><p>Javaå¯¹è±¡å†…å­˜åˆ†é…å®é™…ä¸Šå°±æŒ‡çš„æ˜¯å°†å¯¹è±¡åˆ†é…åœ¨å †ä¸Šçš„è¿‡ç¨‹ã€‚ä¸è¿‡å®é™…ä¸Šå †è¿˜è¢«è™šæ‹Ÿæœºåˆ’åˆ†æˆäº†ä¸åŒçš„åŒºåŸŸï¼Œå¹¶ä¸”æ¯ä¸ªåŒºåŸŸçš„åˆ†é…ç­–ç•¥éƒ½ä¸ç›¸åŒã€‚ä¸Šé¢æˆ‘ä»¬è¯´åˆ°è™šæ‹Ÿæœºæ ¹æ®å¯¹è±¡å­˜æ´»å‘¨æœŸçš„ä¸åŒå°†å¯¹å†…å­˜åˆ†ä¸ºå‡ ç§ä¸åŒçš„åŒºåŸŸï¼Œå³æ–°ç”Ÿä»£Eden,From Survivor,To Survivorå’Œè€å¹´ä»£ã€‚é‚£ä¹ˆè¿™å‡ ç§åŒºåŸŸæ˜¯å¦‚ä½•è¿›è¡Œå†…å­˜åˆ†é…çš„å‘¢ï¼Ÿ</p>
<ul>
<li>å¯¹è±¡ä¼˜å…ˆå†EdenåŒºåŸŸåˆ†é…ï¼šå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯¹è±¡ä¼šåœ¨EdenåŒºåŸŸåˆ†é…ï¼Œåœ¨EdenåŒºåŸŸç©ºé—´ä¸å¤Ÿçš„æƒ…å†µä¸‹ï¼Œä¼šå…ˆè¿›è¡Œä¸€æ¬¡MinorGCï¼ˆMinorGCæ˜¯æ–°ç”Ÿä»£åƒåœ¾å›æ”¶ï¼ŒFull GCæ˜¯è€å¹´ä»£åƒåœ¾å›æ”¶ï¼‰ã€‚</li>
<li>å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£ï¼šå¤§å¯¹è±¡å³æŒ‡çš„æ˜¯éœ€è¦å¤§é‡è¿ç»­ç©ºé—´çš„å¯¹è±¡ï¼Œä¾‹å¦‚å¾ˆé•¿çš„å­—ç¬¦ä¸²ä»¥åŠæ•°ç»„ã€‚è™šæ‹Ÿæœºæä¾›å‚æ•°<code>-XX:PretenureSizeThreadhold</code>å‚æ•°è®¾ç½®å¤§äºå¤šå°‘ç®—æ˜¯å¤§å¯¹è±¡ï¼Œé¿å…åœ¨æ–°ç”Ÿä»£å‡ ä¸ªåŒºåŸŸä¸­å‘ç”Ÿå¤§é‡çš„å†…å­˜å¤åˆ¶ã€‚</li>
<li>é•¿æœŸå­˜æ´»çš„å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£ï¼šæ¯ç»è¿‡ä¸€æ¬¡MinorGCå¯¹è±¡çš„å¹´é¾„éƒ½ä¼šåŠ 1ã€‚å½“å¹´é¾„åŠ åˆ°<code>-XX:MaxTenuringThreadhold</code>ï¼ˆé»˜è®¤15ï¼‰æŒ‡å®šçš„å€¼æ—¶ï¼Œåˆ¤æ–­ä¸ºé•¿æœŸå­˜æ´»ï¼Œå¯¹è±¡ä¼šè¢«ç§»åŠ¨åˆ°è€å¹´ä»£ã€‚</li>
<li>åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤æ–­ï¼šä¸ºäº†é€‚åº”å¤šå˜çš„å†…å­˜æƒ…å†µï¼Œä¸€èˆ¬è™šæ‹Ÿæœºéƒ½ä¼šä½¿ç”¨åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤å®šã€‚å¦‚æœSurvivorä¸­ç›¸åŒå¹´é¾„çš„æ‰€æœ‰å¯¹è±¡å¤§å°æ€»å’Œå¤§äºè¯¥ç©ºé—´çš„ä¸€åŠï¼Œè¯¥å¹´é¾„ä»¥ä¸Šçš„å¯¹è±¡å°±ä¼šç›´æ¥è¿›å…¥è€å¹´ä»£ï¼Œæ— éœ€ç­‰åˆ°å¹´é¾„å¤§äº<code>-XX:MaxTenuringThreadhold</code>ï¼ˆé»˜è®¤15ï¼‰æŒ‡å®šçš„å€¼ã€‚</li>
<li>ç©ºé—´åˆ†é…æ‹…ä¿ï¼šåœ¨å‘ç”ŸMinorGCä¹‹å‰ï¼Œè™šæ‹Ÿæœºä¼šå…ˆæ£€æŸ¥è€å¹´ä»£æœ€å¤§å¯ç”¨è¿ç»­ç©ºé—´æ˜¯å¦å¤§äºæ–°ç”Ÿä»£æ‰€æœ‰å¯¹è±¡æ€»ç©ºé—´ï¼Œæ˜¯çš„è¯MinorGCå¯ä»¥è¢«è®¤å®šæ˜¯å®‰å…¨çš„ã€‚å¦‚æœä¸æˆç«‹ï¼Œè™šæ‹Ÿæœºä¼šå…ˆæ£€æŸ¥<code>HandlerPromotionFailure</code>å‚æ•°æ˜¯å¦å…è®¸æ‹…ä¿å¤±è´¥ï¼Œä¸å…è®¸çš„è¯ä¼šç»§ç»­æ£€æŸ¥è€å¹´ä»£æœ€å¤§å¯ç”¨è¿ç»­ç©ºé—´æ˜¯å¦å¤§äºå†æ¬¡æ™‹å‡åˆ°è€å¹´ä»£å¯¹è±¡çš„å¹³å‡å¤§å°ï¼Œå¦‚æœå¤§äºå°±å°è¯•è¿›è¡Œä¸€æ¬¡MinorGCï¼Œå°½ç®¡è¿™æ¬¡MinorGCæ˜¯æœ‰é£é™©çš„ï¼›å¦‚æœå°äºçš„è¯æˆ–è€…<code>HandlerPromotionFailure</code>è®¾ç½®ä¸å…è®¸å†’é™©ï¼Œé‚£ä¹ˆå°±ä¼šæ‰§è¡Œä¸€æ¬¡FullGCã€‚</li>
</ul>
<hr>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><blockquote>
<p>å†…å­˜å›æ”¶ä¸åƒåœ¾æ”¶é›†å¾ˆå¤šæ—¶å€™éƒ½æ˜¯å½±å“ç³»ç»Ÿæ€§èƒ½å’Œå¹¶å‘èƒ½åŠ›çš„ä¸»è¦å› ç´ ä¹‹ä¸€ï¼Œè™šæ‹Ÿæœºæä¾›äº†å¤šç§åƒåœ¾æ”¶é›†å™¨ä»¥åŠå¤§é‡çš„è°ƒèŠ‚å‚æ•°ï¼Œæ–¹ä¾¿å¼€å‘äººå‘˜æ ¹æ®å®é™…åº”ç”¨è°ƒæ•´ä»¥ä¾¿ç¨‹åºå¯ä»¥è·å¾—æœ€é«˜çš„æ€§èƒ½ã€‚è¿™äº›åƒåœ¾æ”¶é›†å™¨å’Œè™šæ‹Ÿæœºå‚æ•°æ²¡æœ‰å›ºå®šçš„æ ‡å‡†çš„ç»„åˆï¼Œéœ€è¦å¼€å‘äººå‘˜å¯¹äºå†…å­˜åˆ†é…ä¸åƒåœ¾å›æ”¶ç›¸å½“äº†è§£ï¼Œæ‰å¾—ä»¥æ ¹æ®å®é™…æƒ…å†µå®é™…é…ç½®ã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>JavaåŸºç¡€</category>
      </categories>
      <tags>
        <tag>JavaåŸºç¡€</tag>
        <tag>å†…å­˜åˆ†é…</tag>
        <tag>åƒåœ¾å›æ”¶</tag>
      </tags>
  </entry>
  <entry>
    <title>DubboæœåŠ¡é™çº§</title>
    <url>/blog/20190412/dubbo%20%E6%9C%8D%E5%8A%A1%E9%99%8D%E7%BA%A7/</url>
    <content><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;åœ¨åˆ†å¸ƒå¼æœåŠ¡æˆ–è€…ä¸€äº›å¾®æœåŠ¡å½“ä¸­ï¼Œç»å¸¸æ€§çš„å‡ºç°å„ä¸ªæœåŠ¡ä¹‹é—´ç›¸äº’è°ƒç”¨ï¼Œä¸šåŠ¡å¤„ç†æµç¨‹è€¦åˆèµ·æ¥çš„æƒ…å†µã€‚æ¯”å¦‚å½“ç”¨æˆ·åœ¨å¹³å°ä¸‹å•æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç»™ç”¨æˆ·ç”Ÿæˆè®¢å•ä¹‹åå‘ç«™å†…ä¿¡æˆ–è€…çŸ­ä¿¡é€šçŸ¥ç”¨æˆ·è®¢å•ç”ŸæˆæˆåŠŸã€‚é‚£ä¹ˆå¾ˆå¤šæ—¶å€™ä»£ç çš„ç¼–å†™å°±ä¼šæ˜¯ï¼š<br>&nbsp;&nbsp;&nbsp;&nbsp;<code>è°ƒç”¨è®¢å•æ¨¡å—ç”Ÿæˆè®¢å•-&gt;è°ƒç”¨çŸ­ä¿¡æ¨¡å—é€šçŸ¥ç”¨æˆ·-&gt;è°ƒç”¨å…¶ä»–æ¨¡å—å¤„ç†æ›´å¤šä¸šåŠ¡é€»è¾‘</code><br>&nbsp;&nbsp;&nbsp;&nbsp;å¯æ˜¯å½“æˆ‘ä»¬æ— è¶³è½»é‡çš„ä¸€ä¸ªçŸ­ä¿¡é€šçŸ¥æ¨¡å—æŒ‚æ‰æˆ–è€…æŠ¥é”™çš„æ—¶å€™ï¼Œæˆ‘ä»¬å½“ç„¶ä¸å¸Œæœ›æ•´ä¸ªä¸šåŠ¡é€»è¾‘å°±è¿™æ ·åœæ­¢ã€‚é‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œå°±éœ€è¦å¼•å…¥æœåŠ¡é™çº§çš„æœºåˆ¶ï¼Œä¸ºæ•´ä¸ªä¸šåŠ¡é€»è¾‘è¿›è¡Œè§£è€¦åˆã€‚</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;ä½¿ç”¨æœåŠ¡é™çº§å¯ä»¥é˜²æ­¢æˆ‘ä»¬æœåŠ¡ä¸­é—´ä¸å½±å“æ•´ä½“æµç¨‹çš„æ¨¡å—å‡ºé”™å¯¼è‡´æ•´ä¸ªä¸šåŠ¡å¤„ç†é›ªå´©ã€‚å°†æ ¸å¿ƒä¸šåŠ¡ä¿è¯å®Œæ•´æ€§ï¼Œéæ ¸å¿ƒä¸šåŠ¡å¼±åŒ–ã€‚<br><a id="more"></a><br><em><font style="color: red">æœ¬æ–‡ä½¿ç”¨  <code>springboot+dubbo</code> è¿›è¡ŒæœåŠ¡é™çº§çš„æ¼”ç¤º</font></em></p>
<h3 id="dubboè‡ªå¸¦çš„mockè¿›è¡ŒæœåŠ¡é™çº§ï¼Œä¹Ÿå«æœ¬åœ°ä¼ªè£…"><a href="#dubboè‡ªå¸¦çš„mockè¿›è¡ŒæœåŠ¡é™çº§ï¼Œä¹Ÿå«æœ¬åœ°ä¼ªè£…" class="headerlink" title="dubboè‡ªå¸¦çš„mockè¿›è¡ŒæœåŠ¡é™çº§ï¼Œä¹Ÿå«æœ¬åœ°ä¼ªè£…"></a>dubboè‡ªå¸¦çš„mockè¿›è¡ŒæœåŠ¡é™çº§ï¼Œä¹Ÿå«æœ¬åœ°ä¼ªè£…</h3><h5 id="dubboä½œä¸ºé˜¿é‡Œå·´å·´å¼€æºçš„æœ€æµè¡Œçš„æœåŠ¡æ²»ç†æ¡†æ¶ï¼Œåœ¨æä¾›äº†è¿œç¨‹è°ƒç”¨çš„åŒæ—¶ä¹Ÿæä¾›äº†æœåŠ¡é™çº§çš„åŠŸèƒ½ã€‚"><a href="#dubboä½œä¸ºé˜¿é‡Œå·´å·´å¼€æºçš„æœ€æµè¡Œçš„æœåŠ¡æ²»ç†æ¡†æ¶ï¼Œåœ¨æä¾›äº†è¿œç¨‹è°ƒç”¨çš„åŒæ—¶ä¹Ÿæä¾›äº†æœåŠ¡é™çº§çš„åŠŸèƒ½ã€‚" class="headerlink" title="dubboä½œä¸ºé˜¿é‡Œå·´å·´å¼€æºçš„æœ€æµè¡Œçš„æœåŠ¡æ²»ç†æ¡†æ¶ï¼Œåœ¨æä¾›äº†è¿œç¨‹è°ƒç”¨çš„åŒæ—¶ä¹Ÿæä¾›äº†æœåŠ¡é™çº§çš„åŠŸèƒ½ã€‚"></a>dubboä½œä¸ºé˜¿é‡Œå·´å·´å¼€æºçš„æœ€æµè¡Œçš„æœåŠ¡æ²»ç†æ¡†æ¶ï¼Œåœ¨æä¾›äº†è¿œç¨‹è°ƒç”¨çš„åŒæ—¶ä¹Ÿæä¾›äº†æœåŠ¡é™çº§çš„åŠŸèƒ½ã€‚</h5><p>å…·ä½“ä½¿ç”¨</p>
<p>dubbo mockçš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œå³åœ¨æˆ‘ä»¬å¹³æ—¶è¿›è¡Œå¼€å‘æ—¶ï¼Œç¼–å†™implå®ç°ç±»å®ç°æ¥å£ä½œä¸ºæœåŠ¡æä¾›è€…çš„åŒæ—¶ï¼Œç¼–å†™mockå®ç°ç±»å¹¶è¦†ç›–æ‰€æœ‰æ¥å£ä¸­çš„æ–¹æ³•ã€‚<br>å®˜æ–¹æ›´è¯¦ç»†çš„æ–‡æ¡£<a href="http://dubbo.apache.org/zh-cn/docs/user/demos/local-mock.html" target="_blank" rel="noopener">æˆ³è¿™é‡Œ</a></p>
<p>æ¯”å¦‚æœ‰æ¥å£ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public interface SysOperateFacade &#123;</span><br><span class="line">    /**</span><br><span class="line">     * æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢æ“ä½œå‘˜ä¿¡æ¯</span><br><span class="line">     */</span><br><span class="line">    SysOperateVO findByUserName(String username);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>åœ¨å®ç°ç±»è¿›è¡Œç›¸åº”æ“ä½œ<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@Service //è¿™é‡ŒServiceæ˜¯dubboçš„æ³¨è§£</span><br><span class="line">public class SysOperateFacadeImpl implements SysOperateFacade &#123;</span><br><span class="line">  @Resource</span><br><span class="line">  SysOperateService sysOperateService;</span><br><span class="line"></span><br><span class="line">  @Override</span><br><span class="line">  public SysOperateVO findByUserName(String username) &#123;</span><br><span class="line">      return sysOperateService.findByUserName(username);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç¼–å†™mockå®ç°ç±»è¦†ç›–findByUserNameæ–¹æ³• æ³¨æ„ mockçš„ç±»åå¿…é¡»æ˜¯ æ¥å£å+Mock<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public class SysOperateFacadeMock implements SysOperateFacade &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public SysOperateVO findByUserName(String username) &#123;</span><br><span class="line">        System.out.println(&quot;è°ƒç”¨åˆ°dubbo mock çš„findByUserNameæ–¹æ³•ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚&quot;);</span><br><span class="line">        return new SysOperateVO();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æœ€åï¼Œåœ¨è°ƒç”¨çš„åœ°æ–¹åŠ ä¸Šæ³¨è§£<code>@Reference(mock = &quot;true&quot;)</code>è¿›è¡Œä½¿ç”¨å³å¯<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@Controller</span><br><span class="line">@RequestMapping(&quot;/sys/sysOperate&quot;)</span><br><span class="line">public class SysOperateController extends BaseController &#123;</span><br><span class="line"></span><br><span class="line">    @Reference(mock = &quot;true&quot;)</span><br><span class="line">    private SysOperateFacade sysOperateFacade;</span><br><span class="line"></span><br><span class="line">    @ResponseBody</span><br><span class="line">    @RequestMapping(&quot;/test&quot;)</span><br><span class="line">    public SysOperateVO test(String username)&#123;</span><br><span class="line">        return sysOperateFacade.findByUserName(username);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="ä½¿ç”¨-spring-cloud-Hystrixè¿›è¡ŒæœåŠ¡é™çº§"><a href="#ä½¿ç”¨-spring-cloud-Hystrixè¿›è¡ŒæœåŠ¡é™çº§" class="headerlink" title="ä½¿ç”¨ spring cloud Hystrixè¿›è¡ŒæœåŠ¡é™çº§"></a>ä½¿ç”¨ spring cloud Hystrixè¿›è¡ŒæœåŠ¡é™çº§</h3><p>åœ¨æœåŠ¡è°ƒç”¨æ–¹æ¨¡å—åŠ å…¥ä¾èµ–<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.4.6.RELEASE&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></p>
<p>å¦‚æœå‡ºç°ä»¥ä¸‹æŠ¥é”™ä¹Ÿè®¸æ˜¯ç”±äºSpringbootä¸è¿™ä¸ªä¾èµ–ç‰ˆæœ¬ä¸å¯¹åº”ï¼Œä¿®æ”¹ä¸‹ç‰ˆæœ¬<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">java.lang.NoSuchMethodError: org.springframework.boot.builder.SpringApplicationBuilder.&lt;init&gt;([Ljava/lang/Class;)V at org.springframework.cloud.bootstrap.BootstrapApplicationListener.bootstrapServiceContext(BootstrapApplicationListener.java:170) at org.springframework.cloud.bootstrap.BootstrapApplicationListener.onApplicationEvent(BootstrapApplicationListener.java:104) at org.springframework.cloud.bootstrap.BootstrapApplicationListener.onApplicationEvent(BootstrapApplicationListener.java:70) at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172) at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165) at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139) at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:122) at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:74) at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:54) at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:325) at org.springframework.boot.SpringApplication.run(SpringApplication.java:296) at org.springframework.boot.SpringApplication.run(SpringApplication.java:1118) at org.springframework.boot.SpringApplication.run(SpringApplication.java:1107) at com.gjj.p2p.BasicsApplication.main(BasicsApplication.java:18)</span><br></pre></td></tr></table></figure></p>
<h5 id="å…·ä½“ä½¿ç”¨hystrixè¿›è¡ŒæœåŠ¡é™çº§"><a href="#å…·ä½“ä½¿ç”¨hystrixè¿›è¡ŒæœåŠ¡é™çº§" class="headerlink" title="å…·ä½“ä½¿ç”¨hystrixè¿›è¡ŒæœåŠ¡é™çº§"></a>å…·ä½“ä½¿ç”¨<code>hystrix</code>è¿›è¡ŒæœåŠ¡é™çº§</h5><p><code>hystrix</code>çš„ä½¿ç”¨ä¹Ÿæ˜¯éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨æœåŠ¡è°ƒç”¨æ–¹å³æ¶ˆè´¹è€…æ–¹springbootå¯åŠ¨ç±»ä¸ŠåŠ ä¸Šæ³¨è§£ <code>@EnableHystrix</code></p>
<p>ç„¶åä½¿ç”¨å¦‚ä¸‹æ–¹å¼ï¼ŒæŒ‡å®šæœåŠ¡å‡ºé”™æˆ–è€…ç†”æ–­åè°ƒç”¨çš„æ–¹æ³•<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@ResponseBody</span><br><span class="line">@RequestMapping(&quot;/test&quot;)</span><br><span class="line">@HystrixCommand(fallbackMethod = &quot;fallback&quot;)</span><br><span class="line">public String test(String message)&#123;</span><br><span class="line">    return sysMenuFacade.test(message);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public String fallback(String message)&#123;</span><br><span class="line">    return &quot;sysMenuFacadeæŒ‚äº† è°ƒç”¨åˆ°fallback &quot; + message;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿™æ ·å½“å‡ºç°é—®é¢˜ä¹‹åå°±ä¼šè°ƒç”¨å¾—åˆ°fallbackæ–¹æ³•<br>è¿˜å¯ä»¥åœ¨è¿™ä¸ªcontrollerä¸Šç›´æ¥æŒ‡å®šæ³¨è§£<code>@DefaultProperties(defaultFallback = &quot;fallback&quot;)</code>ä»¥å…ç¼–å†™å¤§é‡é‡å¤ä»£ç </p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æœåŠ¡é™çº§ä¸ç†”æ–­æœºåˆ¶åœ¨æˆ‘ä»¬å®é™…ç”Ÿäº§ä»¥åŠæ—¥å¸¸å¼€å‘ä¸­éƒ½æ˜¯æ˜¯éå¸¸æœ‰å¿…è¦ä½¿ç”¨çš„ï¼Œä¾‹å¦‚æˆ‘ä»¬åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œéœ€è¦è°ƒç”¨åˆ«äººçš„æ¨¡å—ï¼Œä½†æ˜¯åˆä¸æ˜¯éå¸¸ä¾èµ–è¿™ä¸ªæ¨¡å—çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸Šçš„æ–¹å¼æ„é€ â€œå‡çš„â€è°ƒç”¨ç»“æœã€‚è¿™æ ·å°±ä¸ç”¨ä¸ºäº†è°ƒè¯•æŸè¡Œä»£ç å»å¯åŠ¨å¤§é‡çš„æœåŠ¡äº†ã€‚</p>
<p>æœ€åé’ˆå¯¹dubboçš„mockæœºåˆ¶ä»¥åŠ<code>hystrix</code>ï¼Œæˆ‘è§‰å¾—<code>hystrix</code>æ›´åƒæ˜¯try{}catch{}ã€‚</p>
]]></content>
      <categories>
        <category>dubbo</category>
      </categories>
      <tags>
        <tag>springboot</tag>
        <tag>dubbo</tag>
        <tag>åˆ†å¸ƒå¼æœåŠ¡é™çº§</tag>
      </tags>
  </entry>
  <entry>
    <title>äº‹åŠ¡ä¼ æ’­æœºåˆ¶å’Œäº‹åŠ¡éš”ç¦»çº§åˆ«</title>
    <url>/blog/20190323/%E4%BA%8B%E5%8A%A1%E4%BC%A0%E6%92%AD%E6%9C%BA%E5%88%B6%E4%BB%A5%E5%8F%8A%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB/</url>
    <content><![CDATA[<h4 id="äº‹åŠ¡çš„å››ä¸ªç‰¹æ€§-ACID"><a href="#äº‹åŠ¡çš„å››ä¸ªç‰¹æ€§-ACID" class="headerlink" title="äº‹åŠ¡çš„å››ä¸ªç‰¹æ€§(ACID)"></a>äº‹åŠ¡çš„å››ä¸ªç‰¹æ€§(ACID)</h4><ul>
<li><p>åŸå­æ€§<br>  äº‹åŠ¡æ‰§è¡Œå¼€å§‹ä¹‹åçš„ä¸€ç³»åˆ—æ“ä½œéƒ½å ªç§°æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨åšå®Œï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ï¼Œä¸èƒ½å‡ºç°éƒ¨åˆ†æ“ä½œæˆåŠŸçš„æƒ…å†µã€‚â€œåŸå­â€é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„æœ€å°å•å…ƒã€‚</p>
</li>
<li><p>ä¸€è‡´æ€§<br>  äº‹åŠ¡å¼€å§‹æ‰§è¡Œä¹‹åï¼Œæ•°æ®çš„æ­£ç¡®æ€§éœ€è¦å¾—åˆ°ä¿è¯ã€‚å¦‚Aå‘Bè½¬è´¦ï¼ŒBå´æœªæ”¶åˆ°é’±ã€‚</p>
</li>
<li><p>éš”ç¦»æ€§<br>  åŒä¸€æ—¶é—´åªèƒ½ç”±ä¸€ä¸ªäº‹åŠ¡å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹æ“ä½œï¼Œå¯¹äºå…¶ä»–äº‹åŠ¡æ¥è¯´è¿™ä¸ªä¿®æ”¹æ“ä½œæ—¶é€æ˜çš„ã€‚</p>
</li>
<li><p>æŒä¹…æ€§<br>  äº‹åŠ¡å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹æ“ä½œå®Œæˆä¹‹åï¼Œæ•°æ®å‘ç”Ÿçš„æ”¹å˜æ˜¯æŒä¹…ä¸å˜çš„ï¼Œä¸ä¼šè‡ªå·±æ¢å¤åˆ°æ”¹å˜ä¹‹å‰çš„çŠ¶æ€ã€‚</p>
</li>
</ul>
<a id="more"></a>
<h4 id="springä¸­çš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶-ä»¥åŠäº‹åŠ¡éš”ç¦»çº§åˆ«"><a href="#springä¸­çš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶-ä»¥åŠäº‹åŠ¡éš”ç¦»çº§åˆ«" class="headerlink" title="springä¸­çš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶ ä»¥åŠäº‹åŠ¡éš”ç¦»çº§åˆ«"></a>springä¸­çš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶ ä»¥åŠäº‹åŠ¡éš”ç¦»çº§åˆ«</h4><p><strong>åœ¨æ¥å£<code>TransactionDefinition</code>ä¸­ï¼Œå®šä¹‰äº†7ç§ä¼ æ’­æœºåˆ¶</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.springframework.transaction;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TransactionDefinition</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">	<span class="comment">// äº‹åŠ¡ä¼ æ’­æœºåˆ¶</span></span><br><span class="line">	<span class="keyword">int</span> PROPAGATION_REQUIRED = <span class="number">0</span>;	</span><br><span class="line">    <span class="keyword">int</span> PROPAGATION_SUPPORTS = <span class="number">1</span>;		</span><br><span class="line">    <span class="keyword">int</span> PROPAGATION_MANDATORY = <span class="number">2</span>;		</span><br><span class="line">    <span class="keyword">int</span> PROPAGATION_REQUIRES_NEW = <span class="number">3</span>;		</span><br><span class="line">    <span class="keyword">int</span> PROPAGATION_NOT_SUPPORTED = <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">int</span> PROPAGATION_NEVER = <span class="number">5</span>;				</span><br><span class="line">    <span class="keyword">int</span> PROPAGATION_NESTED = <span class="number">6</span>;				</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// äº‹åŠ¡éš”ç¦»çº§åˆ«</span></span><br><span class="line">    <span class="keyword">int</span> ISOLATION_DEFAULT = -<span class="number">1</span>;				<span class="comment">// é»˜è®¤çº§åˆ« </span></span><br><span class="line">    <span class="keyword">int</span> ISOLATION_READ_UNCOMMITTED = <span class="number">1</span>;		</span><br><span class="line">    <span class="keyword">int</span> ISOLATION_READ_COMMITTED = <span class="number">2</span>;		</span><br><span class="line">    <span class="keyword">int</span> ISOLATION_REPEATABLE_READ = <span class="number">4</span>;		</span><br><span class="line">    <span class="keyword">int</span> ISOLATION_SERIALIZABLE = <span class="number">8</span>;		</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å„ç§ä¼ æ’­æœºåˆ¶å’Œéš”ç¦»çº§åˆ«è¯¦è§£"><a href="#å„ç§ä¼ æ’­æœºåˆ¶å’Œéš”ç¦»çº§åˆ«è¯¦è§£" class="headerlink" title="å„ç§ä¼ æ’­æœºåˆ¶å’Œéš”ç¦»çº§åˆ«è¯¦è§£"></a>å„ç§ä¼ æ’­æœºåˆ¶å’Œéš”ç¦»çº§åˆ«è¯¦è§£</h4><h5 id="äº‹åŠ¡ä¼ æ’­æœºåˆ¶"><a href="#äº‹åŠ¡ä¼ æ’­æœºåˆ¶" class="headerlink" title="äº‹åŠ¡ä¼ æ’­æœºåˆ¶"></a>äº‹åŠ¡ä¼ æ’­æœºåˆ¶</h5><table>
<thead>
<tr>
<th style="text-align:left">äº‹åŠ¡ä¼ æ’­æœºåˆ¶</th>
<th style="text-align:left">ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">PROPAGATION_REQUIRED</td>
<td style="text-align:left">é»˜è®¤çš„ ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ ï¼Œå¦‚æœå½“å‰æœ‰äº‹åŠ¡ï¼Œå°±åŠ å…¥å½“å‰è¿™ä¸ªäº‹åŠ¡ï¼Œå¦‚æœæ²¡æœ‰äº‹åŠ¡ï¼Œå°±æ–°å»ºä¸€ä¸ªäº‹åŠ¡</td>
</tr>
<tr>
<td style="text-align:left">PROPAGATION_SUPPORTS</td>
<td style="text-align:left">å¦‚æœæœ‰äº‹åŠ¡ï¼Œå°±åŠ å…¥å½“å‰è¿™ä¸ªäº‹åŠ¡ï¼Œå¦‚æœæ²¡æœ‰äº‹åŠ¡ï¼Œä¹Ÿä¸æ–°å»º</td>
</tr>
<tr>
<td style="text-align:left">PROPAGATION_MANDATORY</td>
<td style="text-align:left">å¦‚æœæœ‰äº‹åŠ¡ï¼Œå°±ä¼šä½¿ç”¨å½“å‰è¿™ä¸ªäº‹åŠ¡ï¼Œå¦‚æœæ²¡æœ‰å°±ä¼šæŠ›å‡ºå¼‚å¸¸</td>
</tr>
<tr>
<td style="text-align:left">PROPAGATION_REQUIRES_NEW</td>
<td style="text-align:left">æ€»æ˜¯ä¼šå¼€å¯ä¸€ä¸ªæ–°çš„äº‹åŠ¡ï¼Œå¦‚æœå½“å‰å·²ç»æœ‰äº‹åŠ¡ï¼Œå°±å°†å½“å‰äº‹åŠ¡æŒ‚èµ·</td>
</tr>
<tr>
<td style="text-align:left">PROPAGATION_NOT_SUPPORTED</td>
<td style="text-align:left">ä»£ç æ€»æ˜¯ä¼šåœ¨éäº‹åŠ¡çš„ç¯å¢ƒæ‰§è¡Œï¼Œå¦‚æœå½“å‰æœ‰äº‹åŠ¡ï¼Œå…ˆå°†äº‹åŠ¡æŒ‚èµ·ï¼Œæ‰§è¡Œå®Œæˆä¹‹åå†æ¢å¤</td>
</tr>
<tr>
<td style="text-align:left">PROPAGATION_NEVER</td>
<td style="text-align:left">ç»å¯¹ä¸å…è®¸ä»£ç åœ¨æœ‰äº‹åŠ¡çš„ç¯å¢ƒæ‰§è¡Œï¼Œæœ‰äº‹åŠ¡å°±æŠ›å‡ºå¼‚å¸¸åœæ­¢æ‰§è¡Œ</td>
</tr>
<tr>
<td style="text-align:left">PROPAGATION_NESTED</td>
<td style="text-align:left">åµŒå¥—äº‹åŠ¡çº§åˆ«ï¼šå¦‚æœæ²¡æœ‰çˆ¶äº‹åŠ¡ï¼Œå°±ä½¿ç”¨é»˜è®¤æœºåˆ¶ï¼Œå¦‚æœæœ‰ï¼Œå­äº‹åŠ¡æ‰§è¡Œå®Œæˆä¹‹åçˆ¶äº‹åŠ¡æ‰ä¼šæäº¤</td>
</tr>
</tbody>
</table>
<h5 id="äº‹åŠ¡éš”ç¦»çº§åˆ«"><a href="#äº‹åŠ¡éš”ç¦»çº§åˆ«" class="headerlink" title="äº‹åŠ¡éš”ç¦»çº§åˆ«"></a>äº‹åŠ¡éš”ç¦»çº§åˆ«</h5><table>
<thead>
<tr>
<th style="text-align:left">é€šä¿—åç§°</th>
<th style="text-align:left">äº‹åŠ¡éš”ç¦»çº§åˆ«</th>
<th style="text-align:left">ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">è„è¯»</td>
<td style="text-align:left">ISOLATION_READ_UNCOMMITTED</td>
<td style="text-align:left">è¯»æœªæäº¤ å³è„è¯»ï¼Œå¯ä»¥è¯»å–åˆ«çš„äº‹åŠ¡å·²ä¿®æ”¹æœªæäº¤çš„æ•°æ®ï¼Œä¼šå¯¼è‡´è„è¯»ã€å¹»è¯»å’Œä¸å¯é‡å¤åº¦</td>
</tr>
<tr>
<td style="text-align:left">ä¸å¯é‡å¤è¯»</td>
<td style="text-align:left">ISOLATION_READ_COMMITTED</td>
<td style="text-align:left">æäº¤è¯»    å³ä¸å¯é‡å¤è¯»ï¼Œä¸€ä¸ªäº‹ç‰©èƒ½è¯»å–åˆ°å¦ä¸€ä¸ªäº‹åŠ¡å·²ç»æäº¤çš„æ•°æ®ï¼Œåœ¨å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®æ—¶ï¼Œè¯¥æ•°æ®è¢«å¦ä¸€äº‹åŠ¡ä¿®æ”¹ï¼Œè¯»å–çš„æ•°æ®ä¸ä¸€è‡´</td>
</tr>
<tr>
<td style="text-align:left">å¯é‡å¤è¯»</td>
<td style="text-align:left">ISOLATION_REPEATABLE_READ</td>
<td style="text-align:left">å¯é‡å¤è¯» å³ä¸€ä¸ªäº‹ç‰©åªèƒ½è¯»å–åˆ°å¦ä¸€äº‹åŠ¡æäº¤ä¹‹å‰çš„æ•°æ®ï¼Œç¡®ä¿æ¯æ¬¡è¯»å–åˆ°çš„æ•°æ®ä¸€è‡´ã€‚ä½†æ˜¯æ•°æ®åˆæ–°å¢æˆ–è€…ä¿®æ”¹æ—¶ä¸å¯é¢„è§</td>
</tr>
<tr>
<td style="text-align:left">å¹»è¯»</td>
<td style="text-align:left">ISOLATION_SERIALIZABLE</td>
<td style="text-align:left">åºåˆ—åŒ–è¯» å³äº‹åŠ¡ä¸²è¡Œè¯»å–æ•°æ®ï¼Œæ€§èƒ½æœ€å·®ï¼Œå®‰å…¨æ€§æœ€é«˜ï¼Œä¿è¯æ•°æ®å‡†ç¡®æ€§</td>
</tr>
</tbody>
</table>
]]></content>
      <categories>
        <category>JavaåŸºç¡€</category>
      </categories>
      <tags>
        <tag>JavaåŸºç¡€</tag>
        <tag>äº‹åŠ¡</tag>
        <tag>æ•°æ®åº“</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Springbootè¿›è¡Œå›½é™…åŒ–æ—¶è‡ªå®šä¹‰è¯»å–æ•°æ®åº“é…ç½®</title>
    <url>/blog/20190320/%E4%BD%BF%E7%94%A8springboot%E8%BF%9B%E8%A1%8C%E5%9B%BD%E9%99%85%E5%8C%96%E6%97%B6%E8%87%AA%E5%AE%9A%E4%B9%89%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>springbooté»˜è®¤å°±æ”¯æŒå›½é™…åŒ–çš„ï¼Œè€Œä¸”ä¸éœ€è¦ä½ è¿‡å¤šçš„åšä»€ä¹ˆé…ç½®ï¼Œåªéœ€è¦åœ¨<code>resources/</code>ä¸‹åˆ›å»ºå›½é™…åŒ–é…ç½®æ–‡ä»¶å³å¯ï¼Œæ³¨æ„åç§°å¿…é¡»ä»¥messageså¼€å§‹ã€‚ messages.properties ï¼ˆé»˜è®¤çš„è¯­è¨€é…ç½®æ–‡ä»¶ï¼Œå½“æ‰¾ä¸åˆ°å…¶ä»–è¯­è¨€çš„é…ç½®çš„æ—¶å€™ï¼Œä½¿ç”¨è¯¥æ–‡ä»¶è¿›è¡Œå±•ç¤ºï¼‰ã€‚ å…·ä½“çš„å…³äºspringbootçš„å›½é™…åŒ–é…ç½®æˆ‘è¿™è¾¹å°±ä¸å†è¿‡å¤šä»‹ç»(åŒ…æ‹¬Localeçš„è®¾ç½®ä»¥åŠå¦‚ä½•æ ¹æ®åŒºåŸŸè®¾ç½®è¯­è¨€ç­‰)ï¼Œå…³äºé¡µé¢ä¸Šå¾—ä½¿ç”¨å¯ä»¥å‚è€ƒï¼š<a href="!https://www.baidu.com/s?word=springboot+%E5%9B%BD%E9%99%85%E5%8C%96">springbootå›½é™…åŒ–</a>ã€‚åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œæˆ‘è¦ä»‹ç»çš„æ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„åŠŸèƒ½å¹¶ä¸”ç»å¤§éƒ¨åˆ†äººä¹Ÿä¼šç”¨å¾—åˆ°ï¼Œå°±æ˜¯<br><strong><font color="#0099ff" size="5" face="é»‘ä½“">ä¸ä½¿ç”¨é…ç½®æ–‡ä»¶<code>messages.properties</code>å‚¨å­˜å›½é™…åŒ–è¯­è¨€ï¼Œè€Œä½¿ç”¨æ•°æ®åº“è¿›è¡ŒåŠ¨æ€é…ç½®ï¼Œåšåˆ°æ— éœ€é‡å¯æ›´æ”¹é…ç½®ã€‚</font></strong><br><a id="more"></a></p>
<h2 id="å¦‚ä½•ä½¿ç”¨"><a href="#å¦‚ä½•ä½¿ç”¨" class="headerlink" title="å¦‚ä½•ä½¿ç”¨"></a>å¦‚ä½•ä½¿ç”¨</h2><h4 id="MessageSourceä»‹ç»"><a href="#MessageSourceä»‹ç»" class="headerlink" title="MessageSourceä»‹ç»"></a>MessageSourceä»‹ç»</h4><p>Springæä¾›äº†ä¸€ä¸ªæ¥å£MessageSourceç”¨äºè·å–å›½é™…åŒ–ä¿¡æ¯ï¼ŒReloadableResourceBundleMessageSourceå’ŒResourceBundleMessageSourceéƒ½æ˜¯ç»§æ‰¿äº†è¯¥æ¥å£çš„ä¸€ä¸ªæŠ½è±¡å®ç°ç±»AbstractMessageSourceï¼Œåœ¨springå®˜ç½‘æœ‰ä¸€æ®µè¿™æ ·ä»‹ç»messageSourceçš„è¯ï¼š<br><img src="https://img-blog.csdn.net/20180116154941287?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxNDcyMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="springå®˜ç½‘å¯¹äºmessageSourceçš„ä»‹ç»" title="springå®˜ç½‘å¯¹äºmessageSourceçš„ä»‹ç»"><br>å›¾ä¸­çº¢æ¡†ç”»èµ·æ¥çš„æ„æ€å°±æ˜¯ï¼Œä¸Šä¸‹æ–‡åŠ è½½çš„æ—¶å€™ä¼šæŸ¥è¯¢messageSourceçš„beanï¼Œå¦‚æœæ²¡æœ‰å°±ä¼šåˆ›å»ºä¸€ä¸ªåä¸º<code>messageSource</code>æ”¾åœ¨ä¸Šä¸‹æ–‡ä¸­â€¦ â€¦ç­‰ç­‰ã€‚</p>
<h4 id="åœ¨springbootä¸­æ³¨å…¥è‡ªå®šä¹‰messageSource"><a href="#åœ¨springbootä¸­æ³¨å…¥è‡ªå®šä¹‰messageSource" class="headerlink" title="åœ¨springbootä¸­æ³¨å…¥è‡ªå®šä¹‰messageSource"></a>åœ¨springbootä¸­æ³¨å…¥è‡ªå®šä¹‰messageSource</h4><p>é€šè¿‡ä¸Šé¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬å°±å¯ä»¥è‡ªå·±å®šä¹‰è‡ªå·±çš„messageSourceè¿›è¡Œé…ç½®çš„è¯»å–äº†ã€‚<br> <strong> æˆ‘è¿™è¾¹æ˜¯æŠŠè¿™ä¸ªæ”¾åœ¨äº†ä¸šåŠ¡å±‚ï¼Œå¤§å®¶ç”¨çš„æ—¶å€™ä¹Ÿå¯ä»¥ç›´æ¥æ”¾åœ¨æ§åˆ¶å±‚(ä¸€èˆ¬éƒ½æ”¾åœ¨æ§åˆ¶å±‚ï¼Œè¦ç”¨åˆ°)ï¼Œä½¿ç”¨@Compnent(â€œmessageSourceâ€)æ³¨è§£å£°æ˜ä¸‹beanåç§°å³å¯ </strong><br> <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// MyMessageSourceServiceæ˜¯æˆ‘è‡ªå·±çš„æ¥å£ ä½ ä¹Ÿå¯ä»¥ä¸éœ€è¦ã€‚ä½¿ç”¨@Compnent("messageSource")æ³¨è§£å°±è¡Œ</span></span><br><span class="line"><span class="meta">@Service</span>(<span class="string">"messageSource"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMessageSource</span> <span class="keyword">extends</span> <span class="title">AbstractMessageSource</span> <span class="keyword">implements</span> <span class="title">ResourceLoaderAware</span>, <span class="title">MyMessageSourceService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    ResourceLoader resourceLoader;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿™ä¸ªæ˜¯ç”¨æ¥ç¼“å­˜æ•°æ®åº“ä¸­è·å–åˆ°çš„é…ç½®çš„ æ•°æ®åº“é…ç½®æ›´æ”¹çš„æ—¶å€™å¯ä»¥è°ƒç”¨reloadæ–¹æ³•é‡æ–°åŠ è½½</span></span><br><span class="line">    <span class="comment">// å½“ç„¶ å®é™…ä½¿ç”¨è€…ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨è¿™ç§ç¼“å­˜çš„æ–¹å¼</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Map&lt;String, Map&lt;String, String&gt;&gt; LOCAL_CACHE = <span class="keyword">new</span> ConcurrentHashMap&lt;&gt;(<span class="number">256</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    SysI18nService sysI18nService;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(MyMessageSource<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.reload();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é‡æ–°å°†æ•°æ®åº“ä¸­çš„å›½é™…åŒ–é…ç½®åŠ è½½</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reload</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        LOCAL_CACHE.clear();</span><br><span class="line">        LOCAL_CACHE.putAll(loadAllMessageResourcesFromDB());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»æ•°æ®åº“ä¸­è·å–æ‰€æœ‰å›½é™…åŒ–é…ç½® è¿™è¾¹å¯ä»¥æ ¹æ®è‡ªå·±æ•°æ®åº“è¡¨ç»“æ„è¿›è¡Œç›¸åº”çš„ä¸šåŠ¡å®ç°</span></span><br><span class="line"><span class="comment">     * å¯¹åº”çš„è¯­è¨€èƒ½å¤Ÿå–å‡ºæ¥å¯¹åº”çš„å€¼å°±è¡Œäº† æ— éœ€ä¸€å®šè¦æŒ‰ç…§è¿™ä¸ªæ–¹æ³•æ¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, Map&lt;String, String&gt;&gt; loadAllMessageResourcesFromDB() &#123;</span><br><span class="line">        List&lt;SysI18nBO&gt; list = sysI18nService.findList(<span class="keyword">new</span> SysI18nAO());</span><br><span class="line">        <span class="keyword">if</span> (CollectionUtils.isNotEmpty(list)) &#123;</span><br><span class="line">            <span class="keyword">final</span> Map&lt;String, String&gt; zhCnMessageResources = <span class="keyword">new</span> HashMap&lt;&gt;(list.size());</span><br><span class="line">            <span class="keyword">final</span> Map&lt;String, String&gt; enUsMessageResources = <span class="keyword">new</span> HashMap&lt;&gt;(list.size());</span><br><span class="line">            <span class="keyword">final</span> Map&lt;String, String&gt; idIdMessageResources = <span class="keyword">new</span> HashMap&lt;&gt;(list.size());</span><br><span class="line">            <span class="keyword">for</span> (SysI18nBO bo : list) &#123;</span><br><span class="line">                String name = bo.getModel() + <span class="string">"."</span> + bo.getName();</span><br><span class="line">                String zhText = bo.getZhCn();</span><br><span class="line">                String enText = bo.getEnUs();</span><br><span class="line">                String idText = bo.getInId();</span><br><span class="line">                zhCnMessageResources.put(name, zhText);</span><br><span class="line">                enUsMessageResources.put(name, enText);</span><br><span class="line">                idIdMessageResources.put(name, idText);</span><br><span class="line">            &#125;</span><br><span class="line">            LOCAL_CACHE.put(<span class="string">"zh"</span>, zhCnMessageResources);</span><br><span class="line">            LOCAL_CACHE.put(<span class="string">"en"</span>, enUsMessageResources);</span><br><span class="line">            LOCAL_CACHE.put(<span class="string">"in"</span>, idIdMessageResources);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> MapUtils.EMPTY_MAP;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»ç¼“å­˜ä¸­å–å‡ºå›½é™…åŒ–é…ç½®å¯¹åº”çš„æ•°æ® æˆ–è€…ä»çˆ¶çº§è·å–</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> code</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> locale</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSourceFromCache</span><span class="params">(String code, Locale locale)</span> </span>&#123;</span><br><span class="line">        String language = locale.getLanguage();</span><br><span class="line">        Map&lt;String, String&gt; props = LOCAL_CACHE.get(language);</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != props &amp;&amp; props.containsKey(code)) &#123;</span><br><span class="line">            <span class="keyword">return</span> props.get(code);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">null</span> != <span class="keyword">this</span>.getParentMessageSource()) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">this</span>.getParentMessageSource().getMessage(code, <span class="keyword">null</span>, locale);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">                logger.error(ex.getMessage(), ex);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> code;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸‹é¢ä¸‰ä¸ªé‡å†™çš„æ–¹æ³•æ˜¯æ¯”è¾ƒé‡è¦çš„</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setResourceLoader</span><span class="params">(ResourceLoader resourceLoader)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.resourceLoader = (resourceLoader == <span class="keyword">null</span> ? <span class="keyword">new</span> DefaultResourceLoader() : resourceLoader);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> MessageFormat <span class="title">resolveCode</span><span class="params">(String code, Locale locale)</span> </span>&#123;</span><br><span class="line">        String msg = getSourceFromCache(code, locale);</span><br><span class="line">        MessageFormat messageFormat = <span class="keyword">new</span> MessageFormat(msg, locale);</span><br><span class="line">        <span class="keyword">return</span> messageFormat;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">resolveCodeWithoutArguments</span><span class="params">(String code, Locale locale)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getSourceFromCache(code, locale);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h4><p> è‡³æ­¤ï¼Œè‡ªå®šä¹‰å›½é™…åŒ–é…ç½®è¯»å–æ•°æ®åº“å·²ç»å®Œæˆï¼Œåªéœ€è¦åœ¨æ›´æ–°æ•°æ®åº“é…ç½®çš„æ—¶å€™è°ƒç”¨ä¸€ä¸‹reloadé‡ç½®ä¸€ä¸‹ç¼“å­˜ä¸­çš„ä¿¡æ¯å³å¯ã€‚</p>
<blockquote>
<p><a href="!https://blog.csdn.net/u014721131/article/details/79075802">å‚è€ƒåšå®¢ï¼šspring xmlé…ç½®è‡ªå®šä¹‰è¯»å–æ•°æ®åº“çš„messageSource</a></p>
</blockquote>
]]></content>
      <categories>
        <category>springboot</category>
      </categories>
      <tags>
        <tag>springboot</tag>
        <tag>å›½é™…åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title>Layuiç»“åˆfreemarker+springbootè¿›è¡Œå‰ç«¯æ•°æ®è¡¨æ ¼å­—å…¸è½¬ä¹‰</title>
    <url>/blog/20190316/layui%E5%BC%80%E5%8F%91%E4%B8%AD%E7%BB%93%E5%90%88freemarker%E5%B1%95%E7%A4%BA%E5%AD%97%E5%85%B8%E6%95%B0%E6%8D%AE/</url>
    <content><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>åœ¨layuiçš„å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ°è¡¨æ ¼æ•°æ®å±•ç¤ºã€‚ä½†æ˜¯åœ¨æ•°æ®åº“ä¸­æˆ‘ä»¬é€šå¸¸ä¿å­˜çš„ä¸€äº›çŠ¶æ€ç­‰æ•°æ®ï¼Œéƒ½æ˜¯æšä¸¾å€¼ï¼Œè€Œæˆ‘ä»¬åœ¨å‰ç«¯å±•ç¤ºçš„æ—¶å€™å°±ä¸èƒ½ä½¿ç”¨è¿™äº›æšä¸¾å€¼äº†ï¼Œè€Œè¦å±•ç¤ºæšä¸¾å€¼å¯¹åº”çš„æ„ä¹‰æ•°æ®ã€‚æ¯”å¦‚çŠ¶æ€statusï¼Œ1=å¯ç”¨ï¼Œ0=åœç”¨ã€‚<br>é‚£ä¹ˆåœ¨layuiçš„æ•°æ®è¡¨æ ¼ä¸­ï¼Œæˆ‘ä»¬è¦å±•ç¤ºè¿™æ ·çš„æ•°æ®ï¼Œå†™æ³•å¯ä»¥æ˜¯ï¼š<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">templet: <span class="function"><span class="keyword">function</span> (<span class="params">d</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(d.status === <span class="number">1</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">"å¯ç”¨"</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span>(d.status === <span class="number">0</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">"åœç”¨"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ä½†æ˜¯è¿™æ ·çš„å†™æ³•å¾ˆlowå•Šï¼Œæˆ‘ä»¬åœ¨æ•°æ®åº“ä¸­å®šä¹‰å¤šå°‘æšä¸¾å€¼åœ¨è¿™é‡Œå°±è¦å†™å¤šå°‘ä»£ç ï¼Œä¸€æ—¦æœ‰é‡å¤ä½¿ç”¨çš„æƒ…å†µï¼Œè¿™ç§å†™æ³•ä¼šè®©æˆ‘ä»¬ç—›ä¸æ¬²ç”Ÿã€‚<br>åœ¨è€ƒè™‘åˆ°åå°ä½¿ç”¨freemarkerçš„æƒ…å†µä¸‹ï¼Œé…ç½®freemarkerè‡ªå®šä¹‰æ ‡ç­¾å°±èƒ½å¾ˆå¥½åœ°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚<br>æœ€åæˆ‘ä»¬çš„å†™æ³•å°±ä¼šç®€åŒ–æˆï¼š<code>&lt;@th type=&quot;template&quot; nid=&quot;basics_sys_status&quot; objName=&quot;status&quot;&gt;&lt;/@th&gt;</code>ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹å¦‚ä½•åœ¨springbootä¸­é…ç½®ä½¿ç”¨å§ã€‚<br><a id="more"></a></p>
<h3 id="freemarkerè‡ªå®šä¹‰æ ‡ç­¾ä»‹ç»åŠä½¿ç”¨"><a href="#freemarkerè‡ªå®šä¹‰æ ‡ç­¾ä»‹ç»åŠä½¿ç”¨" class="headerlink" title="freemarkerè‡ªå®šä¹‰æ ‡ç­¾ä»‹ç»åŠä½¿ç”¨"></a>freemarkerè‡ªå®šä¹‰æ ‡ç­¾ä»‹ç»åŠä½¿ç”¨</h3><p><code>TemplateDirectiveModel</code>æ¥å£æ˜¯freemarkerè‡ªå®šæ ‡ç­¾æˆ–è€…è‡ªå®šä¹‰æŒ‡ä»¤çš„æ ¸å¿ƒå¤„ç†æ¥å£ã€‚å½“æ¨¡æ¿é¡µé¢é‡åˆ°ç”¨æˆ·è‡ªå®šä¹‰çš„æ ‡ç­¾æŒ‡ä»¤æ—¶ï¼Œ<code>execute()</code>æ–¹æ³•ä¼šè¢«æ‰§è¡Œã€‚<code>execute()</code>æ–¹æ³•å¦‚ä¸‹ã€‚<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">  Environment env, Map params, TemplateModel[] loopVars, TemplateDirectiveBody body</span></span></span><br><span class="line"><span class="function"><span class="params">)</span> <span class="keyword">throws</span> TemplateException, IOException</span>;</span><br></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬åœ¨ä½¿ç”¨freemarkerè‡ªå®šä¹‰æ ‡ç­¾çš„æ—¶å€™éœ€è¦å®ç°è¯¥æ¥å£å¹¶ä¸”é‡å†™executeæ–¹æ³•ã€‚</p>
<h4 id="execute-æ–¹æ³•å‚æ•°è§£é‡Š"><a href="#execute-æ–¹æ³•å‚æ•°è§£é‡Š" class="headerlink" title="execute()æ–¹æ³•å‚æ•°è§£é‡Š"></a><code>execute()</code>æ–¹æ³•å‚æ•°è§£é‡Š</h4><ul>
<li><em>Environment env</em>ï¼šç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œé€šå¸¸ç”¨å®ƒæ¥è¾“å‡ºç›¸å…³å†…å®¹ï¼Œå¦‚<code>Writer out = env.getOut();</code></li>
<li><em>Map params</em>ï¼šè‡ªå®šä¹‰æ ‡ç­¾ä¼ è¿‡æ¥çš„å¯¹è±¡ï¼Œå°±æ˜¯ä»é¡µé¢ä¸Šè·å–çš„å‚æ•°ï¼Œå…¶key=è‡ªå®šä¹‰æ ‡ç­¾çš„å‚æ•°åï¼Œvalueå€¼æ˜¯TemplateModelç±»å‹ï¼Œè€ŒTemplateModelæ˜¯ä¸€ä¸ªæ¥å£ç±»å‹ï¼Œé€šå¸¸æˆ‘ä»¬éƒ½ä½¿ç”¨TemplateScalarModelæ¥å£æ¥æ›¿ä»£å®ƒè·å–ä¸€ä¸ªString å€¼ï¼Œå¦‚TemplateScalarModel.getAsString();å½“ç„¶è¿˜æœ‰å…¶å®ƒå¸¸ç”¨çš„æ›¿ä»£æ¥å£ï¼Œå¦‚TemplateNumberModelè·å–numberï¼ŒTemplateHashModelç­‰ã€‚<br>åœ¨æœ¬ä¾‹ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬ä¼šå°†mapè½¬æˆæˆ‘ä»¬è‡ªå·±çš„å¯¹è±¡è¿›è¡Œæ•°æ®ä¿å­˜ã€‚</li>
<li><em>TemplateModel[] loopVars</em>ï¼šå¾ªç¯æ›¿ä»£å˜é‡</li>
<li><em>TemplateDirectiveBody body</em>ï¼šæ ‡ç­¾ä¸­åµŒå¥—çš„å†…å®¹ï¼Œå¦‚<code>&lt;@tag&gt;body&lt;/@tag&gt;</code>ï¼Œå°±æ˜¯è¿™ä¸ªbody</li>
</ul>
<h4 id="å¼€å§‹ä½¿ç”¨"><a href="#å¼€å§‹ä½¿ç”¨" class="headerlink" title="å¼€å§‹ä½¿ç”¨"></a>å¼€å§‹ä½¿ç”¨</h4><h6 id="å®šä¹‰æ¥æ”¶é¡µé¢å‚æ•°çš„å¯¹è±¡"><a href="#å®šä¹‰æ¥æ”¶é¡µé¢å‚æ•°çš„å¯¹è±¡" class="headerlink" title="å®šä¹‰æ¥æ”¶é¡µé¢å‚æ•°çš„å¯¹è±¡"></a>å®šä¹‰æ¥æ”¶é¡µé¢å‚æ•°çš„å¯¹è±¡</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@Setter</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TableThTag</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¯¹è±¡å±æ€§åã€éœ€è¦è¿›è¡Œå¯¹è±¡å±æ€§è·å–ã€‘</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String objName;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å­—å…¸æ ‡è¯†</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String nid;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç±»å‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String type;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="å®ç°TemplateDirectiveModelæ¥å£å¹¶é‡å†™executeæ–¹æ³•"><a href="#å®ç°TemplateDirectiveModelæ¥å£å¹¶é‡å†™executeæ–¹æ³•" class="headerlink" title="å®ç°TemplateDirectiveModelæ¥å£å¹¶é‡å†™executeæ–¹æ³•"></a>å®ç°<code>TemplateDirectiveModel</code>æ¥å£å¹¶é‡å†™<code>execute</code>æ–¹æ³•</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@org</span>.springframework.context.annotation.Configuration</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TableThDirective</span> <span class="keyword">implements</span> <span class="title">TemplateDirectiveModel</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    Logger logger = LoggerFactory.getLogger(getClass().getName());</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * FreeMarkerè‡ªå®šä¹‰æŒ‡ä»¤</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(Environment environment, Map map, TemplateModel[] templateModels,</span></span></span><br><span class="line"><span class="function"><span class="params">                        TemplateDirectiveBody templateDirectiveBody)</span> <span class="keyword">throws</span> TemplateException, IOException </span>&#123;</span><br><span class="line">        TableThTag tableThTag = <span class="keyword">new</span> TableThTag();</span><br><span class="line">        <span class="comment">//æ ¡éªŒå‚æ•°</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//  ç”¨æ¥å°†ä¸€äº› key-value çš„å€¼ï¼ˆä¾‹å¦‚ hashmapï¼‰æ˜ å°„åˆ° bean ä¸­çš„å±æ€§</span></span><br><span class="line">            BeanUtils.populate(tableThTag, map);</span><br><span class="line">            <span class="keyword">if</span> (StringUtils.isEmpty(tableThTag.getNid()) || StringUtils.isEmpty(tableThTag.getType())) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"nid,typeä¸èƒ½ä¸ºç©º"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            logger.error(<span class="string">"æ•°æ®è½¬åŒ–å¼‚å¸¸"</span>, e);</span><br><span class="line">        &#125;</span><br><span class="line">        StringBuilder html = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="comment">// æ ¹æ®ç±»å‹åˆ›å»ºä¸åŒçš„HTMLç”Ÿæˆå™¨</span></span><br><span class="line">        ThFormatterInterface thFormatterInterface = ThFormatterFactory.createThFormatter(tableThTag.getType());</span><br><span class="line">        <span class="keyword">if</span> (thFormatterInterface != <span class="keyword">null</span>) &#123;</span><br><span class="line">            String dictHtml = thFormatterInterface.buildFormatterHtml(tableThTag.getNid(), tableThTag.getFieldName());</span><br><span class="line">            html.append(dictHtml);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ‰§è¡ŒçœŸæ­£æŒ‡ä»¤çš„æ‰§è¡Œéƒ¨åˆ†:</span></span><br><span class="line">        Writer out = environment.getOut();</span><br><span class="line">        out.write(html.toString());</span><br><span class="line">        <span class="keyword">if</span> (templateDirectiveBody != <span class="keyword">null</span>) &#123;</span><br><span class="line">            templateDirectiveBody.render(environment.getOut());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> BeansWrapper <span class="title">getBeansWrapper</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        BeansWrapper beansWrapper =</span><br><span class="line">                <span class="keyword">new</span> BeansWrapperBuilder(Configuration.VERSION_2_3_21).build();</span><br><span class="line">        <span class="keyword">return</span> beansWrapper;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘å°†é¡µé¢ä¸Šçš„å‚æ•°è½¬ä¸º<code>TableThTag</code>å¯¹è±¡ã€‚ç„¶åå†æ ¹æ®å‰ç«¯é¡µé¢ä¸åŒçš„typeç±»å‹å¯¹åº”<br>å®ç°äº†<code>ThFormatterInterface</code>çš„å·¥å‚å¯¹è±¡ï¼Œåˆ›å»ºä¸åŒçš„htmlç”Ÿæˆå™¨ã€‚ï¼ˆè¿™é‡Œè€ƒè™‘åˆ°æ‰©å±•æ€§ï¼Œå¯èƒ½ä»¥åä¸å…‰åˆ›å»ºæ•°æ®è¡¨æ ¼ä¼šç”¨çš„åˆ°ï¼Œæ¯”å¦‚ä¸‹æ‹‰æ¡†ä»€ä¹ˆçš„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼åˆ›å»ºï¼Œæ‰€ä»¥åœ¨è¿™é‡Œä½¿ç”¨æŠ½è±¡å·¥å‚ä¾æ®ç±»å‹åŠ¨æ€åˆ›å»ºã€‚ï¼‰<br>ä¸‹é¢å°±æ˜¯åˆ›å»ºhtmlçš„å…·ä½“å·¥å‚ä»¥åŠå®ç°æ–¹æ³•ã€‚</p>
<h6 id="ThFormatterInterfaceæŠ½è±¡å·¥å‚åˆ›å»ºhtmlç”Ÿæˆå™¨"><a href="#ThFormatterInterfaceæŠ½è±¡å·¥å‚åˆ›å»ºhtmlç”Ÿæˆå™¨" class="headerlink" title="ThFormatterInterfaceæŠ½è±¡å·¥å‚åˆ›å»ºhtmlç”Ÿæˆå™¨"></a><code>ThFormatterInterface</code>æŠ½è±¡å·¥å‚åˆ›å»ºhtmlç”Ÿæˆå™¨</h6><p>æ¥å£<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ThFormatterInterface</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ„é€ ç”Ÿæˆæšä¸¾html</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nid</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">String <span class="title">buildFormatterHtml</span><span class="params">(String nid, String fieldName)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å·¥å‚<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThFormatterFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Logger logger = LoggerFactory.getLogger(ThFormatterFactory<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ThFormatterInterface <span class="title">createThFormatter</span><span class="params">(String type)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(StringUtils.isEmpty(type))&#123;</span><br><span class="line">            <span class="keyword">return</span>  <span class="keyword">new</span> ThFormatterTemplate();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ–‡ä»¶å å¦‚æœtypeä¼ template å°±éœ€è¦æœ‰ä¸€ä¸ªåä¸ºThFormatterTemplateçš„æ–‡ä»¶</span></span><br><span class="line">        <span class="comment">// å¹¶ä¸”å®ç°äº†ThFormatterInterfaceä»¥åŠé‡å†™ç”Ÿæˆhtmlçš„æ–¹æ³•</span></span><br><span class="line">        String fileName = <span class="string">"ThFormatter"</span> + StringUtil.firstCharUpperCase(type);</span><br><span class="line">        <span class="comment">//ç±»è·¯å¾„ é€šè¿‡åå°„å»åˆ›å»ºå®ç°ç±»</span></span><br><span class="line">        String className = <span class="string">"com.module.freemarker.impl."</span>+fileName;</span><br><span class="line">        <span class="comment">//ç”Ÿæˆè¡¨å¤´æ ¼å¼å®ç°ç±»</span></span><br><span class="line">        ThFormatterInterface thFormatterInterface = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            thFormatterInterface =(ThFormatterInterface) Class.forName(className).newInstance();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            logger.error(e.getMessage(),e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> thFormatterInterface;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å®ç°ç±»<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThFormatterTemplate</span> <span class="keyword">implements</span> <span class="title">ThFormatterInterface</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">buildFormatterHtml</span><span class="params">(String nid, String fieldName)</span> </span>&#123;</span><br><span class="line">        Assert.notEMPTY(nid, <span class="string">"nidä¸èƒ½ä¸ºç©º"</span>);</span><br><span class="line">        Assert.notEMPTY(fieldName, <span class="string">"objNameä¸èƒ½ä¸ºç©º"</span>);</span><br><span class="line">        SysDictService sysDictService = SpringContextHolder.getBean(SysDictService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="comment">// é€šè¿‡nidæŸ¥è¯¢å­—å…¸ç±» è¿™é‡Œä¸éœ€è¦è¿›è¡Œç…§æŠ„ æ¯ä¸ªäººéƒ½ä¼šæœ‰è‡ªå·±çš„å®ç°æ–¹æ³•</span></span><br><span class="line">        List&lt;SysDictBO&gt; sysDictModelList = sysDictService.findByPartnerNid(nid);</span><br><span class="line">        StringBuilder dictHtml = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="comment">// åæ­£ç›®çš„å°±æ˜¯æ ¹æ®å­—å…¸ç±»ç”Ÿæˆå¯¹åº”çš„htmlå°±è¡Œäº† éœ€è¦ç”Ÿæˆçš„æ ¼å¼å¯¹ç…§templateåŸæœ¬åº”è¯¥æœ‰çš„å†™æ³•å°±è¡Œäº†</span></span><br><span class="line">        dictHtml.append(<span class="string">"templet: function(d)&#123; "</span>);</span><br><span class="line">        <span class="keyword">for</span> (SysDictBO sysDict : sysDictModelList) &#123;</span><br><span class="line">            dictHtml.append(<span class="string">"if(d."</span> + fieldName + <span class="string">" == '"</span> + sysDict.getValue() + <span class="string">"')&#123; return '"</span> + sysDict.getName() + <span class="string">"';&#125;"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        dictHtml.append(<span class="string">"&#125;"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dictHtml.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h6 id="æœ€åå°†è‡ªå®šä¹‰æ ‡ç­¾æ³¨å…¥åˆ°freemarkeræ ‡ç­¾ä¸­å»"><a href="#æœ€åå°†è‡ªå®šä¹‰æ ‡ç­¾æ³¨å…¥åˆ°freemarkeræ ‡ç­¾ä¸­å»" class="headerlink" title="æœ€åå°†è‡ªå®šä¹‰æ ‡ç­¾æ³¨å…¥åˆ°freemarkeræ ‡ç­¾ä¸­å»"></a>æœ€åå°†è‡ªå®šä¹‰æ ‡ç­¾æ³¨å…¥åˆ°freemarkeræ ‡ç­¾ä¸­å»</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@org</span>.springframework.context.annotation.Configuration</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FreemarkerConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> Configuration configuration;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> TableThDirective tableThDirective;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSharedVariable</span><span class="params">()</span></span>&#123;</span><br><span class="line">        configuration.setSharedVariable(<span class="string">"th"</span>,tableThDirective);</span><br><span class="line">        configuration.setSharedVariable(<span class="string">"shiro"</span>,<span class="keyword">new</span> ShiroTags());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>è¿™æ ·å°±å¤§åŠŸå‘Šæˆäº†ã€‚</p>
<p>åœ¨é¡µé¢ä¸Šè¿›è¡Œä½¿ç”¨å§ï¼š<code>&lt;@th type=&quot;template&quot; nid=&quot;basics_sys_status&quot; objName=&quot;status&quot;&gt;&lt;/@th&gt;</code></p>
<p>ä»¥åè¿›è¡Œæ‰©å±•ä»€ä¹ˆçš„ä¹Ÿæ–¹ä¾¿ï¼Œæ¯”å¦‚ç”Ÿæˆä¸‹æ‹‰æ¡†ï¼š<code>&lt;@th type=&quot;select&quot; nid=&quot;basics_sys_status&quot; objName=&quot;status&quot;&gt;&lt;/@th&gt;</code>è¿™æ ·ç„¶åè‡ªåŠ¨ç”Ÿæˆhtmlçš„æ—¶å€™æŸ¥å‡ºæ¥æ‰€æœ‰çš„å­—å…¸ï¼Œæ ¹æ®ç±»å‹ç”Ÿæˆå¤šä¸ª<option>å‡ºæ¥å°±è¡Œäº†ã€‚</option></p>
]]></content>
      <categories>
        <category>springboot</category>
      </categories>
      <tags>
        <tag>å¼€å‘æ—¥è®°</tag>
        <tag>springboot</tag>
        <tag>freemarker</tag>
        <tag>å·¥å‚æ¨¡å¼</tag>
        <tag>layui</tag>
      </tags>
  </entry>
  <entry>
    <title>Springboot+shiroè§£å†³sessionæ±¡æŸ“çš„é—®é¢˜</title>
    <url>/blog/20190309/springboot+shiro%E8%A7%A3%E5%86%B3session%E6%B1%A1%E6%9F%93%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h4 id="åŒä¸€ä¸ªæœåŠ¡å™¨å¯åŠ¨å¤šä¸ªwebé¡¹ç›®é€ æˆsessionæ±¡æŸ“"><a href="#åŒä¸€ä¸ªæœåŠ¡å™¨å¯åŠ¨å¤šä¸ªwebé¡¹ç›®é€ æˆsessionæ±¡æŸ“" class="headerlink" title="åŒä¸€ä¸ªæœåŠ¡å™¨å¯åŠ¨å¤šä¸ªwebé¡¹ç›®é€ æˆsessionæ±¡æŸ“"></a>åŒä¸€ä¸ªæœåŠ¡å™¨å¯åŠ¨å¤šä¸ªwebé¡¹ç›®é€ æˆsessionæ±¡æŸ“</h4><p>æ˜¨å¤©åœ¨æ•²ä»£ç çš„æ—¶å€™é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼ŒåŒä¸€ä¸ªé¡¹ç›®ï¼Œæˆ‘åˆ›å»ºäº†ä¸¤ä¸ªåˆ†æ”¯ï¼Œåˆ†åˆ«ä½¿ç”¨ä¸åŒçš„ç«¯å£ã€‚<br>ä½†æ˜¯åœ¨æµ‹è¯•ç¯å¢ƒå¯åŠ¨çš„æ—¶å€™æˆ‘å‘ç°ï¼Œåœ¨åŒä¸€ä¸ªæµè§ˆå™¨ä¸Šï¼Œæˆ‘åªèƒ½ç™»é™†å…¶ä¸­çš„ä¸€ä¸ªåå°ã€‚åœ¨ç™»é™†å¦ä¸€ä¸ªåå°ä¹‹åï¼Œå‰é¢é‚£ä¸ª<br>åˆéœ€è¦å†é‡æ–°ç™»é™†äº†ã€‚</p>
<p>åŸå› æ‰¾äº†å¥½ä¹…ï¼Œæœ€åF12æ§åˆ¶å°æŸ¥çœ‹sessionå‘ç°ï¼Œè¿™ä¸¤ä¸ªwebé¡¹ç›®ï¼Œä½¿ç”¨çš„éƒ½æ˜¯JSessionIdä½œä¸ºcookieçš„keyï¼Œåœ¨ç™»é™†å¦ä¸€ä¸ªæ—¶ï¼Œæµè§ˆå™¨çš„è¿™ä¸ªcookieå€¼å°±ä¼šè¢«æ”¹å˜ï¼Œæ‰€ä»¥å‰è€…å°±éœ€è¦åœ¨é‡æ–°ç™»é™†äº†ã€‚</p>
<a id="more"></a>
<h4 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h4><p>åœ¨springbootä¸­ï¼Œå¯¹shiroé…ç½®è¿›è¡Œæ›´æ”¹sessionä¿å­˜æ—¶çš„cookieçš„keyåç§°ï¼Œå¦‚ä¸‹ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@Bean</span><br><span class="line">public DefaultWebSessionManager sessionManager() &#123;</span><br><span class="line">    DefaultWebSessionManager sessionManager = new DefaultWebSessionManager();</span><br><span class="line">    Cookie cookie = sessionManager.getSessionIdCookie();</span><br><span class="line">    cookie.setName(&quot;MySessionId&quot;);</span><br><span class="line">    return sessionManager;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç„¶ååœ¨<code>securityManager</code>ä¸­å°†æˆ‘ä»¬çš„<code>sessionManager</code>æ³¨å…¥è¿›å»ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line"> * SecurityManagerï¼Œæƒé™ç®¡ç†ï¼Œè¿™ä¸ªç±»ç»„åˆäº†ç™»é™†ï¼Œç™»å‡ºï¼Œæƒé™ï¼Œsessionçš„å¤„ç†ï¼Œæ˜¯ä¸ªæ¯”è¾ƒé‡è¦çš„ç±»ã€‚</span><br><span class="line"> */</span><br><span class="line">@Bean</span><br><span class="line">public DefaultWebSecurityManager securityManager() &#123;</span><br><span class="line">    DefaultWebSecurityManager securityManager = new DefaultWebSecurityManager();</span><br><span class="line">    securityManager.setRealm(myShiroRealm());</span><br><span class="line">    securityManager.setSessionManager(sessionManager());</span><br><span class="line">    return securityManager;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>åªéœ€è¦è¿™æ ·ä¿®æ”¹å¥½å°±å¯ä»¥äº†ã€‚ç„¶åé‡å¯é¡¹ç›®ï¼Œå°±ä¼šå‘ç°ï¼Œä¸¤ä¸ªwebé¡¹ç›®éƒ½å¯ä»¥åŒæ—¶ç™»é™†äº†ã€‚</p>
]]></content>
      <categories>
        <category>springboot</category>
      </categories>
      <tags>
        <tag>springboot</tag>
        <tag>shiro</tag>
        <tag>sessionæ±¡æŸ“</tag>
      </tags>
  </entry>
  <entry>
    <title>Leetcode - Zå­—å½¢å˜æ¢</title>
    <url>/blog/20181223/leetcode-Z%E5%AD%97%E5%BD%A2%E5%8F%98%E6%8D%A2/</url>
    <content><![CDATA[<h4 id="é¢˜ç›®å¦‚ä¸‹"><a href="#é¢˜ç›®å¦‚ä¸‹" class="headerlink" title="é¢˜ç›®å¦‚ä¸‹"></a>é¢˜ç›®å¦‚ä¸‹</h4><p>å°†ä¸€ä¸ªç»™å®šå­—ç¬¦ä¸²æ ¹æ®ç»™å®šçš„è¡Œæ•°ï¼Œä»¥ä»ä¸Šå¾€ä¸‹ã€ä»å·¦åˆ°å³è¿›è¡Œ Z å­—å½¢æ’åˆ—ã€‚</p>
<p>æ¯”å¦‚è¾“å…¥å­—ç¬¦ä¸²ä¸º â€œLEETCODEISHIRINGâ€ è¡Œæ•°ä¸º 3 æ—¶ï¼Œæ’åˆ—å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">L   C   I   R</span><br><span class="line">E T O E S I I G</span><br><span class="line">E   D   H   N</span><br></pre></td></tr></table></figure>
<p>ä¹‹åï¼Œä½ çš„è¾“å‡ºéœ€è¦ä»å·¦å¾€å³é€è¡Œè¯»å–ï¼Œäº§ç”Ÿå‡ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ï¼šâ€LCIRETOESIIGEDHNâ€ã€‚<br><a id="more"></a><br>è¯·ä½ å®ç°è¿™ä¸ªå°†å­—ç¬¦ä¸²è¿›è¡ŒæŒ‡å®šè¡Œæ•°å˜æ¢çš„å‡½æ•°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">string convert(string s, int numRows);</span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹ 1:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: s = &quot;LEETCODEISHIRING&quot;, numRows = 3</span><br><span class="line">è¾“å‡º: &quot;LCIRETOESIIGEDHN&quot;</span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹ 2:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: s = &quot;LEETCODEISHIRING&quot;, numRows = 4</span><br><span class="line">è¾“å‡º: &quot;LDREOEIIECIHNTSG&quot;</span><br></pre></td></tr></table></figure>
<p>è§£é‡Š:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">L     D     R</span><br><span class="line">E   O E   I I</span><br><span class="line">E C   I H   N</span><br><span class="line">T     S     G</span><br></pre></td></tr></table></figure>
<h4 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h4><p>æ‹¿åˆ°è¿™ä¸ªé¢˜ç›®ï¼Œç¬¬ä¸€æ—¶é—´å°±å¯ä»¥æƒ³åˆ°ï¼Œæ ¹æ®é¢˜ä¸­å›¾ç¤ºæ„é€ äºŒç»´æ•°ç»„ï¼Œå…ˆå°†æ•°æ®æŒ‰ç…§ç›¸åº”çš„æ ·å­å­˜å‚¨è¿›å»ï¼Œæœ€åå†ä»æ•°ç»„ä¸­æŒ‰è¡Œå–å‡ºï¼Œä½†æ˜¯è¿™æ ·ä¼šæœ‰å ç”¨æ›´å¤šå†…å­˜ç©ºé—´çš„é£é™©ã€‚æ‰€ä»¥ï¼Œæˆ‘è¿™è¾¹è¿˜æ€è€ƒäº†ç¬¬äºŒç§è§£æ³•ï¼šå°±æ˜¯ç›´æ¥æ ¹æ®è§„å¾‹è®¡ç®—å‡ºä¸‹ä¸€ä¸ªè¦è¾“å‡ºçš„å­—ç¬¦çš„ä¸‹æ ‡ï¼Œç›´æ¥è¾“å‡ºå³å¯ï¼Œæ— éœ€å†åˆ›å»ºå¤šä½™çš„äºŒç»´æ•°ç»„ã€‚</p>
<ul>
<li>ç¬¬ä¸€ç§è§£æ³•ï¼šæ„é€ äºŒç»´æ•°ç»„</li>
</ul>
<p>æ„é€ äºŒä½æ•°ç»„æœ€ä¸»è¦çš„å°±æ˜¯è®¡ç®—å‡ºè¿™ä¸ªäºŒç»´æ•°ç»„æœ‰å¤šå°‘åˆ—ï¼Œåˆ—æ•°æœ‰äº†ï¼ŒæŒ‰ç…§Zå‹è§„å¾‹å°†åŸå­—ç¬¦ä¸²å¡è¿›å»å°±è¡Œäº†ï¼Œè®¡ç®—åˆ—æ•°ä»£ç å¦‚ä¸‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getColNum</span><span class="params">(String s, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> x = s.length() / (<span class="number">2</span> * n - <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">int</span> y = s.length() % (<span class="number">2</span> * n - <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">int</span> l = x + <span class="number">1</span> + x * (n - <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span> (y &gt;= n) &#123;</span><br><span class="line">            l = l + <span class="number">1</span> + y % n;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> l;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ç¬¬äºŒç§è§£æ³•ï¼šè®¡ç®—ä¸‹ä¸€ä¸ªè¦è¾“å‡ºçš„å­—ç¬¦çš„ä¸‹æ ‡<br>ç›´æ¥çœ‹githubä»£ç å§ï¼š<a href="https://github.com/Fatezhang/DataStructureAndAlgorithm/tree/master/Algorithm/src/main/java/Alogrithm/Alogrithm/ZigZagConversion" target="_blank" rel="noopener">ç‚¹è¿™é‡Œ</a></li>
</ul>
]]></content>
      <categories>
        <category>æ•°æ®ç»“æ„ä¸ç®—æ³•</category>
        <category>ç®—æ³•é¢˜è§£</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>ç®—æ³•é¢˜è§£</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaä¸­mapæ–°çš„éªšæ“ä½œ</title>
    <url>/blog/20181209/Java%E4%B8%ADmap%E6%96%B0%E7%9A%84%E9%AA%9A%E6%93%8D%E4%BD%9C/</url>
    <content><![CDATA[<h4 id="åœ¨Java8ä¸­å¯¹äºMapçš„æ“ä½œæ–°å¢çš„computeä¹‹ç±»çš„æ–¹æ³•ï¼Œå¯¹äºå¼€å‘ä¸­å¾ˆæœ‰å¸®åŠ©ï¼Œåœ¨æ­¤å¤„æ•´ç†ä¸€ä¸‹å…¶ç”¨æ³•ï¼Œä»¥åŠæ–¹æ³•ä¹‹é—´çš„å¼‚åŒï¼Œå…·ä½“çš„å…ˆæ€»ç»“ä¸€ä¸‹å¦‚ä¸‹ï¼š"><a href="#åœ¨Java8ä¸­å¯¹äºMapçš„æ“ä½œæ–°å¢çš„computeä¹‹ç±»çš„æ–¹æ³•ï¼Œå¯¹äºå¼€å‘ä¸­å¾ˆæœ‰å¸®åŠ©ï¼Œåœ¨æ­¤å¤„æ•´ç†ä¸€ä¸‹å…¶ç”¨æ³•ï¼Œä»¥åŠæ–¹æ³•ä¹‹é—´çš„å¼‚åŒï¼Œå…·ä½“çš„å…ˆæ€»ç»“ä¸€ä¸‹å¦‚ä¸‹ï¼š" class="headerlink" title="åœ¨Java8ä¸­å¯¹äºMapçš„æ“ä½œæ–°å¢çš„computeä¹‹ç±»çš„æ–¹æ³•ï¼Œå¯¹äºå¼€å‘ä¸­å¾ˆæœ‰å¸®åŠ©ï¼Œåœ¨æ­¤å¤„æ•´ç†ä¸€ä¸‹å…¶ç”¨æ³•ï¼Œä»¥åŠæ–¹æ³•ä¹‹é—´çš„å¼‚åŒï¼Œå…·ä½“çš„å…ˆæ€»ç»“ä¸€ä¸‹å¦‚ä¸‹ï¼š"></a>åœ¨Java8ä¸­å¯¹äºMapçš„æ“ä½œæ–°å¢çš„computeä¹‹ç±»çš„æ–¹æ³•ï¼Œå¯¹äºå¼€å‘ä¸­å¾ˆæœ‰å¸®åŠ©ï¼Œåœ¨æ­¤å¤„æ•´ç†ä¸€ä¸‹å…¶ç”¨æ³•ï¼Œä»¥åŠæ–¹æ³•ä¹‹é—´çš„å¼‚åŒï¼Œå…·ä½“çš„å…ˆæ€»ç»“ä¸€ä¸‹å¦‚ä¸‹ï¼š</h4><blockquote>
<h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p><code>computeIfPresent</code> å°±æ˜¯æ ¹æ®æ–¹æ³•æ¥ï¼Œè¿”å›æ–¹æ³•ä¸­çš„å€¼å¯¹åŸå€¼è¿›è¡Œæ›¿æ¢ï¼Œæ–°çš„ä¸ºnullå°±åˆ é™¤é”®å€¼å¯¹ï¼Œä½†æ˜¯åŸå€¼ä¸ºnullæ–°å€¼ä¸ä¸ºnullä¾ç„¶è¿”å›null<br><code>computeIfAbsent</code>  å°±æ˜¯æ ¹æ®æ—§å€¼æ¥ï¼Œæ—§çš„æ²¡æœ‰å†æ ¹æ®æ–¹æ³•è¿”å›çš„æ¥ï¼Œæ—§å€¼å­˜åœ¨å°±è¿”å›æ—§å€¼<br><code>compute</code>          å°±æ˜¯ä¸¤è€…ç»“åˆï¼Œæ–°å€¼ä¸ºnullï¼Œå°±åˆ é™¤é”®å€¼å¯¹ï¼›æ–°å€¼ä¸ä¸ºnullå°±è¿›è¡Œæ›¿æ¢ã€‚</p>
</blockquote>
<a id="more"></a>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package test;</span><br><span class="line"></span><br><span class="line">import java.util.HashMap;</span><br><span class="line"></span><br><span class="line">public class MapTest &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        HashMap&lt;Integer, String&gt; map = new HashMap&lt;&gt;();</span><br><span class="line">        map.put(1,&quot;zhang&quot;);</span><br><span class="line">        // computeIfPresent æ ¹æ®ä¹‹å‰çš„key/value å¦‚æœoldValue ä¸ä¸ºnull åˆ™æ ¹æ®æä¾›çš„æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„å€¼ å¹¶è¿›è¡Œæ–°å€¼å¯¹æ—§å€¼çš„æ›¿æ¢</span><br><span class="line">        System.out.println(&quot; 1 ---&gt; &quot; + map.computeIfPresent(1,(key,value)-&gt;&#123;</span><br><span class="line">            return key + value;//åŸå€¼ä¸ä¸ºnullæ–°å€¼ä¸ä¸ºnull æ–°å€¼æ›¿æ¢æ—§å€¼</span><br><span class="line">        &#125;));</span><br><span class="line">        // å¦åˆ™åˆ é™¤é”®å€¼å¯¹</span><br><span class="line">        System.out.println(&quot; 2 ---&gt; &quot; + map.computeIfPresent(1,(key,value)-&gt;&#123;</span><br><span class="line">            return null;//åŸå€¼ä¸ä¸ºnullæ–°å€¼ä¸ºnull åˆ é™¤é”®å€¼å¯¹</span><br><span class="line">        &#125;));</span><br><span class="line">        map.put(1,null);</span><br><span class="line">        System.out.println(&quot; 3 ---&gt; &quot; + map.computeIfPresent(1,(key,value)-&gt;&#123;</span><br><span class="line">            return &quot;jiaheng&quot;;//åŸå€¼ä¸ºnull ä¸åšæ›´æ”¹</span><br><span class="line">        &#125;));</span><br><span class="line">        // computeIfAbsent æ ¹æ®ä¹‹å‰çš„key å¦‚æœæ—§å€¼ä¸ºç©ºæˆ–è€…keyä¸å­˜åœ¨ å°±æŒ‰ç…§æ–¹æ³•ç”¨æ–°å€¼æ›¿æ¢æ—§å€¼ æ–°å€¼ä¸ºnullä¸åšæ›¿æ¢</span><br><span class="line">        map.put(1,&quot;zhang&quot;);</span><br><span class="line">        System.out.println(&quot; 4 ---&gt; &quot; + map.computeIfAbsent(1,k-&gt;&#123;</span><br><span class="line">            return null;// ä¸ä¼šè¢«æ›¿æ¢æ—§å€¼ è¿”å›åŸå€¼</span><br><span class="line">        &#125;));</span><br><span class="line">        System.out.println(&quot; 5 ---&gt; &quot; + map.computeIfAbsent(2,k-&gt;&#123;</span><br><span class="line">            k = k*k;</span><br><span class="line">            return k.toString();// key=2ä¸å­˜åœ¨ ç›´æ¥æ–°å»ºå¹¶å­˜å…¥æ–°å€¼</span><br><span class="line">        &#125;));</span><br><span class="line">        // computeç±»ä¼¼äºcomputeIfAbsentå’ŒcomputeIfPresentçš„åˆä½“</span><br><span class="line">        map.put(1,null);</span><br><span class="line">        System.out.println(&quot; 6 ---&gt; &quot; + map.compute(1,(k,v)-&gt;&#123;</span><br><span class="line">            return &quot;å¼ &quot;;// åŸå€¼ä¸ºnullæ–°å€¼ä¸ä¸ºnull æ–°å€¼æ›¿æ¢æ—§å€¼ æ­¤å¤„ä¸computeIfPresentä¸åŒ</span><br><span class="line">        &#125;));</span><br><span class="line">        System.out.println(&quot; 7 ---&gt; &quot; + map.compute(1,(k,v)-&gt;&#123;</span><br><span class="line">            v = (k*10) + v;</span><br><span class="line">            return v;// æ–°å€¼ä¸ä¸ºnull æ›¿æ¢æ—§å€¼</span><br><span class="line">        &#125;));</span><br><span class="line">        System.out.println(&quot; 8 ---&gt; &quot; + map.compute(1,(k,v)-&gt;&#123;</span><br><span class="line">            return null;// æ–°å€¼ä¸ºnull åˆ é™¤é”®å€¼å¯¹</span><br><span class="line">        &#125;));</span><br><span class="line"></span><br><span class="line">        // æ€»ç»“</span><br><span class="line">        // computeIfPresent å°±æ˜¯æ ¹æ®æ–¹æ³•æ¥ï¼Œè¿”å›æ–¹æ³•ä¸­çš„å€¼å¯¹åŸå€¼è¿›è¡Œæ›¿æ¢ï¼Œæ–°çš„ä¸ºnullå°±åˆ é™¤é”®å€¼å¯¹ï¼Œä½†æ˜¯åŸå€¼ä¸ºnullæ–°å€¼ä¸ä¸ºnullä¾ç„¶è¿”å›null</span><br><span class="line">        // computeIfAbsent  å°±æ˜¯æ ¹æ®æ—§å€¼æ¥ï¼Œæ—§çš„æ²¡æœ‰å†æ ¹æ®æ–¹æ³•è¿”å›çš„æ¥ï¼Œæ—§å€¼å­˜åœ¨å°±è¿”å›æ—§å€¼</span><br><span class="line">        // compute          å°±æ˜¯ä¸¤è€…ç»“åˆï¼Œæ–°å€¼ä¸ºnullï¼Œå°±åˆ é™¤é”®å€¼å¯¹ï¼›æ–°å€¼ä¸ä¸ºnullå°±è¿›è¡Œæ›¿æ¢ã€‚</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>JavaåŸºç¡€</category>
      </categories>
      <tags>
        <tag>JavaåŸºç¡€</tag>
        <tag>å¼€å‘æ—¥è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>Nodepad++ä¸ç”¨æ’ä»¶å»é‡çš„æ–¹æ³•</title>
    <url>/blog/20181112/nodepad-%E4%B8%8D%E7%94%A8%E6%8F%92%E4%BB%B6%E5%8E%BB%E9%87%8D%E7%9A%84%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<p>åœ¨å·¥ä½œä¸­ï¼Œå½“æˆ‘ä»¬éœ€è¦å¯¹ä¸€ä¸ªæ–‡æœ¬ä¸­çš„è¡Œè¿›è¡Œå»é‡ç»Ÿè®¡çš„æ—¶å€™ï¼Œä¼šå‘ç°å¯¹äºæ–‡æœ¬çš„å»é‡å¹¶ä¸æ˜¯é‚£ä¹ˆå¥½å¤„ç†ã€‚è€Œnodepad++çš„å»é‡æ’ä»¶ä¸€èˆ¬äººåˆæ‡’å¾—å»å®‰è£…ï¼Œä¸å·§åœ¨ç½‘ä¸Šæ‰¾åˆ°è¿™æ ·ä¸€ä¸ªå»é‡çš„å°æŠ€å·§ï¼Œå³ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œå»é‡ï¼Œç®€ç›´æ–¹ä¾¿å¿«æ·ã€‚<br>åœ¨è¿™é‡Œåˆ†äº«å‡ºæ¥ï¼Œå¸Œæœ›å¤§å®¶èƒ½å¤Ÿç”¨çš„ä¸Šã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">^(.*?)$\s+?^(?=.*^\1$)</span><br></pre></td></tr></table></figure></p>
<p><img src="https://blog.yimik.com/wp-content/uploads/2015/11/rm_duplicate_rows.png" alt="ä½¿ç”¨nodepad++å»é‡"></p>
<p>ç‚¹å‡»å…¨éƒ¨æ›¿æ¢ï¼Œå°±å¯ä»¥å°†é‡å¤è¡Œå…¨éƒ¨å»æ‰å–½</p>
]]></content>
      <categories>
        <category>å¼€å‘å·¥å…·</category>
      </categories>
      <tags>
        <tag>å¼€å‘æ—¥è®°</tag>
        <tag>å·¥ä½œæŠ€å·§</tag>
        <tag>nodepad++</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨ Git è¿›è¡Œ Squash Commit</title>
    <url>/blog/20181011/%E4%BD%BF%E7%94%A8-Git-%E8%BF%9B%E8%A1%8C-Squash-commit/</url>
    <content><![CDATA[<hr>
<h2 id="Git-æ›´æ”¹-commit-çš„æ“ä½œ"><a href="#Git-æ›´æ”¹-commit-çš„æ“ä½œ" class="headerlink" title="Git æ›´æ”¹ commit çš„æ“ä½œ"></a>Git æ›´æ”¹ commit çš„æ“ä½œ</h2><ol>
<li><p><code>git rebase -i HEAD~&lt;number ä»£è¡¨éœ€è¦å¤„ç†å‡ ä¸ª commit&gt;</code></p>
</li>
<li><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span> Rebase ddebba2..a54dc28 onto 9d9ba60 (15 commands)</span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span> Commands:</span><br><span class="line"><span class="meta">#</span> p, pick &lt;commit&gt; = use commit</span><br><span class="line"><span class="meta">#</span> r, reword &lt;commit&gt; = use commit, but edit the commit message</span><br><span class="line"><span class="meta">#</span> e, edit &lt;commit&gt; = use commit, but stop for amending</span><br><span class="line"><span class="meta">#</span> s, squash &lt;commit&gt; = use commit, but meld into previous commit</span><br><span class="line"><span class="meta">#</span> f, fixup &lt;commit&gt; = like "squash", but discard this commit's log message</span><br><span class="line"><span class="meta">#</span> x, exec &lt;command&gt; = run command (the rest of the line) using shell</span><br><span class="line"><span class="meta">#</span> b, break = stop here (continue rebase later with 'git rebase --continue')</span><br><span class="line"><span class="meta">#</span> d, drop &lt;commit&gt; = remove commit</span><br><span class="line"><span class="meta">#</span> l, label &lt;label&gt; = label current HEAD with a name</span><br><span class="line"><span class="meta">#</span> t, reset &lt;label&gt; = reset HEAD to a label</span><br><span class="line"><span class="meta">#</span> m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]</span><br><span class="line"><span class="meta">#</span> .       create a merge commit using the original merge commit's</span><br><span class="line"><span class="meta">#</span> .       message (or the oneline, if no original merge commit was</span><br><span class="line"><span class="meta">#</span> .       specified). Use -c &lt;commit&gt; to reword the commit message.</span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span> These lines can be re-ordered; they are executed from top to bottom.</span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span> If you remove a line here THAT COMMIT WILL BE LOST.</span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span> However, if you remove everything, the rebase will be aborted.</span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span> Note that empty commits are commented out</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ ¹æ®ä¸Šé¢æ¯ä¸€ä¸ªæŒ‡ä»¤æ“ä½œï¼Œæ›´æ”¹ä»¥ä¸‹ç±»ä¼¼å†…å®¹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pick 54f205a Update README.md</span><br><span class="line">pick e1deb05 Update README.md</span><br><span class="line">pick 3a33ad2 Update README.md</span><br><span class="line">pick 225a513 Update README.md</span><br><span class="line">pick d44d34b Update README.md</span><br><span class="line">pick 657d8c2 Update README.md</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pick 54f205a Update README.md</span><br><span class="line">pick e1deb05 Update README.md</span><br><span class="line">squash 3a33ad2 Update README.md</span><br><span class="line">squash 225a513 Update README.md</span><br><span class="line">squash d44d34b Update README.md</span><br><span class="line">squash 657d8c2 Update README.md</span><br></pre></td></tr></table></figure>
</li>
<li><p>è¿™æ ·å°±å¯ä»¥æŠŠæœ€ä¸Šé¢ä¸¤ä¸ª Message ä¿ç•™ï¼ŒæŠŠåé¢çš„ Message å»æ‰</p>
</li>
<li><p>æœ€å<code>git push --force</code></p>
</li>
</ol>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>å¼€å‘å·¥å…·</tag>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoåšå®¢æ–‡ç« ç½®é¡¶æ–¹å¼</title>
    <url>/blog/20180904/hexo%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0%E7%BD%AE%E9%A1%B6%E6%96%B9%E5%BC%8F/</url>
    <content><![CDATA[<h3 id="åšæ–‡ç½®é¡¶"><a href="#åšæ–‡ç½®é¡¶" class="headerlink" title="åšæ–‡ç½®é¡¶"></a>åšæ–‡ç½®é¡¶</h3><h4 id="ç›®å‰å·²ç»æœ‰ä¿®æ”¹åæ”¯æŒç½®é¡¶çš„ä»“åº“ï¼Œå¯ä»¥ç›´æ¥ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…"><a href="#ç›®å‰å·²ç»æœ‰ä¿®æ”¹åæ”¯æŒç½®é¡¶çš„ä»“åº“ï¼Œå¯ä»¥ç›´æ¥ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…" class="headerlink" title="ç›®å‰å·²ç»æœ‰ä¿®æ”¹åæ”¯æŒç½®é¡¶çš„ä»“åº“ï¼Œå¯ä»¥ç›´æ¥ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…"></a>ç›®å‰å·²ç»æœ‰ä¿®æ”¹åæ”¯æŒç½®é¡¶çš„ä»“åº“ï¼Œå¯ä»¥ç›´æ¥ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm uninstall hexo-generator-index --save</span><br><span class="line">npm install hexo-generator-index-pin-top --save</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h4 id="ç„¶ååœ¨éœ€è¦ç½®é¡¶çš„æ–‡ç« çš„Front-matterä¸­åŠ ä¸Štop-trueå³å¯ã€‚æ¯”å¦‚ä¸‹é¢è¿™ç¯‡æ–‡ç« ï¼š"><a href="#ç„¶ååœ¨éœ€è¦ç½®é¡¶çš„æ–‡ç« çš„Front-matterä¸­åŠ ä¸Štop-trueå³å¯ã€‚æ¯”å¦‚ä¸‹é¢è¿™ç¯‡æ–‡ç« ï¼š" class="headerlink" title="ç„¶ååœ¨éœ€è¦ç½®é¡¶çš„æ–‡ç« çš„Front-matterä¸­åŠ ä¸Štop: trueå³å¯ã€‚æ¯”å¦‚ä¸‹é¢è¿™ç¯‡æ–‡ç« ï¼š"></a>ç„¶ååœ¨éœ€è¦ç½®é¡¶çš„æ–‡ç« çš„Front-matterä¸­åŠ ä¸Štop: trueå³å¯ã€‚æ¯”å¦‚ä¸‹é¢è¿™ç¯‡æ–‡ç« ï¼š</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: hexoåšå®¢ç½®é¡¶</span><br><span class="line">date: 2017-09-08 12:00:25</span><br><span class="line">categories: åšå®¢æ­å»ºç³»åˆ—</span><br><span class="line">top: true</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<h4 id="åˆ°ç›®å‰ä¸ºæ­¢ï¼Œç½®é¡¶åŠŸèƒ½å·²ç»å¯ä»¥å®ç°äº†ã€‚ä¸‹é¢å¯ä»¥è®¾ç½®æ˜ç¡®çš„ç½®é¡¶æ ‡å¿—ï¼š"><a href="#åˆ°ç›®å‰ä¸ºæ­¢ï¼Œç½®é¡¶åŠŸèƒ½å·²ç»å¯ä»¥å®ç°äº†ã€‚ä¸‹é¢å¯ä»¥è®¾ç½®æ˜ç¡®çš„ç½®é¡¶æ ‡å¿—ï¼š" class="headerlink" title="åˆ°ç›®å‰ä¸ºæ­¢ï¼Œç½®é¡¶åŠŸèƒ½å·²ç»å¯ä»¥å®ç°äº†ã€‚ä¸‹é¢å¯ä»¥è®¾ç½®æ˜ç¡®çš„ç½®é¡¶æ ‡å¿—ï¼š"></a>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œç½®é¡¶åŠŸèƒ½å·²ç»å¯ä»¥å®ç°äº†ã€‚ä¸‹é¢å¯ä»¥è®¾ç½®æ˜ç¡®çš„ç½®é¡¶æ ‡å¿—ï¼š</h4><h5 id="æ‰“å¼€ï¼š-blog-themes-next-layout-macro-ç›®å½•ä¸‹çš„post-swigæ–‡ä»¶ï¼Œå®šä½åˆ°-lt-div-class-quot-post-meta-quot-gt-æ ‡ç­¾ä¸‹ï¼Œç´§æ¥ç€ä¸‹ä¸€è¡Œæ’å…¥å¦‚ä¸‹ä»£ç ï¼š"><a href="#æ‰“å¼€ï¼š-blog-themes-next-layout-macro-ç›®å½•ä¸‹çš„post-swigæ–‡ä»¶ï¼Œå®šä½åˆ°-lt-div-class-quot-post-meta-quot-gt-æ ‡ç­¾ä¸‹ï¼Œç´§æ¥ç€ä¸‹ä¸€è¡Œæ’å…¥å¦‚ä¸‹ä»£ç ï¼š" class="headerlink" title="æ‰“å¼€ï¼š/blog/themes/next/layout/_macro ç›®å½•ä¸‹çš„post.swigæ–‡ä»¶ï¼Œå®šä½åˆ°&lt;div class=&quot;post-meta&quot;&gt;æ ‡ç­¾ä¸‹ï¼Œç´§æ¥ç€ä¸‹ä¸€è¡Œæ’å…¥å¦‚ä¸‹ä»£ç ï¼š"></a>æ‰“å¼€ï¼š/blog/themes/next/layout/_macro ç›®å½•ä¸‹çš„post.swigæ–‡ä»¶ï¼Œå®šä½åˆ°<code>&lt;div class=&quot;post-meta&quot;&gt;</code>æ ‡ç­¾ä¸‹ï¼Œç´§æ¥ç€ä¸‹ä¸€è¡Œæ’å…¥å¦‚ä¸‹ä»£ç ï¼š</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% if post.top %&#125;</span><br><span class="line">  &lt;i class=&quot;fa fa-thumb-tack&quot;&gt;&lt;/i&gt;</span><br><span class="line">  &lt;font color=7D26CD&gt;ç½®é¡¶&lt;/font&gt;</span><br><span class="line">  &lt;span class=&quot;post-meta-divider&quot;&gt;|&lt;/span&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>è‡³æ­¤ï¼Œåšå®¢ç½®é¡¶çš„æ–¹å¼å°±å…¨éƒ¨å®Œæˆäº†</p>
]]></content>
      <categories>
        <category>hexoåšå®¢é…ç½®</category>
      </categories>
      <tags>
        <tag>å¼€å‘æ—¥è®°</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>æ³°å›½7å¤©6æ™šè‡ªç”±è¡Œæ”»ç•¥</title>
    <url>/blog/20180904/%E6%B3%B0%E5%9B%BD7%E5%A4%A96%E6%99%9A%E8%87%AA%E7%94%B1%E8%A1%8C%E6%94%BB%E7%95%A5/</url>
    <content><![CDATA[<blockquote>
<p>äººç”Ÿä¸å¯èƒ½æ˜¯ä¸€åœºè¯´èµ°å°±èµ°çš„æ—…è¡Œï¼Œä½†å¿ƒæ€€è¿œæ–¹çš„äººï¼Œä¸€å®šè¦æ—¶åˆ»åšç€è¯´èµ°å°±èµ°çš„å‡†å¤‡ï¼</p>
</blockquote>
<font face="STCAIYUN">å…³äºå»æ³°å›½è¿™ä»¶äº‹æƒ…ï¼Œå¯èƒ½å‘ç”Ÿçš„å¾ˆçªç„¶ï¼Œä½†æ˜¯æ²¡å…³ç³»ï¼Œæ—¢ç„¶å†³å®šäº†ï¼Œå°±æŠŠå®ƒå®‰æ’åœ¨è®¡åˆ’é‡Œã€‚</font>

<h3 id="ä¸€ã€å‡ºè¡Œå‰çš„å‡†å¤‡"><a href="#ä¸€ã€å‡ºè¡Œå‰çš„å‡†å¤‡" class="headerlink" title="ä¸€ã€å‡ºè¡Œå‰çš„å‡†å¤‡"></a>ä¸€ã€å‡ºè¡Œå‰çš„å‡†å¤‡</h3><h4 id="1ã€æŠ¤ç…§-amp-ç­¾è¯"><a href="#1ã€æŠ¤ç…§-amp-ç­¾è¯" class="headerlink" title="1ã€æŠ¤ç…§&amp;ç­¾è¯"></a>1ã€æŠ¤ç…§&amp;ç­¾è¯</h4><p>æˆ‘æ˜¯åœ¨æ­å·å·¥ä½œï¼Œåœ¨æ­å·å·¥ä½œç¤¾ä¿äº¤æ»¡ä¸€å¹´ï¼Œå°±å¯ä»¥åŠæŠ¤ç…§äº†ã€‚æ‹¿ç€èº«ä»½è¯åœ¨è¥¿æ¹–åŒºè¡Œæ”¿æœåŠ¡ä¸­å¿ƒçš„å‡ºå…¥å¢ƒç®¡ç†é‚£å„¿å°±å¯ä»¥åŠç†äº†ã€‚ç°åœ¨ä¸€æ¥¼è‡ªåŠ©æ‰“å°ä¸‹ç¤¾ä¿è¯æ˜ï¼Œç„¶åå»åé¢çš„æ¥¼ï¼Œå‡ºå…¥å¢ƒåŠç†åŒºæŒ‰ç…§æµç¨‹åŠç†å³å¯ã€‚å¤§æ¦‚ä¸€ä¸ªå¤šç¤¼æ‹œå°±èƒ½æ‹¿åˆ°æŠ¤ç…§ï¼Œæˆ‘ä¹Ÿæ²¡æƒ³åˆ°æœ‰è¿™ä¹ˆå¿«ã€‚</p>
<p>ç­¾è¯æ˜¯åœ¨æ·˜å®ä¸Šä¹°çš„ï¼Œ260ï¿¥ã€‚ä¸ƒä¸ªå·¥ä½œæ—¥åˆ°æ‰‹ã€‚</p>
<h4 id="2ã€æ³°é“¢-amp-ç”µè¯å¡-amp-å‡ºå…¥å¢ƒ-amp-å»æ³°å›½çš„å¿…å¤‡è½¯ä»¶-amp-å…¶ä»–"><a href="#2ã€æ³°é“¢-amp-ç”µè¯å¡-amp-å‡ºå…¥å¢ƒ-amp-å»æ³°å›½çš„å¿…å¤‡è½¯ä»¶-amp-å…¶ä»–" class="headerlink" title="2ã€æ³°é“¢&amp;ç”µè¯å¡&amp;å‡ºå…¥å¢ƒ&amp;å»æ³°å›½çš„å¿…å¤‡è½¯ä»¶&amp;å…¶ä»–"></a>2ã€æ³°é“¢&amp;ç”µè¯å¡&amp;å‡ºå…¥å¢ƒ&amp;å»æ³°å›½çš„å¿…å¤‡è½¯ä»¶&amp;å…¶ä»–</h4><p>æ³°å›½æ–°è§„å®šï¼Œè¿‡å¢ƒç­¾ã€è½åœ°ç­¾-10000æ³°é“¢æˆ–ç­‰å€¼å¤–å¸ç°é‡‘ï¼ˆæ¯äººï¼‰ï¼Œ20000æ³°é“¢ï¼ˆå®¶åº­ï¼‰ï¼›<br>æ—…æ¸¸ç­¾-20000æ³°é“¢æˆ–ç­‰å€¼å¤–å¸ç°é‡‘ï¼ˆæ¯äººï¼‰ï¼Œ40000æ³°é“¢ï¼ˆå®¶åº­ï¼‰ï¼ŒæŠ½æŸ¥åˆ°æ¦‚ç‡å¾ˆä½ï¼Œä¸€èˆ¬è½åœ°ç­¾ä¼šæŸ¥çš„å§ã€‚ä½†æ˜¯ç½‘ä¸Šè¯´å¥½åƒéƒ½ä¸æŸ¥çš„ï¼Œæˆ–è€…å¾ˆå°‘æŸ¥ï¼Œä½†è¿˜æ˜¯æ¢ä¸¤åƒçš„å§ã€‚</p>
<p>ç„¶åå†æ·˜å®ä¹°æ³°å›½7å¤©happyå¡ï¼Œ<a href="https://traveldetail.fliggy.com/item.htm?spm=a230r.1.14.1.42f77cb9MwHKZ4&amp;id=38255797452&amp;ns=1&amp;abbucket=7&amp;smToken=ef69fda777d249bab6581b59d4cb9a82&amp;smSign=twzGgFTirKEEIRtKkNLrYQ%3D%3D" target="_blank" rel="noopener">æˆ‘ä¹°çš„æ˜¯è¿™å®¶çš„</a>ï¼Œ8å¤©æ— é™æµé‡ï¼Œ4Gã€‚</p>
<p>å…¥å¢ƒæ—¶éœ€è¦å¡«å†™å‡ºå…¥å¢ƒå¡ï¼Œç„¶åå’ŒæŠ¤ç…§ä¸€èµ·äº¤ç»™æµ·å…³æŸ¥çœ‹ç›–ç« ã€‚ä¸‹é¢æ˜¯å…¥å¢ƒå¡ä¸­æ–‡è¯´æ˜å›¾ï¼š<br><img src="http://ol3d80aa0.bkt.clouddn.com/%E6%B3%B0%E5%9B%BD%E5%87%BA%E5%85%A5%E5%A2%83%E5%8D%A1%E4%B8%AD%E6%96%87.jpg" alt="å‡ºå…¥å¢ƒå¡"></p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨ä¹˜åèˆªç­æ—¶å¸¸ä¼šæœ‰å·¥ä½œäººå‘˜åœ¨æŠµè¾¾ç›®çš„åœ°é’±ç»™ä¹˜å®¢å‘æ”¾å‡ºå…¥å¢ƒå¡ï¼Œä»¥ä¾¿ä¹˜å®¢æå‰å¡«å¥½å‡ºå…¥å¢ƒå¡ï¼Œæ–¹ä¾¿å‡ºå…³ã€‚æŠ¤ç…§ä¹Ÿå¾ˆé‡è¦ï¼Œå¯ä»¥åœ¨å›½å†…å‡ºå‘å‰å¤å°å‡ ä»½æŠ¤ç…§ä¸€å®šè¦æ”¾è¡Œæç®±ï¼Œä¸è¦éšèº«æºå¸¦ã€‚</p>
<a id="more"></a>
<h3 id="END-å…¶ä»–ä¸€äº›å®ç”¨ä¿¡æ¯"><a href="#END-å…¶ä»–ä¸€äº›å®ç”¨ä¿¡æ¯" class="headerlink" title="END - å…¶ä»–ä¸€äº›å®ç”¨ä¿¡æ¯"></a>END - å…¶ä»–ä¸€äº›å®ç”¨ä¿¡æ¯</h3><blockquote>
<h4 id="å¤§ä½¿é¦†-é¢†äº‹é¦†"><a href="#å¤§ä½¿é¦†-é¢†äº‹é¦†" class="headerlink" title="å¤§ä½¿é¦†/é¢†äº‹é¦†"></a>å¤§ä½¿é¦†/é¢†äº‹é¦†</h4></blockquote>
<p>ä¸­å›½é©»æ³°å›½å¤§ä½¿é¦†<br>åœ°å€ï¼šNO.57, Racgadapisek Road, Bangkok<br>ç”µè¯ï¼š+66-02-2450088<br>é¢†äº‹ä¿æŠ¤ç”µè¯ï¼š+66-854833327ï¼ˆ24å°æ—¶å€¼ç­æ‰‹æœºï¼‰ï¼Œ+66-02-2457010ï¼ˆå·¥ä½œæ—¥9ï¼š00-17ï¼š00ï¼‰</p>
<p>ä¸­å›½é©»æ¸…è¿ˆæ€»é¢†äº‹é¦†<br>åœ°å€ï¼š111 Changloh Road, Haiya District, Chiangmai<br>ç”µè¯ï¼š+66-53-280380ï¼Œ+66-53-276125ï¼Œ+66-53-276457</p>
<p>ä¸­å›½é©»å®‹å¡æ€»é¢†äº‹é¦†ï¼ˆè¿‘æ™®å‰å²›ã€è‹æ¢…å²›ã€ç”²ç±³ï¼‰<br>åœ°å€ï¼š9 Sadao Road, Songkhla<br>ç”µè¯ï¼š+66-74-322034<br>é¢†äº‹ä¿æŠ¤ç”µè¯ï¼š+66-817665560</p>
<p>ä¸­å›½é©»å®‹å¡æ€»é¢†é¦†é©»æ™®å‰é¢†äº‹åŠå…¬å®¤<br>ç”µè¯ï¼š+66-76-304219<br>é¢†äº‹ä¿æŠ¤ç”µè¯ï¼š+66-945956168ï¼ˆä¸­æ–‡ã€æ³°æ–‡ï¼‰ï¼Œ+66-945986859ï¼ˆä¸­æ–‡ï¼‰</p>
<p>ä¸­å›½é©»å­”æ•¬æ€»é¢†é¦†<br>åœ°å€ï¼š142/44 Moo 2ï¼ŒRob-Bueng Rd.ï¼ŒNai-Muangï¼Œ Muangï¼Œ Khon Kaen<br>ç”µè¯ï¼š+66-43-226873</p>
<blockquote>
<h4 id="ç´§æ€¥ç”µè¯"><a href="#ç´§æ€¥ç”µè¯" class="headerlink" title="ç´§æ€¥ç”µè¯"></a>ç´§æ€¥ç”µè¯</h4></blockquote>
<p>è­¦å¯Ÿ:123/191<br>ç«è­¦:199<br>æ•‘æŠ¤:2460199<br>é¢†äº‹:022-457010<br>å¤§ä½¿é¦†:022-457044<br>æ—…æ¸¸æŠ•è¯‰:1155</p>
]]></content>
      <categories>
        <category>ä¸ªäººéšç¬”</category>
      </categories>
      <tags>
        <tag>ä¸ªäººéšç¬”</tag>
      </tags>
  </entry>
  <entry>
    <title>Dubboè·å–æ³¨å†Œä¸­å¿ƒçš„å®ä¾‹bean</title>
    <url>/blog/20180719/%E5%BC%80%E5%8F%91%E6%97%A5%E8%AE%B0-20180718/</url>
    <content><![CDATA[<h2 id="å¼€å‘æ—¥è®°-20180718"><a href="#å¼€å‘æ—¥è®°-20180718" class="headerlink" title="å¼€å‘æ—¥è®° 20180718"></a>å¼€å‘æ—¥è®° 20180718</h2><h3 id="com-alibaba-dubbo-remoting-transport-AbstractCodec-checkPayload-ERROR-Data-length-too-large"><a href="#com-alibaba-dubbo-remoting-transport-AbstractCodec-checkPayload-ERROR-Data-length-too-large" class="headerlink" title="com.alibaba.dubbo.remoting.transport.AbstractCodec.checkPayload() ERROR  Data length too large"></a>com.alibaba.dubbo.remoting.transport.AbstractCodec.checkPayload() ERROR  Data length too large</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">com.alibaba.dubbo.remoting.transport.AbstractCodec.checkPayload() ERROR  Data length too large: 11557050, max payload: 8388608 java.io.IOException: Data length too large: 11557050, max payload: 838860</span><br></pre></td></tr></table></figure>
<p>åœ¨ä½¿ç”¨dubboæ¡†æ¶å¼€å‘çš„æ—¶å€™ï¼Œéœ€è¦åšä¸€ä¸ªå¯¼å‡ºcsvæ–‡ä»¶çš„åŠŸèƒ½ï¼ŒæŸ¥è¯¢å¤§é‡çš„æ•°æ®ç„¶ååœ¨æä¾›è€…è¿™è¾¹è¿›è¡Œå¤„ç†å¯¼å‡ºï¼Œå…¶ä¸­æ•°æ®è¾¾åˆ°è¿‡20ä¸‡è¡Œä»¥ä¸Šï¼Œå‡ åMçš„æ•°æ®ï¼ŒæŠ›å‡ºäº†è¿™æ ·ä¸€ä¸ªå¼‚å¸¸ã€‚é‡åˆ°æœåŠ¡æä¾›è€…ä»æ•°æ®åº“æŸ¥è¯¢æˆ–è€…å…¶ä»–åœ°æ–¹è¿”å›è¿‡å¤§çš„å¯¹è±¡ï¼Œå¯¼è‡´æŠ¥é”™æ—¶ï¼Œå°½ç®¡æœ‰åŠæ³•å–æ¶ˆè¿™ä¸ªæ•°æ®é•¿åº¦çš„é™åˆ¶ï¼Œä½†æ˜¯è¿™å¹¶ä¸ç¬¦åˆç¨‹åºå¼€å‘çš„åˆè¡·ã€‚æˆ‘ä»¬éœ€è¦å°†å¯¹äºæ•°æ®çš„å¤„ç†æ”¾åœ¨ä¸šåŠ¡å±‚ï¼Œæˆ‘åœ¨è¿™é‡Œåšäº†å¼‚æ­¥å¯¼å‡ºï¼Œç»™å‰ç«¯è¿”å›çš„ä»…ä»…æ˜¯ä¸€ä¸ªç¨‹åºå®Œæˆçš„çŠ¶æ€ï¼Œå®Œç¾çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<a id="more"></a>
<h3 id="åœ¨dubboæ¶ˆè´¹è€…æœåŠ¡ä¸­å†™aopæ–¹æ³•æ‹¦æˆªå·¥å…·ç±»ä¸­çš„æ–¹æ³•"><a href="#åœ¨dubboæ¶ˆè´¹è€…æœåŠ¡ä¸­å†™aopæ–¹æ³•æ‹¦æˆªå·¥å…·ç±»ä¸­çš„æ–¹æ³•" class="headerlink" title="åœ¨dubboæ¶ˆè´¹è€…æœåŠ¡ä¸­å†™aopæ–¹æ³•æ‹¦æˆªå·¥å…·ç±»ä¸­çš„æ–¹æ³•"></a>åœ¨dubboæ¶ˆè´¹è€…æœåŠ¡ä¸­å†™aopæ–¹æ³•æ‹¦æˆªå·¥å…·ç±»ä¸­çš„æ–¹æ³•</h3><p>å°½ç®¡æœåŠ¡çš„æä¾›è€…å’Œæ¶ˆè´¹è€…éƒ½å¼•å…¥çš„å·¥å…·ç±»æ¨¡å—çš„ä¾èµ–ï¼Œä½†æ˜¯æ‹¦æˆªå™¨çš„å®é™…æ‹¦æˆªçš„è¿˜æ˜¯é‚£ä¸ªå®é™…æœ¬èº«æ‰€åœ¨æ¨¡å—çš„æ–¹æ³•ã€‚å¦‚æœå·¥å…·ç±»æ˜¯åœ¨æ¶ˆè´¹è€…serviceå±‚è¢«ä½¿ç”¨çš„ï¼Œé‚£ä¹ˆåœ¨ä¸Šå±‚æ¨¡å—çš„æ‹¦æˆªå™¨æ˜¯æ— æ³•æ‹¦æˆªåˆ°è¿™ä¸ªæ–¹æ³•çš„ã€‚</p>
<h3 id="åœ¨dubboæœåŠ¡ä¸­æ‰‹åŠ¨è·å–æ³¨å†Œçš„æä¾›è€…çš„bean"><a href="#åœ¨dubboæœåŠ¡ä¸­æ‰‹åŠ¨è·å–æ³¨å†Œçš„æä¾›è€…çš„bean" class="headerlink" title="åœ¨dubboæœåŠ¡ä¸­æ‰‹åŠ¨è·å–æ³¨å†Œçš„æä¾›è€…çš„bean"></a>åœ¨dubboæœåŠ¡ä¸­æ‰‹åŠ¨è·å–æ³¨å†Œçš„æä¾›è€…çš„bean</h3><p>åœ¨è¿™é‡ŒçŠ¯çš„é”™ï¼šä»¥ä¸ºé€šè¿‡SpringContextHolder.getBean()å¯ä»¥è·å–ï¼Œæ˜¯æˆ‘å‚»é€¼äº†ï¼Œdubboä¸­çš„æœåŠ¡æ€ä¹ˆèƒ½ç”¨springä¸Šä¸‹æ–‡è·å–å‘¢ã€‚è¿™é‡Œæˆ‘ä½¿ç”¨dubboçš„æ–¹å¼å®Œæˆäº†è¿™ä¸ªåŠŸèƒ½ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line"> * è·å–æœåŠ¡çš„ä»£ç†å¯¹è±¡</span><br><span class="line"> *</span><br><span class="line"> * @return</span><br><span class="line"> */</span><br><span class="line">public static &lt;T&gt; T getReferenceConfig(String appName,String address,Class&lt;?&gt; interfaceClass) &#123;</span><br><span class="line">    String key  = interfaceClass.getName();</span><br><span class="line">    ReferenceConfig&lt;T&gt; referenceConfig =  (ReferenceConfig&lt;T&gt;)referenceCache.get(key);</span><br><span class="line">    if(referenceConfig == null)&#123;</span><br><span class="line">        referenceConfig = new ReferenceConfig&lt;T&gt;();</span><br><span class="line"></span><br><span class="line">        referenceConfig.setApplication(application);</span><br><span class="line">        referenceConfig.setRegistry(getRegistryConfig(appName,address));</span><br><span class="line">        referenceConfig.setInterface(interfaceClass);</span><br><span class="line"></span><br><span class="line">        referenceCache.put(key,referenceConfig);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return referenceConfig.get();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>dubbo</category>
      </categories>
      <tags>
        <tag>å¼€å‘æ—¥è®°</tag>
        <tag>dubbo</tag>
      </tags>
  </entry>
  <entry>
    <title>å…³äºIDEAå†ä»gitæˆ–è€…svnä¸Šå¯¼å…¥é¡¹ç›®æ—¶ä¸èƒ½åŠ è½½å­—æ¨¡å—çš„é—®é¢˜</title>
    <url>/blog/20180708/%E5%85%B3%E4%BA%8EIDEA%E5%86%8D%E4%BB%8Egit%E6%88%96%E8%80%85svn%E4%B8%8A%E5%AF%BC%E5%85%A5%E9%A1%B9%E7%9B%AE%E6%97%B6%E4%B8%8D%E8%83%BD%E5%8A%A0%E8%BD%BD%E5%AD%97%E6%A8%A1%E5%9D%97%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h3 id="å…³äºIDEAå†ä»gitæˆ–è€…svnä¸Šå¯¼å…¥é¡¹ç›®æ—¶ä¸èƒ½åŠ è½½å­—æ¨¡å—çš„é—®é¢˜"><a href="#å…³äºIDEAå†ä»gitæˆ–è€…svnä¸Šå¯¼å…¥é¡¹ç›®æ—¶ä¸èƒ½åŠ è½½å­—æ¨¡å—çš„é—®é¢˜" class="headerlink" title="å…³äºIDEAå†ä»gitæˆ–è€…svnä¸Šå¯¼å…¥é¡¹ç›®æ—¶ä¸èƒ½åŠ è½½å­—æ¨¡å—çš„é—®é¢˜"></a>å…³äºIDEAå†ä»gitæˆ–è€…svnä¸Šå¯¼å…¥é¡¹ç›®æ—¶ä¸èƒ½åŠ è½½å­—æ¨¡å—çš„é—®é¢˜</h3><blockquote>
<p>æœ€è¿‘å…¥èŒæ–°å…¬å¸ï¼Œå¾ˆå¤šä¸œè¥¿ä¹Ÿéƒ½ç®—æ˜¯è¦ä»å¤´å­¦èµ·ã€‚åœ¨ä¹‹å‰å…¬å¸ç”¨çš„éƒ½æ˜¯eclipseï¼Œè¿™è¾¹è¦æ±‚ç”¨IDEAï¼Œå…¶å®å¾ˆæ—©å°±çŸ¥é“è¿™æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„ç¼–è¯‘å™¨ï¼Œä½†å¹³æ—¶æ²¡æœ‰æœºä¼šä½¿ç”¨ï¼Œç°åœ¨æœ‰æœºä¼šç”¨è¿™ä¸ªè¿˜æ˜¯æŒºå¼€å¿ƒçš„ã€‚</p>
</blockquote>
<p>ç”±äºå…¬å¸ä½¿ç”¨gitlabï¼Œåœ¨æ³¨å†Œå¥½è´¦å·å¯¼å…¥ä»£ç çš„æ—¶å€™é‡åˆ°ä¸€ä¸ªæƒ…å†µï¼Œå°±æ˜¯ç›´æ¥ç”¨IDEAçš„gitå·¥å…·å¯¼å…¥çš„è¯ä¼šå‡ºç°ï¼Œmavené¡¹ç›®çš„å­æ¨¡å—æ— æ³•è¢«è¯†åˆ«ä»¥åŠè¢«ç®¡ç†çš„æƒ…å†µã€‚äº‹å®ä¸Šeclipseä¹Ÿæœ‰åŒæ ·çš„é—®é¢˜ã€‚ç°åœ¨åªè¯´ä¸‹ä½¿ç”¨IDEAé‡åˆ°è¿™ä¸ªæƒ…å†µçš„è§£å†³åŠæ³•ã€‚</p>
<a id="more"></a>
<h4 id="æœ‰ä¸¤ç§è§£å†³æ–¹å¼ã€‚"><a href="#æœ‰ä¸¤ç§è§£å†³æ–¹å¼ã€‚" class="headerlink" title="æœ‰ä¸¤ç§è§£å†³æ–¹å¼ã€‚"></a>æœ‰ä¸¤ç§è§£å†³æ–¹å¼ã€‚</h4><h5 id="1ã€æ‰‹åŠ¨å°†moduleæ·»åŠ åˆ°é¡¹ç›®ç®¡ç†ï¼š"><a href="#1ã€æ‰‹åŠ¨å°†moduleæ·»åŠ åˆ°é¡¹ç›®ç®¡ç†ï¼š" class="headerlink" title="1ã€æ‰‹åŠ¨å°†moduleæ·»åŠ åˆ°é¡¹ç›®ç®¡ç†ï¼š"></a>1ã€æ‰‹åŠ¨å°†moduleæ·»åŠ åˆ°é¡¹ç›®ç®¡ç†ï¼š</h5><ul>
<li>æ‰“å¼€æ–‡ä»¶é€‰é¡¹ä¸­çš„é¡¹ç›®ç»“æ„ï¼ˆå¿«æ·é”®ctrl+alt+shift+sï¼‰<br><a href="https://simimg.com/i/oLFwe" target="_blank" rel="noopener"><img src="https://s1.ax2x.com/2018/07/08/oLFwe.png" alt="oLFwe.png"></a></li>
<li>é€‰æ‹© æ¨¡å—-åŠ å·-å¯¼å…¥moduleï¼Œæ‰‹åŠ¨å°†è‡ªå·±éœ€è¦çš„æ¨¡å—ä¸€ä¸€å¯¼å…¥è¿›å»<br><a href="https://simimg.com/i/oLTGd" target="_blank" rel="noopener"><img src="https://s1.ax2x.com/2018/07/08/oLTGd.png" alt="oLTGd.png"></a><h5 id="2ã€å…ˆå°†é¡¹ç›®é€šè¿‡å‘½ä»¤è¡Œå¯¼å…¥åˆ°æœ¬æœºï¼Œç„¶åé€šè¿‡IDEAçš„New-Project-from-Existing-Sourceså¯¼å…¥æœ¬åœ°é¡¹ç›®è¿›æ¥ï¼Œè¿™ä¸ªç›´æ¥å°±èƒ½å¤Ÿå¯¹æ‰€æœ‰æ¨¡å—è¿›è¡Œä»£ç ç®¡ç†äº†"><a href="#2ã€å…ˆå°†é¡¹ç›®é€šè¿‡å‘½ä»¤è¡Œå¯¼å…¥åˆ°æœ¬æœºï¼Œç„¶åé€šè¿‡IDEAçš„New-Project-from-Existing-Sourceså¯¼å…¥æœ¬åœ°é¡¹ç›®è¿›æ¥ï¼Œè¿™ä¸ªç›´æ¥å°±èƒ½å¤Ÿå¯¹æ‰€æœ‰æ¨¡å—è¿›è¡Œä»£ç ç®¡ç†äº†" class="headerlink" title="2ã€å…ˆå°†é¡¹ç›®é€šè¿‡å‘½ä»¤è¡Œå¯¼å…¥åˆ°æœ¬æœºï¼Œç„¶åé€šè¿‡IDEAçš„New Project from Existing Sourceså¯¼å…¥æœ¬åœ°é¡¹ç›®è¿›æ¥ï¼Œè¿™ä¸ªç›´æ¥å°±èƒ½å¤Ÿå¯¹æ‰€æœ‰æ¨¡å—è¿›è¡Œä»£ç ç®¡ç†äº†"></a>2ã€å…ˆå°†é¡¹ç›®é€šè¿‡å‘½ä»¤è¡Œå¯¼å…¥åˆ°æœ¬æœºï¼Œç„¶åé€šè¿‡IDEAçš„New Project from Existing Sourceså¯¼å…¥æœ¬åœ°é¡¹ç›®è¿›æ¥ï¼Œè¿™ä¸ªç›´æ¥å°±èƒ½å¤Ÿå¯¹æ‰€æœ‰æ¨¡å—è¿›è¡Œä»£ç ç®¡ç†äº†</h5><a href="https://simimg.com/i/oLXER" target="_blank" rel="noopener"><img src="https://s1.ax2x.com/2018/07/08/oLXER.md.png" alt="oLXER.md.png"></a><br><a href="https://simimg.com/i/oLm7r" target="_blank" rel="noopener"><img src="https://s1.ax2x.com/2018/07/08/oLm7r.md.png" alt="oLm7r.md.png"></a></li>
</ul>
<blockquote>
<p>ä»eclipseè½¬åˆ°IDEAå‰å‡ å¤©æ˜¯æœ€è‰°éš¾çš„ï¼Œå› ä¸ºå¾ˆå¤šä¹ æƒ¯ä¸æ˜¯è¯´æ”¹å°±èƒ½æ”¹æ‰çš„ï¼Œå·¥å…·çš„ä½¿ç”¨æ€»å¾—éœ€è¦ä¸€ä¸ªå­¦ä¹ çš„æ—¶é—´ï¼Œä½†æ˜¯ç­‰è¿™æ®µæ—¶é—´è¿‡å»ï¼Œåé¢ä¸€å®šä¼šä½“ä¼šåˆ°IDEAçš„å¼ºå¤§ã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>å¼€å‘å·¥å…·</category>
      </categories>
      <tags>
        <tag>å¼€å‘æ—¥è®°</tag>
        <tag>IDEA</tag>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>çºªå¿µå³å°†ç»“æŸçš„ç¬¬ä¸€ä»½å·¥ä½œ</title>
    <url>/blog/20180628/%E7%BA%AA%E5%BF%B5%E5%8D%B3%E5%B0%86%E7%BB%93%E6%9D%9F%E7%9A%84%E7%AC%AC%E4%B8%80%E4%BB%BD%E5%B7%A5%E4%BD%9C/</url>
    <content><![CDATA[<h2 id="çºªå¿µå³å°†-ç»“æŸçš„ç¬¬ä¸€ä»½å·¥ä½œ"><a href="#çºªå¿µå³å°†-ç»“æŸçš„ç¬¬ä¸€ä»½å·¥ä½œ" class="headerlink" title="çºªå¿µå³å°† ç»“æŸçš„ç¬¬ä¸€ä»½å·¥ä½œ"></a>çºªå¿µ<em><del>å³å°†</del></em> ç»“æŸçš„ç¬¬ä¸€ä»½å·¥ä½œ</h2><ol>
<li><h4 id="æˆ‘ä¸€ç›´éƒ½ä¸çŸ¥é“è‡ªå·±æƒ³è¦å¾—åˆ°äº›ä»€ä¹ˆä¸œè¥¿"><a href="#æˆ‘ä¸€ç›´éƒ½ä¸çŸ¥é“è‡ªå·±æƒ³è¦å¾—åˆ°äº›ä»€ä¹ˆä¸œè¥¿" class="headerlink" title="æˆ‘ä¸€ç›´éƒ½ä¸çŸ¥é“è‡ªå·±æƒ³è¦å¾—åˆ°äº›ä»€ä¹ˆä¸œè¥¿"></a>æˆ‘ä¸€ç›´éƒ½ä¸çŸ¥é“è‡ªå·±æƒ³è¦å¾—åˆ°äº›ä»€ä¹ˆä¸œè¥¿</h4><blockquote>
<ul>
<li>è®°å¾—é«˜ä¸­çš„æ—¶å€™ï¼Œèº«è¾¹ä¸ç®¡æ˜¯å®¶äººè¿˜æ˜¯è€å¸ˆï¼Œæ€»ä¼šæ—¶åˆ»ä¸åœåœ¨è€³è¾¹è¯´ç€ï¼šä½ éœ€è¦å¦‚ä½•å¦‚ä½•å­¦ä¹ ï¼Œè€ƒä¸Šä¸€ä¸ªæ€æ ·çš„å¤§å­¦ï¼Œè¿›å…¥ä¸€ä¸ªæ€ä¹ˆæ ·çš„ä¸“ä¸šï¼Œä»¥åæ‰¾ä¸€ä¸ªæ€æ ·çš„å·¥ä½œã€‚å¯æ˜¯å½“æˆ‘å¬åˆ°è¿™äº›è¯æ—¶æ€»æ˜¯ä¼šå¾ˆåæ„Ÿã€‚ä¹Ÿè®¸æ˜¯å›é€†ï¼Œä¹Ÿè®¸æ˜¯è¿™äº›å¯¹äºæˆ‘å½“æ—¶éƒ½æ˜¯äº›è™šæ— ç¼¥ç¼ˆï¼Œå¾ˆé¥è¿œçš„ä¸œè¥¿ï¼Œæˆ‘æ²¡æœ‰åŠæ³•ç†è§£è‡ªå·±å¾—åˆ°è¿™äº›ä¸œè¥¿æœ‰ä»€ä¹ˆç”¨ã€‚ä½†æ˜¯è™½ç„¶å¿ è¨€ä¸å…¥è€³ï¼Œæˆ‘è¿˜æ˜¯å¾—æŒ‰ç…§ä»–ä»¬è¯´çš„åšã€‚è¿˜å¥½ï¼Œå¤§å­¦ä¸Šäº†ä¸€ä¸ªæ™®é€šçš„ç†å·¥ç§‘ä¸€æœ¬ã€‚</li>
<li>å½“ä¸Šäº†å¤§å­¦ä¹‹åï¼Œæ²¡æœ‰äº†è€å¸ˆå®¶é•¿åœ¨è€³è¾¹â€œçµ®å¨â€ï¼Œæ›´ä¸çŸ¥é“è‡ªå·±è¦å¹²ä»€ä¹ˆäº†ã€‚è®°å¾—å½“æ—¶å‚åŠ å„ç§ç¤¾å›¢ï¼Œè§‰å¾—åœ¨ç¤¾å›¢é‡Œé¢å¹²çš„é£é£ç«ç«å¾ˆç‰›é€¼ï¼Œç”šè‡³è¯¾ç¨‹éƒ½ä¸ä¸Šå‡ èŠ‚ï¼Œæœ€ä¸¥é‡çš„æ—¶å€™å¥½å‡ å‘¨éƒ½ä¸ä¸Šè¯¾ã€‚æµ‘æµ‘å™©å™©çš„åº¦è¿‡äº†å¤§å­¦çš„ç¬¬ä¸€å¹´ä¹‹åï¼Œçªç„¶å› ä¸ºä¸€ä¸ªç»™å­¦æ ¡ç¼–ç¨‹åŸ¹è®­ç­è¯•å¬è¯¾å‡‘äººæ•°çš„æœºä¼šï¼Œè®©è‡ªåŠ¨åŒ–ä¸“ä¸šçš„æˆ‘æ¥è§¦åˆ°äº†è½¯ä»¶å¼€å‘è¿™ä¸ªæ–¹å‘ã€‚ä¾ç„¶è®°å¾—å½“æ—¶ä¸Šè¯¾çš„è€å¸ˆï¼Œè€èŒƒï¼å½“ä»–ç”¨Cè¯­è¨€åœ¨ç”µè„‘ä¸Šè¾“å‡ºä¸€ä¸²ç¬‘è„¸å­—ç¬¦çš„æ—¶å€™ï¼Œæˆ‘å½“æ—¶çš„çœ¼ç›éƒ½äº®äº†ï¼Œæˆ‘å¯¹å’Œè‡ªå·±ä¸€å—å»å‡‘äººæ•°çš„èˆå‹è¯´ï¼Œè¿™ä¸ªäººä¸€å®šä»¥åå¯¹æˆ‘æœ‰å¾ˆå¤§çš„å¸®åŠ©ï¼Œæˆ‘ä¸€å®šè¦æŠ¥åä»–çš„è¯¾ç¨‹ã€‚åæ¥çœŸçš„è§‰å¾—æˆ‘æ˜¯å¹¸è¿çš„ï¼Œè€èŒƒæ˜¯ä¸€ä¸ªå¾ˆæœ‰äººæ ¼é­…åŠ›çš„ä¸­å¹´ç¨‹åºå‘˜ :) ã€‚ä¹Ÿæ˜¯ä»–è®©æˆ‘çŸ¥é“äº†ç¨‹åºå‘˜æ˜¯åšä»€ä¹ˆçš„ï¼Œä¹Ÿæ˜¯ä»–è®©æˆ‘éå¸¸æœŸå¾…è‡ªå·±èƒ½å¤Ÿæˆä¸ºä¸€ä¸ªçœŸæ­£çš„è½¯ä»¶å¼€å‘è€…ã€‚<a id="more"></a></li>
<li>å°±è¿™æ ·æˆ‘è·Ÿç€è€èŒƒä»è®¡ç®—æœºåŸºç¡€ï¼Œå­¦åˆ°æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼Œå­¦è®¡ç®—æœºç½‘ç»œï¼ŒMySQLï¼Œå­¦ä¹ è®¾è®¡æ¨¡å¼ï¼Œå­¦C++ï¼Œåæ¥åˆåœ¨å¦ä¸€ä¸ªç­å­¦Javaã€‚è®¡ç®—æœºç¡¬ä»¶æ–¹å‘ä¸“ä¸šçš„æˆ‘ï¼Œå­¦å®Œäº†è½¯ä»¶ä¸“ä¸šå­¦ç”Ÿè¦å­¦çš„æ‰€æœ‰è¯¾ç¨‹ã€‚ç»ˆäºå¤§ä¸‰ï¼Œæˆ‘æ‰¾åˆ°äº†è¥¿å®‰ä¸‰æ˜Ÿç”µå­ç ”ç©¶æ‰€çš„ä¸€ä»½å®ä¹ ï¼Œå†™äº†ä¸¤ä¸ªæœˆshellè„šæœ¬ï¼Œå­¦ä¹ äº†Linuxç›¸å…³çš„çŸ¥è¯†ä»¥åŠè‡ªåŠ¨åŒ–æµ‹è¯•çš„ä¸œè¥¿ï¼Œåæ¥åˆåœ¨ç»„å†…ç”¨PHPå†™äº†ä¸ªç½‘ç«™ï¼Œæä¾›ç»™å¤§å®¶è¿›è¡Œä¼šè®®çš„é¢„å®šä¸æé†’ã€‚ç°åœ¨æƒ³æƒ³è¿™ä¸€åˆ‡ç»éªŒéƒ½æ˜¯æˆ‘çš„å®è´µçš„è´¢å¯Œ.</li>
<li>å®ä¹ ç»“æŸåï¼Œå·¥ä½œå´æ‰¾çš„ä¸æ˜¯å¾ˆé¡ºåˆ©ï¼Œä¹Ÿè®¸æ˜¯è‡ªå·±çš„å®ä¹ ç»å†æ²¡æœ‰å¤ªå¤šåšJavaå¼€å‘çš„ä¸œè¥¿ï¼Œå¯¼è‡´è‡ªå·±æ²¡æœ‰ä»€ä¹ˆå®é™…çš„é¡¹ç›®ç»éªŒã€‚åæ¥ï¼Œæˆ‘æ¥äº†åŒâ€»â€»ã€‚</li>
</ul>
</blockquote>
</li>
</ol>
<ol start="2">
<li><h4 id="æˆ–è®¸ç¦»å¼€è¿™é‡Œæ˜¯æˆ‘æœ€æ­£ç¡®çš„é€‰æ‹©"><a href="#æˆ–è®¸ç¦»å¼€è¿™é‡Œæ˜¯æˆ‘æœ€æ­£ç¡®çš„é€‰æ‹©" class="headerlink" title="æˆ–è®¸ç¦»å¼€è¿™é‡Œæ˜¯æˆ‘æœ€æ­£ç¡®çš„é€‰æ‹©"></a>æˆ–è®¸ç¦»å¼€è¿™é‡Œæ˜¯æˆ‘æœ€æ­£ç¡®çš„é€‰æ‹©</h4><blockquote>
<ul>
<li>åœ¨æ‹¿åˆ°offeræ¥åˆ°åŒâ€»â€»ä¹‹å‰ï¼Œæˆ‘è§‰å¾—æˆ‘æ¥åˆ°äº†ä¸€ä¸ªå¾ˆå¥½çš„å¤§å…¬å¸ã€‚äº‹å®ä¸Šè¿™é‡Œä¹Ÿæ²¡æœ‰å¾ˆå·®ï¼Œé™¤äº†æˆ‘æ‰€åœ¨çš„éƒ¨é—¨ã€‚åŒâ€»â€»æ˜¯å›½å†…æœ€æ—©åšè‚¡ç¥¨äº¤æ˜“å¹³å°çš„è½¯ä»¶å…¬å¸ï¼Œç›®å‰ä¹Ÿæœ‰è‡ªå·±çš„å¤§æ¥¼ï¼Œè£…ä¿®çš„ä¹Ÿå¾ˆä¸é”™ï¼Œå¾ˆåƒä¸€ä¸ªä¸€çº¿çš„å¤§å‹äº’è”ç½‘å…¬å¸ã€‚ç„¶è€Œï¼Œåªæ˜¯å¾ˆåƒè€Œå·²ã€‚ä»ä¸€ä»¶å¾ˆå¹³å¸¸çš„äº‹å°±çœ‹å¾—å‡ºæ¥ï¼šæ¯å¤©é¥­ç‚¹ï¼Œåå‹¤éƒ¨ç»ç†å°±ç«™åœ¨é£Ÿå ‚æ‰“é¥­çª—å£å¯¹æ‰“é¥­çš„å‘˜å·¥å–Šï¼Œå°‘æ‰“ä¸€ç‚¹å°‘æ‰“ä¸€ç‚¹ï¼Œä»–ä»¬åƒä¸å®Œï¼ â€¦ â€¦</li>
<li>å…¶å®æˆ‘åˆšæ¥çš„æ—¶å€™è§‰å¾—è‡ªå·±å¯ä»¥å‘†ä¸‰å¹´çš„ï¼Œç°åœ¨æƒ³æƒ³çœŸçš„å¾ˆæŠ±æ­‰ï¼Œæˆ‘å¾—èµ°äº†ã€‚å¹¶ä¸æ˜¯å› ä¸ºä¸Šé¢çš„â€œæ‰“é¥­â€ã€‚æˆ‘æ¥åˆ°è¿™é‡Œåšçš„å·¥ä½œéƒ½æ˜¯å¤–åŒ…çš„ï¼Œåœ¨B2Béƒ¨é—¨ã€‚æˆ‘æœ¬æ¥ä»¥ä¸ºå¤§å…¬å¸çš„å·¥ä½œæµç¨‹éƒ½å¾ˆè§„èŒƒï¼Œæ²¡æƒ³åˆ°åœ¨è¿™é‡Œåˆ·æ–°äº†æˆ‘çš„ä¸‰è§‚å“ˆå“ˆã€‚å¤–åŒ…å·¥ä½œä»€ä¹ˆéƒ½å¾—å¬å®¢æˆ·çš„ï¼Œä¹±æ”¹éœ€æ±‚ä¸è¯´ï¼Œè‡ªå·±å…¬å¸çš„è¿ç»´æ ¹æœ¬æ´¾ä¸ä¸Šç”¨åœºï¼Œè¿tomcatçš„å¯åŠ¨æŠ¥é”™éƒ½ä¸çŸ¥é“æ€ä¹ˆè§£å†³ï¼Œè®©æˆ‘ä»¬ä½œä¸ºå¼€å‘çš„å»åŒæ—¶åšå¼€å‘ã€æµ‹è¯•ã€è¿ç»´ã€é¡¹ç›®ç»ç†ã€äº§å“çš„æ´»ï¼Œæƒ³æƒ³å°±ç«å¤§ã€‚é¡¹ç›®ç»ç†æŠŠå®¢æˆ·ç”µè¯ç”©ç»™ä½ ï¼Œè‡ªå·±æ²Ÿé€šå»ï¼Œç„¶åè‡ªå·±æ½‡æ´’çš„ä¸‹ç­ã€‚</li>
<li>å”‰Îµ=(â€²Î¿ï½€*)))ï¼Œä¸æƒ³å†è¯´å¤ªå¤šäº†ï¼Œæ˜¾å¾—è‡ªå·±å¥½åƒå¤ªå°æ°”ï¼Œéƒ½è¦èµ°äº†è¿˜è¦disså‰å…¬å¸ã€‚ä½†æ˜¯ï¼Œæˆ‘è§‰å¾—æˆ‘æ˜¯çœŸçš„å¾—èµ°äº†ï¼Œè€Œä¸”æˆ‘è¿˜ç®—æ˜¯å¿å¾—æ—¶é—´é•¿çš„ã€‚æˆ‘ä»¬ç»„ï¼Œæ¯”æˆ‘æ¥å¾—æ™šï¼Œæ¯”æˆ‘èµ°çš„æ—©çš„äººï¼Œè¶…è¿‡äº†10ä¸ªã€‚æ‰ä¸€å¹´å•Šã€‚ä½œä¸ºä¸€ä¸ªåˆšæ¯•ä¸šä¸€å¹´çš„ç¨‹åºå‘˜ï¼ŒçœŸçš„å¿ƒå¥½ç´¯ã€‚</li>
</ul>
</blockquote>
</li>
</ol>
<ol start="3">
<li><h4 id="æ¥ä¸‹æ¥çš„è·¯å°‘äº¤ç‚¹å„¿æœ‹å‹ï¼Œå¦åˆ™ç¦»å¼€æ—¶ä¼šéš¾å—"><a href="#æ¥ä¸‹æ¥çš„è·¯å°‘äº¤ç‚¹å„¿æœ‹å‹ï¼Œå¦åˆ™ç¦»å¼€æ—¶ä¼šéš¾å—" class="headerlink" title="æ¥ä¸‹æ¥çš„è·¯å°‘äº¤ç‚¹å„¿æœ‹å‹ï¼Œå¦åˆ™ç¦»å¼€æ—¶ä¼šéš¾å—"></a>æ¥ä¸‹æ¥çš„è·¯å°‘äº¤ç‚¹å„¿æœ‹å‹ï¼Œå¦åˆ™ç¦»å¼€æ—¶ä¼šéš¾å—</h4><blockquote>
<ul>
<li>è¦èµ°äº†è¦èµ°äº†ï¼Œå´åˆæ„Ÿè§‰å¾ˆéš¾å—ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘æ¥è§¦è¿‡ä¸å°‘å‚»é€¼ï¼Œä½†æ˜¯ä¹ŸçœŸçš„äº¤åˆ°å¾ˆå¤šæœ‰è¶£çš„æœ‹å‹ã€‚ç”šè‡³æœ‰é‚£ç§å°±ç®—ç¦»èŒäº†ï¼Œä¹‹åä¹Ÿä¸ä¼šæ–­äº†è”ç³»çš„ã€‚åœ¨è¿™ä¸ªåŸå¸‚ï¼ŒåŸæœ¬ç‹¬è‡ªä¸€äººçš„ç”Ÿæ´»ç”±ä»–ä»¬ï¼ŒçœŸçš„ä¸ä¼šæ— èŠã€‚</li>
<li>å¤©æ¶¯é€”ä¸Šè°æ˜¯å®¢ï¼Œæ•£å¸­æ—¶æ€ä¹ˆåˆ†ï¼Ÿ ä¹Ÿè®¸æœ‰äº›äººåˆ†å¼€å°±ä¸ä¼šå†è§ï¼Œæœ‰äº›äººæƒ³ä¸è§å´æ€»ä¼šå‡ºç°åœ¨ç”Ÿæ´»é‡Œã€‚ç½¢äº†ï¼Œä»¥åæ¢åˆ°æ–°çš„å…¬å¸ï¼Œä¸è¦å†èµ°å¿ƒäº†ã€‚å†µä¸”ï¼ŒçœŸæ­£å€¼å¾—èµ°å¿ƒçš„ï¼Œä¹Ÿä¸ä¼šå¾ˆå¤šï¼</li>
</ul>
</blockquote>
</li>
</ol>
<h6 id="âœŠæˆé•¿æ˜¯ä¸€åœºæ¸¸æˆï¼Œå‹‡æ•¢çš„äººå…ˆå¼€å§‹ã€‚è·Œæ’æ…Œå¼ å‰è¡Œï¼Œä¸è¯´å›å¤´ã€‚-â€”â€”ã€Šè¡Œæ­Œã€‹-Â·-é™ˆé¸¿å®‡"><a href="#âœŠæˆé•¿æ˜¯ä¸€åœºæ¸¸æˆï¼Œå‹‡æ•¢çš„äººå…ˆå¼€å§‹ã€‚è·Œæ’æ…Œå¼ å‰è¡Œï¼Œä¸è¯´å›å¤´ã€‚-â€”â€”ã€Šè¡Œæ­Œã€‹-Â·-é™ˆé¸¿å®‡" class="headerlink" title="âœŠæˆé•¿æ˜¯ä¸€åœºæ¸¸æˆï¼Œå‹‡æ•¢çš„äººå…ˆå¼€å§‹ã€‚è·Œæ’æ…Œå¼ å‰è¡Œï¼Œä¸è¯´å›å¤´ã€‚  â€”â€”ã€Šè¡Œæ­Œã€‹ Â· é™ˆé¸¿å®‡"></a>âœŠæˆé•¿æ˜¯ä¸€åœºæ¸¸æˆï¼Œå‹‡æ•¢çš„äººå…ˆå¼€å§‹ã€‚è·Œæ’æ…Œå¼ å‰è¡Œï¼Œä¸è¯´å›å¤´ã€‚  â€”â€”ã€Šè¡Œæ­Œã€‹ Â· é™ˆé¸¿å®‡</h6>]]></content>
      <categories>
        <category>ç¨‹åºäººç”Ÿ</category>
      </categories>
      <tags>
        <tag>ç¨‹åºäººç”Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>å…³äºGit Pull æ‹‰å–ä¸åˆ°æœ€æ–°è®°å½•</title>
    <url>/blog/20180531/%E5%85%B3%E4%BA%8Egit-pull-%E6%8B%89%E5%8F%96%E4%B8%8D%E5%88%B0%E6%9C%80%E6%96%B0%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<p>//<br>//<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">//~~~~~~~~~~~~~~~~~~~~~~o8888888o</span><br><span class="line">//~~~~~~~~~~~~~~~~~~~~~~88&quot;~.~&quot;88</span><br><span class="line">//~~~~~~~~~~~~~~~~~~~~~~(|~-_-~|)</span><br><span class="line">//~~~~~~~~~~~~~~~~~~~~~~0\~~=~~/0</span><br><span class="line">//~~~~~~~~~~~~~~~~~~~~___/`---&apos;\___</span><br><span class="line">//~~~~~~~~~~~~~~~~~~.&apos;~\\|~~~~~|//~&apos;.</span><br><span class="line">//~~~~~~~~~~~~~~~~~/~\\|||~~:~~|||//~\</span><br><span class="line">//~~~~~~~~~~~~~~~~/~_|||||~-:-~|||||-~\</span><br><span class="line">//~~~~~~~~~~~~~~~|~~~|~\\\~~-~~///~|~~~|</span><br><span class="line">//~~~~~~~~~~~~~~~|~\_|~~&apos;&apos;\---/&apos;&apos;~~|_/~|</span><br><span class="line">//~~~~~~~~~~~~~~~\~~.-\__~~&apos;-&apos;~~___/-.~/</span><br><span class="line">//~~~~~~~~~~~~~___&apos;.~.&apos;~~/--.--\~~`.~.&apos;___</span><br><span class="line">//~~~~~~~~~~.&quot;&quot;~&apos;&lt;~~`.___\_&lt;|&gt;_/___.&apos;~&gt;&apos;~&quot;&quot;.</span><br><span class="line">//~~~~~~~~~|~|~:~~`-~\`.;`\~_~/`;.`/~-~`~:~|~|</span><br><span class="line">//~~~~~~~~~\~~\~`_.~~~\_~__\~/__~_/~~~.-`~/~~/</span><br><span class="line">//~~~~~=====`-.____`.___~\_____/___.-`___.-&apos;=====</span><br><span class="line">//~~~~~~~~~~~~~~~~~~~~~~~`=---=&apos;</span><br><span class="line">//</span><br><span class="line">//</span><br><span class="line">//~~~~~~~~~~~~~~~~~~~~~~~~~</span><br></pre></td></tr></table></figure></p>
<p>//<br>//<del>~</del><del>~</del><del>~</del>ä½›ç¥–ä¿ä½‘<del>~</del>~~~~æ°¸æ— BUG<br>//<br>//<br>//</p>
<blockquote>
<p>ä½¿ç”¨<code>git pull</code> è·å–ä¸åˆ°æœ€æ–°çš„è®°å½•ï¼Œåˆ¤æ–­åº”è¯¥æ˜¯æŸäº›æ—¶å€™æœªpullå…ˆcommitå¯¼è‡´çš„ï¼Œä½¿ç”¨å‘½ä»¤ï¼š<code>git pull origin master</code>å³å¯è§£å†³</p>
</blockquote>
]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>å¼€å‘æ—¥è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring-Bootå¾®æœåŠ¡æ­å»º</title>
    <url>/blog/20180127/spring-boot%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/</url>
    <content><![CDATA[<p><a href="http://blog.csdn.net/qq_26627671/article/details/76563127" target="_blank" rel="noopener">æœ¬äººçš„csdnä¼ é€é—¨</a></p>
<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><blockquote>
<p>è¿›è¡Œwebå¼€å‘çš„æ—¶å€™Javaç¨‹åºå‘˜ä»¬éš¾å…ä¼šç¢°åˆ°é‚£ç§å¾ˆå°çš„æœåŠ¡ï¼Œæ¯”å¦‚å°±æä¾›ä¸€ä¸ªç”Ÿæˆè®¢å•å·çš„æ¥å£ï¼Œæˆ–è€…ä¸€ä¸ªä¸Šä¼ æ–‡ä»¶çš„æœåŠ¡ã€‚è€Œè¿™æ—¶æˆ‘ä»¬å†å»ä½¿ç”¨SpringMVCè¿™ç§ä½“é‡ç¨å¤§ã€é…ç½®ç¹ççš„æ¡†æ¶å¼€å‘éš¾å…ä¼šåŠ å¤§å·¥ä½œé‡ï¼Œè€Œä¸”æ˜¯ä¸å¿…è¦çš„ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥é€‰æ‹©ä½¿ç”¨è¿™ä¸ªå¾®æœåŠ¡æ¡†æ¶â€”â€”springbootè¿›è¡Œå¼€å‘ã€‚</p>
</blockquote>
<p>Spring Bootæ˜¯ç”±Pivotalå›¢é˜Ÿæä¾›çš„å…¨æ–°æ¡†æ¶ï¼Œå…¶è®¾è®¡ç›®çš„æ˜¯ç”¨æ¥ç®€åŒ–æ–°Springåº”ç”¨çš„åˆå§‹æ­å»ºä»¥åŠå¼€å‘è¿‡ç¨‹ã€‚è¯¥æ¡†æ¶ä½¿ç”¨äº†ç‰¹å®šçš„æ–¹å¼æ¥è¿›è¡Œé…ç½®ï¼Œä»è€Œä½¿å¼€å‘äººå‘˜ä¸å†éœ€è¦å®šä¹‰æ ·æ¿åŒ–çš„é…ç½®ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒSpring Bootè‡´åŠ›äºåœ¨è“¬å‹ƒå‘å±•çš„å¿«é€Ÿåº”ç”¨å¼€å‘é¢†åŸŸ(rapid application development)æˆä¸ºé¢†å¯¼è€…ã€‚</p>
<a id="more"></a>
<hr>
<h3 id="springbootæ¡†æ¶çš„æ­å»ºä¸ç®€å•çš„RESTé£æ ¼çš„MVCæ¶æ„demo"><a href="#springbootæ¡†æ¶çš„æ­å»ºä¸ç®€å•çš„RESTé£æ ¼çš„MVCæ¶æ„demo" class="headerlink" title="springbootæ¡†æ¶çš„æ­å»ºä¸ç®€å•çš„RESTé£æ ¼çš„MVCæ¶æ„demo"></a>springbootæ¡†æ¶çš„æ­å»ºä¸ç®€å•çš„RESTé£æ ¼çš„MVCæ¶æ„demo</h3><h4 id="é¦–å…ˆï¼Œå»ºç«‹ä¸€ä¸ªæ–°çš„mavenå·¥ç¨‹ï¼Œpomæ–‡ä»¶ä¸»è¦å†…å®¹å¦‚ä¸‹ï¼š"><a href="#é¦–å…ˆï¼Œå»ºç«‹ä¸€ä¸ªæ–°çš„mavenå·¥ç¨‹ï¼Œpomæ–‡ä»¶ä¸»è¦å†…å®¹å¦‚ä¸‹ï¼š" class="headerlink" title="é¦–å…ˆï¼Œå»ºç«‹ä¸€ä¸ªæ–°çš„mavenå·¥ç¨‹ï¼Œpomæ–‡ä»¶ä¸»è¦å†…å®¹å¦‚ä¸‹ï¼š"></a>é¦–å…ˆï¼Œå»ºç«‹ä¸€ä¸ªæ–°çš„mavenå·¥ç¨‹ï¼Œpomæ–‡ä»¶ä¸»è¦å†…å®¹å¦‚ä¸‹ï¼š</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­æ ¸å¿ƒä¾èµ–æ˜¯    <code>spring-boot-starter-web</code><br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>è®¿é—®é™æ€èµ„æºæ–‡ä»¶å¯ä»¥åŠ å…¥æ¨¡æ¿ï¼š<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="ç¼–å†™Application-javaæ–‡ä»¶ï¼Œå­˜æ”¾äºsrc-main-javaè¿™ä¸ªç›®å½•ä¸‹"><a href="#ç¼–å†™Application-javaæ–‡ä»¶ï¼Œå­˜æ”¾äºsrc-main-javaè¿™ä¸ªç›®å½•ä¸‹" class="headerlink" title="ç¼–å†™Application.javaæ–‡ä»¶ï¼Œå­˜æ”¾äºsrc/main/javaè¿™ä¸ªç›®å½•ä¸‹"></a>ç¼–å†™Application.javaæ–‡ä»¶ï¼Œå­˜æ”¾äºsrc/main/javaè¿™ä¸ªç›®å½•ä¸‹</h4><h5 id="è¿™é‡Œæ˜¯springbootçš„æ ¸å¿ƒå¯åŠ¨ç±»"><a href="#è¿™é‡Œæ˜¯springbootçš„æ ¸å¿ƒå¯åŠ¨ç±»" class="headerlink" title="è¿™é‡Œæ˜¯springbootçš„æ ¸å¿ƒå¯åŠ¨ç±»"></a>è¿™é‡Œæ˜¯springbootçš„æ ¸å¿ƒå¯åŠ¨ç±»</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.EnableAutoConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Application</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SpringApplication.run(Application<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>äº‹å®ä¸Šï¼Œè¿™ä¸ªæ—¶å€™å·²ç»æŠŠæ¡†æ¶æ­å»ºå¥½äº†ï¼Œè¿è¡Œä»¥ä¸Šmainæ–¹æ³•å³å¯å¯åŠ¨è¿™ä¸ªé¡¹ç›®ï¼Œä½†æ˜¯æˆ‘ä»¬ç°åœ¨çœ‹ä¸åˆ°æ•ˆæœï¼Œæ¥ä¸‹æ¥ï¼Œå°±å¯ä»¥åƒSpringMVCä¸€æ ·åŠ å…¥MVCä¸‰å±‚ç»“æ„çš„ä»£ç äº†ï¼Œç›®å½•ç»“æ„å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/3327380-fb0da321cb7b5abb?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="RESTé£æ ¼çš„MVCæ¶æ„demoé¡¹ç›®ç›®å½•ç»“æ„"></p>
<p>å…¶ä¸­å„å±‚ä»£ç å¦‚ä¸‹ï¼š</p>
<h4 id="controller"><a href="#controller" class="headerlink" title="controller"></a>controller</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhang.controller;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"><span class="keyword">import</span> com.zhang.entity.Photo;</span><br><span class="line"><span class="keyword">import</span> com.zhang.service.mainService;</span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/photo"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">mainController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> mainService mainservice;</span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"/"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> ModelAndView <span class="title">index</span><span class="params">(ModelAndView mav)</span></span>&#123;</span><br><span class="line">		mav.addObject(<span class="string">"hello"</span>, <span class="string">"è¿™æ˜¯é¡¹ç›®ä¸»é¡µï¼Œè®¿é—®æ ¹ç›®å½•åˆ°è¾¾~~"</span>);</span><br><span class="line">		mav.setViewName(<span class="string">"index"</span>);</span><br><span class="line">		<span class="keyword">return</span> mav;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"/getPhoto"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">doIt</span><span class="params">()</span></span>&#123;</span><br><span class="line">		Map&lt;String, Photo&gt; map = <span class="keyword">new</span> HashMap&lt;String, Photo&gt;();</span><br><span class="line">		map.put(<span class="string">"photo"</span>, mainservice.getPhotoById(<span class="number">123</span>));</span><br><span class="line">		<span class="keyword">return</span> map;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="serviceå®ç°ç±»"><a href="#serviceå®ç°ç±»" class="headerlink" title="serviceå®ç°ç±»"></a>serviceå®ç°ç±»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhang.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zhang.dao.mainDao;</span><br><span class="line"><span class="keyword">import</span> com.zhang.entity.Photo;</span><br><span class="line"><span class="keyword">import</span> com.zhang.service.mainService;</span><br><span class="line"><span class="meta">@Service</span>(<span class="string">"mainservice"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">mainServiceImpl</span> <span class="keyword">implements</span> <span class="title">mainService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> mainDao maindao;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Photo <span class="title">getPhotoById</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> maindao.getPhotoNameById(id);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="daoå®ç°ç±»"><a href="#daoå®ç°ç±»" class="headerlink" title="daoå®ç°ç±»"></a>daoå®ç°ç±»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhang.dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zhang.dao.mainDao;</span><br><span class="line"><span class="keyword">import</span> com.zhang.entity.Photo;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span>(<span class="string">"maindao"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">mainDaoImpl</span> <span class="keyword">implements</span> <span class="title">mainDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Photo <span class="title">getPhotoNameById</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">		Photo p = <span class="keyword">new</span> Photo();</span><br><span class="line">		p.setId(<span class="number">123</span>);</span><br><span class="line">		p.setName(<span class="string">"é›ªå±±è¡Œçºªå¿µç…§"</span>);</span><br><span class="line">		<span class="keyword">return</span> p;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å®ä½“ç±»photo"><a href="#å®ä½“ç±»photo" class="headerlink" title="å®ä½“ç±»photo"></a>å®ä½“ç±»photo</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhang.entity;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Photo</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å¯åŠ¨é¡¹ç›®"><a href="#å¯åŠ¨é¡¹ç›®" class="headerlink" title="å¯åŠ¨é¡¹ç›®"></a>å¯åŠ¨é¡¹ç›®</h4><p><img src="http://upload-images.jianshu.io/upload_images/3327380-8ed38aa7e3e43e40?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="é¡¹ç›®å¯åŠ¨æ—¥å¿—"></p>
<h4 id="é¡¹ç›®é»˜è®¤ç«¯å£ä¸º8080ï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—®åˆšæ‰çš„controllerä¼šçœ‹åˆ°ï¼š"><a href="#é¡¹ç›®é»˜è®¤ç«¯å£ä¸º8080ï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—®åˆšæ‰çš„controllerä¼šçœ‹åˆ°ï¼š" class="headerlink" title="é¡¹ç›®é»˜è®¤ç«¯å£ä¸º8080ï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—®åˆšæ‰çš„controllerä¼šçœ‹åˆ°ï¼š"></a>é¡¹ç›®é»˜è®¤ç«¯å£ä¸º8080ï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—®åˆšæ‰çš„controllerä¼šçœ‹åˆ°ï¼š</h4><p><img src="http://upload-images.jianshu.io/upload_images/3327380-75812c968f3ff846?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="è®¿é—®ç»“æœ"></p>
<hr>
<h3 id="å¦‚ä¸Šï¼Œä¸€ä¸ªRESTé£æ ¼çš„MVCæ¶æ„çš„demoé¡¹ç›®å°±æ­å»ºå®Œæˆäº†ã€‚"><a href="#å¦‚ä¸Šï¼Œä¸€ä¸ªRESTé£æ ¼çš„MVCæ¶æ„çš„demoé¡¹ç›®å°±æ­å»ºå®Œæˆäº†ã€‚" class="headerlink" title="å¦‚ä¸Šï¼Œä¸€ä¸ªRESTé£æ ¼çš„MVCæ¶æ„çš„demoé¡¹ç›®å°±æ­å»ºå®Œæˆäº†ã€‚"></a>å¦‚ä¸Šï¼Œä¸€ä¸ªRESTé£æ ¼çš„MVCæ¶æ„çš„demoé¡¹ç›®å°±æ­å»ºå®Œæˆäº†ã€‚</h3>]]></content>
      <categories>
        <category>springboot</category>
      </categories>
      <tags>
        <tag>springboot</tag>
      </tags>
  </entry>
  <entry>
    <title>æ ¡æ‹›é¢è¯•ã€äº¬ä¸œã€é¡ºä¸°ç§‘æŠ€ã€æ‹›é“¶ç½‘ç»œç§‘æŠ€ã€å»å“ªå„¿ç½‘ã€‘</title>
    <url>/blog/20160927/%E6%A0%A1%E6%8B%9B%E9%9D%A2%E8%AF%95%E7%BB%8F%E5%8E%86/</url>
    <content><![CDATA[<ul>
<li>2017æ ¡æ‹›è¿‡çš„å¤ªæƒ¨äº†ï¼Œè¿˜ä¸€åº¦æŠŠåŸå› æ€ªç½ªåœ¨å®ä¹ ä¸Šï¼Œè®¤ä¸ºè‡ªå·±å®ä¹ äº†4ä¸ªæœˆéJavaç ”å‘çš„ä¸œè¥¿å¯¼è‡´è‡ªå·±å¯¹äºJavaæ²¡æœ‰è¿›è¡Œæ›´åŠ æ·±å…¥çš„å­¦ä¹ ã€‚å…¶å®å‘¢ï¼Œè¿˜æ˜¯åº”è¯¥æ€ªè‡ªå·±ä¸åŠªåŠ›ï¼Œæ€ªä¸å¾—å…¶ä»–ã€‚*<br>ä»ä¸‰æ˜Ÿç¦»èŒä¹‹åå°±å¼€å§‹æ‰¾ä¸€äº›å…¬ä¼—å·å†…æ¨ï¼Œæˆ‘æ˜¯æ¥è‡ªé985ã€211é™¢æ ¡çš„æœ¬ç§‘ç”Ÿï¼Œå­¦çš„è¿˜æ˜¯è‡ªåŠ¨åŒ–ä¸“ä¸šï¼Œåç¡¬ä»¶ï¼Œå®ä¹ å†…å®¹è¿˜ä¸æ˜¯Javaå¼€å‘ä¹‹ç±»çš„ä¸œè¥¿ï¼Œä¸çŸ¥é“æ˜¯ç”±äºè¿™äº›å…¬ä¼—å·çš„åŸå› ï¼ˆæ¶æ„å¸å¼•ç²‰ä¸ï¼‰è¿˜æ˜¯è‡ªå·±çš„ç®€å†ç¡®å®æœ‰é—®é¢˜ï¼Œå†…æ¨ä¸€ç›´ä¸é¡ºåˆ©ã€‚çƒ¦å¾—å¾ˆã€‚<br>ä¹‹ååˆä»9æœˆå¼€å§‹æµ·æŠ•Javaè½¯ä»¶å¼€å‘å²—ï¼Œå„ç§åœ¨çº¿ç¬”è¯•ã€‚åšä¸»çš„åŸºç¡€ï¼ˆè®¡ç®—æœºç½‘ç»œæ“ä½œç³»ç»Ÿç­‰ï¼‰æœ¬èº«å°±ä¸å¼ºï¼ŒC/C++/Java/PHPç­‰è¿˜æœ‰HTML/CSS/JS/jQueryè¿™äº›ä¹±ä¸ƒå…«ç³Ÿéƒ½å­¦ï¼Œç®—æ³•å’Œæ•°æ®ç»“æ„ä¹Ÿå­¦å¾—ä¸æ˜¯å¾ˆç²¾ï¼Œåº”ä»˜ä¸æ¥ç¬”è¯•ç¼–ç¨‹é¢˜ï¼Œæ„Ÿè§‰é¢è¯•è¿‡çš„å…¬å¸å¥½å°‘ï¼Œå¦ˆçš„å·¥ä½œè¦æ‰¾åˆ°åæœˆäº†ã€‚</li>
</ul>
<a id="more"></a>
<p><strong> é¦–å…ˆè¯´ä¸‹æ‹›é“¶ç”µé¢ï¼š</strong> 9æœˆ23å·æ™šä¸Šå…«ç‚¹æ­£åœ¨ç†å‘æŸ“å‘å‘¢ç”µè¯å°±æ¥äº†ï¼Œéƒ½ä¸é¢„çº¦ä¸€ä¸‹ã€‚<br>1ã€åœ¨Javaä¸­è¿›è¡Œæ•°æ®åº“è¿æ¥å¹¶æ“ä½œæ•°æ®çš„æ­¥éª¤ï¼Ÿæœ€åéœ€è¦è¿›è¡Œä»€ä¹ˆæ“ä½œï¼Ÿ<br>2ã€é¡¹ç›®ä¸­ä½¿ç”¨jqueryï¼Œé‚£ä¹ˆonã€bindã€liveã€delegateè¿™å‡ ä¸ªå‡½æ•°æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br>3ã€ä¸€ä¸ªhttpè¯·æ±‚æ‰€åŒ…å«çš„æ•°æ®æ ¼å¼æ˜¯ä»€ä¹ˆï¼Ÿ<br>4ã€ä¸€æ¬¡httpè¯·æ±‚çš„è¯¦ç»†å¤„ç†è¿‡ç¨‹ï¼Ÿ<br>5ã€ä¸€æ¬¡strutså¤„ç†è¯·æ±‚ä»å¼€å§‹åˆ°çœ‹åˆ°é¡µé¢æ•°æ®ä¹‹é—´éƒ½å‘ç”Ÿäº†ä»€ä¹ˆï¼Œæ•´ä¸ªè¯¦ç»†è¿‡ç¨‹ï¼Ÿ<br>6ã€é¡¹ç›®ä¸­éƒ½ç”¨åˆ°äº†ä»€ä¹ˆæ¡†æ¶ï¼Ÿï¼ˆspring+struts+mybatisï¼‰<br>7ã€åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­æœ‰æ²¡æœ‰ç”¨åˆ°å¹¶å‘ï¼Ÿå¦‚æœè®©ä½ ç°åœ¨è€ƒè™‘ç»™ä½ çš„é¡¹ç›®ä¸­è€ƒè™‘å¹¶å‘ä½ ä¼šæ€ä¹ˆåšï¼Ÿä½ è¦æ§åˆ¶ï¼ˆè¿›è¡ŒåŒæ­¥ï¼‰çš„æ•°æ®æºæ˜¯å“ªäº›ï¼Ÿ<br><em>è¿˜æœ‰å‡ ä¸ªå§ï¼Œæƒ³ä¸èµ·æ¥äº†ï¼Œåº”è¯¥æ¯”è¾ƒç®€å•å°±æ²¡æœ‰å°è±¡ã€‚ç”µé¢åé¢„çº¦28å·ä¸‹åˆå†é¢è¯•ã€‚</em></p>
<hr>
<p><strong>æ‹›é“¶ç°åœºé¢</strong>===è¯¥æ¥çš„å°±è¿™æ ·æ¥äº†<br><em>9æœˆ28å·ä¸‹åˆï¼Œä¸çŸ¥é“å“ªé‡Œæ¥çš„è‡ªä¿¡æ„Ÿè§‰è‡ªå·±èƒ½å¤Ÿåœ¨ä¸€ä¸ªåŠå°æ—¶ä¹‹å†…ä»é•¿å®‰èµ¶åˆ°æ°¸å®é—¨ï¼Œååœ°é“è¿˜æŠŠå®‰è¿œé—¨å½“æˆäº†æ°¸å®é—¨ï¼Œåˆ°äº†å®‰è¿œé—¨å«ä¸ªä¼˜æ­¥ï¼Œæ‰“ç”µè¯è®©å¸æœºå¿«ä¸€ç‚¹ï¼Œå¦ˆçš„ç«Ÿç„¶ç»™æˆ‘å–æ¶ˆäº†ï¼Œå®³æˆ‘æœ€ååå…¬äº¤å»ï¼Œè¿Ÿåˆ°äº†åŠä¸ªå°æ—¶ã€‚å¿ƒæ€çˆ†ç‚¸ï¼ï¼ï¼â•®(â•¯â–½â•°)â•­</em><br>1ã€å»äº†åœ¨æˆ¿é—´é‡Œç­‰ç€ï¼Œè¿‡ä¼šå„¿ä»é…’åº—æˆ¿é—´å‡ºæ¥ä¸€ä¸ªï¼Œå«æˆ‘è¿›å»é¢è¯•ã€‚å…ˆé—®æˆ‘è¦äº†æˆç»©å•å’Œä¸€äº›è¯ä¹¦ï¼Œæ„Ÿè§‰æ‹›é“¶å¯¹äºæˆç»©å’Œè¯ä¹¦å¾ˆçœ‹é‡ã€‚é¢è¯•å®˜æ˜¯ä¸‰ä¸ªäººï¼Œ3V1ï¼Œå¾ˆç´§å¼ æœ‰æœ¨æœ‰ã€‚ä¸­é—´åç€è€å¤§ï¼Œç„¶åä¸€ä¸ªé—®æŠ€æœ¯çš„ï¼Œä¸€ä¸ªHRã€‚<br>2ã€è‡ªæˆ‘ä»‹ç»<br>3ã€ä»‹ç»ä¸€ä¸‹è‡ªå·±çš„é¡¹ç›®<br>4ã€é¡¹ç›®ä¸­æ˜¯ä½¿ç”¨servletç¼–å†™çš„åå°ä»£ç ï¼Œä¸ºä»€ä¹ˆä¸ç”¨å¼€æºæ¡†æ¶ï¼Ÿ<br>5ã€å¦‚æœè¦ç»™é¡¹ç›®ä¸­æ·»åŠ æ—¥å¿—ï¼Œè¯¥å¦‚ä½•åšï¼Ÿ<br>6ã€ä¸€ä¸ªstrutsè¯·æ±‚ä»è¾“å…¥URLåˆ°æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šéƒ½ç»è¿‡äº†å“ªäº›è¿‡ç¨‹ï¼Ÿ<br>7ã€ä¸­é—´è€å¤§çœ‹æˆ‘å†™ç€struts1ï¼Œå°±é—®ä¸ºä»€ä¹ˆä½¿ç”¨struts1è€Œä¸æ˜¯struts2ï¼Œæœ‰ç ”ç©¶è¿‡ä¸¤è€…çš„åŒºåˆ«å—ï¼Ÿ<br>8ã€ç»™ä¸€ä¸ªstringï¼Œé—®å¦‚ä½•ä¸ä½¿ç”¨ä»»ä½•åº“å‡½æ•°ä¹Ÿä¸è½¬åŒ–ä¸ºæ•°ç»„ï¼Œå¦‚ä½•é€†åºï¼Ÿ<br>å°±è¿™ä¹ˆå¤šé—®é¢˜ï¼Œå¿ƒæ€çˆ†ç‚¸ï¼æ€€ç–‘äººç”Ÿï¼é˜¿å¼¥é™€ä½›ï¼</p>
<hr>
<p><strong> äº¬ä¸œä¸€é¢ï¼š</strong> 9æœˆ24æ—¥ä¸€æ—©6ç‚¹å°±çˆ¬èµ·æ¥äº†ï¼Œæ˜¨æ™šä¸€æ™šä¸Šéƒ½æ²¡ç¡å¥½ã€‚åšæ¢¦éƒ½åœ¨æƒ³ç€ä¸€äº›å¤šçº¿ç¨‹å¸¸è€ƒçš„ä¸œè¥¿ï¼Œæœç„¶ç¬¬äºŒå¤©å°±é—®äº†ã€‚<br>1ã€äº†è§£å“ªäº›å¸¸ç”¨çš„é›†åˆï¼ˆsetã€listã€mapï¼‰ï¼Ÿè¯´è¯´ä»–ä»¬å„è‡ªçš„ç‰¹ç‚¹ï¼ˆArrayListå’ŒLinkedListç­‰ï¼‰ï¼Ÿ<br>2ã€HashMapã€HashTableçš„åŒºåˆ«ï¼ŸHashMapæ‰©å®¹ä¸ºä»€ä¹ˆæ˜¯2å€ï¼Ÿå¦‚ä½•å®ç°çš„ï¼Ÿ<br>3ã€è¯´ä¸€è¯´çº¿ç¨‹è°ƒåº¦æœºåˆ¶ï¼Ÿå¯¹çº¿ç¨‹æ± æœ‰ä½•ç†è§£ï¼Ÿå“ªé‡Œä¼šç”¨åˆ°çº¿ç¨‹æ± ï¼Ÿå¥½å¤„æ˜¯ï¼Ÿ<br>4ã€JVMä¸­å¦‚æœæœ‰ä¸€ä¸ªçº¿ç¨‹æŒ‚èµ·äº†ï¼Œç”¨ä»€ä¹ˆå·¥å…·å»æŸ¥æ‰¾è¿™ä¸ªçº¿ç¨‹ï¼Ÿ<br>5ã€Javaåœ¨ä»€ä¹ˆæ—¶å€™ä¼šå†…å­˜æº¢å‡ºï¼ŸæŒä¹…ä»£å†…å­˜æº¢å‡ºæ˜¯ä»€ä¹ˆæƒ…å†µï¼Ÿ<br>6ã€åŠ¨æ€ä»£ç†çš„å®ç°ï¼Ÿï¼ˆä»åŠ¨æ€ä»£ç†ç­”åˆ°äº†springAOPï¼‰<br>7ã€è£…é¥°æ¨¡å¼äº†è§£å—ï¼Ÿå®ƒçš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ<br>8ã€I/Oåº“ä¸­éƒ½ç”¨åˆ°äº†ä»€ä¹ˆè®¾è®¡æ¨¡å¼ï¼Ÿ<br>9ã€strutsçš„ä¸€æ¬¡è¯·æ±‚æ˜¯å¦‚ä½•å¤„ç†çš„ï¼Ÿ<br>10ã€ç½‘ç»œç¼–ç¨‹ï¼Ÿsocketï¼Ÿ<br>11ã€æ•°æ®åº“ç´¢å¼•äº†è§£å—ï¼Ÿä¸€ä¸ªè¡¨ä¸­ä»€ä¹ˆæƒ…å†µé€‚åˆå»ºç«‹ç´¢å¼•ï¼Ÿå¦‚ä½•å»å»ºç«‹æ•°æ®åº“ç´¢å¼•ï¼Ÿ<br>12ã€å¿«é€Ÿæ’åºçš„æ—¶é—´å¤æ‚åº¦ã€åŸç†ï¼Ÿ<br>13ã€javaå¤šæ€çš„å®ç°åŸç†ï¼ŸåŠ¨æ€ç»‘å®šåº•å±‚è™šæ‹Ÿæœºæ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ<br>14ã€forwardå’Œredirectçš„åŒºåˆ«ï¼Ÿ<br><em>åŒæ ·ã€‚ã€‚ã€‚æœ‰å¾ˆå¤šé—®é¢˜æ²¡æƒ³èµ·æ¥ï¼Œä¸€é¢åŠä¸ªå¤šå°æ—¶ï¼Œåå¤©äºŒé¢ã€‚ã€‚</em></p>
<hr>
<p><strong> äº¬ä¸œäºŒé¢ï¼š </strong> æ„Ÿè§‰ä¸€é¢å›ç­”çš„ä¸å¥½ï¼Œå…¨ç¨‹é¢è¯•å®˜é—®ä»€ä¹ˆæˆ‘ç­”ä»€ä¹ˆï¼Œä¸€ç‚¹äº’åŠ¨éƒ½æ²¡æœ‰ï¼Œç‹ ç‹ ç‹ ç´§å¼ ï¼äºŒé¢æŠ±ç€æ— æ‰€è°“çš„å¿ƒæ€å»çš„ï¼Œå€’è¿˜æ²¡æœ‰ä¸€é¢ç´§å¼ ã€‚<br>1ã€äº†è§£é‚£äº›ç®—æ³•å’Œè®¾è®¡æ¨¡å¼ï¼Œè¯´è¯´ä½ éƒ½ç”¨ä»–ä»¬åœ¨ä»€ä¹ˆåœ°æ–¹ï¼Ÿï¼ˆè´ªå¿ƒã€å›æº¯ã€åˆ†æ²»ã€åŠ¨æ€è§„åˆ’  ||  å•ä¾‹æ¨¡å¼ã€å·¥å‚æ¨¡å¼ã€åŠ¨æ€ä»£ç†ã€è£…é¥°æ¨¡å¼ã€é€‚é…å™¨æ¨¡å¼ç­‰ï¼Œè¯´äº†è¯´å•ä¾‹å·¥å‚åŠ¨æ€ä»£ç†ç­‰ï¼Œå†è¯´åˆ°JDKåŠ¨æ€ä»£ç†å’ŒCGLIBä»£ç†çš„åŒºåˆ«ï¼Œä¸€é¡¿ä¹±ä¾ƒï¼‰<br>2ã€ä½ çš„é¡¹ç›®ä¸­é‚£äº›éƒ½ç”¨åˆ°äº†å¤šæœåŠ¡å™¨ï¼Ÿåˆ†å¸ƒå¼äº†è§£å—ï¼Ÿè¿˜é—®åˆ°äº†è·¨åŸŸè¯·æ±‚ã€‚åœ¨å®ä¹ çš„æ—¶å€™å¼€å‘çš„ç½‘ç«™ä¹Ÿæ˜¯å•æœºå—ï¼Ÿï¼ˆä»è¿™å„¿å¼€å§‹é—®åˆ†å¸ƒå¼é›†ç¾¤æœåŠ¡å™¨ï¼Œé«˜å¹¶å‘ï¼Œè¿™æ–¹é¢æ²¡æ€ä¹ˆæ·±å…¥å­¦ä¹ å“ï¼‰<br>3ã€è®¾è®¡ä¸€ä¸ªæŠ¢è´­å•†å“çš„ç³»ç»Ÿéœ€è¦è€ƒè™‘åˆ°é‚£äº›é—®é¢˜ï¼Ÿ<br>4ã€å¯¹äºçº¿ç¨‹æ± æœ‰ä»€ä¹ˆç†è§£ï¼Ÿ<br>5ã€æ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿ<br>6ã€çŸ¥é“çº¢é»‘æ ‘å—ï¼Ÿå¹³è¡¡æ ‘ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br><em>ç®—äº†ä¸å†™äº†ï¼Œæƒ³ä¸èµ·æ¥äº†ï¼Œä¼°è®¡äºŒé¢è·ªäº†ã€‚ã€‚ã€‚</em></p>
<hr>
<p><strong> é¡ºä¸°æŠ€æœ¯é¢ï¼š </strong> 9æœˆ24æ—¥ä¸‹åˆ5ç‚¹ï¼Œå°±æ˜¯äº¬ä¸œä¸€é¢çš„ä¸‹åˆã€‚ã€‚ã€‚ï¼ˆé™¤äº†æŠ€æœ¯é¢å°±æ˜¯HRï¼‰<br>1ã€ç®€å•çš„è‡ªæˆ‘ä»‹ç»ä¸€ä¸‹ã€‚ã€‚ã€‚<br>2ã€ä»‹ç»è‡ªå·±è®¤ä¸ºæœ€èƒ½ä½“ç°è‡ªå·±èƒ½åŠ›çš„é¡¹ç›®ï¼Œè·Ÿç€é¡¹ç›®å¼•å‡ºå¾ˆå¤šé¢˜ç›®ï¼Œé—®äº†ä¸ªé€å½»ã€‚ã€‚ã€‚<br>3ã€è§‰å¾—è‡ªå·±è¿˜æœ‰é‚£äº›æ–¹é¢çš„èƒ½åŠ›æ²¡æœ‰ä½“ç°å‡ºæ¥ï¼Œå¯ä»¥è¯´ä¸€è¯´ï¼Ÿï¼ˆåœ¨è¿™é‡Œå‚»é€¼äº†ï¼Œæˆ‘ä»–å–µè¯´æˆ‘æš‚æ—¶æƒ³ä¸èµ·æ¥ã€‚å› ä¸ºå¯èƒ½è‡ªå·±çš„é¡¹ç›®æœ‰ç‚¹ç®€å•äº†ï¼Œé¢è¯•å®˜è¿˜æƒ³è¦çœ‹çœ‹è‡ªå·±å…¶ä»–çš„èƒ½åŠ›ï¼Œé†‰é†‰å“’ï¼‰<br>é¡ºä¸°ç§‘æŠ€é¢è¯•å°±è¿™æ ·ï¼Œé—®äº†40å¤šåˆ†é’Ÿï¼Œç»“æœé—®å®Œå°±è®©æˆ‘èµ°äº†ï¼Œä¼¤å¿ƒï¼Œæ€ªè‡ªå·±å‚»é€¼äº†ã€‚å¦ä¸€ä¸ªè¥¿ç”µçš„æŠ€æœ¯é¢ç©å°±ç›´æ¥HRé¢äº†ï¼Œè®©æˆ‘å›æ¥ç­‰é€šçŸ¥ï¼Œ4å¤©äº†éƒ½æ²¡æœ‰é€šè¿‡ä¸é€šè¿‡çš„é€šçŸ¥ï¼Œä¹Ÿæ˜¯å‰å®³ã€‚æŒ‚äº†ä¹Ÿä¸è®©æˆ‘å®‰å¿ƒæŒ‚ï¼</p>
<hr>
<p><strong> å»å“ªå„¿ç½‘</strong> 9æœˆ29å·ä¸‹åˆ3ç‚¹å¥½åƒ<br>æ„Ÿè§‰è‡ªå·±çœŸçš„æ˜¯ï¼Œå¹²ä»€ä¹ˆäº‹æƒ…å®Œå…¨ä¸åšä»»ä½•å‡†å¤‡çš„ï¼Œå¾ˆå¤šçœ‹è¿‡çš„é—®é¢˜ï¼Œåœ¨é¢è¯•çš„æ—¶å€™å°±åªèƒ½è¯´æœ‰å°è±¡ï¼Œç­”ä¸è¯¦ç»†ï¼Œæƒ³æŠ½æ­»è‡ªå·±ï¼<br>1ã€å»å“ªå„¿åœ¨é‡‘æ²™å›½é™…é…’åº—é¢è¯•ï¼Œä¸€å¤©å†…é¢å®Œï¼Œå¯¹å»å“ªå„¿æŠ±äº†å¾ˆå¤§å¸Œæœ›ï¼Œå› ä¸ºå¬å­¦é•¿è¯´è¿™ä¸ªé¢è¯•ä¸éš¾ï¼Œé—®çš„æ¯”è¾ƒåŸºç¡€ï¼Œå¦ˆçš„ç°åœ¨å†™è¿™æ®µè¯è¿˜æ˜¯æƒ³æ‰‡è‡ªå·±ã€‚<br>2ã€åˆšè§åˆ°é¢è¯•å®˜ï¼Œä»–æ‹¿åˆ°ç®€å†å°±è¯´ï¼Œä½ æ˜¯æœ¬ç§‘ç”Ÿå•Šï¼Ÿæˆ‘è¯´å“¦ã€‚ã€‚ã€‚ç„¶åå°±æ˜¯è‡ªæˆ‘ä»‹ç»ã€‚ã€‚ã€‚<br>3ã€ç»™æˆ‘äº†ä¸€å¼ çº¸ï¼Œåœ¨çº¸ä¸Šå†™å‡ºè‡ªå·±ç”¨è¿‡çš„æ‰€æœ‰çš„ç±»åã€‚ã€‚ã€‚ç„¶åä»–åœ¨ä¸€è¾¹ç”µè„‘ä¸Šæ•²ç€ä¸œè¥¿ã€‚çªç„¶è®©å†™è‡ªå·±ç”¨è¿‡çš„æ‰€æœ‰çš„ç±»çš„ç±»åï¼Œè„‘å­æœ‰ç‚¹å„¿è’™äº†ã€‚<br>4ã€è¯´è¯´mysqlçš„å¼•æ“å§ï¼Œè¯´äº†myisamå’Œinnodbä»¥åŠå…¶åŒºåˆ«ï¼Œè¿™ä¸ªçœ‹è¿‡ã€‚<br>5ã€mysqlçš„å„ç§è¿æ¥æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ<br>6ã€è¯´è¯´Bæ ‘å’ŒB+æ ‘çš„åŒºåˆ«å§ã€‚<br>7ã€å“ˆå¸Œå†²çªçš„è§£å†³ç®—æ³•ï¼Ÿ<br>8ã€è¯´è¯´HashMapçš„å®ç°åŸç†ï¼Ÿ<br>9ã€æœ‰ä»€ä¹ˆé—®é¢˜é—®æˆ‘ï¼Ÿ<br>10ã€è¿˜æœ‰ä¸€äº›å¿˜è®°äº†ã€‚ã€‚ã€‚<br>/(ã„’oã„’)/~~ã€‚ã€‚ã€‚éƒ½æ˜¯äº›å¾ˆç®€å•çš„é—®é¢˜ï¼Œå¦ˆçš„å°±æ˜¯ç­”å¾—ä¸å¥½ä¸å¤Ÿè¯¦ç»†ã€‚</p>
<hr>
<p><strong> æ€»ç»“ ï¼š </strong> èœé¸Ÿçš„æ±‚èŒä¹‹è·¯æ€»æ˜¯è‰°è¾›çš„ï¼Œæ ¡æ‹›æ—¶é—´è¿˜é•¿ï¼Œåæœˆä»½è¿˜æœ‰å‡ å®¶é¢è¯•ï¼ˆè§‰å¾—è‡ªå·±çš„è„¸ç«è¾£è¾£çš„ç–¼ã€‚ã€‚ã€‚ï¼‰ï¼Œçœ‹åˆ°äººéƒ½æ‹¿åˆ°äº†å¾ˆå¥½çš„Offerï¼Œä¸æœå•Šï¼å“ï¼Œè¯­è¨€æ€»æ˜¯è‹ç™½çš„ï¼Œåªæœ‰å®‰å¿ƒæ•²ä»£ç ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼å›½åº†ä¸ƒå¤©å¥‹å‘å›¾å¼ºï¼Œå¤šçœ‹çœ‹Javaå¹¶å‘ç¼–ç¨‹å®æˆ˜é‚£ä¹¦ä¸Šçš„ä¸œè¥¿å§ï¼Œé—®å¾—å¤ªå¤šäº†ã€‚</p>
]]></content>
      <categories>
        <category>ç¨‹åºäººç”Ÿ</category>
      </categories>
      <tags>
        <tag>ä¸ªäººéšç¬”</tag>
        <tag>é¢è¯•ç»å†</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸€ä¸ªèœé¸Ÿåœ¨ä¸‰æ˜Ÿå®ä¹ çš„é‚£ç‚¹å„¿æ„Ÿå—</title>
    <url>/blog/20160911/%E4%B8%80%E4%B8%AA%E8%8F%9C%E9%B8%9F%E5%9C%A8%E4%B8%89%E6%98%9F%E5%AE%9E%E4%B9%A0%E7%9A%84%E6%84%9F%E5%8F%97/</url>
    <content><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;2016å¹´æš‘å‡ï¼Œåœ¨å¤§å­¦è¿™ç‰‡æ²ƒåœŸä¸Šçš„ç¬¬ä¸‰ä¸ªå­¦æœŸå°±è¿™æ ·ç»“æŸäº†ï¼Œå›æƒ³å¤§å­¦è¿™ä¸‰å¹´ï¼Œä¸ºäº†è‡ªå·±çš„æœªæ¥è¿·èŒ«è¿‡ï¼Œä¹Ÿä¸ºè‡ªå·±åŠªåŠ›è¿‡ï¼Œä¹Ÿä¸ºäº†ä¸å°‘äº‹æƒ…çƒ¦æ¼è¿‡ï¼Œä¸çŸ¥é“å°†æ¥è‡ªå·±å¯ä»¥åœ¨ä»€ä¹ˆåœ°æ–¹è¿‡ç€æ€æ ·çš„ç”Ÿæ´»ã€‚æ›¾ç»ä»¥ä¸ºè‡ªå·±å°†ä¼šå¹³å‡¡åœ°ä¸å¤§éƒ¨åˆ†äººä¸€æ ·ï¼Œæ¯å¤©ä¸Šç€ä¸çŸ¥è€å¸ˆæ‰€äº‘çš„è¯¾ç¨‹ï¼Œæµ‘æµ‘å™©å™©åœ°åº¦è¿‡è¿™å¤§å­¦å››å¹´çš„ç”Ÿæ´»ï¼Œç„¶åæ‰¾ä¸€ä¸ªæ™®æ™®é€šé€šçš„å·¥ä½œï¼Œä½†æ˜¯ä¹Ÿç®—è‡ªå·±è¿æ°”å¥½å§ï¼Œåœ¨å¤§ä¸€ç¬¬äºŒå­¦æœŸé‡åˆ°äº†ä¸€ä½è®©è‡ªå·±çœ¼å‰ä¸€äº®çš„è€å¸ˆï¼Œæ…¢æ…¢å­¦ä¹ å¹¶äº†è§£ç¨‹åºå‘˜è¿™ä¸ªè¡Œä¸šï¼Œæœ€åå†³å®šèµ°ä¸Šå­¦ä¹ Javaå¼€å‘çš„é“è·¯ã€‚</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;å¾ˆæ—©å°±å¬è¯´ï¼Œåœ¨å¤§ä¸‰æš‘å‡å¦‚æœèƒ½å¤Ÿæ‰¾åˆ°ä¸€ä¸ªå¥½çš„ä¸“ä¸šå¯¹å£çš„æš‘æœŸå®ä¹ çš„è¯ï¼Œé‚£ä¹ˆåœ¨å¤§å­¦æ¯•ä¸šä»¥åæ‰¾å·¥ä½œå°±æ–¹ä¾¿è®¸å¤šã€‚äºæ˜¯åœ¨2016å¹´3æœˆï¼Œæˆ‘ä¾¿ä¸€è¾¹åŠªåŠ›å­¦ä¹ ç€webå¼€å‘çš„ç›¸å…³çŸ¥è¯†ï¼Œä¸€è¾¹åœ¨ç½‘ä¸ŠæŠ•ç®€å†æ‰¾ç€å®ä¹ ï¼Œç»ˆäºåœ¨ä¸€ä¸ªå­¦é•¿çš„å†…æ¨ä¸‹ï¼Œæˆ‘è¿›å…¥äº†è¥¿å®‰ä¸‰æ˜ŸåŠå¯¼ä½“æœ‰é™å…¬å¸ï¼ŒåŸè¥¿å®‰ä¸‰æ˜Ÿç”µå­ç ”ç©¶æ‰€ã€‚</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;ä¸‰æ˜Ÿæ˜¯ä¸€ä¸ªæ°”æ°›éå¸¸å¥½çš„å…¬å¸ï¼Œç›´åˆ°ç°åœ¨æˆ‘éƒ½è§‰å¾—èƒ½å¤Ÿè¿›å…¥è¿™ä¸ªå…¬å¸æ˜¯æˆ‘å¤§å­¦æœŸé—´çš„å¾ˆå¹¸è¿çš„ä¸€ä»¶äº‹ã€‚åœ¨è¿™å„¿æˆ‘é‡åˆ°äº†å¯¹æˆ‘å¾ˆå¥½çš„å¸ˆå‚…ä»¬ï¼Œå’Œé‚£äº›è°¦é€Šå’Œå–„çš„åŒäº‹ä»¬ã€‚</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;ä¸€å¼€å§‹è¿›å…¥å…¬å¸ï¼Œæˆ‘è¢«æ´¾çš„ä»»åŠ¡æ˜¯è¿›è¡ŒartikèŠ¯ç‰‡çš„æµ‹è¯•æ‰§è¡Œï¼Œè¾“å‡ºæµ‹è¯•æ‰§è¡ŒæŠ¥å‘Šå¹¶ä¸”å¼€å‘ç›¸åº”çš„shellè„šæœ¬è¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ã€‚å› ä¸ºä¹‹å‰æ²¡æœ‰è¿‡Linuxå¼€å‘ç»éªŒï¼Œæ‰€ä»¥å¯¹äºè¿™é¡¹å·¥ä½œè¿˜æ˜¯æœ‰å¾ˆå¤šç•æƒ§ï¼Œæ€•è‡ªå·±ä¸èƒ½å®Œæˆç›¸åº”çš„ä»»åŠ¡ã€‚åæ¥è¿›è¿‡ä¸€ä¸ªç¤¼æ‹œçš„ç†Ÿæ‚‰ä»¥åï¼Œå¯¹äºè‡ªåŠ¨åŒ–æµ‹è¯•çš„è„šæœ¬å¼€å‘å’Œæµ‹è¯•æ‰§è¡Œæ›´åŠ å¾—å¿ƒåº”æ‰‹èµ·æ¥ã€‚ArtikèŠ¯ç‰‡åŒ…å«è®¸å¤šæ¨¡å—å¦‚MQTTã€wifiã€TLSã€ZigBeeã€BT/BLEã€Ethernetç­‰ï¼Œåœ¨è¿›è¡Œè¿™äº›æ¨¡å—çš„æµ‹è¯•è„šæœ¬çš„å¼€å‘çš„æ—¶å€™ï¼Œä¸ä»…è¦ç†Ÿæ‚‰è„šæœ¬å¼€å‘çš„shellè¯­è¨€ï¼Œè¿˜è¦å¯¹è¿™äº›åè®®ä¹Ÿæœ‰ä¸€å®šçš„å­¦ä¹ ã€‚ç”±äºæˆ‘ä¹‹å‰æ²¡æœ‰æ¥è§¦è¿‡Linuxï¼Œæ‰€ä»¥å¯¹äºshellè„šæœ¬çš„ç¼–å†™çŸ¥è¯†æ‡‚ä¸€ä¸ç‚¹å„¿ç®€å•çš„å‘½ä»¤ï¼Œåæ¥è¾¹å·¥ä½œè¾¹å­¦ä¹ ï¼Œå¯¹äºä¸€äº›å¸¸ç”¨çš„Linuxå‘½ä»¤ä¹ŸæŒæ¡çš„å¾ˆç†Ÿæ‚‰äº†ã€‚</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;å…¶å®ä½œè‡ªåŠ¨åŒ–æµ‹è¯•è¿™ä¸ªå·¥ä½œä¸æ˜¯æˆ‘æœŸæœ›çš„å·¥ä½œï¼Œä½†æ˜¯æ¥åˆ°å…¬å¸é‡Œï¼Œå¯¹äºå…¬å¸çš„å®‰æ’è¿˜æ˜¯è¦æœä»çš„ï¼Œæ¯•ç«Ÿä¹Ÿæ˜¯èƒ½å¤Ÿå­¦ä¹ åˆ°å¾ˆå¤šä¸œè¥¿çš„ã€‚è€Œä¸”æœ‰å¾ˆå¤šæœ‰å¸¸å¹´å·¥ä½œç»éªŒçš„å¸ˆå‚…ä»¬çš„å¸¦é¢†ï¼Œä¸ç®¡æ˜¯æŠ€æœ¯æ–¹é¢è¿˜æ˜¯å·¥ä½œä¹ æƒ¯ä¸å·¥ä½œæµç¨‹çš„ç†Ÿæ‚‰ä¸Šæˆ‘ä¹Ÿå­¦ä¹ äº†ä¸å°‘ã€‚ç”±äºè‡ªå·±åœ¨å­¦æ ¡æ˜¯ä¸»è¦å­¦ä¹ WEBå¼€å‘çš„ï¼Œæ‰€ä»¥ä¸€ç›´å¸Œæœ›è‡ªå·±èƒ½å¤Ÿåœ¨å®ä¹ æ—¶å¾—åˆ°ä¸€äº›è¿™æ–¹é¢çš„å·¥ä½œç»éªŒï¼Œåœ¨æ¥ä¸‹æ¥çš„ä¸¤ä¸ªæœˆï¼Œæˆ‘ä¾¿è¢«leaderè°ƒåˆ°webç»„è¿›è¡Œä¸€ä¸ªå…¬å¸å†…éƒ¨çš„é¡¹ç›®ç®¡ç†ç³»ç»Ÿçš„å¼€å‘ã€‚</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;åœ¨åšç¬¬äºŒä¸ªé¡¹ç›®ä¹‹å‰ï¼Œæˆ‘ä¸ä¼šæƒ³åˆ°è¿™ä¸ªé¡¹ç›®çš„çŸ­çŸ­ä¸€ä¸ªå¤šæœˆæ¯”æˆ‘ä¹‹å‰æ‰€æœ‰æ—¶é—´åŠ èµ·æ¥éƒ½å­¦åˆ°çš„å¤šã€‚å› ä¸ºè¿™ä¸ªé¡¹ç›®å‡ ä¹æ˜¯ç”±æˆ‘ç‹¬è‡ªå®Œæˆå‰ç«¯ä¸åå°ä»£ç çš„ç¼–å†™ï¼Œè€Œä¸”ä½¿ç”¨çš„æ˜¯æˆ‘ä¹‹å‰æ²¡æœ‰ä»»ä½•ç»éªŒçš„PHPè¯­è¨€è¿›è¡Œå¼€å‘ã€‚é¢†å¯¼è¦æ±‚ä¸€ä¸ªæœˆå†…å®Œæˆæ•´ä¸ªé¡¹ç›®çš„å¼€å‘ï¼Œæ‰€ä»¥å‹åŠ›éå¸¸å¤§ã€‚æˆ‘ä¸€è¾¹åœ¨å·¥ä½œä¸­å­¦ä¹ ï¼Œå·¥ä½œï¼Œä¸€è¾¹å†å›åˆ°å¯å®¤åä»æŸ¥èµ„æ–™å­¦ä¹ å¸Œæœ›èƒ½å¤ŸæŠŠè¿™ä¸ªé¡¹ç›®åšåˆ°æœ€å¥½ã€‚å‰ç«¯æ–¹é¢æˆ‘æ›´åŠ ç†Ÿæ‚‰äº†jqueryå’Œbootstrapæ¡†æ¶ä»¥åŠhtml/cssï¼Œåç«¯æ–¹é¢æˆ‘åˆæŒæ¡äº†æ–°çš„æŠ€èƒ½â€“PHPã€‚ä»æ•°æ®åº“çš„è®¾è®¡åˆ°å‰ç«¯é¡µé¢çš„è®¾è®¡ï¼Œå†åˆ°åå°ä¸šåŠ¡ä»£ç çš„ç¼–å†™ï¼ŒæŠ•å…¥äº†è‡ªå·±éå¸¸å¤§çš„ç²¾åŠ›ã€‚ä¸ç®¡æœ€åç»“æœå¦‚ä½•ï¼Œè¿™ä¸ªé¡¹ç›®ç»å†çš„ç¡®ä½¿æˆ‘å¯¹äºwebå¼€å‘çš„ç›¸å…³æŠ€æœ¯çŸ¥è¯†å¢é•¿ä¸å°‘ã€‚åœ¨ç»å†äº†ä¸€ä¸ªå¤šæœˆçš„è¾¹å­¦è¾¹åšï¼Œæœ€åæ€»ç®—ï¼ˆä¸æ˜¯å¾ˆå®Œç¾çš„ï¼‰å®Œæˆäº†è¿™é¡¹å·¥ä½œã€‚</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;9æœˆï¼Œç”±äºå­¦æ ¡å¼€å­¦ä»¥åŠå‡†å¤‡æ¯•ä¸šæ‰¾å·¥ä½œï¼ˆæƒ³æ‰¾Javaå¼€å‘çš„å²—ä½ï¼‰ï¼Œä¾¿ä¸èƒ½ç»§ç»­åœ¨å…¬å¸ç»§ç»­å®ä¹ ï¼Œå¯¹äºè¿™é‡Œå¾ˆä¸èˆï¼Œå› ä¸ºè¿™å„¿æ˜¯ä¸€ä¸ªå·¥ä½œæ°”æ°›éå¸¸èˆ’æœæ„‰å¿«çš„åœ°æ–¹ã€‚åœ¨è¿™é‡Œæˆ‘é‡åˆ°äº†å¾ˆå¤šå’Œæˆ‘ä¸€èµ·åœ¨è¿™é‡Œå®ä¹ çš„å°ä¼™ä¼´ï¼Œä¹Ÿç»“è¯†äº†å¾ˆå¤šå·²ç»æ¯•ä¸šå¾ˆå¤šå¹´å·¥ä½œè¿‘åå¹´çš„æœ‹å‹ï¼Œæˆ‘ç›¸ä¿¡è¿™äº›äººå’Œäº‹åœ¨æœªæ¥çš„æ—¥å­é‡Œéƒ½æ˜¯æˆ‘æœ€å®è´µçš„è´¢å¯Œï¼Œè€Œè¿™æ¬¡çš„å®ä¹ ç»å†ä¹Ÿå¸Œæœ›å°†ä¼šæ˜¯æˆ‘èµ°ä¸ŠæˆåŠŸçš„è·¯ä¸Šçš„ä¸€å—è¸æ¿ã€‚å¸Œæœ›è‡ªå·±çš„åŠªåŠ›èƒ½å¤Ÿå¯¹å¾—èµ·è‡ªå·±çš„ç†æƒ³ï¼</p>
]]></content>
      <categories>
        <category>ç¨‹åºäººç”Ÿ</category>
      </categories>
      <tags>
        <tag>ç¨‹åºäººç”Ÿ</tag>
        <tag>å®ä¹ </tag>
        <tag>ä¸‰æ˜Ÿ</tag>
        <tag>shellè‡ªåŠ¨åŒ–æµ‹è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>Write a Blog in English</title>
    <url>/blog/19951025/Write-a-blog-in-English/</url>
    <content><![CDATA[<h3 id="Improve-my-spoken-English-now-and-written-listen"><a href="#Improve-my-spoken-English-now-and-written-listen" class="headerlink" title="Improve my spoken English now, and written, listen"></a>Improve my spoken English now, and written, listen</h3><blockquote>
<p>Wrote date: </p>
<p>2019-11-05 21:55:46</p>
</blockquote>
<p>Itâ€™s my third week in ThoughtWorks. And today afternoon, Sam who worked in REA and on business trip here made a session. Obviously, in English. I didnâ€™t understand most contents. Almost all of the session for me is difficully. Except English, I also cannot understand some abbreviations and I didnâ€™t used the services and tools which he refered.  </p>
<p>Tomorrow, Iâ€™ll show a card to customers which I paired with Benqing. To tell them what we did and what we are going to do for this card. </p>
<p>Emmm.. How to say, itâ€™s magically, working in a foreign company. Lots of smart people and interesting colleagues. Before I entried TW I thought that this is not a company with good technology, but Iâ€™m wrong, at least I am the worst one.</p>
<p>Keep going, man! Donâ€™t be discouraged! When you want to do something succed, just like you want breath every second, you will success.</p>
]]></content>
      <categories>
        <category>English study</category>
      </categories>
      <tags>
        <tag>ç¨‹åºäººç”Ÿ</tag>
        <tag>English study</tag>
        <tag>English blogs</tag>
      </tags>
  </entry>
  <entry>
    <title>The Second Day on the Job in ThoughtWorks</title>
    <url>/blog/19951025/The-second-day-on-the-job-in-ThoughtWorks/</url>
    <content><![CDATA[<p><img src="/blog/19951025/The-second-day-on-the-job-in-ThoughtWorks/fm.png" alt></p>
<a id="more"></a>
<blockquote>
<p>  date: 2019-10-22 20:41:42</p>
</blockquote>
<h3 id="æ¥åˆ°äº†ä¸€ä¸ªæˆ‘æ›¾ç»ç¾¡æ…•çš„å…¬å¸"><a href="#æ¥åˆ°äº†ä¸€ä¸ªæˆ‘æ›¾ç»ç¾¡æ…•çš„å…¬å¸" class="headerlink" title="æ¥åˆ°äº†ä¸€ä¸ªæˆ‘æ›¾ç»ç¾¡æ…•çš„å…¬å¸"></a>æ¥åˆ°äº†ä¸€ä¸ªæˆ‘æ›¾ç»ç¾¡æ…•çš„å…¬å¸</h3><p>å¤§å­¦æ¯•ä¸šä¹‹åï¼Œæˆ‘å»äº†æ­å·ï¼ŒåŒèŠ±é¡ºï¼Œä¸€ä¸ªè¯´èµ·æ¥è¿˜æ˜¯æŸè¡Œä¸šé¡¶å°–çš„æœåŠ¡æä¾›å•†ï¼Œç®—æ˜¯å¾ˆæœ‰åçš„å¤§å…¬å¸å§ï¼Œä½†æ˜¯å´æ˜¯996ã€‚ç”šè‡³ä¸æ­¢996ï¼Œæˆ‘æ›¾ç»ä¸€æ®µæ—¶é—´è¿ç€æ¯å¤©2ã€3ç‚¹ä¸‹ç­ã€‚æ¯å½“æˆ‘çœ‹åˆ°ä¸€ä¸ªå»äº†TWçš„å¤§å­¦åŒå­¦çš„æœ‹å‹åœˆä¹‹åï¼Œæˆ‘æ‰¿è®¤æˆ‘é…¸äº†ã€‚</p>
<p><img src="/blog/19951025/The-second-day-on-the-job-in-ThoughtWorks/wx.jpg" alt></p>
<p>ä¸Šå›¾å°±æ˜¯åœ¨TWçš„åŒå­¦ï¼Œå‡ºå·®å»æ³°å›½æ—¶å€™çš„æœ‹å‹åœˆã€‚æˆ‘å½“æ—¶å°±åœ¨æƒ³ï¼Œéš¾é“å¤§å­¦æ¯•ä¸šä¹‹åå»ä¸€ä¸ªâ€œå¥‹æ–—æ¯”â€å…¬å¸ï¼ŒçœŸçš„å°±æ¯”åœ¨ä¸€ä¸ªâ€œå…»è€å‹â€å…¬å¸æŠ€æœ¯æå‡çš„å°±å¿«ä¹ˆï¼Ÿåæ¥æˆ‘ä»”ç»†æƒ³äº†ä¸‹ï¼Œå¦‚æœçœŸçš„æ˜¯ä¸€ä¸ªå¥½å­¦çš„äººï¼Œåœ¨ä¸€ä¸ªè½»æ¾çš„å…¬å¸ï¼Œç…§æ ·æ¯å¤©ä¸‹ç­åå¯ä»¥å­¦ä¹ ï¼Œè€Œå¦‚æœåœ¨ä¸€ä¸ªä¸šåŠ¡ç¹é‡çš„å…¬å¸ä¸­çš„è¯ï¼Œä¹Ÿè®¸æ¯å¤©å› ä¸ºæ•²ä¸šåŠ¡ä»£ç ï¼Œå­¦ä¹ ã€çœ‹ä¹¦çš„æ—¶é—´éƒ½æ²¡æœ‰äº†ï¼Œæ›´ä½•å†µå‡ºå»ç©ï¼Ÿ</p>
<p>æ‰€ä»¥ï¼Œæˆ‘å¾ˆç¾¡æ…•å»TWå·¥ä½œçš„ï¼Œå°¤å…¶æ˜¯ï¼Œè¿™ç®—æ˜¯ä¸ºæ•°ä¸å¤šçš„åœ¨è¥¿å®‰çš„æ¯”è¾ƒå¥½ç‚¹å„¿çš„å…¬å¸äº†ã€‚</p>
<p>ç„¶è€Œä¹Ÿè®¸æ˜¯å‘½è¿çœ‹åˆ°äº†æˆ‘çš„æ„¿æœ›ï¼Œä¸¤å¹´åçš„æ˜¨å¤©ï¼Œæˆ‘å…¥èŒäº†ThoughtWorksã€‚</p>
<h3 id="å…¥èŒæ„Ÿå—"><a href="#å…¥èŒæ„Ÿå—" class="headerlink" title="å…¥èŒæ„Ÿå—"></a>å…¥èŒæ„Ÿå—</h3><p>ç¬¬ä¸€å¤©å…¥èŒçš„æ—¶å€™ï¼Œæ„Ÿè§‰å…¬å¸å¥½å°å¥½æ‹¥æŒ¤ï¼ˆä¸è¿‡åæ¥çŸ¥é“æ˜¯åœ¨åŒä¸€å±‚æ¥¼çš„ä¸‰å¹¢æ¥¼éƒ½æœ‰åŠå…¬åŒºåŸŸï¼‰ï¼Œè€Œä¸”å¥½åµã€‚ç„¶åå·¥ä½œå¸¸ç”¨è¯­è¨€æ˜¯è‹±è¯­ï¼Œæƒ³äº†æƒ³è‡ªå·±çš„è‹±è¯­æ°´å¹³ï¼Œç¬é—´å°±æ€‚äº†ã€‚ç¬¬ä¸€å¤©å°±ä¹–ä¹–çš„æ‰¾ä¸ªæ¯äººçš„è§’è½ï¼Œé…ç½®ä¸‹ç”µè„‘ï¼ŒåŠç†ä¸€ä¸‹å…¥èŒæµç¨‹ã€‚</p>
<p>ä»Šå¤©æ˜¯æˆ‘å…¥èŒçš„ç¬¬äºŒå¤©ï¼Œæˆ‘è¢«å¸¦åˆ°äº†ä¸€ä¸ªé¡¹ç›®ç»„ã€‚å¯¹å›½å¤–çš„å®¢æˆ·åšäº†è‹±æ–‡çš„è‡ªæˆ‘ä»‹ç»ï¼ˆè¿˜å¥½è‡ªæˆ‘ä»‹ç»è¿™ç§ä¸œè¥¿æˆ‘ä¹‹å‰ä¹Ÿéƒ½æœ‰å‡†å¤‡è¿‡ï¼‰ã€‚ç„¶åä¸­åˆå‚åŠ äº†ä¸€åœºä¸å›½å¤–å®¢æˆ·çš„è‹±æ–‡è§†é¢‘ä¼šè®®ã€‚</p>
<p>å…¶å®æ„Ÿå—å°±æ˜¯ï¼Œå°½å¿«æŠŠè‹±è¯­ç»ƒå¥½ï¼Œç„¶ååŠªåŠ›å·¥ä½œï¼Œæ¥ä¸‹æ¥çš„æ—¥å­ï¼Œå¥½å¥½ç”Ÿæ´»å§ã€‚ä¸‹ä¸€ä¸ªç›®æ ‡å°±æ˜¯å‡ºå›½å·¥ä½œå–½ï¼</p>
]]></content>
      <categories>
        <category>ç¨‹åºäººç”Ÿ</category>
      </categories>
      <tags>
        <tag>ç¨‹åºäººç”Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€é™ˆå¹´é£æ¥¼ã€‘VLOG-000001 ä¸€ä¸ªæ™®é€šçš„ç¨‹åºå‘˜çš„æ™®é€šçš„ä¸€å¤©</title>
    <url>/blog/19951025/vlog-%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E4%B8%80%E5%A4%A9/</url>
    <content><![CDATA[<blockquote>
<p>  å‘å¸ƒäº2018-04-21 10:21:02 åšå®¢æ—¥æœŸå°±ä¸æ”¾åœ¨å‰é¢äº†</p>
</blockquote>
<iframe src="//player.bilibili.com/player.html?aid=22367659&cid=37047708&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="width: 100%;height: 700px"> </iframe>]]></content>
      <categories>
        <category>ç¨‹åºäººç”Ÿ</category>
      </categories>
      <tags>
        <tag>ç¨‹åºäººç”Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½ çš„å†…å¿ƒæ¯”æ‹³å¤´æ›´å¼ºå¤§</title>
    <url>/blog/19951025/%E4%BD%A0%E7%9A%84%E5%86%85%E5%BF%83%E6%AF%94%E6%8B%B3%E5%A4%B4%E6%9B%B4%E5%BC%BA%E5%A4%A7/</url>
    <content><![CDATA[<script src="/crypto-js.js"></script><script src="/mcommon.js"></script><h3 id="encrypt-message">åŠ å¯†åšå®¢è¯·è¾“å…¥å¯†ç è®¿é—®</h3><link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css"> <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap-theme.min.css"> <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script> <script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> <div id="security"> <div> <div class="input-group"> <input type="text" class="form-control" aria-label="Enter the password." id="pass"/> <div class="input-group-btn"> <button type="button" class="btn btn-default" onclick="decryptAES()">Decrypt</button> </div> </div> </div> </div> <div id="encrypt-blog" style="display:none"> U2FsdGVkX1+eQ8F9PCR1ShJyQN9N/ktxuvSynqo9nmFi5+m8yDaP5dn9riCfXm4bcE4qUCloUKSBUoATiiTWAaYImtHvYQ0cBDoA5v4HXYWFm1JLhKgNZm7Glk86d8RJTd84wHPgHM1TIcTIeYmdVGymPK5NZsOsmnpWM3aJFbyPCu2lJ0UMfIBt2b1PXg2d61Az57m8nyg+9T7E94+be2Yp+PWm+DaZJvfB3M2n3yDilflOtJmKYrvy5sMGcORPYA5RNDL/ey+o9GRoBrKk5e2uf8N7so2ml0pwphrqtpfqE6QrT7Y2f0PsBqrV4ZcH2ctp0btWBYzQ/ZhnO/36d+u5P902cWQV6e5ZO+1yOBi98HTkJY8CZYl0nNNRQZHGFLi8RR+WbJt1vx8GVX7YjyGX1QxBp1maD2bvOPXtL4/zvTlrjF1Jcnu2zn1SiCRE7oqi4+6bMAlscNFzxxMpnm9oiIJJTyQggnY7IGKHd3dTMHrh6wHFB5fsD+G+fEO+t/C6EVOMXjYWwiJ06DZl6plWgW7tzHIVmpV4vjogOw9qRzaRRVF/awDF+CdnyGId/M2OOK3wHnM9CpAY77bcr+B9tdgF+0vbDsHAeNaGL7mN0RND9ymNRx6D5tPHesEmQh9R+uVGJisIwScOtkxKx0DG/2cqibuHQio0hhVIdVCAmHn8jYeUgET28j+y0l9tcFFnz/rpJbuLV85mCZ4XEcrCg7REXChb8sjefjHtE3SVPXD65XaEjc26LpUH02VlMSRhnCIpmD9mgLpT+doDIzez8NsN8maJjJ1IbBNdaCmPkPCw1DM/Z4yQvrF3NQOetQEanodRsNjolBYPYX3ymBDHdOscp+I2B3ajjGo+VkN/fyExbE0XszcsjrxMDOmO9/kNhXMwrZBY/tg4Wgpk9OE3BB5W8xXtHcpkfjC59Fw+8XT5dTnIIZjMtnweDs32KlCm66oKnfkmYrtmU1454Og+zC2wMIRhM+a4lcX819SXHHALLMjzp4AheT/RNerLShT6AA03CNfiyV4P7aDRQOw7g81NhbqlaI8ocDlcRlh3bAjd8IxCEUHVoxMFjh7S1IrVzxYret+z9Y6VuatnaMWKpn5vYwxrDa3+5GI38RrxLuzAQgBv306SjOHzVjUxZtkmC1WSaAABS5MCHgS3A8Gnx2uY2tJEGGEIhDDsgnRyLMUP+HpZQz3bBUut9nNGAEwzN7NEavKF+RUMPhnDvYXOCALbDfcLJRcKtm6Y6qM1ibytzM9tOUusekIHf3c8AulS6ff+U1zQ7hMivkDam+zvWajcqKr58+yOfHXS/twuNpuJnEXMafywhQcuISnjwxWVXpYJSZP/CoqatmZDmWgHnGvtnjXqLW/+eV4R7J2olkrIkwao35tVa2luqIXdLOQo5zLPbmfQEFIUovNPgE/OJxOrEu4KNSQ1eH8mDKTsmQN0G1ZeBCXtM6UShhV9mbcXkiIG8mT+NzULkXGfywgq/DI2qUfUZ+EonLuQaYAL6CxXJphH9xzh31UWhuZCJCWn3SVEljedj3SWxYDEe23bhX+/cEhPEenJ4OhDI48+mQf4z5uGX34QauBCvq5nM7WS3oaOklAzdMErlX90tYT5L/JBi8zevV5uUu693Qi+oNbgrlz1eNapGCKs0IeIoESd/ZopNBgYbPrBzC9Y1QMNcq6M66LH02mubHrSQc7ikVppOrMazLivrUATvs7TujTUQOFFMevuudGG54sjB+tAxU49/Dulu6PoACUiT+9Fr5/TffBMEE0l10ioOrEkT9Vrn+Ig/HF32nnvwb3ewa4ChWC6FOzIONU43XNTD/qkrUeKTNqFAR5W5GHUxudwrdKm+UqmUJyi45kD+t7kpfAtbanWkswzBNwR8XzBvwooy4w728DKMsUIvpPabjAuQb3CWX83oujjXTTpi1ZIlFNlBbtB3ue0azG0Yvtt49lKYP/L1briuq+Al6JRde9WRfdoSBueTxcDWHPC/cv+TOJZnzGZzTztq+pjo4X7VVFwOh9+MFqH9b1h/ZEi4PmTSeIzgMqL+YNRWOPwcrJbLGEtDF/IvO+nZ4I1Sk31aaes+R6WrMSAcqrcrHCQjJJOKryJLC0H/37xQPbOdSlg5ksr0b2+n1JbPVQDN7yJ63xmcJVG9jyhuGtMqUoYr3peql/WivFySHOoslYjBp06tguJMauQ7ox3Mf17fcgvfyTObYv45vfHk350YqqdxGkXQOGJZPX761lpmqgRCagzkm+UHyi9IXbJ+d1a1y/PJKF4cV3HhuBbslfhNstaSeJfRO6ir5R2jDlfKUw8fvDy3TRaXqfRHyXq0Gf8Cf1G/IaRNrK87I8VfIqxBmP117KtYuolSZxnLh7gnmkqsIhBKHGT7eLgHPYIfgHZKg5KxVZ9HKqupXOwRzncPBUcMym+pbbPPRbe2u4jl7UhaUm+R+KQNqEgSWygmhHph6Ce7lsBAoB6FPCAXjXfQ4cAFW0mRDioorIdqzbrdK1mxaGOYbLfQXFSjjm9p0CauOpGc8e++BdmQSsuJxc/g3IVOOpvyaADcBDCvV0li/BQbF7NnpH7d0sYbNivvtMOTPsNui4oWNfWGOipTsVX79Calb+5YMY+iAtIgfmscJ01/8PBfHO6L0fV2zQBEJsa1Y0eiRr4LZYwhxUMZ4JHIfRQroOzPoPe9UWiPDpQwLB4eP6aeldqSTE6gpOGrAIywy/hREYb3uoVTmhJeYiFSGvKX6KJFZQJ63Y/jAVMjuBLIFaJnwXemuVG7nR5ZrtWZy6Hga8d0eUqKZg271vWHLx5Vewg1HRacCPQTTXFByFmViMmrRpEch3kZFFVtEm/wEkKAW2ML3g3IfxEb/YaBBBfqbSqcxNXtJ0Icd0dmATg9pbaY+aAz4LMBCDhtUbuie763nkCd71k4/PGAQQouPxsa3cVgp6+glwNWUZMO7Rts7+wFJdiovKK8aUU/VKgvL2N0wTCmq/XKwOgECrt5vzj+ArK+wZb3AQUmy+Z0oLoVc83zRAhWbyH+83ZaIAgqWrhrb/4+Xo8KjVk1U2kB9EN0rLuSIytaIY6Q8kC7xy8K8zVuqzPzcO4A3tUd3RlBK1A1sCz5Q0pcgTwH+Nxr+v5whWVSvD1aNXaYEfZV54R24EwU84iN71PLMJlAbOSBpUicnKfqhv/9YUCcjG4B3mcceVYXH+DWWjEtFiwEtZTR5e6Zw3QO7l6GGtcP4GvrMo5WAESmLxlirJO3z7CykBuXC6STTKJV88TcU+d3Y4VLxqXfR/pJ85p0KM5svFKN5/HaR0P/SxaoMPdKsLO9NkKJah/jve91E5RYfxZHzwocgPbmxUa8hKwZHwxNZWoxPY7Ak0yp2xGZsMezzSABgSCqC/KJf00S48h3nDg6Ipns5/p1MkxdbUTFKfnNbhYLNmnzUon03iGNkKGHAsh3nM0hcUzdo9up03QFMV1tA8pAC8W1T6qBMD39WlVn+zqpinEQZVm1S/589yZDNisq2tOn6lHNO0/8qPZSWJiLEO2tucEJW0heW3PesvtJXjivUW5NpqfNzfVXL/ZNmX6wZo6d9DOZX4NRuvD+nFBmMfbaWuTrYJ57/iwKvZLuirIfhJac5DUazlBkxXCV/pOyW+udKtQNl3HC2/x48h5GPu105qqG7iyYUjUypS+ENbmOLAQD57CeMTfyX9I2Pea993K5ZRhlR+TTXWf3tpS36bVSp09QmWbfaQwgy8ZDyCb+B3C0cl9FlVhBDSEPIvljheQBk4MJAo8RjSSzIIRf/qlDqKd0f58ogJEumFwdp/dZaWL3z4xrkwYyEB50qXVrlsoMzUHSKhGtO90/+ocSjm1n0kSK2+UOPB0EPEl3uSNWhfTea1ZRf3lD3ZvWXICA9PWAIGHiQtno4vlEmbofDKa3Np0XR3z2T2Zcekoedui+15pMDT1bOyyf4qNK/7V/1xenTTMkh/9OlnpOCH8nCFvu0/h6s0XupZF01NBnj9KHtxEQH3m4oKQ3abMYUMyPg32Slp7GLy5WPjJCC/V1OeoTz/kFtda4hGyYZBjNw8/txpp3b66mn4T55joC07LmVBCA7WfcHaCCFSDUAuFiTKbdcr0ah2lWji7J90yjwzyw1OtzWgJEBytlR7Pee/rKpfZ2nlxsb5WVPjOC82TLuVzVkqA2a2pjy6eH9E5hAylPh+wLNkwPELMck3ql+hbht9G01f6rqSgt39UHE2mtgLP4oemZQr+OwgeaOf4YiRFUgCHOI5kgk69ZYi8W0ESHDFAHUZdVWXfLppg4BWEdKP0OTeBgcWEf/ecWbY3RRP9BrTWNbaMukogDvnexdd+IF87Pi5B2IEwHpSzn7EQF3tnTlbFxqnzsBlOHZfJcuXQnLAa5lywqaJJk3PZqPbD6ewpz7b1WDK8SYmzfYpAKnaRA8emvViF7z+/uMpIkazu370Z+YhaCVvkSqA3QlXbr3BrwYukOc1xlXEZWnjizrXoAnxvVnF38KycUi8T5pS5d7Buad5yQ+GVwzsDkxOHWzbejToLohvbGMho0DrbuzsdDRpQvxHofdL5xo3S4aUfAYWZJ8OsBkVPue4+ylUK9OAiw0wAKuK8aVVmhkRN7qWzj7TCnYSQU/5K6XhPaM6+r21nBoHdkDUPngAh5g88vnWyEADimdKaq8gkoFaZVGPGi9VAZSqVgUkK/CpflHFjbSIqASGjN9p7MGlZ8aKO1UMPOBOrcEu0WE4iiLOGj5pClinNzT2cxYRKc+ySdwYXIBJHnNLAHTuGfF4uZ/NCkAftEcDlrFBP4aSuBDq7y5s6j1EIKJDQTLhojuq/q4/L6Jh8xdLcnK9rhgYB7XiR1mv7DO96ViTteMOLLd2zOc089zSe/5DrAVe7lycSirUVw6guLBzNOETvUFEF+EoNbnSe4tfsfDJSxm5AbMMPtezbtkKsupbonYeHthI6cA50glyWnD+AcR/84Q/PegMRPJCy8vnqSnacatZ04BQox+nQNFyQUARKF52qdPJrM2tKyaH3AzmInQ9C1sxAwRn1tyXArtulkYmUtqGy+Xvaw5fXvBt+mtl7l2dAMVYaKAAGvSTs6cJUh5mhBNJ7jr75RCkltgE6rzwU0OpSuZWBaBvMZKULGZHEAuJjTNU3b4LoC54GU5pdPrNHefxA+Jb7ccwQPfUwBKOwoXZlgY37b9HO1oA7MK8nPoaEmhSmzgCeGqzwsaSVK3fpRG3tz+Nz6D2XNKP7NMOLIQXuK2qKdCL8LIbXPBwOJDxmCvZ85tYTY56i6+1QRchkkUKxgAqNBbb2+LY7otnzFQcgJZfvbE5UXCo6PCEsoviZOSxJTpj/L8h6ANBJdGCMJq13Bn01RqtL5sliZZknT389D0kVe6fHY+2WFf//Uw5HSb4j/VLuFVZbDkUmvRYOX2WsXd3mUIvgArnQf7snwA1ZT71p4BkXJTK4LrOcOXUYtFqO3ptgTNbckB6HlPS7V0th/Ky878y9iuXuRGN5jm7bnnuMn+hQVvxTrCPcwRjl1EG4NReySL8cRkhPqVAY0QBep0hydEmhsToTSzc8NzUsXK+sQZchTnTPqFqSm6tO+YzzvhKgPSqWeBNt40r80myOwaLgMuQFDhTDWyFBwJGKiKW/cs22sWdRfP46oG79CIyWAalN2Vh9krAYGAGJ2WnlALR6MkjuiMGuF9K4ePZrg9/UA3LWyRpkAsu3ydwWJ9SekcVT9q3CeftBMdInS1AgMCLetKA4ezFdNIBza/WwJ58lezocahQVcpm4JxHL3CmBZh2tdjUlM/iW3QQpgMrnrxHMBHBoO+VIPS1lggKWzZ3vj8r6lvtBN/YPeoX81IcEf5Y0OPm/NxkfdW9J7KJe8XgvEfjQMa49aiCkFh1p99lV8ihUZNHY/MmCDvfvqUSIMy3kq8qkq7QndqhaF84qZ10zo9pRWMz+ayKeOk4GdJgze1n+I12UF1aaB0nhubwNkt0/tv3upIwdi2yiXeds4F04upxWeu5WLVLZWMHaJG+ZJV4WkOGCsC0TuXrPNA+hd8sn6ImxXVW80TiS4q+Q0wmDqVn3mcAFzlisA2dhsjpBRuIwOzi1ebM3r/mcVWTIxmPgMOI6oCvNBW5gEuN+/pm7UsKS4oLKd/dlxly3Mh4QXH70kN4e2lM32g3bDJaBC0HGvtew6I0jX4TVNFX2lbw3443I8TQVU8dDRoWQFVV7Yqyatt8YVRDjlusUWyKQ0yFkQk93pIRalYzaLvBSnxuazifpg30mOaDcyAz7BgEnBHGAjCql/BzTyZs6Z0QQcvs8lX7Hu+icrKTMXDmDUK2iXyViYFuXsCrQ/+k7Ty3mt1LbdAjRnuRWujgely7oYg0XmCuHTm1Heih33giBd8X4oCdiSGThU+fUAIO6zvb/hGBZ6d2KmuurzIrRYog8Lk86nD3W95LuNN7Pnd3/6j0qoajscB8ZDJlSVloqNxJkbP0dTCCS1shWrJX/IL4xGC4V9NHVKXVfELkErzZFhe7SIosxmd2UcLIMYnyeQDP5NkPAeNPg4luV889mFfrGVtDA6BEf/ara1ldjlBQ1iDuOWz/wezI8w3n+h6nyF7AkEjTjseQWZUdSgImbcKMcgWp8+k4GEYCA5qNLg7fh5pLox9FrlG8LI3Z1vk+RyjLYKeb01nUpJo7FZPEoZn/1mxuEKEt9C16EwYabzZKGrw2EsgUTLXSz/yYDztsmAFmR4RMP0FOpyHF2JPIsr+Amg8etCb7jAq8mixujGWgvcJBSFu5IqQgdLvW78+dcLeWdol71NNUEIHwdqLgIFbIrc8rTCIPLDggkMfYv5OQzLwNtkycGUVCriLR2QY7VeD47di7u0cseqXfJsEc24o0hIq7qG5pmjpIVQC0UMcsYA44POpWPjyoPKMxIqXXidZeb8rzkmO+xtoY3ayVqGhScS1Udl6vpBhvlacW4pyTtreZ8kx0kZmBloDuoY7jgs80g3F1s1Y0qstK5j8MBT6UD1IKbEHcl60k1Gm6I6K2hPO01YveFHUZSq4fQiopW7oEf63a4evLehTp2PT478tj1YJ0V3mN53f00d9wm8BLV8atbrUchwxrQ01wTTyiPY16hpXxCGRuL3ZGojikaIRrgELdh8CpkTM4bvknRl8bZRLSyxBhNshMqw2xcuSGSFvg7YUc8QXzhRLejgVed88ozoIFQ9X2iR8jqSJLxxGtSX/kAcfjPnjrFZkt5QMulc1Z+tnnN/5j7uVNcaYGNTJoVguaJ8hyAanQEDsf8e8Bt7LGRiV2rXDRBbUus554S84i1Lv+sEFiIakuIik/oiSpd4DCoC2y9M9fyPwmu2XL4C+byIXb7nEZ3SEJxL7+dIVnXbFooFqbnysjYb8DKGqWIVEXFvWWJELq3Zz7ToXQ4lBI47QyHKrtRFfHL0zkpyIC8bIboyZaG6wppSXfRR3nsZYMhGrDXAkXPRekoLGX3ZN5f4DNv+LMcapK9n2rPfw5c0/qv3/zVBn60qFhRicHMh/XhwnKV0j3C9xccEUZ9ThcZtzaGoH3/sAvE26QMVwtm1A9StKE3x1y7YQXjN2cEuSUYfl9dlhOc+hFBc3NqXfSu3mTib5gMk7mPbxumZGogGTdItG8Lmo86kF0RnJiIPVm3mR3f/5XebNqm0Z85OteZMcuoHdtR4DhyWJa1slFp7GTxdvjMnZvKFAIR4nJaG3SGceQgDmmjusWT/sDHn0X5Hu6RnsuPvk3olL3DWggYHITtmOju+ILllmKFVGA4+FTWuprWLR2eY/Snl2vRwu47f+I3cSfXrN8xavmB2uqLT5Sdp4yb61MDpKp8+aEcJUgBZNlDXJOShyF3s8UyncL1f8wxpXd60e4njpvp5SHcdwjWNAWMXiiAQkSUor/Py1tkV2H0tKC95nq7YAhX6iZoyF0DX5ViyuiWKQAD+eVGzrsfnpqC3yYrYKxJbrBDs8vwQxNkcgOqXXdRNxkX9pGgC1afc6ps7RGFAHpv0LbCcmy/ETos5uxT+VlQFUZaTzfXsnNdp+s6MzZqcKQLGHtnE/JIqKnqnQt622X+iBAcjozLLDTiR5G4hwc2YgWZuosr3gCY8xpfh/KpBB7XU5MeUVLWFfdvVUOlnL1OQSiJ7ur0cAxA3IacSblafmSsQJcbrV23F7PEEBAX/9ocBRDlOqChJKx8/q7ZRF8rOmQMU7vjDIhvFpIiUUdEIyXht6rYgneASMzJOdDWRqQFXg9o4OUvTef2IuKeMz3zxTsKB9NjVFPGUYPnhBjfsk9LcdVHJy5UgYdazI9Zc3pcaH50DZEW6MXsbVFlWK30kNBWxzc+mr21hj8h9SD5+FfIANMs361jKZ9ijK5aOHIh6UB2LoFV4HZ7/hOP7jVsI+aZO4KA1HN4QhtJnqWhTaRDf8lRy45cFnp8A0CCP+L0brVewc2FhpLXknD7ibV3E80lNbd5lqzTFyipkcojEDgXfZKLWpdOf/wZf4xuj08EPXEWOpCuOsmJd3StETKkJJqEHjw6QQiGWNp9Tc3RsIwt8slllvRauwE4lzqsz05dtsL8V5xDUXT0JNFnTGI3lvEgmc7b1MHxxDosNzaqlTLihnk/TswezDw0hpbfvNK2eoI9eSeeWwCaJPmwzOpe4eZoXtAKLQ6xzM/AJqjheD/PNxEg4Do9+vlkeZC1lXd1DfG6Ezwy1EQH09HHV+oUGiPvFUB1OY4J9qPz1ooI85Zd3X4laEYBS4U3SeISUU34E9AJ1il0qb1+W3zrSMjwvm0bkwY+u57OQ++1tTJ66kW7fySRnjMmWtuPMtpGhWbGD1H1dnp6EaX7X6tIYouq1K4IPE1fWkOeVbCWSQYjvFvOq7v4EodTYN8LES2+KjN1NUlVaeSg212sGrSDbt9yC4Co7Y4eK0TxSedhx7rVr8FZRDbcNzaWtPSKIEUO8jdc3ISHYc16J8zL79kaRuTagqrChKyhxK7yCj2zGwfCtO8jFIf1brVJqYFcK0Ep6R/H8tTr/geeZ2Tve9RqjfCJNeEL0tohFejko9tE4G9Mt8DnvZaT79zKRdIKkC1/mWf9o/RWswwiQ+tU4L5MZRhR8/lUroMwyevFmwPhVwV821tv3LmKY3ZUB1vbiaH58Gm55kC86ufzmMxhrw8OQ1gUgJR5+BbmBS8tOUTlVmwTXs/Z2A3P2zoWX95ZfnFs2RLZ5w3/wGfzJa+Z0+b552TOXjli/WR0O4aVPTpTC/BsvJ2tHtlobjDyddhvcNFODHbG7pD/ZTlACOe+E+KlQ4H5n8vJFPzVZyoj7iTURg+XAiPgunOTtEacc2BqV6OGWBLQsjn9hjf3IwGJl4MP3vmc5ApgvuHnmAnYmuhTJQ8Qx+ukqcoct5N/u0iAsmQ6rlB70KYwMjSsMT4gpQCBbz9foLoC6HubXMyXyvpK1DcDpIdnffiRPsInanoMf3a1TQPqYekcobDlT+lFZSTwWCXI0ouPoQL0wkRcGs1JEG+E47Po3PI1UpjGqTl/6pVYu/PCSX8Rsac51p/DCnEimycC3n4jnI9dGPPceL1G39AkKqvRluugMx8f32y514KTWTVrJgVy6ThX/djlkyxtoAfG6p2CSNiyEL7oj6JrSJH4AoBA0Um6UAqalVKQOopGkAupDdsgmknKfsnkv/c07tK1Tt3Kp4WGIuoOl5i4IlPviMOR6J5vVXELw1qaBKsMyRWj+a4SPdn2eXegoYEXUd3/l7xuX5wS1u2lX75hHvsm71b9/XIBLSv9Zd2+qE6GsWAJI6KPwEg4a2WTquymmz1zOW8h26+0TVi/6UCmz9vDAkxoQl/YjStsOPTg4zr93CPbvTIvPvO3JnqY9WQ2sqTsIW1FIcr6/M2nmqKiQZoDa65AM4PBmSNu7rSFeiOT+s6QpX9uccwVJIfKI1F1f9vDRDh6WX18fyzJDdsmNN55r9QG8KbvewKmmPrOq9HH1j/+b4fVeCSI7E8N0P8ZrPOJ/u4t4Erf7ypqIZ3GtZjvCUUP9hG97frmInU85bwLY3kAktwPuVfOMW5jVWwG67xoVFtqrYsrONrjp1q4kJ32s766DEUY+sU9ME2wlsYnGndV9kqZHyoPcIhqQXIWsNFk/WIOGMuFhgcNqj7bek3eSc+knwO5ZxJ0FLffxXJCK5je1jEgUEY63BvzaxktomG9zJQXRzkwzeRgbWJFyUMHukdW+Q78s2g6KHWrmrwNRLyB/3tF5Qw7s2De6K+H/qCeft2XRJ2n5vWcHszWeHQ7Q7rzUAFCLUvS5OU058SJQ5R8aIXIwQQRJrO3rUvp8j+UZji0l1OMABqvLGIfDzoNdKR+fDHj6Da9e130KuBptVk0YLUJjHVLTa3SrH9bY5r2amaEjegoTbjS5pJc49HVdIGq4458L9rDUsGWmdPgYlhKEddaDRU7VHi4luxhuwadYOoeefSsMsFnPKHDgdl1uCpA0AFOFaM2ccUt8CVgqYWvKrlrBc7/O9z7iRyp4jWFthxGZuqm4q5Y/YRYcJmK50wJHOxAG+KTqBtdd7mFDii/1Pr+FXvpUK3NzuKatDa+AUG8nUywjI8grvaqdj/qgcdnPIPHbHS2InsVjUtuvYGdolXRXqJ+o+0jKV17NQvYg8fb/FkVpAlRG5TOGenuV/60qh22PnC9rpSXi3pF+lRq0e30qN7iNiwIMY7kuBrS+1HPcz+2now7LmPCJl60nDVoOvNJgGy3mg3KShd1SEIAxHNxQUCAHmOikN83NIkWlxFrT9M3UJ2vMvLIfTHmPi9Dsvo5Qw2+LhDnGnjbGFjjcWQtAmr1Gq4QKGGsuVISkGoKx7falULcGiZlPS1NfmeZUFdkYAzkZBF4x+PM1A3v+Wg4Wc+K0yJiyYSueDn/vK6UKORtHm1ocuvoqN5SUd9yRmT4hvKEIkO9zVR8YXH+S5wtDRQI+BUss2iB5EbX+i00EHx2xfdCOMVfVeD8eXNWucLCyOHmHG/7bNP6+BOG0PwWHmyEtR9Jo6bAIymk00XEf5tqgkZQSPW7HBNtdqTXXOn4TBF/Rh3sheGRXQHqfk4x6lks9h6qpjiDnLDFYdMLZfCWIixdu5yf7jNxk0cneXLyxcpY92wgt9yfypqA1tDqoJ6Gn9cRfaTYpRlUDOhQX+sX1gB8gWMa5VMeFdR5KbDzAeWCoGnVC3a5VmhNiQGLEyQzJONr7N2tg9cyFl5E8MC+i0XhDkeLs+m6IPng0GtLi3MZGJi4cKEnY/g4MX8hjNl4aUO/rgJ7b+uJxbE8FaA9OyD0Jldx7qH3Qzrq3x195Zfl+4hnLb9O14oRa8KGNDVSHRGnz348HQPA8q8R50BtnLmqb6qFIhdNyQiRHR3dPd0hSq0nOV9FFHh+4dIcoKIEPUVAAGgSvBVCpEl8m6Inja4vKrHKDdukY4s/MnWPXCXF2fjQw2Jy7roC8j1CzaHUVQECbffns7CT4I6JW7TYDgY45J2BwXKkjSYH7/faUZE+dY0xyLx3jbeLycdfVGWFE70BeKfX8sHCHdt/ihNfHt9v8XhQgY3qi1IX7qCuIVwjFgUjG3cRksnxwSKJ1ThAIGM0oA0bBelBGfOPGFlM7yJOHDCDIqDDPw7UHnJlyJKIOdKcXnym3ynn8CSCd7ybze9RoSQ7bdAQGxY0U/ceJJ5mDzNgwCGNIOp6+ixCVoma5k3jT3cK6EUl0Kg7frUSjExlWSswN7POKiZnFwClcwny86rbF/xXVXelp2sGSicx5z6oHQ+da1nakPSDSlgFtg7mhe0Umh2qQb7BLJa7jMQpm7HUkMKncYGLxQ2dwKsugGtMswLeEENVJsNa+fBEQpx91Mxe51w+gJOATs0ehxqoKrOoiciQLSY3ZavAUFI5cpy83caTRth88PnrImVCLHvkSHSHeD/xsmOxA2tu0bJhMZPX24lQYeMdEqxojwtdPbms2U0IzRaUYIEnROY9DC056l5SSLnRWzB3vvYaXtDzW0epFtCzFItDA2kcXAyGbqhIW7TV0dAJvKKmbC5ZhQu+sTVEjykKB8EAdZrqwooGPQc6W86EOkejUQS09R276S5kaar4tuNSHxTTKCdvZDkfuGXn2XPsFzkG4p+3UhvrCS9Q8p6iQZ84GNlti/ntPMMIZ3b9MozhyCRTbwnkoHMaCBqH0+4azhsUJXdc8dijECFc3QVxd6eU+MAm+e1hoyg410/q3CYi4CVHcNDQwsIhNS4kJ3e2tkGIYhhgSB2LYpYoaBGBe3ZLoK2faNdfLA1+Ri9GM1uw5qTuxRTsZ9XpC+uDAcjN7N1kTkvkaFUGWDpiRvTZj2HP1STyFVp0zp02k1uw2Z/LFjePKJKPfiiwyy36v9cPPmMKhOWbe6PDIk9wWvWHuXZXTmxHs9SJWA9l4h75Q1U69U8QF1jIOAzWQrNQ3A8NCNVKVY1ReJW/U9qREyOkQBPBdumYcZPGaMJivBxio/FZVJzsth9j/myghdj/OBXrEylxj9yOuaFLLX1qAvuYAt0p6KE4OsXy+DU3ZWyObW8zxn5pRTq/varfrStThrDWBFpiKE3b8ISwdMZegsNYOJqIs3xMe2EIW3O42CwrJkXZbgY+QiCvwi9HJPn3KLgacUW4uHJ3oif0syqABVYEAN3+CjfaovdX5+cG7SsLXaemdeRi4jaS68R93fML3vLXsHqnQW4ZgBuY4e/lfEocsh0PLRhk6WBNkfs4TOVAy6LySZSgkAbyKI8nbd0HQUpWg88y3RWSe/GfdkkneHMmL6NwLEAa2mJeoLnZXiURm7ofsAzlfBFOdaZGyb8Dgp+8VzW8w3ofWqFphy8DVNKa/Ml/MHAWh9PlAlOAhARo0LTZAZRAsd+dRWOABKmdIVE+CyxeUdlRcyYE7PdWPg4B53r2mwRTNQFx9uOCRAnLMR8/Zr4LFfyrshOBtj/Sg8zv2PcgsUd0cR8frqZViv1+5ESe1+8MRpo+sFXjDnJvdMtGEOzw6HXQrzj3xrJiLMeHBVGj0zCHwxkgCZ7x98ORTCff3+GxgR0xqkRAB2iG21mi3tgkMV6TCLYxmRLodM7x1VGKSB18/e7QHbt0BFBaas0OwVPD9/8e8DQTLkIYoOaMttTR5tMu6bDuuBkhH12sCFUeDQB//c0ypsa/DWWSn2KHmVdIb1evt2uPhT50NUh53PnqfuLPZY8nGFlWpK/inuAl5+pw+4pMt2LjpZ58lhfXgXYClqTKMNuQD0w3OWSoDNRWMV+brLAwY3JKex1C32DY8nTpm0k21i9Bp5Gfn7JwH3Sh57hBYUXouHaT41ynNk7QVCWBaZs80zXYuYi85DD2TUxrfWyupjirG2F14DtY6mCiq9DnX/3PaqegA3mfJ2c7p9hMzDROlR2v+VhZfinrYYfLniqghkRC3MwHDOvZ3Wf0wIJKdI/TViDuHdnlHcdVW2moZhjHkt7wT9DEwbDjOLxEStkQjhca7Bm7q6/FYPpeP28WUtYkFOkTLMQ9DweOWIYZE7jZnG4HwIBJTam3bKkbR+DYQ97v+ZqH+5J7bnMZztj8hm+7jkPnPe63jfIgcq17JPpyO0th+lFLR/H6FoRvlucFwYEDVa9wr8v4mSpajO3xpLe20NoumlfY1jHL5NoTQ/ErMPxzcaOfo8rgJEL7KfqAMkMjo6qX/mZ4boEdJzIm5Uu7pEYUv2WTUvlI30fywzo46c6WvaAtIWG9UOXa+y8o+Ck6Bn1m6VC4twzy3WP9MbLLg0Lt06kL7Df8guopJcDiahsu8B+5Goy1m5TEWqYc/Q== </div>]]></content>
      <categories>
        <category>ä¸ªäººéšç¬”</category>
      </categories>
      <tags>
        <tag>ä¸ªäººéšç¬”</tag>
      </tags>
  </entry>
  <entry>
    <title>çªç„¶æœ‰ä¸€ç§å¾ˆå¼ºçƒˆçš„æ— åŠ›æ„Ÿ</title>
    <url>/blog/19951025/%E7%AA%81%E7%84%B6%E6%9C%89%E4%B8%80%E7%A7%8D%E5%BE%88%E5%BC%BA%E7%83%88%E7%9A%84%E6%97%A0%E5%8A%9B%E6%84%9F/</url>
    <content><![CDATA[<h4 id="çªç„¶æœ‰ä¸€ç§å¾ˆå¼ºçƒˆçš„æ— åŠ›æ„Ÿ"><a href="#çªç„¶æœ‰ä¸€ç§å¾ˆå¼ºçƒˆçš„æ— åŠ›æ„Ÿ" class="headerlink" title="çªç„¶æœ‰ä¸€ç§å¾ˆå¼ºçƒˆçš„æ— åŠ›æ„Ÿ"></a>çªç„¶æœ‰ä¸€ç§å¾ˆå¼ºçƒˆçš„æ— åŠ›æ„Ÿ</h4><p><code>2019-07-07 23ç‚¹30åˆ†</code><br>åˆšåˆšæ‰“å®Œä¸‰æŠŠæ¸¸æˆ<br>å¾ˆç½ªæ¶ã€‚ã€‚ã€‚å› ä¸ºè‡ªå·±åº”è¯¥æ˜¯æŠŠæ™šä¸Šè¿™äº›æ—¶é—´ç”¨æ¥å­¦ä¹ çš„<br>ä½†æ˜¯çœ‹åˆ°ç½‘ä¸Šé‚£äº›å‰å®³çš„å¤§ç‰›<br>ä»–ä»¬çš„ä¸€äº›é˜¿é‡Œçš„é¢ç»<br>éƒ½ç­”å¾—å¾ˆå¥½äº†ï¼Œå´åˆå€’åœ¨äº†HRé¢<br>æˆ‘ä¸çŸ¥é“æˆ‘æ¥ä¸‹æ¥åº”è¯¥å»ä¸ºè‡ªå·±åˆ¶å®šä¸€ä¸ªæ€æ ·çš„è®¡åˆ’äº†<br>æ„Ÿè§‰è‡ªå·±åº”è¯¥å­¦ä¹ çš„éå¸¸å¤šï¼Œä½†æ˜¯æ—¶é—´å´ä¸å¤Ÿ<br>æˆ‘æ˜¯ä¸ªæ€¥æ€§å­å§ï¼Ÿå´åˆæœ‰æ‹–å»¶ç—‡ï¼Œåšäº‹æƒ…åˆçŠ¹è±«ä¸å†³<br>å§¥å§¥ç»™å®¶é‡Œé‡æ–°è£…ä¿®ä¸çŸ¥é“èŠ±äº†å¤šå°‘é’±<br>æ˜¨å¤©æ²¡å¿ä½åœ¨å¥èº«æˆ¿åˆåŠäº†2800 çš„ä¸€æœˆçš„ç§æ•™<br>è‚¡ç¥¨é‡Œé¢è¿˜äºç€ä¸€ä¸‡å¤š<br>æ˜å¤©ä¸Šç­åˆä¼šæ˜¯ç”¨æ€æ ·æ‘¸é±¼åˆ’æ°´çš„æ–¹å¼åº¦è¿‡ï¼Ÿ<br>çœ‹åˆ°Bç«™ä¸Šä¸€ä¸ªåœ¨å›½å¤–(åŠ æ‹¿å¤§)å·¥ä½œçš„å¥³ç”Ÿï¼Œæ¯å¤©çš„ç”Ÿæ´»æœä¹æ™šäº”ï¼Œå¼€ç€å®é©¬ä¸Šç­<br>çœ‹ç€ä¹Ÿæ˜¯æ²¡å·¥ä½œå‡ å¹´çš„æ ·å­<br>æˆ‘æƒ³å›½å¤–çš„ç¨‹åºå‘˜æ‰é…å«ç¨‹åºå‘˜å§ï¼Œå›½å†…çš„åªèƒ½å«ç å†œ<br>åœ¨åŠªåŠ›è¿›ä¸€ä¸ªåƒé˜¿é‡Œè¿™æ ·çš„å¤§å…¬å¸åˆèƒ½æ€ä¹ˆæ ·å‘¢ï¼Ÿ<br>äº«å—ç¦æŠ¥ï¼Ÿç»™é¢†å¯¼å–å‘½ï¼Ÿ<br>2019å¹´ä»¥æ¥æ„Ÿè§‰è‡ªå·±æ´»åœ¨äº†ä¸€ä¸ªä¹Œäº‘ç¬¼ç½©çš„ä¸€æ®µäººç”Ÿé‡Œ<br>æˆ‘çŸ¥é“è¿™ä¸€æ®µäººç”Ÿå¾ˆå¿«ä¼šè¿‡å»<br>åé¢è‚¯å®šä¼šè¶Šæ¥è¶Šèˆ’æœçš„<br>åªæ˜¯ä¸çŸ¥é“æ˜¯å› ä¸ºä¹ æƒ¯äº†è¿™ç§å¹³åº¸çš„ç”Ÿæ´»è€Œèˆ’æœ<br>è¿˜æ˜¯ä¼šé€šè¿‡è‡ªå·±çš„åŠªåŠ›è¿‡ä¸Šä¸€ä¸ªçœŸæ­£èˆ’æœçš„ç”Ÿæ´»<br>ç›®å‰çš„å…¬å¸å¾ˆçƒ‚ï¼Œå¾ˆçƒ¦<br>é¡¹ç›®å¾ˆæ°´ï¼ŒæŠ€æœ¯å¾ˆçƒ‚ï¼Œé¢†å¯¼å¾ˆæ— èƒ½ï¼Œæˆ‘ä¾ç„¶å¾ˆèœæ²¡å¤šå°‘è¿›æ­¥<br>æˆ‘ç©¶ç«ŸçŠ¯äº†å¤šå°‘é”™è¯¯å‘½è¿æ‰ä¼šè®©æˆ‘åˆšæ¯•ä¸šçš„å‰å‡ å¹´è¿‡çš„è¿™ä¹ˆåå·<br>æˆ‘ç°åœ¨å·²ç»æœ‰ä¸€ä¸ªä¸­å½©ç¥¨çš„æ¢¦æƒ³äº†(å·²ç»è¢«é€¼åˆ°è¿™ç§åœ°æ­¥äº†å”‰)<br>å¦‚æœçœŸçš„è®©æˆ‘æœ‰èµ„æœ¬éšä¾¿è¾èŒï¼Œæˆ‘å›å»æ‹¿ç€é’±ç¯æ¸¸ä¸–ç•Œçš„<br>çœ‹éåœ°çƒä¸Šæ¯ä¸€ä¸ªè§’è½ï¼Œé¢†ç•¥é‚£äº›äº«å—ç€ç¦æŠ¥çš„äººæ°¸è¿œçœ‹ä¸åˆ°çš„é£æ™¯<br>é˜¿é—¨ï¼</p>
]]></content>
      <categories>
        <category>ç¨‹åºäººç”Ÿ</category>
      </categories>
      <tags>
        <tag>ä¸ªäººéšç¬”</tag>
      </tags>
  </entry>
</search>
